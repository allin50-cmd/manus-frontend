(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function LS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function zS(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),t}var Gm={exports:{}},_c={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function BS(){if(I0)return _c;I0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:l}}return _c.Fragment=e,_c.jsx=t,_c.jsxs=t,_c}var k0;function qS(){return k0||(k0=1,Gm.exports=BS()),Gm.exports}var d=qS(),Km={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function $S(){if(j0)return Le;j0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,B={};function z(P,se,he){this.props=P,this.context=se,this.refs=B,this.updater=he||I}z.prototype.isReactComponent={},z.prototype.setState=function(P,se){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,se,"setState")},z.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function re(){}re.prototype=z.prototype;function $(P,se,he){this.props=P,this.context=se,this.refs=B,this.updater=he||I}var W=$.prototype=new re;W.constructor=$,L(W,z.prototype),W.isPureReactComponent=!0;var le=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function C(P,se,he,D,ae,Ee){return he=Ee.ref,{$$typeof:r,type:P,key:se,ref:he!==void 0?he:null,props:Ee}}function A(P,se){return C(P.type,se,void 0,void 0,void 0,P.props)}function R(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function O(P){var se={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return se[he]})}var j=/\/+/g;function M(P,se){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):se.toString(36)}function N(){}function We(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(N,N):(P.status="pending",P.then(function(se){P.status==="pending"&&(P.status="fulfilled",P.value=se)},function(se){P.status==="pending"&&(P.status="rejected",P.reason=se)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Ue(P,se,he,D,ae){var Ee=typeof P;(Ee==="undefined"||Ee==="boolean")&&(P=null);var ve=!1;if(P===null)ve=!0;else switch(Ee){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(P.$$typeof){case r:case e:ve=!0;break;case v:return ve=P._init,Ue(ve(P._payload),se,he,D,ae)}}if(ve)return ae=ae(P),ve=D===""?"."+M(P,0):D,le(ae)?(he="",ve!=null&&(he=ve.replace(j,"$&/")+"/"),Ue(ae,se,he,"",function(un){return un})):ae!=null&&(R(ae)&&(ae=A(ae,he+(ae.key==null||P&&P.key===ae.key?"":(""+ae.key).replace(j,"$&/")+"/")+ve)),se.push(ae)),1;ve=0;var $e=D===""?".":D+":";if(le(P))for(var et=0;et<P.length;et++)D=P[et],Ee=$e+M(D,et),ve+=Ue(D,se,he,Ee,ae);else if(et=T(P),typeof et=="function")for(P=et.call(P),et=0;!(D=P.next()).done;)D=D.value,Ee=$e+M(D,et++),ve+=Ue(D,se,he,Ee,ae);else if(Ee==="object"){if(typeof P.then=="function")return Ue(We(P),se,he,D,ae);throw se=String(P),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ve}function V(P,se,he){if(P==null)return P;var D=[],ae=0;return Ue(P,D,"","",function(Ee){return se.call(he,Ee,ae++)}),D}function ie(P){if(P._status===-1){var se=P._result;se=se(),se.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=se)}if(P._status===1)return P._result.default;throw P._result}var te=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ze(){}return Le.Children={map:V,forEach:function(P,se,he){V(P,function(){se.apply(this,arguments)},he)},count:function(P){var se=0;return V(P,function(){se++}),se},toArray:function(P){return V(P,function(se){return se})||[]},only:function(P){if(!R(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Le.Component=z,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=$,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Le.__COMPILER_RUNTIME={__proto__:null,c:function(P){return ce.H.useMemoCache(P)}},Le.cache=function(P){return function(){return P.apply(null,arguments)}},Le.cloneElement=function(P,se,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var D=L({},P.props),ae=P.key,Ee=void 0;if(se!=null)for(ve in se.ref!==void 0&&(Ee=void 0),se.key!==void 0&&(ae=""+se.key),se)!oe.call(se,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&se.ref===void 0||(D[ve]=se[ve]);var ve=arguments.length-2;if(ve===1)D.children=he;else if(1<ve){for(var $e=Array(ve),et=0;et<ve;et++)$e[et]=arguments[et+2];D.children=$e}return C(P.type,ae,void 0,void 0,Ee,D)},Le.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Le.createElement=function(P,se,he){var D,ae={},Ee=null;if(se!=null)for(D in se.key!==void 0&&(Ee=""+se.key),se)oe.call(se,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(ae[D]=se[D]);var ve=arguments.length-2;if(ve===1)ae.children=he;else if(1<ve){for(var $e=Array(ve),et=0;et<ve;et++)$e[et]=arguments[et+2];ae.children=$e}if(P&&P.defaultProps)for(D in ve=P.defaultProps,ve)ae[D]===void 0&&(ae[D]=ve[D]);return C(P,Ee,void 0,void 0,null,ae)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(P){return{$$typeof:m,render:P}},Le.isValidElement=R,Le.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ie}},Le.memo=function(P,se){return{$$typeof:y,type:P,compare:se===void 0?null:se}},Le.startTransition=function(P){var se=ce.T,he={};ce.T=he;try{var D=P(),ae=ce.S;ae!==null&&ae(he,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(ze,te)}catch(Ee){te(Ee)}finally{ce.T=se}},Le.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Le.use=function(P){return ce.H.use(P)},Le.useActionState=function(P,se,he){return ce.H.useActionState(P,se,he)},Le.useCallback=function(P,se){return ce.H.useCallback(P,se)},Le.useContext=function(P){return ce.H.useContext(P)},Le.useDebugValue=function(){},Le.useDeferredValue=function(P,se){return ce.H.useDeferredValue(P,se)},Le.useEffect=function(P,se,he){var D=ce.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return D.useEffect(P,se)},Le.useId=function(){return ce.H.useId()},Le.useImperativeHandle=function(P,se,he){return ce.H.useImperativeHandle(P,se,he)},Le.useInsertionEffect=function(P,se){return ce.H.useInsertionEffect(P,se)},Le.useLayoutEffect=function(P,se){return ce.H.useLayoutEffect(P,se)},Le.useMemo=function(P,se){return ce.H.useMemo(P,se)},Le.useOptimistic=function(P,se){return ce.H.useOptimistic(P,se)},Le.useReducer=function(P,se,he){return ce.H.useReducer(P,se,he)},Le.useRef=function(P){return ce.H.useRef(P)},Le.useState=function(P){return ce.H.useState(P)},Le.useSyncExternalStore=function(P,se,he){return ce.H.useSyncExternalStore(P,se,he)},Le.useTransition=function(){return ce.H.useTransition()},Le.version="19.1.0",Le}var O0;function vp(){return O0||(O0=1,Km.exports=$S()),Km.exports}var me=vp(),Qm={exports:{}},bc={},Ym={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function HS(){return D0||(D0=1,function(r){function e(V,ie){var te=V.length;V.push(ie);e:for(;0<te;){var ze=te-1>>>1,P=V[ze];if(0<a(P,ie))V[ze]=ie,V[te]=P,te=ze;else break e}}function t(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var ie=V[0],te=V.pop();if(te!==ie){V[0]=te;e:for(var ze=0,P=V.length,se=P>>>1;ze<se;){var he=2*(ze+1)-1,D=V[he],ae=he+1,Ee=V[ae];if(0>a(D,te))ae<P&&0>a(Ee,D)?(V[ze]=Ee,V[ae]=te,ze=ae):(V[ze]=D,V[he]=te,ze=he);else if(ae<P&&0>a(Ee,te))V[ze]=Ee,V[ae]=te,ze=ae;else break e}}return ie}function a(V,ie){var te=V.sortIndex-ie.sortIndex;return te!==0?te:V.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();r.unstable_now=function(){return u.now()-m}}var g=[],y=[],v=1,x=null,T=3,I=!1,L=!1,B=!1,z=!1,re=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function le(V){for(var ie=t(y);ie!==null;){if(ie.callback===null)s(y);else if(ie.startTime<=V)s(y),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(y)}}function ce(V){if(B=!1,le(V),!L)if(t(g)!==null)L=!0,oe||(oe=!0,M());else{var ie=t(y);ie!==null&&Ue(ce,ie.startTime-V)}}var oe=!1,C=-1,A=5,R=-1;function O(){return z?!0:!(r.unstable_now()-R<A)}function j(){if(z=!1,oe){var V=r.unstable_now();R=V;var ie=!0;try{e:{L=!1,B&&(B=!1,$(C),C=-1),I=!0;var te=T;try{t:{for(le(V),x=t(g);x!==null&&!(x.expirationTime>V&&O());){var ze=x.callback;if(typeof ze=="function"){x.callback=null,T=x.priorityLevel;var P=ze(x.expirationTime<=V);if(V=r.unstable_now(),typeof P=="function"){x.callback=P,le(V),ie=!0;break t}x===t(g)&&s(g),le(V)}else s(g);x=t(g)}if(x!==null)ie=!0;else{var se=t(y);se!==null&&Ue(ce,se.startTime-V),ie=!1}}break e}finally{x=null,T=te,I=!1}ie=void 0}}finally{ie?M():oe=!1}}}var M;if(typeof W=="function")M=function(){W(j)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,We=N.port2;N.port1.onmessage=j,M=function(){We.postMessage(null)}}else M=function(){re(j,0)};function Ue(V,ie){C=re(function(){V(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(V){switch(T){case 1:case 2:case 3:var ie=3;break;default:ie=T}var te=T;T=ie;try{return V()}finally{T=te}},r.unstable_requestPaint=function(){z=!0},r.unstable_runWithPriority=function(V,ie){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var te=T;T=V;try{return ie()}finally{T=te}},r.unstable_scheduleCallback=function(V,ie,te){var ze=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ze+te:ze):te=ze,V){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=te+P,V={id:v++,callback:ie,priorityLevel:V,startTime:te,expirationTime:P,sortIndex:-1},te>ze?(V.sortIndex=te,e(y,V),t(g)===null&&V===t(y)&&(B?($(C),C=-1):B=!0,Ue(ce,te-ze))):(V.sortIndex=P,e(g,V),L||I||(L=!0,oe||(oe=!0,M()))),V},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(V){var ie=T;return function(){var te=T;T=ie;try{return V.apply(this,arguments)}finally{T=te}}}}(Wm)),Wm}var P0;function FS(){return P0||(P0=1,Ym.exports=HS()),Ym.exports}var Xm={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function GS(){if(M0)return mn;M0=1;var r=vp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:g,containerInfo:y,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,mn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},mn.flushSync=function(g){var y=u.T,v=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=y,s.p=v,s.d.f()}},mn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},mn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},mn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,x=m(v,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,I=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:I}):v==="script"&&s.d.X(g,{crossOrigin:x,integrity:T,fetchPriority:I,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},mn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},mn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,x=m(v,y.crossOrigin);s.d.L(g,v,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},mn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},mn.requestFormReset=function(g){s.d.r(g)},mn.unstable_batchedUpdates=function(g,y){return g(y)},mn.useFormState=function(g,y,v){return u.H.useFormState(g,y,v)},mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},mn.version="19.1.0",mn}var V0;function KS(){if(V0)return Xm.exports;V0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xm.exports=GS(),Xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function QS(){if(U0)return bc;U0=1;var r=FS(),e=vp(),t=KS();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),n;if(p===c)return m(f),i;p=p.sibling}throw Error(s(188))}if(o.return!==c.return)o=f,c=p;else{for(var w=!1,E=f.child;E;){if(E===o){w=!0,o=f,c=p;break}if(E===c){w=!0,c=f,o=p;break}E=E.sibling}if(!w){for(E=p.child;E;){if(E===o){w=!0,o=p,c=f;break}if(E===c){w=!0,c=p,o=f;break}E=E.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),W=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function We(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case z:return"Profiler";case B:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case I:return"Portal";case W:return(n.displayName||"Context")+".Provider";case $:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:We(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return We(n(i))}catch{}}return null}var Ue=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ze=[],P=-1;function se(n){return{current:n}}function he(n){0>P||(n.current=ze[P],ze[P]=null,P--)}function D(n,i){P++,ze[P]=n.current,n.current=i}var ae=se(null),Ee=se(null),ve=se(null),$e=se(null);function et(n,i){switch(D(ve,i),D(Ee,n),D(ae,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?r0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=r0(i),n=i0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(ae),D(ae,n)}function un(){he(ae),he(Ee),he(ve)}function _s(n){n.memoizedState!==null&&D($e,n);var i=ae.current,o=i0(i,n.type);i!==o&&(D(Ee,n),D(ae,o))}function bs(n){Ee.current===n&&(he(ae),he(Ee)),$e.current===n&&(he($e),mc._currentValue=te)}var ts=Object.prototype.hasOwnProperty,ki=r.unstable_scheduleCallback,Ma=r.unstable_cancelCallback,Gd=r.unstable_shouldYield,ml=r.unstable_requestPaint,Tn=r.unstable_now,lu=r.unstable_getCurrentPriorityLevel,zt=r.unstable_ImmediatePriority,Kt=r.unstable_UserBlockingPriority,Hs=r.unstable_NormalPriority,Kd=r.unstable_LowPriority,gl=r.unstable_IdlePriority,Qd=r.log,ji=r.unstable_setDisableYieldValue,wr=null,hn=null;function qn(n){if(typeof Qd=="function"&&ji(n),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(wr,n)}catch{}}var _n=Math.clz32?Math.clz32:uu,Yd=Math.log,cu=Math.LN2;function uu(n){return n>>>=0,n===0?32:31-(Yd(n)/cu|0)|0}var ws=256,xr=4194304;function ns(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $n(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~p,c!==0?f=ns(c):(w&=E,w!==0?f=ns(w):o||(o=E&~n,o!==0&&(f=ns(o))))):(E=c&~p,E!==0?f=ns(E):w!==0?f=ns(w):o||(o=c&~n,o!==0&&(f=ns(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function Er(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Va(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(){var n=ws;return ws<<=1,(ws&4194048)===0&&(ws=256),n}function Tr(){var n=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),n}function Ua(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function St(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hu(n,i,o,c,f,p){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,k=n.expirationTimes,G=n.hiddenUpdates;for(o=w&~o;0<o;){var X=31-_n(o),ee=1<<X;E[X]=0,k[X]=-1;var K=G[X];if(K!==null)for(G[X]=null,X=0;X<K.length;X++){var Q=K[X];Q!==null&&(Q.lane&=-536870913)}o&=~ee}c!==0&&Sr(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~i))}function Sr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-_n(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function Ar(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-_n(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function yl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function vl(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Fs(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:T0(n.type))}function Wd(n,i){var o=ie.p;try{return ie.p=n,i()}finally{ie.p=o}}var xs=Math.random().toString(36).slice(2),At="__reactFiber$"+xs,nn="__reactProps$"+xs,Gs="__reactContainer$"+xs,Oi="__reactEvents$"+xs,Di="__reactListeners$"+xs,Xd="__reactHandles$"+xs,ss="__reactResources$"+xs,Rr="__reactMarker$"+xs;function La(n){delete n[At],delete n[nn],delete n[Oi],delete n[Di],delete n[Xd]}function Es(n){var i=n[At];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Gs]||o[At]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=c0(n);n!==null;){if(o=n[At])return o;n=c0(n)}return i}n=o,o=n.parentNode}return null}function Ts(n){if(n=n[At]||n[Gs]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Nr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Cr(n){var i=n[ss];return i||(i=n[ss]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(n){n[Rr]=!0}var du=new Set,Pi={};function Ss(n,i){As(n,i),As(n+"Capture",i)}function As(n,i){for(Pi[n]=i,n=0;n<i.length;n++)du.add(i[n])}var Mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rs={},za={};function Jd(n){return ts.call(za,n)?!0:ts.call(Rs,n)?!1:Mi.test(n)?za[n]=!0:(Rs[n]=!0,!1)}function Vi(n,i,o){if(Jd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Ui(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Hn(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}var Li,Ba;function Ks(n){if(Li===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Li=i&&i[1]||"",Ba=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Li+n+Ba}var qa=!1;function $a(n,i){if(!n||qa)return"";qa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Q){var K=Q}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(Q){K=Q}n.call(ee.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],E=p[1];if(w&&E){var k=w.split(`
`),G=E.split(`
`);for(f=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===k.length||f===G.length)for(c=k.length-1,f=G.length-1;1<=c&&0<=f&&k[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(k[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||k[c]!==G[f]){var X=`
`+k[c].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=c&&0<=f);break}}}finally{qa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ks(o):""}function Zd(n){switch(n.tag){case 26:case 27:case 5:return Ks(n.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 15:return $a(n.type,!1);case 11:return $a(n.type.render,!1);case 1:return $a(n.type,!0);case 31:return Ks("Activity");default:return""}}function rs(n){try{var i="";do i+=Zd(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ir(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zi(n){var i=Ir(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function kr(n){n._valueTracker||(n._valueTracker=zi(n))}function at(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ir(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Qs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bi=/[\n"\\]/g;function Qt(n){return n.replace(Bi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _l(n,i,o,c,f,p,w,E){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+bt(i)):n.value!==""+bt(i)&&(n.value=""+bt(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?wl(n,w,bt(i)):o!=null?wl(n,w,bt(o)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+bt(E):n.removeAttribute("name")}function bl(n,i,o,c,f,p,w,E){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;o=o!=null?""+bt(o):"",i=i!=null?""+bt(i):o,E||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w)}function wl(n,i,o){i==="number"&&Qs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function jr(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+bt(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function fu(n,i,o){if(i!=null&&(i=""+bt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+bt(o):""}function mu(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Ue(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=bt(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function Fn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Ys.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function El(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&xl(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&xl(n,p,i[p])}function Ha(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function is(n){return pu.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Tl=null;function Sl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Or=null,bn=null;function yu(n){var i=Ts(n);if(i&&(n=i.stateNode)){var o=n[nn]||null;e:switch(n=i.stateNode,i.type){case"input":if(_l(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Qt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[nn]||null;if(!f)throw Error(s(90));_l(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&at(c)}break e;case"textarea":fu(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&jr(n,!!o.multiple,i,!1)}}}var qi=!1;function $i(n,i,o){if(qi)return n(i,o);qi=!0;try{var c=n(i);return c}finally{if(qi=!1,(Or!==null||bn!==null)&&(ah(),Or&&(i=Or,n=bn,bn=Or=null,yu(i),n)))for(i=0;i<n.length;i++)yu(n[i])}}function Dr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[nn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(wn)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Ws=!1}var Gn=null,dt=null,Fa=null;function vu(){if(Fa)return Fa;var n,i=dt,o=i.length,c,f="value"in Gn?Gn.value:Gn.textContent,p=f.length;for(n=0;n<o&&i[n]===f[n];n++);var w=o-n;for(c=1;c<=w&&i[o-c]===f[p-c];c++);return Fa=f.slice(n,1<c?1-c:void 0)}function Hi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Fi(){return!0}function Al(){return!1}function Bt(n){function i(o,c,f,p,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Fi:Al,this.isPropagationStopped=Al,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),i}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Bt(dn),Ki=v({},dn,{view:0,detail:0}),Qi=Bt(Ki),Ga,Yi,Ns,Wi=v({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ns&&(Ns&&n.type==="mousemove"?(Ga=n.screenX-Ns.screenX,Yi=n.screenY-Ns.screenY):Yi=Ga=0,Ns=n),Ga)},movementY:function(n){return"movementY"in n?n.movementY:Yi}}),Xi=Bt(Wi),ef=v({},Wi,{dataTransfer:0}),_u=Bt(ef),Ji=v({},Ki,{relatedTarget:0}),Ka=Bt(Ji),bu=v({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rl=Bt(bu),Nl=v({},dn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wu=Bt(Nl),Qa=v({},dn,{data:0}),Cl=Bt(Qa),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Eu[n])?!!i[n]:!1}function Ya(){return Tu}var Su=v({},Ki,{key:function(n){if(n.key){var i=xu[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xs[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(n){return n.type==="keypress"?Hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wa=Bt(Su),xn=v({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Bt(xn),Au=v({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),Mr=Bt(Au),h=v({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_=Bt(h),b=v({},Wi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),S=Bt(b),F=v({},dn,{newState:0,oldState:0}),Y=Bt(F),ue=[9,13,27,32],Pe=wn&&"CompositionEvent"in window,pt=null;wn&&"documentMode"in document&&(pt=document.documentMode);var st=wn&&"TextEvent"in window&&!pt,Nt=wn&&(!Pe||pt&&8<pt&&11>=pt),jn=" ",Cs=!1;function as(n,i){switch(n){case"keyup":return ue.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function os(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ls=!1;function kl(n,i){switch(n){case"compositionend":return os(i);case"keypress":return i.which!==32?null:(Cs=!0,jn);case"textInput":return n=i.data,n===jn&&Cs?null:n;default:return null}}function d1(n,i){if(ls)return n==="compositionend"||!Pe&&as(n,i)?(n=vu(),Fa=dt=Gn=null,ls=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Nt&&i.locale!=="ko"?null:i.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!f1[n.type]:i==="textarea"}function _y(n,i,o,c){Or?bn?bn.push(c):bn=[c]:Or=c,i=dh(i,"onChange"),0<i.length&&(o=new Gi("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var jl=null,Ol=null;function m1(n){Z_(n,0)}function Ru(n){var i=Nr(n);if(at(i))return n}function by(n,i){if(n==="change")return i}var wy=!1;if(wn){var tf;if(wn){var nf="oninput"in document;if(!nf){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),nf=typeof xy.oninput=="function"}tf=nf}else tf=!1;wy=tf&&(!document.documentMode||9<document.documentMode)}function Ey(){jl&&(jl.detachEvent("onpropertychange",Ty),Ol=jl=null)}function Ty(n){if(n.propertyName==="value"&&Ru(Ol)){var i=[];_y(i,Ol,n,Sl(n)),$i(m1,i)}}function g1(n,i,o){n==="focusin"?(Ey(),jl=i,Ol=o,jl.attachEvent("onpropertychange",Ty)):n==="focusout"&&Ey()}function p1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ru(Ol)}function y1(n,i){if(n==="click")return Ru(i)}function v1(n,i){if(n==="input"||n==="change")return Ru(i)}function _1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var On=typeof Object.is=="function"?Object.is:_1;function Dl(n,i){if(On(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ts.call(i,f)||!On(n[f],i[f]))return!1}return!0}function Sy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ay(n,i){var o=Sy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Sy(o)}}function Ry(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ry(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Ny(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Qs(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Qs(n.document)}return i}function sf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var b1=wn&&"documentMode"in document&&11>=document.documentMode,Xa=null,rf=null,Pl=null,af=!1;function Cy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;af||Xa==null||Xa!==Qs(c)||(c=Xa,"selectionStart"in c&&sf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pl&&Dl(Pl,c)||(Pl=c,c=dh(rf,"onSelect"),0<c.length&&(i=new Gi("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Xa)))}function Zi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Ja={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},of={},Iy={};wn&&(Iy=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function ea(n){if(of[n])return of[n];if(!Ja[n])return n;var i=Ja[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Iy)return of[n]=i[o];return n}var ky=ea("animationend"),jy=ea("animationiteration"),Oy=ea("animationstart"),w1=ea("transitionrun"),x1=ea("transitionstart"),E1=ea("transitioncancel"),Dy=ea("transitionend"),Py=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function cs(n,i){Py.set(n,i),Ss(i,[n])}var My=new WeakMap;function Kn(n,i){if(typeof n=="object"&&n!==null){var o=My.get(n);return o!==void 0?o:(i={value:n,source:i,stack:rs(i)},My.set(n,i),i)}return{value:n,source:i,stack:rs(i)}}var Qn=[],Za=0,cf=0;function Nu(){for(var n=Za,i=cf=Za=0;i<n;){var o=Qn[i];Qn[i++]=null;var c=Qn[i];Qn[i++]=null;var f=Qn[i];Qn[i++]=null;var p=Qn[i];if(Qn[i++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}p!==0&&Vy(o,f,p)}}function Cu(n,i,o,c){Qn[Za++]=n,Qn[Za++]=i,Qn[Za++]=o,Qn[Za++]=c,cf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function uf(n,i,o,c){return Cu(n,i,o,c),Iu(n)}function eo(n,i){return Cu(n,null,null,i),Iu(n)}function Vy(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-_n(o),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),p):null}function Iu(n){if(50<ac)throw ac=0,pm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var to={};function T1(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(n,i,o,c){return new T1(n,i,o,c)}function hf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Js(n,i){var o=n.alternate;return o===null?(o=Dn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Uy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ku(n,i,o,c,f,p){var w=0;if(c=n,typeof n=="function")hf(n)&&(w=1);else if(typeof n=="string")w=AS(n,o,ae.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=Dn(31,o,i,f),n.elementType=R,n.lanes=p,n;case L:return ta(o.children,f,p,i);case B:w=8,f|=24;break;case z:return n=Dn(12,o,i,f|2),n.elementType=z,n.lanes=p,n;case ce:return n=Dn(13,o,i,f),n.elementType=ce,n.lanes=p,n;case oe:return n=Dn(19,o,i,f),n.elementType=oe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:case W:w=10;break e;case $:w=9;break e;case le:w=11;break e;case C:w=14;break e;case A:w=16,c=null;break e}w=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Dn(w,o,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function ta(n,i,o,c){return n=Dn(7,n,c,i),n.lanes=o,n}function df(n,i,o){return n=Dn(6,n,null,i),n.lanes=o,n}function ff(n,i,o){return i=Dn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var no=[],so=0,ju=null,Ou=0,Yn=[],Wn=0,na=null,Zs=1,er="";function sa(n,i){no[so++]=Ou,no[so++]=ju,ju=n,Ou=i}function Ly(n,i,o){Yn[Wn++]=Zs,Yn[Wn++]=er,Yn[Wn++]=na,na=n;var c=Zs;n=er;var f=32-_n(c)-1;c&=~(1<<f),o+=1;var p=32-_n(i)+f;if(30<p){var w=f-f%5;p=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Zs=1<<32-_n(i)+f|o<<f|c,er=p+n}else Zs=1<<p|o<<f|c,er=n}function mf(n){n.return!==null&&(sa(n,1),Ly(n,1,0))}function gf(n){for(;n===ju;)ju=no[--so],no[so]=null,Ou=no[--so],no[so]=null;for(;n===na;)na=Yn[--Wn],Yn[Wn]=null,er=Yn[--Wn],Yn[Wn]=null,Zs=Yn[--Wn],Yn[Wn]=null}var En=null,Et=null,tt=!1,ra=null,Is=!1,pf=Error(s(519));function ia(n){var i=Error(s(418,""));throw Ul(Kn(i,n)),pf}function zy(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[At]=n,i[nn]=c,o){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(o=0;o<lc.length;o++)Ge(lc[o],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ge("invalid",i),bl(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),kr(i);break;case"select":Ge("invalid",i);break;case"textarea":Ge("invalid",i),mu(i,c.value,c.defaultValue,c.children),kr(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||s0(i.textContent,o)?(c.popover!=null&&(Ge("beforetoggle",i),Ge("toggle",i)),c.onScroll!=null&&Ge("scroll",i),c.onScrollEnd!=null&&Ge("scrollend",i),c.onClick!=null&&(i.onclick=fh),i=!0):i=!1,i||ia(n)}function By(n){for(En=n.return;En;)switch(En.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:En=En.return}}function Ml(n){if(n!==En)return!1;if(!tt)return By(n),tt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||jm(n.type,n.memoizedProps)),o=!o),o&&Et&&ia(n),By(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){Et=hs(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}Et=null}}else i===27?(i=Et,Jr(n.type)?(n=Mm,Mm=null,Et=n):Et=i):Et=En?hs(n.stateNode.nextSibling):null;return!0}function Vl(){Et=En=null,tt=!1}function qy(){var n=ra;return n!==null&&(Rn===null?Rn=n:Rn.push.apply(Rn,n),ra=null),n}function Ul(n){ra===null?ra=[n]:ra.push(n)}var yf=se(null),aa=null,tr=null;function Vr(n,i,o){D(yf,i._currentValue),i._currentValue=o}function nr(n){n._currentValue=yf.current,he(yf)}function vf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function _f(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;e:for(;p!==null;){var E=p;p=f;for(var k=0;k<i.length;k++)if(E.context===i[k]){p.lanes|=o,E=p.alternate,E!==null&&(E.lanes|=o),vf(p.return,o,n),c||(w=null);break e}p=E.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),vf(w,o,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function Ll(n,i,o,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var E=f.type;On(f.pendingProps.value,w.value)||(n!==null?n.push(E):n=[E])}}else if(f===$e.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(mc):n=[mc])}f=f.return}n!==null&&_f(i,n,o,c),i.flags|=262144}function Du(n){for(n=n.firstContext;n!==null;){if(!On(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function oa(n){aa=n,tr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function fn(n){return $y(aa,n)}function Pu(n,i){return aa===null&&oa(n),$y(n,i)}function $y(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},tr===null){if(n===null)throw Error(s(308));tr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else tr=tr.next=i;return o}var S1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},A1=r.unstable_scheduleCallback,R1=r.unstable_NormalPriority,qt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new S1,data:new Map,refCount:0}}function zl(n){n.refCount--,n.refCount===0&&A1(R1,function(){n.controller.abort()})}var Bl=null,wf=0,ro=0,io=null;function N1(n,i){if(Bl===null){var o=Bl=[];wf=0,ro=Em(),io={status:"pending",value:void 0,then:function(c){o.push(c)}}}return wf++,i.then(Hy,Hy),i}function Hy(){if(--wf===0&&Bl!==null){io!==null&&(io.status="fulfilled");var n=Bl;Bl=null,ro=0,io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function C1(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Fy=V.S;V.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&N1(n,i),Fy!==null&&Fy(n,i)};var la=se(null);function xf(){var n=la.current;return n!==null?n:ft.pooledCache}function Mu(n,i){i===null?D(la,la.current):D(la,i.pool)}function Gy(){var n=xf();return n===null?null:{parent:qt._currentValue,pool:n}}var ql=Error(s(460)),Ky=Error(s(474)),Vu=Error(s(542)),Ef={then:function(){}};function Qy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Uu(){}function Yy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Uu,Uu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Xy(n),n;default:if(typeof i.status=="string")i.then(Uu,Uu);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Xy(n),n}throw $l=i,ql}}var $l=null;function Wy(){if($l===null)throw Error(s(459));var n=$l;return $l=null,n}function Xy(n){if(n===ql||n===Vu)throw Error(s(483))}var Ur=!1;function Tf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Lr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function zr(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Iu(n),Vy(n,null,o),i}return Cu(n,c,i,o),Iu(n)}function Hl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Ar(n,o)}}function Af(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Rf=!1;function Fl(){if(Rf){var n=io;if(n!==null)throw n}}function Gl(n,i,o,c){Rf=!1;var f=n.updateQueue;Ur=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var k=E,G=k.next;k.next=null,w===null?p=G:w.next=G,w=k;var X=n.alternate;X!==null&&(X=X.updateQueue,E=X.lastBaseUpdate,E!==w&&(E===null?X.firstBaseUpdate=G:E.next=G,X.lastBaseUpdate=k))}if(p!==null){var ee=f.baseState;w=0,X=G=k=null,E=p;do{var K=E.lane&-536870913,Q=K!==E.lane;if(Q?(Xe&K)===K:(c&K)===K){K!==0&&K===ro&&(Rf=!0),X!==null&&(X=X.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ie=n,Ae=E;K=i;var ct=o;switch(Ae.tag){case 1:if(Ie=Ae.payload,typeof Ie=="function"){ee=Ie.call(ct,ee,K);break e}ee=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ae.payload,K=typeof Ie=="function"?Ie.call(ct,ee,K):Ie,K==null)break e;ee=v({},ee,K);break e;case 2:Ur=!0}}K=E.callback,K!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:E.tag,payload:E.payload,callback:E.callback,next:null},X===null?(G=X=Q,k=ee):X=X.next=Q,w|=K;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);X===null&&(k=ee),f.baseState=k,f.firstBaseUpdate=G,f.lastBaseUpdate=X,p===null&&(f.shared.lanes=0),Qr|=w,n.lanes=w,n.memoizedState=ee}}function Jy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Zy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Jy(o[n],i)}var ao=se(null),Lu=se(0);function ev(n,i){n=cr,D(Lu,n),D(ao,i),cr=n|i.baseLanes}function Nf(){D(Lu,cr),D(ao,ao.current)}function Cf(){cr=Lu.current,he(ao),he(Lu)}var Br=0,Be=null,ot=null,Ot=null,zu=!1,oo=!1,ca=!1,Bu=0,Kl=0,lo=null,I1=0;function Ct(){throw Error(s(321))}function If(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!On(n[o],i[o]))return!1;return!0}function kf(n,i,o,c,f,p){return Br=p,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=n===null||n.memoizedState===null?Vv:Uv,ca=!1,p=o(c,f),ca=!1,oo&&(p=nv(i,o,c,f)),tv(n),p}function tv(n){V.H=Ku;var i=ot!==null&&ot.next!==null;if(Br=0,Ot=ot=Be=null,zu=!1,Kl=0,lo=null,i)throw Error(s(300));n===null||Yt||(n=n.dependencies,n!==null&&Du(n)&&(Yt=!0))}function nv(n,i,o,c){Be=n;var f=0;do{if(oo&&(lo=null),Kl=0,oo=!1,25<=f)throw Error(s(301));if(f+=1,Ot=ot=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}V.H=V1,p=i(o,c)}while(oo);return p}function k1(){var n=V.H,i=n.useState()[0];return i=typeof i.then=="function"?Ql(i):i,n=n.useState()[0],(ot!==null?ot.memoizedState:null)!==n&&(Be.flags|=1024),i}function jf(){var n=Bu!==0;return Bu=0,n}function Of(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Df(n){if(zu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zu=!1}Br=0,Ot=ot=Be=null,oo=!1,Kl=Bu=0,lo=null}function Sn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Be.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Dt(){if(ot===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=ot.next;var i=Ot===null?Be.memoizedState:Ot.next;if(i!==null)Ot=i,ot=n;else{if(n===null)throw Be.alternate===null?Error(s(467)):Error(s(310));ot=n,n={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Ot===null?Be.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function Pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(n){var i=Kl;return Kl+=1,lo===null&&(lo=[]),n=Yy(lo,n,i),i=Be,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?Vv:Uv),n}function qu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ql(n);if(n.$$typeof===W)return fn(n)}throw Error(s(438,String(n)))}function Mf(n){var i=null,o=Be.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Pf(),Be.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=O;return i.index++,o}function sr(n,i){return typeof i=="function"?i(n):i}function $u(n){var i=Dt();return Vf(i,ot,n)}function Vf(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var E=w=null,k=null,G=i,X=!1;do{var ee=G.lane&-536870913;if(ee!==G.lane?(Xe&ee)===ee:(Br&ee)===ee){var K=G.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ee===ro&&(X=!0);else if((Br&K)===K){G=G.next,K===ro&&(X=!0);continue}else ee={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(E=k=ee,w=p):k=k.next=ee,Be.lanes|=K,Qr|=K;ee=G.action,ca&&o(p,ee),p=G.hasEagerState?G.eagerState:o(p,ee)}else K={lane:ee,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(E=k=K,w=p):k=k.next=K,Be.lanes|=ee,Qr|=ee;G=G.next}while(G!==null&&G!==i);if(k===null?w=p:k.next=E,!On(p,n.memoizedState)&&(Yt=!0,X&&(o=io,o!==null)))throw o;n.memoizedState=p,n.baseState=w,n.baseQueue=k,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Uf(n){var i=Dt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=n(p,w.action),w=w.next;while(w!==f);On(p,i.memoizedState)||(Yt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function sv(n,i,o){var c=Be,f=Dt(),p=tt;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!On((ot||f).memoizedState,o);w&&(f.memoizedState=o,Yt=!0),f=f.queue;var E=av.bind(null,c,f,n);if(Yl(2048,8,E,[n]),f.getSnapshot!==i||w||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,co(9,Hu(),iv.bind(null,c,f,o,i),null),ft===null)throw Error(s(349));p||(Br&124)!==0||rv(c,i,o)}return o}function rv(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Be.updateQueue,i===null?(i=Pf(),Be.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function iv(n,i,o,c){i.value=o,i.getSnapshot=c,ov(i)&&lv(n)}function av(n,i,o){return o(function(){ov(i)&&lv(n)})}function ov(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!On(n,o)}catch{return!0}}function lv(n){var i=eo(n,2);i!==null&&Ln(i,n,2)}function Lf(n){var i=Sn();if(typeof n=="function"){var o=n;if(n=o(),ca){qn(!0);try{o()}finally{qn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:n},i}function cv(n,i,o,c){return n.baseState=o,Vf(n,ot,typeof c=="function"?c:sr)}function j1(n,i,o,c,f){if(Gu(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};V.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,uv(i,p)):(p.next=o.next,i.pending=o.next=p)}}function uv(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=V.T,w={};V.T=w;try{var E=o(f,c),k=V.S;k!==null&&k(w,E),hv(n,i,E)}catch(G){zf(n,i,G)}finally{V.T=p}}else try{p=o(f,c),hv(n,i,p)}catch(G){zf(n,i,G)}}function hv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){dv(n,i,c)},function(c){return zf(n,i,c)}):dv(n,i,o)}function dv(n,i,o){i.status="fulfilled",i.value=o,fv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,uv(n,o)))}function zf(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,fv(i),i=i.next;while(i!==c)}n.action=null}function fv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function mv(n,i){return i}function gv(n,i){if(tt){var o=ft.formState;if(o!==null){e:{var c=Be;if(tt){if(Et){t:{for(var f=Et,p=Is;f.nodeType!==8;){if(!p){f=null;break t}if(f=hs(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Et=hs(f.nextSibling),c=f.data==="F!";break e}}ia(c)}c=!1}c&&(i=o[0])}}return o=Sn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mv,lastRenderedState:i},o.queue=c,o=Dv.bind(null,Be,c),c.dispatch=o,c=Lf(!1),p=Ff.bind(null,Be,!1,c.queue),c=Sn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=j1.bind(null,Be,f,p,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function pv(n){var i=Dt();return yv(i,ot,n)}function yv(n,i,o){if(i=Vf(n,i,mv)[0],n=$u(sr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Ql(i)}catch(w){throw w===ql?Vu:w}else c=i;i=Dt();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(Be.flags|=2048,co(9,Hu(),O1.bind(null,f,o),null)),[c,p,n]}function O1(n,i){n.action=i}function vv(n){var i=Dt(),o=ot;if(o!==null)return yv(i,o,n);Dt(),i=i.memoizedState,o=Dt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function co(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=Be.updateQueue,i===null&&(i=Pf(),Be.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function Hu(){return{destroy:void 0,resource:void 0}}function _v(){return Dt().memoizedState}function Fu(n,i,o,c){var f=Sn();c=c===void 0?null:c,Be.flags|=n,f.memoizedState=co(1|i,Hu(),o,c)}function Yl(n,i,o,c){var f=Dt();c=c===void 0?null:c;var p=f.memoizedState.inst;ot!==null&&c!==null&&If(c,ot.memoizedState.deps)?f.memoizedState=co(i,p,o,c):(Be.flags|=n,f.memoizedState=co(1|i,p,o,c))}function bv(n,i){Fu(8390656,8,n,i)}function wv(n,i){Yl(2048,8,n,i)}function xv(n,i){return Yl(4,2,n,i)}function Ev(n,i){return Yl(4,4,n,i)}function Tv(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Sv(n,i,o){o=o!=null?o.concat([n]):null,Yl(4,4,Tv.bind(null,i,n),o)}function Bf(){}function Av(n,i){var o=Dt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&If(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Rv(n,i){var o=Dt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&If(i,c[1]))return c[0];if(c=n(),ca){qn(!0);try{n()}finally{qn(!1)}}return o.memoizedState=[c,i],c}function qf(n,i,o){return o===void 0||(Br&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=I_(),Be.lanes|=n,Qr|=n,o)}function Nv(n,i,o,c){return On(o,i)?o:ao.current!==null?(n=qf(n,o,c),On(n,i)||(Yt=!0),n):(Br&42)===0?(Yt=!0,n.memoizedState=o):(n=I_(),Be.lanes|=n,Qr|=n,i)}function Cv(n,i,o,c,f){var p=ie.p;ie.p=p!==0&&8>p?p:8;var w=V.T,E={};V.T=E,Ff(n,!1,i,o);try{var k=f(),G=V.S;if(G!==null&&G(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=C1(k,c);Wl(n,i,X,Un(n))}else Wl(n,i,c,Un(n))}catch(ee){Wl(n,i,{then:function(){},status:"rejected",reason:ee},Un())}finally{ie.p=p,V.T=w}}function D1(){}function $f(n,i,o,c){if(n.tag!==5)throw Error(s(476));var f=Iv(n).queue;Cv(n,f,i,te,o===null?D1:function(){return kv(n),o(c)})}function Iv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:te},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function kv(n){var i=Iv(n).next.queue;Wl(n,i,{},Un())}function Hf(){return fn(mc)}function jv(){return Dt().memoizedState}function Ov(){return Dt().memoizedState}function P1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Un();n=Lr(o);var c=zr(i,n,o);c!==null&&(Ln(c,i,o),Hl(c,i,o)),i={cache:bf()},n.payload=i;return}i=i.return}}function M1(n,i,o){var c=Un();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Gu(n)?Pv(i,o):(o=uf(n,i,o,c),o!==null&&(Ln(o,n,c),Mv(o,i,c)))}function Dv(n,i,o){var c=Un();Wl(n,i,o,c)}function Wl(n,i,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Gu(n))Pv(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,E=p(w,o);if(f.hasEagerState=!0,f.eagerState=E,On(E,w))return Cu(n,i,f,0),ft===null&&Nu(),!1}catch{}finally{}if(o=uf(n,i,f,c),o!==null)return Ln(o,n,c),Mv(o,i,c),!0}return!1}function Ff(n,i,o,c){if(c={lane:2,revertLane:Em(),action:c,hasEagerState:!1,eagerState:null,next:null},Gu(n)){if(i)throw Error(s(479))}else i=uf(n,o,c,2),i!==null&&Ln(i,n,2)}function Gu(n){var i=n.alternate;return n===Be||i!==null&&i===Be}function Pv(n,i){oo=zu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Mv(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Ar(n,o)}}var Ku={readContext:fn,use:qu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},Vv={readContext:fn,use:qu,useCallback:function(n,i){return Sn().memoizedState=[n,i===void 0?null:i],n},useContext:fn,useEffect:bv,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Fu(4194308,4,Tv.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Fu(4194308,4,n,i)},useInsertionEffect:function(n,i){Fu(4,2,n,i)},useMemo:function(n,i){var o=Sn();i=i===void 0?null:i;var c=n();if(ca){qn(!0);try{n()}finally{qn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Sn();if(o!==void 0){var f=o(i);if(ca){qn(!0);try{o(i)}finally{qn(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=M1.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var i=Sn();return n={current:n},i.memoizedState=n},useState:function(n){n=Lf(n);var i=n.queue,o=Dv.bind(null,Be,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Sn();return qf(o,n,i)},useTransition:function(){var n=Lf(!1);return n=Cv.bind(null,Be,n.queue,!0,!1),Sn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=Be,f=Sn();if(tt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),ft===null)throw Error(s(349));(Xe&124)!==0||rv(c,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,bv(av.bind(null,c,p,n),[n]),c.flags|=2048,co(9,Hu(),iv.bind(null,c,p,o,i),null),o},useId:function(){var n=Sn(),i=ft.identifierPrefix;if(tt){var o=er,c=Zs;o=(c&~(1<<32-_n(c)-1)).toString(32)+o,i="«"+i+"R"+o,o=Bu++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=I1++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Hf,useFormState:gv,useActionState:gv,useOptimistic:function(n){var i=Sn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ff.bind(null,Be,!0,o),o.dispatch=i,[n,i]},useMemoCache:Mf,useCacheRefresh:function(){return Sn().memoizedState=P1.bind(null,Be)}},Uv={readContext:fn,use:qu,useCallback:Av,useContext:fn,useEffect:wv,useImperativeHandle:Sv,useInsertionEffect:xv,useLayoutEffect:Ev,useMemo:Rv,useReducer:$u,useRef:_v,useState:function(){return $u(sr)},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Dt();return Nv(o,ot.memoizedState,n,i)},useTransition:function(){var n=$u(sr)[0],i=Dt().memoizedState;return[typeof n=="boolean"?n:Ql(n),i]},useSyncExternalStore:sv,useId:jv,useHostTransitionStatus:Hf,useFormState:pv,useActionState:pv,useOptimistic:function(n,i){var o=Dt();return cv(o,ot,n,i)},useMemoCache:Mf,useCacheRefresh:Ov},V1={readContext:fn,use:qu,useCallback:Av,useContext:fn,useEffect:wv,useImperativeHandle:Sv,useInsertionEffect:xv,useLayoutEffect:Ev,useMemo:Rv,useReducer:Uf,useRef:_v,useState:function(){return Uf(sr)},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Dt();return ot===null?qf(o,n,i):Nv(o,ot.memoizedState,n,i)},useTransition:function(){var n=Uf(sr)[0],i=Dt().memoizedState;return[typeof n=="boolean"?n:Ql(n),i]},useSyncExternalStore:sv,useId:jv,useHostTransitionStatus:Hf,useFormState:vv,useActionState:vv,useOptimistic:function(n,i){var o=Dt();return ot!==null?cv(o,ot,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:Ov},uo=null,Xl=0;function Qu(n){var i=Xl;return Xl+=1,uo===null&&(uo=[]),Yy(uo,n,i)}function Jl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Yu(n,i){throw i.$$typeof===x?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Lv(n){var i=n._init;return i(n._payload)}function zv(n){function i(q,U){if(n){var H=q.deletions;H===null?(q.deletions=[U],q.flags|=16):H.push(U)}}function o(q,U){if(!n)return null;for(;U!==null;)i(q,U),U=U.sibling;return null}function c(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function f(q,U){return q=Js(q,U),q.index=0,q.sibling=null,q}function p(q,U,H){return q.index=H,n?(H=q.alternate,H!==null?(H=H.index,H<U?(q.flags|=67108866,U):H):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function w(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function E(q,U,H,J){return U===null||U.tag!==6?(U=df(H,q.mode,J),U.return=q,U):(U=f(U,H),U.return=q,U)}function k(q,U,H,J){var ge=H.type;return ge===L?X(q,U,H.props.children,J,H.key):U!==null&&(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===A&&Lv(ge)===U.type)?(U=f(U,H.props),Jl(U,H),U.return=q,U):(U=ku(H.type,H.key,H.props,null,q.mode,J),Jl(U,H),U.return=q,U)}function G(q,U,H,J){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=ff(H,q.mode,J),U.return=q,U):(U=f(U,H.children||[]),U.return=q,U)}function X(q,U,H,J,ge){return U===null||U.tag!==7?(U=ta(H,q.mode,J,ge),U.return=q,U):(U=f(U,H),U.return=q,U)}function ee(q,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=df(""+U,q.mode,H),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return H=ku(U.type,U.key,U.props,null,q.mode,H),Jl(H,U),H.return=q,H;case I:return U=ff(U,q.mode,H),U.return=q,U;case A:var J=U._init;return U=J(U._payload),ee(q,U,H)}if(Ue(U)||M(U))return U=ta(U,q.mode,H,null),U.return=q,U;if(typeof U.then=="function")return ee(q,Qu(U),H);if(U.$$typeof===W)return ee(q,Pu(q,U),H);Yu(q,U)}return null}function K(q,U,H,J){var ge=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:E(q,U,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return H.key===ge?k(q,U,H,J):null;case I:return H.key===ge?G(q,U,H,J):null;case A:return ge=H._init,H=ge(H._payload),K(q,U,H,J)}if(Ue(H)||M(H))return ge!==null?null:X(q,U,H,J,null);if(typeof H.then=="function")return K(q,U,Qu(H),J);if(H.$$typeof===W)return K(q,U,Pu(q,H),J);Yu(q,H)}return null}function Q(q,U,H,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return q=q.get(H)||null,E(U,q,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return q=q.get(J.key===null?H:J.key)||null,k(U,q,J,ge);case I:return q=q.get(J.key===null?H:J.key)||null,G(U,q,J,ge);case A:var He=J._init;return J=He(J._payload),Q(q,U,H,J,ge)}if(Ue(J)||M(J))return q=q.get(H)||null,X(U,q,J,ge,null);if(typeof J.then=="function")return Q(q,U,H,Qu(J),ge);if(J.$$typeof===W)return Q(q,U,H,Pu(U,J),ge);Yu(U,J)}return null}function Ie(q,U,H,J){for(var ge=null,He=null,_e=U,Re=U=0,Xt=null;_e!==null&&Re<H.length;Re++){_e.index>Re?(Xt=_e,_e=null):Xt=_e.sibling;var Ze=K(q,_e,H[Re],J);if(Ze===null){_e===null&&(_e=Xt);break}n&&_e&&Ze.alternate===null&&i(q,_e),U=p(Ze,U,Re),He===null?ge=Ze:He.sibling=Ze,He=Ze,_e=Xt}if(Re===H.length)return o(q,_e),tt&&sa(q,Re),ge;if(_e===null){for(;Re<H.length;Re++)_e=ee(q,H[Re],J),_e!==null&&(U=p(_e,U,Re),He===null?ge=_e:He.sibling=_e,He=_e);return tt&&sa(q,Re),ge}for(_e=c(_e);Re<H.length;Re++)Xt=Q(_e,q,Re,H[Re],J),Xt!==null&&(n&&Xt.alternate!==null&&_e.delete(Xt.key===null?Re:Xt.key),U=p(Xt,U,Re),He===null?ge=Xt:He.sibling=Xt,He=Xt);return n&&_e.forEach(function(si){return i(q,si)}),tt&&sa(q,Re),ge}function Ae(q,U,H,J){if(H==null)throw Error(s(151));for(var ge=null,He=null,_e=U,Re=U=0,Xt=null,Ze=H.next();_e!==null&&!Ze.done;Re++,Ze=H.next()){_e.index>Re?(Xt=_e,_e=null):Xt=_e.sibling;var si=K(q,_e,Ze.value,J);if(si===null){_e===null&&(_e=Xt);break}n&&_e&&si.alternate===null&&i(q,_e),U=p(si,U,Re),He===null?ge=si:He.sibling=si,He=si,_e=Xt}if(Ze.done)return o(q,_e),tt&&sa(q,Re),ge;if(_e===null){for(;!Ze.done;Re++,Ze=H.next())Ze=ee(q,Ze.value,J),Ze!==null&&(U=p(Ze,U,Re),He===null?ge=Ze:He.sibling=Ze,He=Ze);return tt&&sa(q,Re),ge}for(_e=c(_e);!Ze.done;Re++,Ze=H.next())Ze=Q(_e,q,Re,Ze.value,J),Ze!==null&&(n&&Ze.alternate!==null&&_e.delete(Ze.key===null?Re:Ze.key),U=p(Ze,U,Re),He===null?ge=Ze:He.sibling=Ze,He=Ze);return n&&_e.forEach(function(US){return i(q,US)}),tt&&sa(q,Re),ge}function ct(q,U,H,J){if(typeof H=="object"&&H!==null&&H.type===L&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case T:e:{for(var ge=H.key;U!==null;){if(U.key===ge){if(ge=H.type,ge===L){if(U.tag===7){o(q,U.sibling),J=f(U,H.props.children),J.return=q,q=J;break e}}else if(U.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===A&&Lv(ge)===U.type){o(q,U.sibling),J=f(U,H.props),Jl(J,H),J.return=q,q=J;break e}o(q,U);break}else i(q,U);U=U.sibling}H.type===L?(J=ta(H.props.children,q.mode,J,H.key),J.return=q,q=J):(J=ku(H.type,H.key,H.props,null,q.mode,J),Jl(J,H),J.return=q,q=J)}return w(q);case I:e:{for(ge=H.key;U!==null;){if(U.key===ge)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){o(q,U.sibling),J=f(U,H.children||[]),J.return=q,q=J;break e}else{o(q,U);break}else i(q,U);U=U.sibling}J=ff(H,q.mode,J),J.return=q,q=J}return w(q);case A:return ge=H._init,H=ge(H._payload),ct(q,U,H,J)}if(Ue(H))return Ie(q,U,H,J);if(M(H)){if(ge=M(H),typeof ge!="function")throw Error(s(150));return H=ge.call(H),Ae(q,U,H,J)}if(typeof H.then=="function")return ct(q,U,Qu(H),J);if(H.$$typeof===W)return ct(q,U,Pu(q,H),J);Yu(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(o(q,U.sibling),J=f(U,H),J.return=q,q=J):(o(q,U),J=df(H,q.mode,J),J.return=q,q=J),w(q)):o(q,U)}return function(q,U,H,J){try{Xl=0;var ge=ct(q,U,H,J);return uo=null,ge}catch(_e){if(_e===ql||_e===Vu)throw _e;var He=Dn(29,_e,null,q.mode);return He.lanes=J,He.return=q,He}finally{}}}var ho=zv(!0),Bv=zv(!1),Xn=se(null),ks=null;function qr(n){var i=n.alternate;D($t,$t.current&1),D(Xn,n),ks===null&&(i===null||ao.current!==null||i.memoizedState!==null)&&(ks=n)}function qv(n){if(n.tag===22){if(D($t,$t.current),D(Xn,n),ks===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(ks=n)}}else $r()}function $r(){D($t,$t.current),D(Xn,Xn.current)}function rr(n){he(Xn),ks===n&&(ks=null),he($t)}var $t=se(0);function Wu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Pm(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Gf(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Kf={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=Un(),f=Lr(c);f.payload=i,o!=null&&(f.callback=o),i=zr(n,f,c),i!==null&&(Ln(i,n,c),Hl(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=Un(),f=Lr(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=zr(n,f,c),i!==null&&(Ln(i,n,c),Hl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Un(),c=Lr(o);c.tag=2,i!=null&&(c.callback=i),i=zr(n,c,o),i!==null&&(Ln(i,n,o),Hl(i,n,o))}};function $v(n,i,o,c,f,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Dl(o,c)||!Dl(f,p):!0}function Hv(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Kf.enqueueReplaceState(i,i.state,null)}function ua(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=v({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Xu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Fv(n){Xu(n)}function Gv(n){console.error(n)}function Kv(n){Xu(n)}function Ju(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Qv(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qf(n,i,o){return o=Lr(o),o.tag=3,o.payload={element:null},o.callback=function(){Ju(n,i)},o}function Yv(n){return n=Lr(n),n.tag=3,n}function Wv(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){Qv(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Qv(i,o,c),typeof f!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function U1(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Ll(i,o,f,!0),o=Xn.current,o!==null){switch(o.tag){case 13:return ks===null?vm():o.alternate===null&&Tt===0&&(Tt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Ef?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),bm(n,c,f)),!1;case 22:return o.flags|=65536,c===Ef?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),bm(n,c,f)),!1}throw Error(s(435,o.tag))}return bm(n,c,f),vm(),!1}if(tt)return i=Xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==pf&&(n=Error(s(422),{cause:c}),Ul(Kn(n,o)))):(c!==pf&&(i=Error(s(423),{cause:c}),Ul(Kn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Kn(c,o),f=Qf(n.stateNode,c,f),Af(n,f),Tt!==4&&(Tt=2)),!1;var p=Error(s(520),{cause:c});if(p=Kn(p,o),ic===null?ic=[p]:ic.push(p),Tt!==4&&(Tt=2),i===null)return!0;c=Kn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Qf(o.stateNode,c,n),Af(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Yr===null||!Yr.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Yv(f),Wv(f,n,o,c),Af(o,f),!1}o=o.return}while(o!==null);return!1}var Xv=Error(s(461)),Yt=!1;function sn(n,i,o,c){i.child=n===null?Bv(i,null,o,c):ho(i,n.child,o,c)}function Jv(n,i,o,c,f){o=o.render;var p=i.ref;if("ref"in c){var w={};for(var E in c)E!=="ref"&&(w[E]=c[E])}else w=c;return oa(i),c=kf(n,i,o,w,p,f),E=jf(),n!==null&&!Yt?(Of(n,i,f),ir(n,i,f)):(tt&&E&&mf(i),i.flags|=1,sn(n,i,c,f),i.child)}function Zv(n,i,o,c,f){if(n===null){var p=o.type;return typeof p=="function"&&!hf(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,e_(n,i,p,c,f)):(n=ku(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!nm(n,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Dl,o(w,c)&&n.ref===i.ref)return ir(n,i,f)}return i.flags|=1,n=Js(p,c),n.ref=i.ref,n.return=i,i.child=n}function e_(n,i,o,c,f){if(n!==null){var p=n.memoizedProps;if(Dl(p,c)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=c=p,nm(n,f))(n.flags&131072)!==0&&(Yt=!0);else return i.lanes=n.lanes,ir(n,i,f)}return Yf(n,i,o,c,f)}function t_(n,i,o){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=p!==null?p.baseLanes|o:o,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~c}else i.childLanes=0,i.child=null;return n_(n,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(i,p!==null?p.cachePool:null),p!==null?ev(i,p):Nf(),qv(i);else return i.lanes=i.childLanes=536870912,n_(n,i,p!==null?p.baseLanes|o:o,o)}else p!==null?(Mu(i,p.cachePool),ev(i,p),$r(),i.memoizedState=null):(n!==null&&Mu(i,null),Nf(),$r());return sn(n,i,f,o),i.child}function n_(n,i,o,c){var f=xf();return f=f===null?null:{parent:qt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&Mu(i,null),Nf(),qv(i),n!==null&&Ll(n,i,c,!0),null}function Zu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Yf(n,i,o,c,f){return oa(i),o=kf(n,i,o,c,void 0,f),c=jf(),n!==null&&!Yt?(Of(n,i,f),ir(n,i,f)):(tt&&c&&mf(i),i.flags|=1,sn(n,i,o,f),i.child)}function s_(n,i,o,c,f,p){return oa(i),i.updateQueue=null,o=nv(i,c,o,f),tv(n),c=jf(),n!==null&&!Yt?(Of(n,i,p),ir(n,i,p)):(tt&&c&&mf(i),i.flags|=1,sn(n,i,o,p),i.child)}function r_(n,i,o,c,f){if(oa(i),i.stateNode===null){var p=to,w=o.contextType;typeof w=="object"&&w!==null&&(p=fn(w)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Kf,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Tf(i),w=o.contextType,p.context=typeof w=="object"&&w!==null?fn(w):to,p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Gf(i,o,w,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Kf.enqueueReplaceState(p,p.state,null),Gl(i,c,p,f),Fl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var E=i.memoizedProps,k=ua(o,E);p.props=k;var G=p.context,X=o.contextType;w=to,typeof X=="object"&&X!==null&&(w=fn(X));var ee=o.getDerivedStateFromProps;X=typeof ee=="function"||typeof p.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E||G!==w)&&Hv(i,p,c,w),Ur=!1;var K=i.memoizedState;p.state=K,Gl(i,c,p,f),Fl(),G=i.memoizedState,E||K!==G||Ur?(typeof ee=="function"&&(Gf(i,o,ee,c),G=i.memoizedState),(k=Ur||$v(i,o,k,c,K,G,w))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=G),p.props=c,p.state=G,p.context=w,c=k):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Sf(n,i),w=i.memoizedProps,X=ua(o,w),p.props=X,ee=i.pendingProps,K=p.context,G=o.contextType,k=to,typeof G=="object"&&G!==null&&(k=fn(G)),E=o.getDerivedStateFromProps,(G=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ee||K!==k)&&Hv(i,p,c,k),Ur=!1,K=i.memoizedState,p.state=K,Gl(i,c,p,f),Fl();var Q=i.memoizedState;w!==ee||K!==Q||Ur||n!==null&&n.dependencies!==null&&Du(n.dependencies)?(typeof E=="function"&&(Gf(i,o,E,c),Q=i.memoizedState),(X=Ur||$v(i,o,X,c,K,Q,k)||n!==null&&n.dependencies!==null&&Du(n.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Q,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Q,k)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Q),p.props=c,p.state=Q,p.context=k,c=X):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,Zu(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=ho(i,n.child,null,f),i.child=ho(i,null,o,f)):sn(n,i,o,f),i.memoizedState=p.state,n=i.child):n=ir(n,i,f),n}function i_(n,i,o,c){return Vl(),i.flags|=256,sn(n,i,o,c),i.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(n){return{baseLanes:n,cachePool:Gy()}}function Jf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Jn),n}function a_(n,i,o){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:($t.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(tt){if(f?qr(i):$r(),tt){var E=Et,k;if(k=E){e:{for(k=E,E=Is;k.nodeType!==8;){if(!E){E=null;break e}if(k=hs(k.nextSibling),k===null){E=null;break e}}E=k}E!==null?(i.memoizedState={dehydrated:E,treeContext:na!==null?{id:Zs,overflow:er}:null,retryLane:536870912,hydrationErrors:null},k=Dn(18,null,null,0),k.stateNode=E,k.return=i,i.child=k,En=i,Et=null,k=!0):k=!1}k||ia(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Pm(E)?i.lanes=32:i.lanes=536870912,null;rr(i)}return E=c.children,c=c.fallback,f?($r(),f=i.mode,E=eh({mode:"hidden",children:E},f),c=ta(c,f,o,null),E.return=i,c.return=i,E.sibling=c,i.child=E,f=i.child,f.memoizedState=Xf(o),f.childLanes=Jf(n,w,o),i.memoizedState=Wf,c):(qr(i),Zf(i,E))}if(k=n.memoizedState,k!==null&&(E=k.dehydrated,E!==null)){if(p)i.flags&256?(qr(i),i.flags&=-257,i=em(n,i,o)):i.memoizedState!==null?($r(),i.child=n.child,i.flags|=128,i=null):($r(),f=c.fallback,E=i.mode,c=eh({mode:"visible",children:c.children},E),f=ta(f,E,o,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,ho(i,n.child,null,o),c=i.child,c.memoizedState=Xf(o),c.childLanes=Jf(n,w,o),i.memoizedState=Wf,i=f);else if(qr(i),Pm(E)){if(w=E.nextSibling&&E.nextSibling.dataset,w)var G=w.dgst;w=G,c=Error(s(419)),c.stack="",c.digest=w,Ul({value:c,source:null,stack:null}),i=em(n,i,o)}else if(Yt||Ll(n,i,o,!1),w=(o&n.childLanes)!==0,Yt||w){if(w=ft,w!==null&&(c=o&-o,c=(c&42)!==0?1:yl(c),c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==k.retryLane))throw k.retryLane=c,eo(n,c),Ln(w,n,c),Xv;E.data==="$?"||vm(),i=em(n,i,o)}else E.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=k.treeContext,Et=hs(E.nextSibling),En=i,tt=!0,ra=null,Is=!1,n!==null&&(Yn[Wn++]=Zs,Yn[Wn++]=er,Yn[Wn++]=na,Zs=n.id,er=n.overflow,na=i),i=Zf(i,c.children),i.flags|=4096);return i}return f?($r(),f=c.fallback,E=i.mode,k=n.child,G=k.sibling,c=Js(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,G!==null?f=Js(G,f):(f=ta(f,E,o,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,E=n.child.memoizedState,E===null?E=Xf(o):(k=E.cachePool,k!==null?(G=qt._currentValue,k=k.parent!==G?{parent:G,pool:G}:k):k=Gy(),E={baseLanes:E.baseLanes|o,cachePool:k}),f.memoizedState=E,f.childLanes=Jf(n,w,o),i.memoizedState=Wf,c):(qr(i),o=n.child,n=o.sibling,o=Js(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function Zf(n,i){return i=eh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function eh(n,i){return n=Dn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function em(n,i,o){return ho(i,n.child,null,o),n=Zf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function o_(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),vf(n.return,i,o)}function tm(n,i,o,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=f)}function l_(n,i,o){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(sn(n,i,c.children,o),c=$t.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&o_(n,o,i);else if(n.tag===19)o_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(D($t,c),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Wu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),tm(i,!1,f,o,p);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Wu(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}tm(i,!0,o,null,p);break;case"together":tm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ir(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Qr|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Ll(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=Js(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Js(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function nm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Du(n)))}function L1(n,i,o){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),Vr(i,qt,n.memoizedState.cache),Vl();break;case 27:case 5:_s(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:Vr(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(qr(i),i.flags|=128,null):(o&i.child.childLanes)!==0?a_(n,i,o):(qr(i),n=ir(n,i,o),n!==null?n.sibling:null);qr(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Ll(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return l_(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),D($t,$t.current),c)break;return null;case 22:case 23:return i.lanes=0,t_(n,i,o);case 24:Vr(i,qt,n.memoizedState.cache)}return ir(n,i,o)}function c_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Yt=!0;else{if(!nm(n,o)&&(i.flags&128)===0)return Yt=!1,L1(n,i,o);Yt=(n.flags&131072)!==0}else Yt=!1,tt&&(i.flags&1048576)!==0&&Ly(i,Ou,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")hf(c)?(n=ua(c,n),i.tag=1,i=r_(null,i,c,n,o)):(i.tag=0,i=Yf(null,i,c,n,o));else{if(c!=null){if(f=c.$$typeof,f===le){i.tag=11,i=Jv(null,i,c,n,o);break e}else if(f===C){i.tag=14,i=Zv(null,i,c,n,o);break e}}throw i=We(c)||c,Error(s(306,i,""))}}return i;case 0:return Yf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=ua(c,i.pendingProps),r_(n,i,c,f,o);case 3:e:{if(et(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Sf(n,i),Gl(i,c,null,o);var w=i.memoizedState;if(c=w.cache,Vr(i,qt,c),c!==p.cache&&_f(i,[qt],o,!0),Fl(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=i_(n,i,c,o);break e}else if(c!==f){f=Kn(Error(s(424)),i),Ul(f),i=i_(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Et=hs(n.firstChild),En=i,tt=!0,ra=null,Is=!0,o=Bv(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Vl(),c===f){i=ir(n,i,o);break e}sn(n,i,c,o)}i=i.child}return i;case 26:return Zu(n,i),n===null?(o=f0(i.type,null,i.pendingProps,null))?i.memoizedState=o:tt||(o=i.type,n=i.pendingProps,c=mh(ve.current).createElement(o),c[At]=i,c[nn]=n,an(c,o,n),Rt(c),i.stateNode=c):i.memoizedState=f0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return _s(i),n===null&&tt&&(c=i.stateNode=u0(i.type,i.pendingProps,ve.current),En=i,Is=!0,f=Et,Jr(i.type)?(Mm=f,Et=hs(c.firstChild)):Et=f),sn(n,i,i.pendingProps.children,o),Zu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&tt&&((f=c=Et)&&(c=fS(c,i.type,i.pendingProps,Is),c!==null?(i.stateNode=c,En=i,Et=hs(c.firstChild),Is=!1,f=!0):f=!1),f||ia(i)),_s(i),f=i.type,p=i.pendingProps,w=n!==null?n.memoizedProps:null,c=p.children,jm(f,p)?c=null:w!==null&&jm(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=kf(n,i,k1,null,null,o),mc._currentValue=f),Zu(n,i),sn(n,i,c,o),i.child;case 6:return n===null&&tt&&((n=o=Et)&&(o=mS(o,i.pendingProps,Is),o!==null?(i.stateNode=o,En=i,Et=null,n=!0):n=!1),n||ia(i)),null;case 13:return a_(n,i,o);case 4:return et(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ho(i,null,c,o):sn(n,i,c,o),i.child;case 11:return Jv(n,i,i.type,i.pendingProps,o);case 7:return sn(n,i,i.pendingProps,o),i.child;case 8:return sn(n,i,i.pendingProps.children,o),i.child;case 12:return sn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Vr(i,i.type,c.value),sn(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,oa(i),f=fn(f),c=c(f),i.flags|=1,sn(n,i,c,o),i.child;case 14:return Zv(n,i,i.type,i.pendingProps,o);case 15:return e_(n,i,i.type,i.pendingProps,o);case 19:return l_(n,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},n===null?(o=eh(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Js(n.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return t_(n,i,o);case 24:return oa(i),c=fn(qt),n===null?(f=xf(),f===null&&(f=ft,p=bf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:c,cache:f},Tf(i),Vr(i,qt,f)):((n.lanes&o)!==0&&(Sf(n,i),Gl(i,null,null,o),Fl()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Vr(i,qt,c)):(c=p.cache,Vr(i,qt,c),c!==f.cache&&_f(i,[qt],o,!0))),sn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ar(n){n.flags|=4}function u_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!v0(i)){if(i=Xn.current,i!==null&&((Xe&4194048)===Xe?ks!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||i!==ks))throw $l=Ef,Ky;n.flags|=8192}}function th(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Tr():536870912,n.lanes|=i,po|=i)}function Zl(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function wt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function z1(n,i,o){var c=i.pendingProps;switch(gf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(i),null;case 1:return wt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),nr(qt),un(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ml(i)?ar(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qy())),wt(i),null;case 26:return o=i.memoizedState,n===null?(ar(i),o!==null?(wt(i),u_(i,o)):(wt(i),i.flags&=-16777217)):o?o!==n.memoizedState?(ar(i),wt(i),u_(i,o)):(wt(i),i.flags&=-16777217):(n.memoizedProps!==c&&ar(i),wt(i),i.flags&=-16777217),null;case 27:bs(i),o=ve.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ar(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return wt(i),null}n=ae.current,Ml(i)?zy(i):(n=u0(f,c,o),i.stateNode=n,ar(i))}return wt(i),null;case 5:if(bs(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ar(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return wt(i),null}if(n=ae.current,Ml(i))zy(i);else{switch(f=mh(ve.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}n[At]=i,n[nn]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(an(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ar(i)}}return wt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ar(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=ve.current,Ml(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=En,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[At]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||s0(n.nodeValue,o)),n||ia(i)}else n=mh(n).createTextNode(c),n[At]=i,i.stateNode=n}return wt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ml(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[At]=i}else Vl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),f=!1}else f=qy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(rr(i),i):(rr(i),null)}if(rr(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),th(i,i.updateQueue),wt(i),null;case 4:return un(),n===null&&Rm(i.stateNode.containerInfo),wt(i),null;case 10:return nr(i.type),wt(i),null;case 19:if(he($t),f=i.memoizedState,f===null)return wt(i),null;if(c=(i.flags&128)!==0,p=f.rendering,p===null)if(c)Zl(f,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Wu(n),p!==null){for(i.flags|=128,Zl(f,!1),n=p.updateQueue,i.updateQueue=n,th(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Uy(o,n),o=o.sibling;return D($t,$t.current&1|2),i.child}n=n.sibling}f.tail!==null&&Tn()>rh&&(i.flags|=128,c=!0,Zl(f,!1),i.lanes=4194304)}else{if(!c)if(n=Wu(p),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,th(i,n),Zl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!tt)return wt(i),null}else 2*Tn()-f.renderingStartTime>rh&&o!==536870912&&(i.flags|=128,c=!0,Zl(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Tn(),i.sibling=null,n=$t.current,D($t,c?n&1|2:n&1),i):(wt(i),null);case 22:case 23:return rr(i),Cf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(wt(i),i.subtreeFlags&6&&(i.flags|=8192)):wt(i),o=i.updateQueue,o!==null&&th(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&he(la),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),nr(qt),wt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function B1(n,i){switch(gf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return nr(qt),un(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return bs(i),null;case 13:if(rr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Vl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he($t),null;case 4:return un(),null;case 10:return nr(i.type),null;case 22:case 23:return rr(i),Cf(),n!==null&&he(la),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return nr(qt),null;case 25:return null;default:return null}}function h_(n,i){switch(gf(i),i.tag){case 3:nr(qt),un();break;case 26:case 27:case 5:bs(i);break;case 4:un();break;case 13:rr(i);break;case 19:he($t);break;case 10:nr(i.type);break;case 22:case 23:rr(i),Cf(),n!==null&&he(la);break;case 24:nr(qt)}}function ec(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==f)}}catch(E){ht(i,i.return,E)}}function Hr(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var w=c.inst,E=w.destroy;if(E!==void 0){w.destroy=void 0,f=i;var k=o,G=E;try{G()}catch(X){ht(f,k,X)}}}c=c.next}while(c!==p)}}catch(X){ht(i,i.return,X)}}function d_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Zy(i,o)}catch(c){ht(n,n.return,c)}}}function f_(n,i,o){o.props=ua(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ht(n,i,c)}}function tc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){ht(n,i,f)}}function js(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){ht(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ht(n,i,f)}else o.current=null}function m_(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){ht(n,n.return,f)}}function sm(n,i,o){try{var c=n.stateNode;lS(c,n.type,o,i),c[nn]=i}catch(f){ht(n,n.return,f)}}function g_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Jr(n.type)||n.tag===4}function rm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||g_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Jr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function im(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=fh));else if(c!==4&&(c===27&&Jr(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(im(n,i,o),n=n.sibling;n!==null;)im(n,i,o),n=n.sibling}function nh(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Jr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(nh(n,i,o),n=n.sibling;n!==null;)nh(n,i,o),n=n.sibling}function p_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);an(i,c,o),i[At]=n,i[nn]=o}catch(p){ht(n,n.return,p)}}var or=!1,It=!1,am=!1,y_=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function q1(n,i){if(n=n.containerInfo,Im=bh,n=Ny(n),sf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,E=-1,k=-1,G=0,X=0,ee=n,K=null;t:for(;;){for(var Q;ee!==o||f!==0&&ee.nodeType!==3||(E=w+f),ee!==p||c!==0&&ee.nodeType!==3||(k=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(Q=ee.firstChild)!==null;)K=ee,ee=Q;for(;;){if(ee===n)break t;if(K===o&&++G===f&&(E=w),K===p&&++X===c&&(k=w),(Q=ee.nextSibling)!==null)break;ee=K,K=ee.parentNode}ee=Q}o=E===-1||k===-1?null:{start:E,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(km={focusedElem:n,selectionRange:o},bh=!1,Wt=i;Wt!==null;)if(i=Wt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Wt=n;else for(;Wt!==null;){switch(i=Wt,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Ie=ua(o.type,f,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(Ie,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){ht(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Dm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Wt=n;break}Wt=i.return}}function v_(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Fr(n,o),c&4&&ec(5,o);break;case 1:if(Fr(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){ht(o,o.return,w)}else{var f=ua(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){ht(o,o.return,w)}}c&64&&d_(o),c&512&&tc(o,o.return);break;case 3:if(Fr(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Zy(n,i)}catch(w){ht(o,o.return,w)}}break;case 27:i===null&&c&4&&p_(o);case 26:case 5:Fr(n,o),i===null&&c&4&&m_(o),c&512&&tc(o,o.return);break;case 12:Fr(n,o);break;case 13:Fr(n,o),c&4&&w_(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=X1.bind(null,o),gS(n,o))));break;case 22:if(c=o.memoizedState!==null||or,!c){i=i!==null&&i.memoizedState!==null||It,f=or;var p=It;or=c,(It=i)&&!p?Gr(n,o,(o.subtreeFlags&8772)!==0):Fr(n,o),or=f,It=p}break;case 30:break;default:Fr(n,o)}}function __(n){var i=n.alternate;i!==null&&(n.alternate=null,__(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&La(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vt=null,An=!1;function lr(n,i,o){for(o=o.child;o!==null;)b_(n,i,o),o=o.sibling}function b_(n,i,o){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(wr,o)}catch{}switch(o.tag){case 26:It||js(o,i),lr(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:It||js(o,i);var c=vt,f=An;Jr(o.type)&&(vt=o.stateNode,An=!1),lr(n,i,o),uc(o.stateNode),vt=c,An=f;break;case 5:It||js(o,i);case 6:if(c=vt,f=An,vt=null,lr(n,i,o),vt=c,An=f,vt!==null)if(An)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(p){ht(o,i,p)}else try{vt.removeChild(o.stateNode)}catch(p){ht(o,i,p)}break;case 18:vt!==null&&(An?(n=vt,l0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),vc(n)):l0(vt,o.stateNode));break;case 4:c=vt,f=An,vt=o.stateNode.containerInfo,An=!0,lr(n,i,o),vt=c,An=f;break;case 0:case 11:case 14:case 15:It||Hr(2,o,i),It||Hr(4,o,i),lr(n,i,o);break;case 1:It||(js(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&f_(o,i,c)),lr(n,i,o);break;case 21:lr(n,i,o);break;case 22:It=(c=It)||o.memoizedState!==null,lr(n,i,o),It=c;break;default:lr(n,i,o)}}function w_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{vc(n)}catch(o){ht(i,i.return,o)}}function $1(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new y_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new y_),i;default:throw Error(s(435,n.tag))}}function om(n,i){var o=$1(n);i.forEach(function(c){var f=J1.bind(null,n,c);o.has(c)||(o.add(c),c.then(f,f))})}function Pn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],p=n,w=i,E=w;e:for(;E!==null;){switch(E.tag){case 27:if(Jr(E.type)){vt=E.stateNode,An=!1;break e}break;case 5:vt=E.stateNode,An=!1;break e;case 3:case 4:vt=E.stateNode.containerInfo,An=!0;break e}E=E.return}if(vt===null)throw Error(s(160));b_(p,w,f),vt=null,An=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)x_(i,n),i=i.sibling}var us=null;function x_(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pn(i,n),Mn(n),c&4&&(Hr(3,n,n.return),ec(3,n),Hr(5,n,n.return));break;case 1:Pn(i,n),Mn(n),c&512&&(It||o===null||js(o,o.return)),c&64&&or&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=us;if(Pn(i,n),Mn(n),c&512&&(It||o===null||js(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Rr]||p[At]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),an(p,c,o),p[At]=n,Rt(p),c=p;break e;case"link":var w=p0("link","href",f).get(c+(o.href||""));if(w){for(var E=0;E<w.length;E++)if(p=w[E],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(E,1);break t}}p=f.createElement(c),an(p,c,o),f.head.appendChild(p);break;case"meta":if(w=p0("meta","content",f).get(c+(o.content||""))){for(E=0;E<w.length;E++)if(p=w[E],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(E,1);break t}}p=f.createElement(c),an(p,c,o),f.head.appendChild(p);break;default:throw Error(s(468,c))}p[At]=n,Rt(p),c=p}n.stateNode=c}else y0(f,n.type,n.stateNode);else n.stateNode=g0(f,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?y0(f,n.type,n.stateNode):g0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&sm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Pn(i,n),Mn(n),c&512&&(It||o===null||js(o,o.return)),o!==null&&c&4&&sm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Pn(i,n),Mn(n),c&512&&(It||o===null||js(o,o.return)),n.flags&32){f=n.stateNode;try{Fn(f,"")}catch(Q){ht(n,n.return,Q)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,sm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(am=!0);break;case 6:if(Pn(i,n),Mn(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Q){ht(n,n.return,Q)}}break;case 3:if(yh=null,f=us,us=gh(i.containerInfo),Pn(i,n),us=f,Mn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{vc(i.containerInfo)}catch(Q){ht(n,n.return,Q)}am&&(am=!1,E_(n));break;case 4:c=us,us=gh(n.stateNode.containerInfo),Pn(i,n),Mn(n),us=c;break;case 12:Pn(i,n),Mn(n);break;case 13:Pn(i,n),Mn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fm=Tn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,om(n,c)));break;case 22:f=n.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,G=or,X=It;if(or=G||f,It=X||k,Pn(i,n),It=X,or=G,Mn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||k||or||It||ha(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(p=k.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=k.stateNode;var ee=k.memoizedProps.style,K=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){ht(k,k.return,Q)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(Q){ht(k,k.return,Q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,om(n,o))));break;case 19:Pn(i,n),Mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,om(n,c)));break;case 30:break;case 21:break;default:Pn(i,n),Mn(n)}}function Mn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(g_(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,p=rm(n);nh(n,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(Fn(w,""),o.flags&=-33);var E=rm(n);nh(n,E,w);break;case 3:case 4:var k=o.stateNode.containerInfo,G=rm(n);im(n,G,k);break;default:throw Error(s(161))}}catch(X){ht(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function E_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;E_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Fr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)v_(n,i.alternate,i),i=i.sibling}function ha(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Hr(4,i,i.return),ha(i);break;case 1:js(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&f_(i,i.return,o),ha(i);break;case 27:uc(i.stateNode);case 26:case 5:js(i,i.return),ha(i);break;case 22:i.memoizedState===null&&ha(i);break;case 30:ha(i);break;default:ha(i)}n=n.sibling}}function Gr(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:Gr(f,p,o),ec(4,p);break;case 1:if(Gr(f,p,o),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){ht(c,c.return,G)}if(c=p,f=c.updateQueue,f!==null){var E=c.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)Jy(k[f],E)}catch(G){ht(c,c.return,G)}}o&&w&64&&d_(p),tc(p,p.return);break;case 27:p_(p);case 26:case 5:Gr(f,p,o),o&&c===null&&w&4&&m_(p),tc(p,p.return);break;case 12:Gr(f,p,o);break;case 13:Gr(f,p,o),o&&w&4&&w_(f,p);break;case 22:p.memoizedState===null&&Gr(f,p,o),tc(p,p.return);break;case 30:break;default:Gr(f,p,o)}i=i.sibling}}function lm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&zl(o))}function cm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&zl(n))}function Os(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)T_(n,i,o,c),i=i.sibling}function T_(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Os(n,i,o,c),f&2048&&ec(9,i);break;case 1:Os(n,i,o,c);break;case 3:Os(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&zl(n)));break;case 12:if(f&2048){Os(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,w=p.id,E=p.onPostCommit;typeof E=="function"&&E(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){ht(i,i.return,k)}}else Os(n,i,o,c);break;case 13:Os(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?Os(n,i,o,c):nc(n,i):p._visibility&2?Os(n,i,o,c):(p._visibility|=2,fo(n,i,o,c,(i.subtreeFlags&10256)!==0)),f&2048&&lm(w,i);break;case 24:Os(n,i,o,c),f&2048&&cm(i.alternate,i);break;default:Os(n,i,o,c)}}function fo(n,i,o,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,w=i,E=o,k=c,G=w.flags;switch(w.tag){case 0:case 11:case 15:fo(p,w,E,k,f),ec(8,w);break;case 23:break;case 22:var X=w.stateNode;w.memoizedState!==null?X._visibility&2?fo(p,w,E,k,f):nc(p,w):(X._visibility|=2,fo(p,w,E,k,f)),f&&G&2048&&lm(w.alternate,w);break;case 24:fo(p,w,E,k,f),f&&G&2048&&cm(w.alternate,w);break;default:fo(p,w,E,k,f)}i=i.sibling}}function nc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:nc(o,c),f&2048&&lm(c.alternate,c);break;case 24:nc(o,c),f&2048&&cm(c.alternate,c);break;default:nc(o,c)}i=i.sibling}}var sc=8192;function mo(n){if(n.subtreeFlags&sc)for(n=n.child;n!==null;)S_(n),n=n.sibling}function S_(n){switch(n.tag){case 26:mo(n),n.flags&sc&&n.memoizedState!==null&&NS(us,n.memoizedState,n.memoizedProps);break;case 5:mo(n);break;case 3:case 4:var i=us;us=gh(n.stateNode.containerInfo),mo(n),us=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=sc,sc=16777216,mo(n),sc=i):mo(n));break;default:mo(n)}}function A_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function rc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Wt=c,N_(c,n)}A_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)R_(n),n=n.sibling}function R_(n){switch(n.tag){case 0:case 11:case 15:rc(n),n.flags&2048&&Hr(9,n,n.return);break;case 3:rc(n);break;case 12:rc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,sh(n)):rc(n);break;default:rc(n)}}function sh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Wt=c,N_(c,n)}A_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Hr(8,i,i.return),sh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,sh(i));break;default:sh(i)}n=n.sibling}}function N_(n,i){for(;Wt!==null;){var o=Wt;switch(o.tag){case 0:case 11:case 15:Hr(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:zl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Wt=c;else e:for(o=n;Wt!==null;){c=Wt;var f=c.sibling,p=c.return;if(__(c),c===o){Wt=null;break e}if(f!==null){f.return=p,Wt=f;break e}Wt=p}}}var H1={getCacheForType:function(n){var i=fn(qt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},F1=typeof WeakMap=="function"?WeakMap:Map,rt=0,ft=null,Fe=null,Xe=0,it=0,Vn=null,Kr=!1,go=!1,um=!1,cr=0,Tt=0,Qr=0,da=0,hm=0,Jn=0,po=0,ic=null,Rn=null,dm=!1,fm=0,rh=1/0,ih=null,Yr=null,rn=0,Wr=null,yo=null,vo=0,mm=0,gm=null,C_=null,ac=0,pm=null;function Un(){if((rt&2)!==0&&Xe!==0)return Xe&-Xe;if(V.T!==null){var n=ro;return n!==0?n:Em()}return Fs()}function I_(){Jn===0&&(Jn=(Xe&536870912)===0||tt?pl():536870912);var n=Xn.current;return n!==null&&(n.flags|=32),Jn}function Ln(n,i,o){(n===ft&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(_o(n,0),Xr(n,Xe,Jn,!1)),St(n,o),((rt&2)===0||n!==ft)&&(n===ft&&((rt&2)===0&&(da|=o),Tt===4&&Xr(n,Xe,Jn,!1)),Ds(n))}function k_(n,i,o){if((rt&6)!==0)throw Error(s(327));var c=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Er(n,i),f=c?Q1(n,i):_m(n,i,!0),p=c;do{if(f===0){go&&!c&&Xr(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!G1(o)){f=_m(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var E=n;f=ic;var k=E.current.memoizedState.isDehydrated;if(k&&(_o(E,w).flags|=256),w=_m(E,w,!1),w!==2){if(um&&!k){E.errorRecoveryDisabledLanes|=p,da|=p,f=4;break e}p=Rn,Rn=f,p!==null&&(Rn===null?Rn=p:Rn.push.apply(Rn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){_o(n,0),Xr(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Xr(c,i,Jn,!Kr);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=fm+300-Tn(),10<f)){if(Xr(c,i,Jn,!Kr),$n(c,0,!0)!==0)break e;c.timeoutHandle=a0(j_.bind(null,c,o,Rn,ih,dm,i,Jn,da,po,Kr,p,2,-0,0),f);break e}j_(c,o,Rn,ih,dm,i,Jn,da,po,Kr,p,0,-0,0)}}break}while(!0);Ds(n)}function j_(n,i,o,c,f,p,w,E,k,G,X,ee,K,Q){if(n.timeoutHandle=-1,ee=i.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(fc={stylesheets:null,count:0,unsuspend:RS},S_(i),ee=CS(),ee!==null)){n.cancelPendingCommit=ee(L_.bind(null,n,i,p,o,c,f,w,E,k,X,1,K,Q)),Xr(n,p,w,!G);return}L_(n,i,p,o,c,f,w,E,k)}function G1(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!On(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xr(n,i,o,c){i&=~hm,i&=~da,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-_n(f),w=1<<p;c[p]=-1,f&=~w}o!==0&&Sr(n,o,i)}function ah(){return(rt&6)===0?(oc(0),!1):!0}function ym(){if(Fe!==null){if(it===0)var n=Fe.return;else n=Fe,tr=aa=null,Df(n),uo=null,Xl=0,n=Fe;for(;n!==null;)h_(n.alternate,n),n=n.return;Fe=null}}function _o(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,uS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ym(),ft=n,Fe=o=Js(n.current,null),Xe=i,it=0,Vn=null,Kr=!1,go=Er(n,i),um=!1,po=Jn=hm=da=Qr=Tt=0,Rn=ic=null,dm=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-_n(c),p=1<<f;i|=n[f],c&=~p}return cr=i,Nu(),o}function O_(n,i){Be=null,V.H=Ku,i===ql||i===Vu?(i=Wy(),it=3):i===Ky?(i=Wy(),it=4):it=i===Xv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Fe===null&&(Tt=1,Ju(n,Kn(i,n.current)))}function D_(){var n=V.H;return V.H=Ku,n===null?Ku:n}function P_(){var n=V.A;return V.A=H1,n}function vm(){Tt=4,Kr||(Xe&4194048)!==Xe&&Xn.current!==null||(go=!0),(Qr&134217727)===0&&(da&134217727)===0||ft===null||Xr(ft,Xe,Jn,!1)}function _m(n,i,o){var c=rt;rt|=2;var f=D_(),p=P_();(ft!==n||Xe!==i)&&(ih=null,_o(n,i)),i=!1;var w=Tt;e:do try{if(it!==0&&Fe!==null){var E=Fe,k=Vn;switch(it){case 8:ym(),w=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(i=!0);var G=it;if(it=0,Vn=null,bo(n,E,k,G),o&&go){w=0;break e}break;default:G=it,it=0,Vn=null,bo(n,E,k,G)}}K1(),w=Tt;break}catch(X){O_(n,X)}while(!0);return i&&n.shellSuspendCounter++,tr=aa=null,rt=c,V.H=f,V.A=p,Fe===null&&(ft=null,Xe=0,Nu()),w}function K1(){for(;Fe!==null;)M_(Fe)}function Q1(n,i){var o=rt;rt|=2;var c=D_(),f=P_();ft!==n||Xe!==i?(ih=null,rh=Tn()+500,_o(n,i)):go=Er(n,i);e:do try{if(it!==0&&Fe!==null){i=Fe;var p=Vn;t:switch(it){case 1:it=0,Vn=null,bo(n,i,p,1);break;case 2:case 9:if(Qy(p)){it=0,Vn=null,V_(i);break}i=function(){it!==2&&it!==9||ft!==n||(it=7),Ds(n)},p.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Qy(p)?(it=0,Vn=null,V_(i)):(it=0,Vn=null,bo(n,i,p,7));break;case 5:var w=null;switch(Fe.tag){case 26:w=Fe.memoizedState;case 5:case 27:var E=Fe;if(!w||v0(w)){it=0,Vn=null;var k=E.sibling;if(k!==null)Fe=k;else{var G=E.return;G!==null?(Fe=G,oh(G)):Fe=null}break t}}it=0,Vn=null,bo(n,i,p,5);break;case 6:it=0,Vn=null,bo(n,i,p,6);break;case 8:ym(),Tt=6;break e;default:throw Error(s(462))}}Y1();break}catch(X){O_(n,X)}while(!0);return tr=aa=null,V.H=c,V.A=f,rt=o,Fe!==null?0:(ft=null,Xe=0,Nu(),Tt)}function Y1(){for(;Fe!==null&&!Gd();)M_(Fe)}function M_(n){var i=c_(n.alternate,n,cr);n.memoizedProps=n.pendingProps,i===null?oh(n):Fe=i}function V_(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=s_(o,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=s_(o,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Df(i);default:h_(o,i),i=Fe=Uy(i,cr),i=c_(o,i,cr)}n.memoizedProps=n.pendingProps,i===null?oh(n):Fe=i}function bo(n,i,o,c){tr=aa=null,Df(i),uo=null,Xl=0;var f=i.return;try{if(U1(n,f,i,o,Xe)){Tt=1,Ju(n,Kn(o,n.current)),Fe=null;return}}catch(p){if(f!==null)throw Fe=f,p;Tt=1,Ju(n,Kn(o,n.current)),Fe=null;return}i.flags&32768?(tt||c===1?n=!0:go||(Xe&536870912)!==0?n=!1:(Kr=n=!0,(c===2||c===9||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),U_(i,n)):oh(i)}function oh(n){var i=n;do{if((i.flags&32768)!==0){U_(i,Kr);return}n=i.return;var o=z1(i.alternate,i,cr);if(o!==null){Fe=o;return}if(i=i.sibling,i!==null){Fe=i;return}Fe=i=n}while(i!==null);Tt===0&&(Tt=5)}function U_(n,i){do{var o=B1(n.alternate,n);if(o!==null){o.flags&=32767,Fe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Fe=n;return}Fe=n=o}while(n!==null);Tt=6,Fe=null}function L_(n,i,o,c,f,p,w,E,k){n.cancelPendingCommit=null;do lh();while(rn!==0);if((rt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=cf,hu(n,o,p,w,E,k),n===ft&&(Fe=ft=null,Xe=0),yo=i,Wr=n,vo=o,mm=p,gm=f,C_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Z1(Hs,function(){return H_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=V.T,V.T=null,f=ie.p,ie.p=2,w=rt,rt|=4;try{q1(n,i,o)}finally{rt=w,ie.p=f,V.T=c}}rn=1,z_(),B_(),q_()}}function z_(){if(rn===1){rn=0;var n=Wr,i=yo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var c=ie.p;ie.p=2;var f=rt;rt|=4;try{x_(i,n);var p=km,w=Ny(n.containerInfo),E=p.focusedElem,k=p.selectionRange;if(w!==E&&E&&E.ownerDocument&&Ry(E.ownerDocument.documentElement,E)){if(k!==null&&sf(E)){var G=k.start,X=k.end;if(X===void 0&&(X=G),"selectionStart"in E)E.selectionStart=G,E.selectionEnd=Math.min(X,E.value.length);else{var ee=E.ownerDocument||document,K=ee&&ee.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Ie=E.textContent.length,Ae=Math.min(k.start,Ie),ct=k.end===void 0?Ae:Math.min(k.end,Ie);!Q.extend&&Ae>ct&&(w=ct,ct=Ae,Ae=w);var q=Ay(E,Ae),U=Ay(E,ct);if(q&&U&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var H=ee.createRange();H.setStart(q.node,q.offset),Q.removeAllRanges(),Ae>ct?(Q.addRange(H),Q.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),Q.addRange(H))}}}}for(ee=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&ee.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var J=ee[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}bh=!!Im,km=Im=null}finally{rt=f,ie.p=c,V.T=o}}n.current=i,rn=2}}function B_(){if(rn===2){rn=0;var n=Wr,i=yo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var c=ie.p;ie.p=2;var f=rt;rt|=4;try{v_(n,i.alternate,i)}finally{rt=f,ie.p=c,V.T=o}}rn=3}}function q_(){if(rn===4||rn===3){rn=0,ml();var n=Wr,i=yo,o=vo,c=C_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?rn=5:(rn=0,yo=Wr=null,$_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Yr=null),vl(o),i=i.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(wr,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=V.T,f=ie.p,ie.p=2,V.T=null;try{for(var p=n.onRecoverableError,w=0;w<c.length;w++){var E=c[w];p(E.value,{componentStack:E.stack})}}finally{V.T=i,ie.p=f}}(vo&3)!==0&&lh(),Ds(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===pm?ac++:(ac=0,pm=n):ac=0,oc(0)}}function $_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,zl(i)))}function lh(n){return z_(),B_(),q_(),H_()}function H_(){if(rn!==5)return!1;var n=Wr,i=mm;mm=0;var o=vl(vo),c=V.T,f=ie.p;try{ie.p=32>o?32:o,V.T=null,o=gm,gm=null;var p=Wr,w=vo;if(rn=0,yo=Wr=null,vo=0,(rt&6)!==0)throw Error(s(331));var E=rt;if(rt|=4,R_(p.current),T_(p,p.current,w,o),rt=E,oc(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(wr,p)}catch{}return!0}finally{ie.p=f,V.T=c,$_(n,i)}}function F_(n,i,o){i=Kn(o,i),i=Qf(n.stateNode,i,2),n=zr(n,i,2),n!==null&&(St(n,2),Ds(n))}function ht(n,i,o){if(n.tag===3)F_(n,n,o);else for(;i!==null;){if(i.tag===3){F_(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yr===null||!Yr.has(c))){n=Kn(o,n),o=Yv(2),c=zr(i,o,2),c!==null&&(Wv(o,c,i,n),St(c,2),Ds(c));break}}i=i.return}}function bm(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new F1;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(um=!0,f.add(o),n=W1.bind(null,n,i,o),i.then(n,n))}function W1(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ft===n&&(Xe&o)===o&&(Tt===4||Tt===3&&(Xe&62914560)===Xe&&300>Tn()-fm?(rt&2)===0&&_o(n,0):hm|=o,po===Xe&&(po=0)),Ds(n)}function G_(n,i){i===0&&(i=Tr()),n=eo(n,i),n!==null&&(St(n,i),Ds(n))}function X1(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),G_(n,o)}function J1(n,i){var o=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),G_(n,o)}function Z1(n,i){return ki(n,i)}var ch=null,wo=null,wm=!1,uh=!1,xm=!1,fa=0;function Ds(n){n!==wo&&n.next===null&&(wo===null?ch=wo=n:wo=wo.next=n),uh=!0,wm||(wm=!0,tS())}function oc(n,i){if(!xm&&uh){xm=!0;do for(var o=!1,c=ch;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var w=c.suspendedLanes,E=c.pingedLanes;p=(1<<31-_n(42|n)+1)-1,p&=f&~(w&~E),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,W_(c,p))}else p=Xe,p=$n(c,c===ft?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Er(c,p)||(o=!0,W_(c,p));c=c.next}while(o);xm=!1}}function eS(){K_()}function K_(){uh=wm=!1;var n=0;fa!==0&&(cS()&&(n=fa),fa=0);for(var i=Tn(),o=null,c=ch;c!==null;){var f=c.next,p=Q_(c,i);p===0?(c.next=null,o===null?ch=f:o.next=f,f===null&&(wo=o)):(o=c,(n!==0||(p&3)!==0)&&(uh=!0)),c=f}oc(n)}function Q_(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-_n(p),E=1<<w,k=f[w];k===-1?((E&o)===0||(E&c)!==0)&&(f[w]=Va(E,i)):k<=i&&(n.expiredLanes|=E),p&=~E}if(i=ft,o=Xe,o=$n(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(it===2||it===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ma(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Er(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Ma(c),vl(o)){case 2:case 8:o=Kt;break;case 32:o=Hs;break;case 268435456:o=gl;break;default:o=Hs}return c=Y_.bind(null,n),o=ki(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Ma(c),n.callbackPriority=2,n.callbackNode=null,2}function Y_(n,i){if(rn!==0&&rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(lh()&&n.callbackNode!==o)return null;var c=Xe;return c=$n(n,n===ft?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(k_(n,c,i),Q_(n,Tn()),n.callbackNode!=null&&n.callbackNode===o?Y_.bind(null,n):null)}function W_(n,i){if(lh())return null;k_(n,i,!0)}function tS(){hS(function(){(rt&6)!==0?ki(zt,eS):K_()})}function Em(){return fa===0&&(fa=pl()),fa}function X_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:is(""+n)}function J_(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function nS(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var p=X_((f[nn]||null).action),w=c.submitter;w&&(i=(i=w[nn]||null)?X_(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var E=new Gi("action","action",null,c,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fa!==0){var k=w?J_(f,w):new FormData(f);$f(o,{pending:!0,data:k,method:f.method,action:p},null,k)}}else typeof p=="function"&&(E.preventDefault(),k=w?J_(f,w):new FormData(f),$f(o,{pending:!0,data:k,method:f.method,action:p},p,k))},currentTarget:f}]})}}for(var Tm=0;Tm<lf.length;Tm++){var Sm=lf[Tm],sS=Sm.toLowerCase(),rS=Sm[0].toUpperCase()+Sm.slice(1);cs(sS,"on"+rS)}cs(ky,"onAnimationEnd"),cs(jy,"onAnimationIteration"),cs(Oy,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(w1,"onTransitionRun"),cs(x1,"onTransitionStart"),cs(E1,"onTransitionCancel"),cs(Dy,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function Z_(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var E=c[w],k=E.instance,G=E.currentTarget;if(E=E.listener,k!==p&&f.isPropagationStopped())break e;p=E,f.currentTarget=G;try{p(f)}catch(X){Xu(X)}f.currentTarget=null,p=k}else for(w=0;w<c.length;w++){if(E=c[w],k=E.instance,G=E.currentTarget,E=E.listener,k!==p&&f.isPropagationStopped())break e;p=E,f.currentTarget=G;try{p(f)}catch(X){Xu(X)}f.currentTarget=null,p=k}}}}function Ge(n,i){var o=i[Oi];o===void 0&&(o=i[Oi]=new Set);var c=n+"__bubble";o.has(c)||(e0(i,n,2,!1),o.add(c))}function Am(n,i,o){var c=0;i&&(c|=4),e0(o,n,c,i)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Rm(n){if(!n[hh]){n[hh]=!0,du.forEach(function(o){o!=="selectionchange"&&(iS.has(o)||Am(o,!1,n),Am(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[hh]||(i[hh]=!0,Am("selectionchange",!1,i))}}function e0(n,i,o,c){switch(T0(i)){case 2:var f=jS;break;case 8:f=OS;break;default:f=Bm}o=f.bind(null,i,o,n),f=void 0,!Ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Nm(n,i,o,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var E=c.stateNode.containerInfo;if(E===f)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;E!==null;){if(w=Es(E),w===null)return;if(k=w.tag,k===5||k===6||k===26||k===27){c=p=w;continue e}E=E.parentNode}}c=c.return}$i(function(){var G=p,X=Sl(o),ee=[];e:{var K=Py.get(n);if(K!==void 0){var Q=Gi,Ie=n;switch(n){case"keypress":if(Hi(o)===0)break e;case"keydown":case"keyup":Q=Wa;break;case"focusin":Ie="focus",Q=Ka;break;case"focusout":Ie="blur",Q=Ka;break;case"beforeblur":case"afterblur":Q=Ka;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Mr;break;case ky:case jy:case Oy:Q=Rl;break;case Dy:Q=_;break;case"scroll":case"scrollend":Q=Qi;break;case"wheel":Q=S;break;case"copy":case"cut":case"paste":Q=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Il;break;case"toggle":case"beforetoggle":Q=Y}var Ae=(i&4)!==0,ct=!Ae&&(n==="scroll"||n==="scrollend"),q=Ae?K!==null?K+"Capture":null:K;Ae=[];for(var U=G,H;U!==null;){var J=U;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||q===null||(J=Dr(U,q),J!=null&&Ae.push(cc(U,J,H))),ct)break;U=U.return}0<Ae.length&&(K=new Q(K,Ie,null,o,X),ee.push({event:K,listeners:Ae}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",K&&o!==Tl&&(Ie=o.relatedTarget||o.fromElement)&&(Es(Ie)||Ie[Gs]))break e;if((Q||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Ie=o.relatedTarget||o.toElement,Q=G,Ie=Ie?Es(Ie):null,Ie!==null&&(ct=l(Ie),Ae=Ie.tag,Ie!==ct||Ae!==5&&Ae!==27&&Ae!==6)&&(Ie=null)):(Q=null,Ie=G),Q!==Ie)){if(Ae=Xi,J="onMouseLeave",q="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=Il,J="onPointerLeave",q="onPointerEnter",U="pointer"),ct=Q==null?K:Nr(Q),H=Ie==null?K:Nr(Ie),K=new Ae(J,U+"leave",Q,o,X),K.target=ct,K.relatedTarget=H,J=null,Es(X)===G&&(Ae=new Ae(q,U+"enter",Ie,o,X),Ae.target=H,Ae.relatedTarget=ct,J=Ae),ct=J,Q&&Ie)t:{for(Ae=Q,q=Ie,U=0,H=Ae;H;H=xo(H))U++;for(H=0,J=q;J;J=xo(J))H++;for(;0<U-H;)Ae=xo(Ae),U--;for(;0<H-U;)q=xo(q),H--;for(;U--;){if(Ae===q||q!==null&&Ae===q.alternate)break t;Ae=xo(Ae),q=xo(q)}Ae=null}else Ae=null;Q!==null&&t0(ee,K,Q,Ae,!1),Ie!==null&&ct!==null&&t0(ee,ct,Ie,Ae,!0)}}e:{if(K=G?Nr(G):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var ge=by;else if(vy(K))if(wy)ge=v1;else{ge=p1;var He=g1}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Ha(G.elementType)&&(ge=by):ge=y1;if(ge&&(ge=ge(n,G))){_y(ee,ge,o,X);break e}He&&He(n,K,G),n==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&wl(K,"number",K.value)}switch(He=G?Nr(G):window,n){case"focusin":(vy(He)||He.contentEditable==="true")&&(Xa=He,rf=G,Pl=null);break;case"focusout":Pl=rf=Xa=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,Cy(ee,o,X);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":Cy(ee,o,X)}var _e;if(Pe)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ls?as(n,o)&&(Re="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(Nt&&o.locale!=="ko"&&(ls||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ls&&(_e=vu()):(Gn=X,dt="value"in Gn?Gn.value:Gn.textContent,ls=!0)),He=dh(G,Re),0<He.length&&(Re=new Cl(Re,n,null,o,X),ee.push({event:Re,listeners:He}),_e?Re.data=_e:(_e=os(o),_e!==null&&(Re.data=_e)))),(_e=st?kl(n,o):d1(n,o))&&(Re=dh(G,"onBeforeInput"),0<Re.length&&(He=new Cl("onBeforeInput","beforeinput",null,o,X),ee.push({event:He,listeners:Re}),He.data=_e)),nS(ee,n,G,o,X)}Z_(ee,i)})}function cc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function dh(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Dr(n,o),f!=null&&c.unshift(cc(n,f,p)),f=Dr(n,i),f!=null&&c.push(cc(n,f,p))),n.tag===3)return c;n=n.return}return[]}function xo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function t0(n,i,o,c,f){for(var p=i._reactName,w=[];o!==null&&o!==c;){var E=o,k=E.alternate,G=E.stateNode;if(E=E.tag,k!==null&&k===c)break;E!==5&&E!==26&&E!==27||G===null||(k=G,f?(G=Dr(o,p),G!=null&&w.unshift(cc(o,G,k))):f||(G=Dr(o,p),G!=null&&w.push(cc(o,G,k)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var aS=/\r\n?/g,oS=/\u0000|\uFFFD/g;function n0(n){return(typeof n=="string"?n:""+n).replace(aS,`
`).replace(oS,"")}function s0(n,i){return i=n0(i),n0(n)===i}function fh(){}function lt(n,i,o,c,f,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Fn(n,""+c);break;case"className":Ui(n,"class",c);break;case"tabIndex":Ui(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(n,o,c);break;case"style":El(n,c,p);break;case"data":if(i!=="object"){Ui(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=is(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&lt(n,i,"name",f.name,f,null),lt(n,i,"formEncType",f.formEncType,f,null),lt(n,i,"formMethod",f.formMethod,f,null),lt(n,i,"formTarget",f.formTarget,f,null)):(lt(n,i,"encType",f.encType,f,null),lt(n,i,"method",f.method,f,null),lt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=is(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=fh);break;case"onScroll":c!=null&&Ge("scroll",n);break;case"onScrollEnd":c!=null&&Ge("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=is(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ge("beforetoggle",n),Ge("toggle",n),Vi(n,"popover",c);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vi(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gu.get(o)||o,Vi(n,o,c))}}function Cm(n,i,o,c,f,p){switch(o){case"style":El(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&Fn(n,""+c);break;case"onScroll":c!=null&&Ge("scroll",n);break;case"onScrollEnd":c!=null&&Ge("scrollend",n);break;case"onClick":c!=null&&(n.onclick=fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=n[nn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Vi(n,o,c)}}}function an(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",n),Ge("load",n);var c=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(n,i,p,w,o,null)}}f&&lt(n,i,"srcSet",o.srcSet,o,null),c&&lt(n,i,"src",o.src,o,null);return;case"input":Ge("invalid",n);var E=p=w=f=null,k=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var X=o[c];if(X!=null)switch(c){case"name":f=X;break;case"type":w=X;break;case"checked":k=X;break;case"defaultChecked":G=X;break;case"value":p=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:lt(n,i,c,X,o,null)}}bl(n,p,E,k,G,w,f,!1),kr(n);return;case"select":Ge("invalid",n),c=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":p=E;break;case"defaultValue":w=E;break;case"multiple":c=E;default:lt(n,i,f,E,o,null)}i=p,o=w,n.multiple=!!c,i!=null?jr(n,!!c,i,!1):o!=null&&jr(n,!!c,o,!0);return;case"textarea":Ge("invalid",n),p=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(E=o[w],E!=null))switch(w){case"value":c=E;break;case"defaultValue":f=E;break;case"children":p=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:lt(n,i,w,E,o,null)}mu(n,c,f,p),kr(n);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(c=o[k],c!=null))switch(k){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(n,i,k,c,o,null)}return;case"dialog":Ge("beforetoggle",n),Ge("toggle",n),Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":Ge("load",n);break;case"video":case"audio":for(c=0;c<lc.length;c++)Ge(lc[c],n);break;case"image":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"embed":case"source":case"link":Ge("error",n),Ge("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(n,i,G,c,o,null)}return;default:if(Ha(i)){for(X in o)o.hasOwnProperty(X)&&(c=o[X],c!==void 0&&Cm(n,i,X,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&lt(n,i,E,c,o,null))}function lS(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,E=null,k=null,G=null,X=null;for(Q in o){var ee=o[Q];if(o.hasOwnProperty(Q)&&ee!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":k=ee;default:c.hasOwnProperty(Q)||lt(n,i,Q,null,c,ee)}}for(var K in c){var Q=c[K];if(ee=o[K],c.hasOwnProperty(K)&&(Q!=null||ee!=null))switch(K){case"type":p=Q;break;case"name":f=Q;break;case"checked":G=Q;break;case"defaultChecked":X=Q;break;case"value":w=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==ee&&lt(n,i,K,Q,c,ee)}}_l(n,w,E,k,G,X,p,f);return;case"select":Q=w=E=K=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":Q=k;default:c.hasOwnProperty(p)||lt(n,i,p,null,c,k)}for(f in c)if(p=c[f],k=o[f],c.hasOwnProperty(f)&&(p!=null||k!=null))switch(f){case"value":K=p;break;case"defaultValue":E=p;break;case"multiple":w=p;default:p!==k&&lt(n,i,f,p,c,k)}i=E,o=w,c=Q,K!=null?jr(n,!!o,K,!1):!!c!=!!o&&(i!=null?jr(n,!!o,i,!0):jr(n,!!o,o?[]:"",!1));return;case"textarea":Q=K=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:lt(n,i,E,null,c,f)}for(w in c)if(f=c[w],p=o[w],c.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&lt(n,i,w,f,c,p)}fu(n,K,Q);return;case"option":for(var Ie in o)if(K=o[Ie],o.hasOwnProperty(Ie)&&K!=null&&!c.hasOwnProperty(Ie))switch(Ie){case"selected":n.selected=!1;break;default:lt(n,i,Ie,null,c,K)}for(k in c)if(K=c[k],Q=o[k],c.hasOwnProperty(k)&&K!==Q&&(K!=null||Q!=null))switch(k){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:lt(n,i,k,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)K=o[Ae],o.hasOwnProperty(Ae)&&K!=null&&!c.hasOwnProperty(Ae)&&lt(n,i,Ae,null,c,K);for(G in c)if(K=c[G],Q=o[G],c.hasOwnProperty(G)&&K!==Q&&(K!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:lt(n,i,G,K,c,Q)}return;default:if(Ha(i)){for(var ct in o)K=o[ct],o.hasOwnProperty(ct)&&K!==void 0&&!c.hasOwnProperty(ct)&&Cm(n,i,ct,void 0,c,K);for(X in c)K=c[X],Q=o[X],!c.hasOwnProperty(X)||K===Q||K===void 0&&Q===void 0||Cm(n,i,X,K,c,Q);return}}for(var q in o)K=o[q],o.hasOwnProperty(q)&&K!=null&&!c.hasOwnProperty(q)&&lt(n,i,q,null,c,K);for(ee in c)K=c[ee],Q=o[ee],!c.hasOwnProperty(ee)||K===Q||K==null&&Q==null||lt(n,i,ee,K,c,Q)}var Im=null,km=null;function mh(n){return n.nodeType===9?n:n.ownerDocument}function r0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function i0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Om=null;function cS(){var n=window.event;return n&&n.type==="popstate"?n===Om?!1:(Om=n,!0):(Om=null,!1)}var a0=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,hS=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(n){return o0.resolve(null).then(n).catch(dS)}:a0;function dS(n){setTimeout(function(){throw n})}function Jr(n){return n==="head"}function l0(n,i){var o=i,c=0,f=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<c&&8>c){o=c;var w=n.ownerDocument;if(o&1&&uc(w.documentElement),o&2&&uc(w.body),o&4)for(o=w.head,uc(o),w=o.firstChild;w;){var E=w.nextSibling,k=w.nodeName;w[Rr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=E}}if(f===0){n.removeChild(p),vc(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:c=o.charCodeAt(0)-48;else c=0;o=p}while(o);vc(i)}function Dm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dm(o),La(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function fS(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Rr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=hs(n.nextSibling),n===null)break}return null}function mS(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=hs(n.nextSibling),n===null))return null;return n}function Pm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function gS(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function hs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Mm=null;function c0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function u0(n,i,o){switch(i=mh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function uc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);La(n)}var Zn=new Map,h0=new Set;function gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ur=ie.d;ie.d={f:pS,r:yS,D:vS,C:_S,L:bS,m:wS,X:ES,S:xS,M:TS};function pS(){var n=ur.f(),i=ah();return n||i}function yS(n){var i=Ts(n);i!==null&&i.tag===5&&i.type==="form"?kv(i):ur.r(n)}var Eo=typeof document>"u"?null:document;function d0(n,i,o){var c=Eo;if(c&&typeof i=="string"&&i){var f=Qt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),h0.has(f)||(h0.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),an(i,"link",n),Rt(i),c.head.appendChild(i)))}}function vS(n){ur.D(n),d0("dns-prefetch",n,null)}function _S(n,i){ur.C(n,i),d0("preconnect",n,i)}function bS(n,i,o){ur.L(n,i,o);var c=Eo;if(c&&n&&i){var f='link[rel="preload"][as="'+Qt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Qt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Qt(o.imageSizes)+'"]')):f+='[href="'+Qt(n)+'"]';var p=f;switch(i){case"style":p=To(n);break;case"script":p=So(n)}Zn.has(p)||(n=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Zn.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(hc(p))||i==="script"&&c.querySelector(dc(p))||(i=c.createElement("link"),an(i,"link",n),Rt(i),c.head.appendChild(i)))}}function wS(n,i){ur.m(n,i);var o=Eo;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Qt(c)+'"][href="'+Qt(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=So(n)}if(!Zn.has(p)&&(n=v({rel:"modulepreload",href:n},i),Zn.set(p,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(dc(p)))return}c=o.createElement("link"),an(c,"link",n),Rt(c),o.head.appendChild(c)}}}function xS(n,i,o){ur.S(n,i,o);var c=Eo;if(c&&n){var f=Cr(c).hoistableStyles,p=To(n);i=i||"default";var w=f.get(p);if(!w){var E={loading:0,preload:null};if(w=c.querySelector(hc(p)))E.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Zn.get(p))&&Vm(n,o);var k=w=c.createElement("link");Rt(k),an(k,"link",n),k._p=new Promise(function(G,X){k.onload=G,k.onerror=X}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ph(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:E},f.set(p,w)}}}function ES(n,i){ur.X(n,i);var o=Eo;if(o&&n){var c=Cr(o).hoistableScripts,f=So(n),p=c.get(f);p||(p=o.querySelector(dc(f)),p||(n=v({src:n,async:!0},i),(i=Zn.get(f))&&Um(n,i),p=o.createElement("script"),Rt(p),an(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function TS(n,i){ur.M(n,i);var o=Eo;if(o&&n){var c=Cr(o).hoistableScripts,f=So(n),p=c.get(f);p||(p=o.querySelector(dc(f)),p||(n=v({src:n,async:!0,type:"module"},i),(i=Zn.get(f))&&Um(n,i),p=o.createElement("script"),Rt(p),an(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function f0(n,i,o,c){var f=(f=ve.current)?gh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=To(o.href),o=Cr(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=To(o.href);var p=Cr(f).hoistableStyles,w=p.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=f.querySelector(hc(n)))&&!p._p&&(w.instance=p,w.state.loading=5),Zn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zn.set(n,o),p||SS(f,n,o,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=So(o),o=Cr(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function To(n){return'href="'+Qt(n)+'"'}function hc(n){return'link[rel="stylesheet"]['+n+"]"}function m0(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function SS(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),an(i,"link",o),Rt(i),n.head.appendChild(i))}function So(n){return'[src="'+Qt(n)+'"]'}function dc(n){return"script[async]"+n}function g0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Qt(o.href)+'"]');if(c)return i.instance=c,Rt(c),c;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Rt(c),an(c,"style",f),ph(c,o.precedence,n),i.instance=c;case"stylesheet":f=To(o.href);var p=n.querySelector(hc(f));if(p)return i.state.loading|=4,i.instance=p,Rt(p),p;c=m0(o),(f=Zn.get(f))&&Vm(c,f),p=(n.ownerDocument||n).createElement("link"),Rt(p);var w=p;return w._p=new Promise(function(E,k){w.onload=E,w.onerror=k}),an(p,"link",c),i.state.loading|=4,ph(p,o.precedence,n),i.instance=p;case"script":return p=So(o.src),(f=n.querySelector(dc(p)))?(i.instance=f,Rt(f),f):(c=o,(f=Zn.get(p))&&(c=v({},o),Um(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Rt(f),an(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,ph(c,o.precedence,n));return i.instance}function ph(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,w=0;w<c.length;w++){var E=c[w];if(E.dataset.precedence===i)p=E;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Vm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Um(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var yh=null;function p0(n,i,o){if(yh===null){var c=new Map,f=yh=new Map;f.set(o,c)}else f=yh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[Rr]||p[At]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=n+w;var E=c.get(w);E?E.push(p):c.set(w,[p])}}return c}function y0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function AS(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var fc=null;function RS(){}function NS(n,i,o){if(fc===null)throw Error(s(475));var c=fc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=To(o.href),p=n.querySelector(hc(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=vh.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=p,Rt(p);return}p=n.ownerDocument||n,o=m0(o),(f=Zn.get(f))&&Vm(o,f),p=p.createElement("link"),Rt(p);var w=p;w._p=new Promise(function(E,k){w.onload=E,w.onerror=k}),an(p,"link",o),i.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=vh.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function CS(){if(fc===null)throw Error(s(475));var n=fc;return n.stylesheets&&n.count===0&&Lm(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Lm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)Lm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function Lm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,i.forEach(IS,n),_h=null,vh.call(n))}function IS(n,i){if(!(i.state.loading&4)){var o=_h.get(n);if(o)var c=o.get(null);else{o=new Map,_h.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=i.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,f),o.set(w,f),this.count++,c=vh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var mc={$$typeof:W,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function kS(n,i,o,c,f,p,w,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function _0(n,i,o,c,f,p,w,E,k,G,X,ee){return n=new kS(n,i,o,w,E,k,G,ee),i=1,p===!0&&(i|=24),p=Dn(3,null,null,i),n.current=p,p.stateNode=n,i=bf(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},Tf(p),n}function b0(n){return n?(n=to,n):to}function w0(n,i,o,c,f,p){f=b0(f),c.context===null?c.context=f:c.pendingContext=f,c=Lr(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=zr(n,c,i),o!==null&&(Ln(o,n,i),Hl(o,n,i))}function x0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function zm(n,i){x0(n,i),(n=n.alternate)&&x0(n,i)}function E0(n){if(n.tag===13){var i=eo(n,67108864);i!==null&&Ln(i,n,67108864),zm(n,67108864)}}var bh=!0;function jS(n,i,o,c){var f=V.T;V.T=null;var p=ie.p;try{ie.p=2,Bm(n,i,o,c)}finally{ie.p=p,V.T=f}}function OS(n,i,o,c){var f=V.T;V.T=null;var p=ie.p;try{ie.p=8,Bm(n,i,o,c)}finally{ie.p=p,V.T=f}}function Bm(n,i,o,c){if(bh){var f=qm(c);if(f===null)Nm(n,i,c,wh,o),S0(n,c);else if(PS(f,n,i,o,c))c.stopPropagation();else if(S0(n,c),i&4&&-1<DS.indexOf(n)){for(;f!==null;){var p=Ts(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=ns(p.pendingLanes);if(w!==0){var E=p;for(E.pendingLanes|=2,E.entangledLanes|=2;w;){var k=1<<31-_n(w);E.entanglements[1]|=k,w&=~k}Ds(p),(rt&6)===0&&(rh=Tn()+500,oc(0))}}break;case 13:E=eo(p,2),E!==null&&Ln(E,p,2),ah(),zm(p,2)}if(p=qm(c),p===null&&Nm(n,i,c,wh,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else Nm(n,i,c,null,o)}}function qm(n){return n=Sl(n),$m(n)}var wh=null;function $m(n){if(wh=null,n=Es(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return wh=n,null}function T0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lu()){case zt:return 2;case Kt:return 8;case Hs:case Kd:return 32;case gl:return 268435456;default:return 32}default:return 32}}var Hm=!1,Zr=null,ei=null,ti=null,gc=new Map,pc=new Map,ni=[],DS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S0(n,i){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":gc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(i.pointerId)}}function yc(n,i,o,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Ts(i),i!==null&&E0(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function PS(n,i,o,c,f){switch(i){case"focusin":return Zr=yc(Zr,n,i,o,c,f),!0;case"dragenter":return ei=yc(ei,n,i,o,c,f),!0;case"mouseover":return ti=yc(ti,n,i,o,c,f),!0;case"pointerover":var p=f.pointerId;return gc.set(p,yc(gc.get(p)||null,n,i,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,pc.set(p,yc(pc.get(p)||null,n,i,o,c,f)),!0}return!1}function A0(n){var i=Es(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Wd(n.priority,function(){if(o.tag===13){var c=Un();c=yl(c);var f=eo(o,c);f!==null&&Ln(f,o,c),zm(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=qm(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Tl=c,o.target.dispatchEvent(c),Tl=null}else return i=Ts(o),i!==null&&E0(i),n.blockedOn=o,!1;i.shift()}return!0}function R0(n,i,o){xh(n)&&o.delete(i)}function MS(){Hm=!1,Zr!==null&&xh(Zr)&&(Zr=null),ei!==null&&xh(ei)&&(ei=null),ti!==null&&xh(ti)&&(ti=null),gc.forEach(R0),pc.forEach(R0)}function Eh(n,i){n.blockedOn===i&&(n.blockedOn=null,Hm||(Hm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,MS)))}var Th=null;function N0(n){Th!==n&&(Th=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Th===n&&(Th=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if($m(c||o)===null)continue;break}var p=Ts(o);p!==null&&(n.splice(i,3),i-=3,$f(p,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function vc(n){function i(k){return Eh(k,n)}Zr!==null&&Eh(Zr,n),ei!==null&&Eh(ei,n),ti!==null&&Eh(ti,n),gc.forEach(i),pc.forEach(i);for(var o=0;o<ni.length;o++){var c=ni[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ni.length&&(o=ni[0],o.blockedOn===null);)A0(o),o.blockedOn===null&&ni.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],w=f[nn]||null;if(typeof p=="function")w||N0(o);else if(w){var E=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[nn]||null)E=w.formAction;else if($m(f)!==null)continue}else E=w.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),N0(o)}}}function Fm(n){this._internalRoot=n}Sh.prototype.render=Fm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Un();w0(o,c,n,i,null,null)},Sh.prototype.unmount=Fm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;w0(n.current,2,null,n,null,null),ah(),i[Gs]=null}};function Sh(n){this._internalRoot=n}Sh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Fs();n={blockedOn:null,target:n,priority:i};for(var o=0;o<ni.length&&i!==0&&i<ni[o].priority;o++);ni.splice(o,0,n),o===0&&A0(n)}};var C0=e.version;if(C0!=="19.1.0")throw Error(s(527,C0,"19.1.0"));ie.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var VS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{wr=Ah.inject(VS),hn=Ah}catch{}}return bc.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,c="",f=Fv,p=Gv,w=Kv,E=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=_0(n,1,!1,null,null,o,c,f,p,w,E,null),n[Gs]=i.current,Rm(n),new Fm(i)},bc.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var c=!1,f="",p=Fv,w=Gv,E=Kv,k=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),i=_0(n,1,!0,i,o??null,c,f,p,w,E,k,G),i.context=b0(null),o=i.current,c=Un(),c=yl(c),f=Lr(c),f.callback=null,zr(o,f,c),o=c,i.current.lanes=o,St(i,o),Ds(i),n[Gs]=i.current,Rm(n),new Sh(i)},bc.version="19.1.0",bc}var L0;function YS(){if(L0)return Qm.exports;L0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qm.exports=QS(),Qm.exports}var WS=YS();function z0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function XS(...r){return e=>{let t=!1;const s=r.map(a=>{const l=z0(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():z0(r[a],null)}}}}function JS(...r){return me.useCallback(XS(...r),r)}function ZS(r){const e=eA(r),t=me.forwardRef((s,a)=>{const{children:l,...u}=s,m=me.Children.toArray(l),g=m.find(nA);if(g){const y=g.props.children,v=m.map(x=>x===g?me.Children.count(y)>1?me.Children.only(null):me.isValidElement(y)?y.props.children:null:x);return d.jsx(e,{...u,ref:a,children:me.isValidElement(y)?me.cloneElement(y,void 0,v):null})}return d.jsx(e,{...u,ref:a,children:l})});return t.displayName=`${r}.Slot`,t}var ix=ZS("Slot");function eA(r){const e=me.forwardRef((t,s)=>{const{children:a,...l}=t,u=me.isValidElement(a)?rA(a):void 0,m=JS(u,s);if(me.isValidElement(a)){const g=sA(l,a.props);return a.type!==me.Fragment&&(g.ref=m),me.cloneElement(a,g)}return me.Children.count(a)>1?me.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var tA=Symbol("radix.slottable");function nA(r){return me.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===tA}function sA(r,e){const t={...e};for(const s in e){const a=r[s],l=e[s];/^on[A-Z]/.test(s)?a&&l?t[s]=(...m)=>{const g=l(...m);return a(...m),g}:a&&(t[s]=a):s==="style"?t[s]={...a,...l}:s==="className"&&(t[s]=[a,l].filter(Boolean).join(" "))}return{...r,...t}}function rA(r){var s,a;let e=(s=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(a=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function ax(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=ax(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function ox(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=ax(r))&&(s&&(s+=" "),s+=e);return s}const B0=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,q0=ox,lx=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return q0(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(y=>{const v=t==null?void 0:t[y],x=l==null?void 0:l[y];if(v===null)return null;const T=B0(v)||B0(x);return a[y][T]}),m=t&&Object.entries(t).reduce((y,v)=>{let[x,T]=v;return T===void 0||(y[x]=T),y},{}),g=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((y,v)=>{let{class:x,className:T,...I}=v;return Object.entries(I).every(L=>{let[B,z]=L;return Array.isArray(z)?z.includes({...l,...m}[B]):{...l,...m}[B]===z})?[...y,x,T]:y},[]);return q0(r,u,g,t==null?void 0:t.class,t==null?void 0:t.className)},_p="-",iA=r=>{const e=oA(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:u=>{const m=u.split(_p);return m[0]===""&&m.length!==1&&m.shift(),cx(m,e)||aA(u)},getConflictingClassGroupIds:(u,m)=>{const g=t[u]||[];return m&&s[u]?[...g,...s[u]]:g}}},cx=(r,e)=>{var u;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),a=s?cx(r.slice(1),s):void 0;if(a)return a;if(e.validators.length===0)return;const l=r.join(_p);return(u=e.validators.find(({validator:m})=>m(l)))==null?void 0:u.classGroupId},$0=/^\[(.+)\]$/,aA=r=>{if($0.test(r)){const e=$0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},oA=r=>{const{theme:e,classGroups:t}=r,s={nextPart:new Map,validators:[]};for(const a in t)Cg(t[a],s,a,e);return s},Cg=(r,e,t,s)=>{r.forEach(a=>{if(typeof a=="string"){const l=a===""?e:H0(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(lA(a)){Cg(a(s),e,t,s);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{Cg(u,H0(e,l),t,s)})})},H0=(r,e)=>{let t=r;return e.split(_p).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},lA=r=>r.isThemeGetter,cA=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const a=(l,u)=>{t.set(l,u),e++,e>r&&(e=0,s=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=s.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},Ig="!",kg=":",uA=kg.length,hA=r=>{const{prefix:e,experimentalParseClassName:t}=r;let s=a=>{const l=[];let u=0,m=0,g=0,y;for(let L=0;L<a.length;L++){let B=a[L];if(u===0&&m===0){if(B===kg){l.push(a.slice(g,L)),g=L+uA;continue}if(B==="/"){y=L;continue}}B==="["?u++:B==="]"?u--:B==="("?m++:B===")"&&m--}const v=l.length===0?a:a.substring(g),x=dA(v),T=x!==v,I=y&&y>g?y-g:void 0;return{modifiers:l,hasImportantModifier:T,baseClassName:x,maybePostfixModifierPosition:I}};if(e){const a=e+kg,l=s;s=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=s;s=l=>t({className:l,parseClassName:a})}return s},dA=r=>r.endsWith(Ig)?r.substring(0,r.length-1):r.startsWith(Ig)?r.substring(1):r,fA=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let l=[];return s.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},mA=r=>({cache:cA(r.cacheSize),parseClassName:hA(r),sortModifiers:fA(r),...iA(r)}),gA=/\s+/,pA=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],m=r.trim().split(gA);let g="";for(let y=m.length-1;y>=0;y-=1){const v=m[y],{isExternal:x,modifiers:T,hasImportantModifier:I,baseClassName:L,maybePostfixModifierPosition:B}=t(v);if(x){g=v+(g.length>0?" "+g:g);continue}let z=!!B,re=s(z?L.substring(0,B):L);if(!re){if(!z){g=v+(g.length>0?" "+g:g);continue}if(re=s(L),!re){g=v+(g.length>0?" "+g:g);continue}z=!1}const $=l(T).join(":"),W=I?$+Ig:$,le=W+re;if(u.includes(le))continue;u.push(le);const ce=a(re,z);for(let oe=0;oe<ce.length;++oe){const C=ce[oe];u.push(W+C)}g=v+(g.length>0?" "+g:g)}return g};function yA(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=ux(e))&&(s&&(s+=" "),s+=t);return s}const ux=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=ux(r[s]))&&(t&&(t+=" "),t+=e);return t};function vA(r,...e){let t,s,a,l=u;function u(g){const y=e.reduce((v,x)=>x(v),r());return t=mA(y),s=t.cache.get,a=t.cache.set,l=m,m(g)}function m(g){const y=s(g);if(y)return y;const v=pA(g,t);return a(g,v),v}return function(){return l(yA.apply(null,arguments))}}const Ht=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},hx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,dx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,_A=/^\d+\/\d+$/,bA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ao=r=>_A.test(r),qe=r=>!!r&&!Number.isNaN(Number(r)),ri=r=>!!r&&Number.isInteger(Number(r)),Jm=r=>r.endsWith("%")&&qe(r.slice(0,-1)),hr=r=>bA.test(r),SA=()=>!0,AA=r=>wA.test(r)&&!xA.test(r),fx=()=>!1,RA=r=>EA.test(r),NA=r=>TA.test(r),CA=r=>!pe(r)&&!ye(r),IA=r=>rl(r,px,fx),pe=r=>hx.test(r),ma=r=>rl(r,yx,AA),Zm=r=>rl(r,PA,qe),F0=r=>rl(r,mx,fx),kA=r=>rl(r,gx,NA),Rh=r=>rl(r,vx,RA),ye=r=>dx.test(r),wc=r=>il(r,yx),jA=r=>il(r,MA),G0=r=>il(r,mx),OA=r=>il(r,px),DA=r=>il(r,gx),Nh=r=>il(r,vx,!0),rl=(r,e,t)=>{const s=hx.exec(r);return s?s[1]?e(s[1]):t(s[2]):!1},il=(r,e,t=!1)=>{const s=dx.exec(r);return s?s[1]?e(s[1]):t:!1},mx=r=>r==="position"||r==="percentage",gx=r=>r==="image"||r==="url",px=r=>r==="length"||r==="size"||r==="bg-size",yx=r=>r==="length",PA=r=>r==="number",MA=r=>r==="family-name",vx=r=>r==="shadow",VA=()=>{const r=Ht("color"),e=Ht("font"),t=Ht("text"),s=Ht("font-weight"),a=Ht("tracking"),l=Ht("leading"),u=Ht("breakpoint"),m=Ht("container"),g=Ht("spacing"),y=Ht("radius"),v=Ht("shadow"),x=Ht("inset-shadow"),T=Ht("text-shadow"),I=Ht("drop-shadow"),L=Ht("blur"),B=Ht("perspective"),z=Ht("aspect"),re=Ht("ease"),$=Ht("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ce=()=>[...le(),ye,pe],oe=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],A=()=>[ye,pe,g],R=()=>[Ao,"full","auto",...A()],O=()=>[ri,"none","subgrid",ye,pe],j=()=>["auto",{span:["full",ri,ye,pe]},ri,ye,pe],M=()=>[ri,"auto",ye,pe],N=()=>["auto","min","max","fr",ye,pe],We=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ue=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...A()],ie=()=>[Ao,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],te=()=>[r,ye,pe],ze=()=>[...le(),G0,F0,{position:[ye,pe]}],P=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",OA,IA,{size:[ye,pe]}],he=()=>[Jm,wc,ma],D=()=>["","none","full",y,ye,pe],ae=()=>["",qe,wc,ma],Ee=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$e=()=>[qe,Jm,G0,F0],et=()=>["","none",L,ye,pe],un=()=>["none",qe,ye,pe],_s=()=>["none",qe,ye,pe],bs=()=>[qe,ye,pe],ts=()=>[Ao,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[hr],breakpoint:[hr],color:[SA],container:[hr],"drop-shadow":[hr],ease:["in","out","in-out"],font:[CA],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[hr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[hr],shadow:[hr],spacing:["px",qe],text:[hr],"text-shadow":[hr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ao,pe,ye,z]}],container:["container"],columns:[{columns:[qe,pe,ye,m]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ce()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[ri,"auto",ye,pe]}],basis:[{basis:[Ao,"full","auto",m,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,Ao,"auto","initial","none",pe]}],grow:[{grow:["",qe,ye,pe]}],shrink:[{shrink:["",qe,ye,pe]}],order:[{order:[ri,"first","last","none",ye,pe]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...We(),"normal"]}],"justify-items":[{"justify-items":[...Ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ue()]}],"align-content":[{content:["normal",...We()]}],"align-items":[{items:[...Ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":We()}],"place-items":[{"place-items":[...Ue(),"baseline"]}],"place-self":[{"place-self":["auto",...Ue()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[m,"screen",...ie()]}],"min-w":[{"min-w":[m,"screen","none",...ie()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[u]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",t,wc,ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ye,Zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jm,pe]}],"font-family":[{font:[jA,pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ye,pe]}],"line-clamp":[{"line-clamp":[qe,"none",ye,Zm]}],leading:[{leading:[l,...A()]}],"list-image":[{"list-image":["none",ye,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:te()}],"text-color":[{text:te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",ye,ma]}],"text-decoration-color":[{decoration:te()}],"underline-offset":[{"underline-offset":[qe,"auto",ye,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ze()}],"bg-repeat":[{bg:P()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ri,ye,pe],radial:["",ye,pe],conic:[ri,ye,pe]},DA,kA]}],"bg-color":[{bg:te()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:te()}],"gradient-via":[{via:te()}],"gradient-to":[{to:te()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ee(),"hidden","none"]}],"divide-style":[{divide:[...Ee(),"hidden","none"]}],"border-color":[{border:te()}],"border-color-x":[{"border-x":te()}],"border-color-y":[{"border-y":te()}],"border-color-s":[{"border-s":te()}],"border-color-e":[{"border-e":te()}],"border-color-t":[{"border-t":te()}],"border-color-r":[{"border-r":te()}],"border-color-b":[{"border-b":te()}],"border-color-l":[{"border-l":te()}],"divide-color":[{divide:te()}],"outline-style":[{outline:[...Ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,ye,pe]}],"outline-w":[{outline:["",qe,wc,ma]}],"outline-color":[{outline:te()}],shadow:[{shadow:["","none",v,Nh,Rh]}],"shadow-color":[{shadow:te()}],"inset-shadow":[{"inset-shadow":["none",x,Nh,Rh]}],"inset-shadow-color":[{"inset-shadow":te()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:te()}],"ring-offset-w":[{"ring-offset":[qe,ma]}],"ring-offset-color":[{"ring-offset":te()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":te()}],"text-shadow":[{"text-shadow":["none",T,Nh,Rh]}],"text-shadow-color":[{"text-shadow":te()}],opacity:[{opacity:[qe,ye,pe]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":$e()}],"mask-image-linear-to-pos":[{"mask-linear-to":$e()}],"mask-image-linear-from-color":[{"mask-linear-from":te()}],"mask-image-linear-to-color":[{"mask-linear-to":te()}],"mask-image-t-from-pos":[{"mask-t-from":$e()}],"mask-image-t-to-pos":[{"mask-t-to":$e()}],"mask-image-t-from-color":[{"mask-t-from":te()}],"mask-image-t-to-color":[{"mask-t-to":te()}],"mask-image-r-from-pos":[{"mask-r-from":$e()}],"mask-image-r-to-pos":[{"mask-r-to":$e()}],"mask-image-r-from-color":[{"mask-r-from":te()}],"mask-image-r-to-color":[{"mask-r-to":te()}],"mask-image-b-from-pos":[{"mask-b-from":$e()}],"mask-image-b-to-pos":[{"mask-b-to":$e()}],"mask-image-b-from-color":[{"mask-b-from":te()}],"mask-image-b-to-color":[{"mask-b-to":te()}],"mask-image-l-from-pos":[{"mask-l-from":$e()}],"mask-image-l-to-pos":[{"mask-l-to":$e()}],"mask-image-l-from-color":[{"mask-l-from":te()}],"mask-image-l-to-color":[{"mask-l-to":te()}],"mask-image-x-from-pos":[{"mask-x-from":$e()}],"mask-image-x-to-pos":[{"mask-x-to":$e()}],"mask-image-x-from-color":[{"mask-x-from":te()}],"mask-image-x-to-color":[{"mask-x-to":te()}],"mask-image-y-from-pos":[{"mask-y-from":$e()}],"mask-image-y-to-pos":[{"mask-y-to":$e()}],"mask-image-y-from-color":[{"mask-y-from":te()}],"mask-image-y-to-color":[{"mask-y-to":te()}],"mask-image-radial":[{"mask-radial":[ye,pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":$e()}],"mask-image-radial-to-pos":[{"mask-radial-to":$e()}],"mask-image-radial-from-color":[{"mask-radial-from":te()}],"mask-image-radial-to-color":[{"mask-radial-to":te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":$e()}],"mask-image-conic-to-pos":[{"mask-conic-to":$e()}],"mask-image-conic-from-color":[{"mask-conic-from":te()}],"mask-image-conic-to-color":[{"mask-conic-to":te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ze()}],"mask-repeat":[{mask:P()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,pe]}],filter:[{filter:["","none",ye,pe]}],blur:[{blur:et()}],brightness:[{brightness:[qe,ye,pe]}],contrast:[{contrast:[qe,ye,pe]}],"drop-shadow":[{"drop-shadow":["","none",I,Nh,Rh]}],"drop-shadow-color":[{"drop-shadow":te()}],grayscale:[{grayscale:["",qe,ye,pe]}],"hue-rotate":[{"hue-rotate":[qe,ye,pe]}],invert:[{invert:["",qe,ye,pe]}],saturate:[{saturate:[qe,ye,pe]}],sepia:[{sepia:["",qe,ye,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,pe]}],"backdrop-blur":[{"backdrop-blur":et()}],"backdrop-brightness":[{"backdrop-brightness":[qe,ye,pe]}],"backdrop-contrast":[{"backdrop-contrast":[qe,ye,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,ye,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,ye,pe]}],"backdrop-invert":[{"backdrop-invert":["",qe,ye,pe]}],"backdrop-opacity":[{"backdrop-opacity":[qe,ye,pe]}],"backdrop-saturate":[{"backdrop-saturate":[qe,ye,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,ye,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",ye,pe]}],ease:[{ease:["linear","initial",re,ye,pe]}],delay:[{delay:[qe,ye,pe]}],animate:[{animate:["none",$,ye,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,ye,pe]}],"perspective-origin":[{"perspective-origin":ce()}],rotate:[{rotate:un()}],"rotate-x":[{"rotate-x":un()}],"rotate-y":[{"rotate-y":un()}],"rotate-z":[{"rotate-z":un()}],scale:[{scale:_s()}],"scale-x":[{"scale-x":_s()}],"scale-y":[{"scale-y":_s()}],"scale-z":[{"scale-z":_s()}],"scale-3d":["scale-3d"],skew:[{skew:bs()}],"skew-x":[{"skew-x":bs()}],"skew-y":[{"skew-y":bs()}],transform:[{transform:[ye,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:ce()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ts()}],"translate-x":[{"translate-x":ts()}],"translate-y":[{"translate-y":ts()}],"translate-z":[{"translate-z":ts()}],"translate-none":["translate-none"],accent:[{accent:te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,pe]}],fill:[{fill:["none",...te()]}],"stroke-w":[{stroke:[qe,wc,ma,Zm]}],stroke:[{stroke:["none",...te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UA=vA(VA);function ka(...r){return UA(ox(r))}const LA=lx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Se({className:r,variant:e,size:t,asChild:s=!1,...a}){const l=s?ix:"button";return d.jsx(l,{"data-slot":"button",className:ka(LA({variant:e,size:t,className:r})),...a})}function be({className:r,...e}){return d.jsx("div",{"data-slot":"card",className:ka("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...e})}function ke({className:r,...e}){return d.jsx("div",{"data-slot":"card-header",className:ka("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function je({className:r,...e}){return d.jsx("div",{"data-slot":"card-title",className:ka("leading-none font-semibold",r),...e})}function kn({className:r,...e}){return d.jsx("div",{"data-slot":"card-description",className:ka("text-muted-foreground text-sm",r),...e})}function we({className:r,...e}){return d.jsx("div",{"data-slot":"card-content",className:ka("px-6",r),...e})}const zA=lx("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function en({className:r,variant:e,asChild:t=!1,...s}){const a=t?ix:"span";return d.jsx(a,{"data-slot":"badge",className:ka(zA({variant:e}),r),...s})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),K0=r=>{const e=qA(r);return e.charAt(0).toUpperCase()+e.slice(1)},_x=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),$A=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=me.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...m},g)=>me.createElement("svg",{ref:g,...HA,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:_x("lucide",a),...!l&&!$A(m)&&{"aria-hidden":"true"},...m},[...u.map(([y,v])=>me.createElement(y,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(r,e)=>{const t=me.forwardRef(({className:s,...a},l)=>me.createElement(FA,{ref:l,iconNode:e,className:_x(`lucide-${BA(K0(r))}`,`lucide-${r}`,s),...a}));return t.displayName=K0(r),t};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ch=Ne("activity",GA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],QA=Ne("arrow-right",KA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],eg=Ne("bell",YA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],XA=Ne("bot",WA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Ih=Ne("brain",JA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],tg=Ne("building-2",ZA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qh=Ne("calendar",e2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],n2=Ne("chart-column",t2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],r2=Ne("check",s2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],bx=Ne("circle-alert",i2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_t=Ne("circle-check",a2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],l2=Ne("circle-pause",o2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],u2=Ne("circle-play",c2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],d2=Ne("circle-x",h2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Q0=Ne("clock",f2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ng=Ne("cloud",m2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],Y0=Ne("cog",g2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],y2=Ne("credit-card",p2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],W0=Ne("crown",v2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Zh=Ne("database",_2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],w2=Ne("dollar-sign",b2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wx=Ne("file-text",x2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],T2=Ne("house",E2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],X0=Ne("info",S2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],R2=Ne("key-round",A2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],C2=Ne("loader",N2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],J0=Ne("lock",I2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],j2=Ne("log-out",k2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],D2=Ne("mail",O2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],M2=Ne("menu",P2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],sg=Ne("message-square",V2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],L2=Ne("moon",U2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],rg=Ne("pause",z2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ig=Ne("phone",B2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],$2=Ne("play",q2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],F2=Ne("plus",H2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jg=Ne("refresh-cw",G2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Og=Ne("settings",K2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xc=Ne("shield",Q2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Z0=Ne("square-pen",Y2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],eb=Ne("star",W2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],J2=Ne("sun",X2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],eR=Ne("target",Z2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],tb=Ne("trash-2",tR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ag=Ne("trending-up",nR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xx=Ne("triangle-alert",sR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bp=Ne("user",rR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],aR=Ne("users",iR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ex=Ne("x",oR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kh=Ne("zap",lR),nb="/assets/IMG_3575(1)-B07akN18.jpeg",cR="/assets/IMG_3557(1)-Bf6w_X7O.jpeg",uR="/assets/IMG_3554(1)-CshQ5I98.jpeg",hR="/assets/IMG_3556(1)-CjDxWsQq.jpeg",dR="/assets/IMG_3561(1)-DXa8U5hT.jpeg",fR="/assets/IMG_3564(1)-C6wgy6i9.jpeg",mR="/assets/IMG_3551(1)-uvQF3SkX.jpeg";/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=()=>{};var sb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},pR=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],m=r[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],u=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,m=u?r[a+1]:0,g=a+2<r.length,y=g?r[a+2]:0,v=l>>2,x=(l&3)<<4|m>>4;let T=(m&15)<<2|y>>6,I=y&63;g||(I=64,u||(T=64)),s.push(t[v],t[x],t[T],t[I])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Tx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):pR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],m=a<r.length?t[r.charAt(a)]:0;++a;const y=a<r.length?t[r.charAt(a)]:64;++a;const x=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||m==null||y==null||x==null)throw new yR;const T=l<<2|m>>4;if(s.push(T),y!==64){const I=m<<4&240|y>>2;if(s.push(I),x!==64){const L=y<<6&192|x;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class yR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vR=function(r){const e=Tx(r);return Sx.encodeByteArray(e,!0)},ed=function(r){return vR(r).replace(/\./g,"")},Ax=function(r){try{return Sx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=()=>_R().__FIREBASE_DEFAULTS__,wR=()=>{if(typeof process>"u"||typeof sb>"u")return;const r=sb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},xR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Ax(r[1]);return e&&JSON.parse(e)},Td=()=>{try{return gR()||bR()||wR()||xR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Rx=r=>{var e,t;return(t=(e=Td())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},ER=r=>{const e=Rx(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Nx=()=>{var r;return(r=Td())==null?void 0:r.config},Cx=r=>{var e;return(e=Td())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ix(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ed(JSON.stringify(t)),ed(JSON.stringify(u)),""].join(".")}const Cc={};function AR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Cc))Cc[e]?r.emulator.push(e):r.prod.push(e);return r}function RR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let rb=!1;function kx(r,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Cc[r]===e||Cc[r]||rb)return;Cc[r]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=AR().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{rb=!0,u()},T}function v(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function x(){const T=RR(s),I=t("text"),L=document.getElementById(I)||document.createElement("span"),B=t("learnmore"),z=document.getElementById(B)||document.createElement("a"),re=t("preprendIcon"),$=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;m(W),v(z,B);const le=y();g($,re),W.append($,L,z,le),document.body.appendChild(W)}l?(L.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function CR(){var e;const r=(e=Td())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function jR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OR(){const r=vn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function DR(){return!CR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PR(){try{return typeof indexedDB=="object"}catch{return!1}}function MR(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="FirebaseError";class br extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=VR,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?UR(l,s):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new br(a,m,s)}}function UR(r,e){return r.replace(LR,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const LR=/\{\$([^}]+)}/g;function zR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Sa(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],u=e[a];if(ib(l)&&ib(u)){if(!Sa(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function ib(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function BR(r,e){const t=new qR(r,e);return t.subscribe.bind(t)}class qR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");$R(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=og),a.error===void 0&&(a.error=og),a.complete===void 0&&(a.complete=og);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $R(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(r){return r&&r._delegate?r._delegate:r}class Aa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new TR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GR(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:FR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FR(r){return r===ya?void 0:r}function GR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const QR={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},YR=Ke.INFO,WR={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},XR=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=WR[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wp{constructor(e){this.name=e,this._logLevel=YR,this._logHandler=XR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const JR=(r,e)=>e.some(t=>r instanceof t);let ab,ob;function ZR(){return ab||(ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eN(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Dg=new WeakMap,Ox=new WeakMap,lg=new WeakMap,xp=new WeakMap;function tN(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(mi(r.result)),a()},u=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&jx.set(t,r)}).catch(()=>{}),xp.set(e,r),e}function nN(r){if(Dg.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Dg.set(r,e)}let Pg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Dg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ox.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sN(r){Pg=r(Pg)}function rN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(cg(this),e,...t);return Ox.set(s,e.sort?e.sort():[e]),mi(s)}:eN().includes(r)?function(...e){return r.apply(cg(this),e),mi(jx.get(this))}:function(...e){return mi(r.apply(cg(this),e))}}function iN(r){return typeof r=="function"?rN(r):(r instanceof IDBTransaction&&nN(r),JR(r,ZR())?new Proxy(r,Pg):r)}function mi(r){if(r instanceof IDBRequest)return tN(r);if(lg.has(r))return lg.get(r);const e=iN(r);return e!==r&&(lg.set(r,e),xp.set(e,r)),e}const cg=r=>xp.get(r);function aN(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),m=mi(u);return s&&u.addEventListener("upgradeneeded",g=>{s(mi(u.result),g.oldVersion,g.newVersion,mi(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const oN=["get","getKey","getAll","getAllKeys","count"],lN=["put","add","delete","clear"],ug=new Map;function lb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=lN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||oN.includes(t)))return;const l=async function(u,...m){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&g.done]))[0]};return ug.set(e,l),l}sN(r=>({...r,get:(e,t,s)=>lb(e,t)||r.get(e,t,s),has:(e,t)=>!!lb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function uN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",cb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new wp("@firebase/app"),hN="@firebase/app-compat",dN="@firebase/analytics-compat",fN="@firebase/analytics",mN="@firebase/app-check-compat",gN="@firebase/app-check",pN="@firebase/auth",yN="@firebase/auth-compat",vN="@firebase/database",_N="@firebase/data-connect",bN="@firebase/database-compat",wN="@firebase/functions",xN="@firebase/functions-compat",EN="@firebase/installations",TN="@firebase/installations-compat",SN="@firebase/messaging",AN="@firebase/messaging-compat",RN="@firebase/performance",NN="@firebase/performance-compat",CN="@firebase/remote-config",IN="@firebase/remote-config-compat",kN="@firebase/storage",jN="@firebase/storage-compat",ON="@firebase/firestore",DN="@firebase/ai",PN="@firebase/firestore-compat",MN="firebase",VN="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",UN={[Mg]:"fire-core",[hN]:"fire-core-compat",[fN]:"fire-analytics",[dN]:"fire-analytics-compat",[gN]:"fire-app-check",[mN]:"fire-app-check-compat",[pN]:"fire-auth",[yN]:"fire-auth-compat",[vN]:"fire-rtdb",[_N]:"fire-data-connect",[bN]:"fire-rtdb-compat",[wN]:"fire-fn",[xN]:"fire-fn-compat",[EN]:"fire-iid",[TN]:"fire-iid-compat",[SN]:"fire-fcm",[AN]:"fire-fcm-compat",[RN]:"fire-perf",[NN]:"fire-perf-compat",[CN]:"fire-rc",[IN]:"fire-rc-compat",[kN]:"fire-gcs",[jN]:"fire-gcs-compat",[ON]:"fire-fst",[PN]:"fire-fst-compat",[DN]:"fire-vertex","fire-js":"fire-js",[MN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,LN=new Map,Ug=new Map;function ub(r,e){try{r.container.addComponent(e)}catch(t){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Wo(r){const e=r.name;if(Ug.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;Ug.set(e,r);for(const t of td.values())ub(t,r);for(const t of LN.values())ub(t,r);return!0}function Ep(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ms(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Qc("app","Firebase",zN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=VN;function Dx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Vg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw gi.create("bad-app-name",{appName:String(a)});if(t||(t=Nx()),!t)throw gi.create("no-options");const l=td.get(a);if(l){if(Sa(t,l.options)&&Sa(s,l.config))return l;throw gi.create("duplicate-app",{appName:a})}const u=new KR(a);for(const g of Ug.values())u.addComponent(g);const m=new BN(t,s,u);return td.set(a,m),m}function Px(r=Vg){const e=td.get(r);if(!e&&r===Vg&&Nx())return Dx();if(!e)throw gi.create("no-app",{appName:r});return e}function pi(r,e,t){let s=UN[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(u.join(" "));return}Wo(new Aa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="firebase-heartbeat-database",$N=1,Uc="firebase-heartbeat-store";let hg=null;function Mx(){return hg||(hg=aN(qN,$N,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Uc)}catch(t){console.warn(t)}}}}).catch(r=>{throw gi.create("idb-open",{originalErrorMessage:r.message})})),hg}async function HN(r){try{const t=(await Mx()).transaction(Uc),s=await t.objectStore(Uc).get(Vx(r));return await t.done,s}catch(e){if(e instanceof br)gr.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gr.warn(t.message)}}}async function hb(r,e){try{const s=(await Mx()).transaction(Uc,"readwrite");await s.objectStore(Uc).put(e,Vx(r)),await s.done}catch(t){if(t instanceof br)gr.warn(t.message);else{const s=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gr.warn(s.message)}}}function Vx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=1024,GN=30;class KN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YN(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=db();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>GN){const u=WN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=db(),{heartbeatsToSend:s,unsentEntries:a}=QN(this._heartbeatsCache.heartbeats),l=ed(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return gr.warn(t),""}}}function db(){return new Date().toISOString().substring(0,10)}function QN(r,e=FN){const t=[];let s=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),fb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),fb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class YN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PR()?MR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return hb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function fb(r){return ed(JSON.stringify({version:2,heartbeats:r})).length}function WN(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(r){Wo(new Aa("platform-logger",e=>new cN(e),"PRIVATE")),Wo(new Aa("heartbeat",e=>new KN(e),"PRIVATE")),pi(Mg,cb,r),pi(Mg,cb,"esm2020"),pi("fire-js","")}XN("");var JN="firebase",ZN="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(JN,ZN,"app");function Ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eC=Ux,Lx=new Qc("auth","Firebase",Ux());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new wp("@firebase/auth");function tC(r,...e){nd.logLevel<=Ke.WARN&&nd.warn(`Auth (${ol}): ${r}`,...e)}function $h(r,...e){nd.logLevel<=Ke.ERROR&&nd.error(`Auth (${ol}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(r,...e){throw Tp(r,...e)}function Vs(r,...e){return Tp(r,...e)}function zx(r,e,t){const s={...eC(),[e]:t};return new Qc("auth","Firebase",s).create(e,{appName:r.name})}function yi(r){return zx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Lx.create(r,...e)}function Oe(r,e,...t){if(!r)throw Tp(e,...t)}function fr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $h(e),new Error(e)}function yr(r,e){r||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function nC(){return mb()==="http:"||mb()==="https:"}function mb(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nC()||kR()||"connection"in navigator)?navigator.onLine:!0}function rC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=NR()||jR()}get(){return sC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(r,e){yr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oC=new Wc(3e4,6e4);function Sd(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ll(r,e,t,s,a={}){return qx(r,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const m=Yc({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return IR()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&al(r.emulatorConfig.host)&&(y.credentials="include"),Bx.fetch()(await Hx(r,r.config.apiHost,t,m),y)})}async function qx(r,e,t){r._canInitEmulator=!1;const s={...iC,...e};try{const a=new lC(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw jh(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw jh(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw jh(r,"user-disabled",u);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw zx(r,v,y);pr(r,v)}}catch(a){if(a instanceof br)throw a;pr(r,"network-request-failed",{message:String(a)})}}async function $x(r,e,t,s,a={}){const l=await ll(r,e,t,s,a);return"mfaPendingCredential"in l&&pr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Hx(r,e,t,s){const a=`${e}${t}?${s}`,l=r,u=l.config.emulator?Sp(r.config,a):`${r.config.apiScheme}://${a}`;return aC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class lC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Vs(this.auth,"network-request-failed")),oC.get())})}}function jh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Vs(r,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(r,e){return ll(r,"POST","/v1/accounts:delete",e)}async function sd(r,e){return ll(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uC(r,e=!1){const t=tn(r),s=await t.getIdToken(e),a=Ap(s);Oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Ic(dg(a.auth_time)),issuedAtTime:Ic(dg(a.iat)),expirationTime:Ic(dg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function dg(r){return Number(r)*1e3}function Ap(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ax(t);return a?JSON.parse(a):($h("Failed to decode base64 JWT payload"),null)}catch(a){return $h("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function gb(r){const e=Ap(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof br&&hC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function hC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(r){var x;const e=r.auth,t=await r.getIdToken(),s=await Lc(r,sd(e,{idToken:t}));Oe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(x=a.providerUserInfo)!=null&&x.length?Fx(a.providerUserInfo):[],u=mC(r.providerData,l),m=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),y=m?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new zg(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function fC(r){const e=tn(r);await rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mC(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Fx(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(r,e){const t=await qx(r,{},async()=>{const s=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await Hx(r,a,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&al(r.emulatorConfig.host)&&(g.credentials="include"),Bx.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function pC(r,e){return ll(r,"POST","/v2/accounts:revokeToken",Sd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=gb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await gC(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Fo;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Oe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Oe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gs{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new dC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uC(this,e)}reload(){return fC(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await rd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ms(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Lc(this,cC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:T,isAnonymous:I,providerData:L,stsTokenManager:B}=t;Oe(x&&B,e,"internal-error");const z=Fo.fromJSON(this.name,B);Oe(typeof x=="string",e,"internal-error"),ii(s,e.name),ii(a,e.name),Oe(typeof T=="boolean",e,"internal-error"),Oe(typeof I=="boolean",e,"internal-error"),ii(l,e.name),ii(u,e.name),ii(m,e.name),ii(g,e.name),ii(y,e.name),ii(v,e.name);const re=new gs({uid:x,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:I,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:z,createdAt:y,lastLoginAt:v});return L&&Array.isArray(L)&&(re.providerData=L.map($=>({...$}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,t,s=!1){const a=new Fo;a.updateFromServerResponse(t);const l=new gs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await rd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Fx(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new Fo;m.updateFromIdToken(s);const g=new gs({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new zg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;function mr(r){yr(r instanceof Function,"Expected a class definition");let e=pb.get(r);return e?(yr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,pb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gx.type="NONE";const yb=Gx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r,e,t){return`firebase:${r}:${e}:${t}`}class Go{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Hh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Hh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sd(this.auth,{idToken:e}).catch(()=>{});return t?gs._fromGetAccountInfoResponse(this.auth,t,e):null}return gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Go(mr(yb),e,s);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||mr(yb);const u=Hh(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let x;if(typeof v=="string"){const T=await sd(e,{idToken:v}).catch(()=>{});if(!T)break;x=await gs._fromGetAccountInfoResponse(e,T,v)}else x=gs._fromJSON(e,v);y!==l&&(m=x),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Go(l,e,s):(l=g[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Go(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jx(e))return"Blackberry";if(Zx(e))return"Webos";if(Qx(e))return"Safari";if((e.includes("chrome/")||Yx(e))&&!e.includes("edge/"))return"Chrome";if(Xx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Kx(r=vn()){return/firefox\//i.test(r)}function Qx(r=vn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yx(r=vn()){return/crios\//i.test(r)}function Wx(r=vn()){return/iemobile/i.test(r)}function Xx(r=vn()){return/android/i.test(r)}function Jx(r=vn()){return/blackberry/i.test(r)}function Zx(r=vn()){return/webos/i.test(r)}function Rp(r=vn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yC(r=vn()){var e;return Rp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function vC(){return OR()&&document.documentMode===10}function eE(r=vn()){return Rp(r)||Xx(r)||Zx(r)||Jx(r)||/windows phone/i.test(r)||Wx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r,e=[]){let t;switch(r){case"Browser":t=vb(vn());break;case"Worker":t=`${vb(vn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,m)=>{try{const g=e(l);u(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(r,e={}){return ll(r,"GET","/v2/passwordPolicy",Sd(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=6;class xC{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??wC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _b(this),this.idTokenSubscription=new _b(this),this.beforeStateQueue=new _C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mr(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sd(this,{idToken:e}),s=await gs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ms(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===m)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ms(this.app))return Promise.reject(yi(this));const t=e?tn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ms(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ms(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bC(this),t=new xC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await pC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mr(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&tC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ad(r){return tn(r)}class _b{constructor(e){this.auth=e,this.observer=null,this.addObserver=BR(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TC(r){Np=r}function SC(r){return Np.loadJS(r)}function AC(){return Np.gapiScript}function RC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(r,e){const t=Ep(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Sa(l,e??{}))return a;pr(a,"already-initialized")}return t.initialize({options:e})}function CC(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(mr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function IC(r,e,t){const s=Ad(r);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=nE(e),{host:u,port:m}=kC(e),g=m===null?"":`:${m}`,y={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Sa(y,s.config.emulator)&&Sa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,al(u)?(Ix(`${l}//${u}${g}`),kx("Auth",!0)):jC()}function nE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function kC(r){const e=nE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:bb(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:bb(u)}}}function bb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function jC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,t){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,e){return $x(r,"POST","/v1/accounts:signInWithIdp",Sd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="http://localhost";class Ra extends sE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Ra(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends rE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Xc{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Xc{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Xc{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(r,e){return $x(r,"POST","/v1/accounts:signUp",Sd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await gs._fromIdTokenResponse(e,s,a),u=wb(s);return new wi({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=wb(s);return new wi({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function wb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(r){var a;if(ms(r.app))return Promise.reject(yi(r));const e=Ad(r);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new wi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await DC(e,{returnSecureToken:!0}),s=await wi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends br{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new id(e,t,s,a)}}function iE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?id._fromErrorAndOperation(r,l,e,s):l})}async function MC(r,e,t=!1){const s=await Lc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return wi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(r,e,t=!1){const{auth:s}=r;if(ms(s.app))return Promise.reject(yi(s));const a="reauthenticate";try{const l=await Lc(r,iE(s,a,e,r),t);Oe(l.idToken,s,"internal-error");const u=Ap(l.idToken);Oe(u,s,"internal-error");const{sub:m}=u;return Oe(r.uid===m,s,"user-mismatch"),wi._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(r,e,t=!1){if(ms(r.app))return Promise.reject(yi(r));const s="signIn",a=await iE(r,s,e),l=await wi._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}function LC(r,e,t,s){return tn(r).onIdTokenChanged(e,t,s)}function zC(r,e,t){return tn(r).beforeAuthStateChanged(e,t)}function BC(r,e,t,s){return tn(r).onAuthStateChanged(e,t,s)}function qC(r){return tn(r).signOut()}const ad="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ad,"1"),this.storage.removeItem(ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=1e3,HC=10;class oE extends aE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);vC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,HC):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},$C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oE.type="LOCAL";const FC=oE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE extends aE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lE.type="SESSION";const cE=lE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Rd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),g=await GC(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,g)=>{const y=Cp("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(x){const T=x;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(T.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function QC(r){Us().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function YC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function XC(){return uE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebaseLocalStorageDb",JC=1,od="firebaseLocalStorage",dE="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Nd(r,e){return r.transaction([od],e?"readwrite":"readonly").objectStore(od)}function ZC(){const r=indexedDB.deleteDatabase(hE);return new Jc(r).toPromise()}function Bg(){const r=indexedDB.open(hE,JC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(od,{keyPath:dE})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(od)?e(s):(s.close(),await ZC(),e(await Bg()))})})}async function xb(r,e,t){const s=Nd(r,!0).put({[dE]:e,value:t});return new Jc(s).toPromise()}async function eI(r,e){const t=Nd(r,!1).get(e),s=await new Jc(t).toPromise();return s===void 0?null:s.value}function Eb(r,e){const t=Nd(r,!0).delete(e);return new Jc(t).toPromise()}const tI=800,nI=3;class fE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>nI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rd._getInstance(XC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await YC(),!this.activeServiceWorker)return;this.sender=new KC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await xb(e,ad,"1"),await Eb(e,ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>xb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>eI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Nd(a,!1).getAll();return new Jc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fE.type="LOCAL";const sI=fE;new Wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(r,e){return e?mr(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends sE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iI(r){return UC(r.auth,new Ip(r),r.bypassAuthState)}function aI(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),VC(t,new Ip(r),r.bypassAuthState)}async function oI(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),MC(t,new Ip(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iI;case"linkViaPopup":case"linkViaRedirect":return oI;case"reauthViaPopup":case"reauthViaRedirect":return aI;default:pr(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Wc(2e3,1e4);class Ho extends mE{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=Cp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lI.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="pendingRedirect",Fh=new Map;class uI extends mE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const s=await hI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hI(r,e){const t=mI(e),s=fI(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function dI(r,e){Fh.set(r._key(),e)}function fI(r){return mr(r._redirectPersistence)}function mI(r){return Hh(cI,r.config.apiKey,r.name)}async function gI(r,e,t=!1){if(ms(r.app))return Promise.reject(yi(r));const s=Ad(r),a=rI(s,e),u=await new uI(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=10*60*1e3;class yI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!gE(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Vs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function gE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(r,e={}){return ll(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wI=/^https?/;async function xI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _I(r);for(const t of e)try{if(EI(t))return}catch{}pr(r,"unauthorized-domain")}function EI(r){const e=Lg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!wI.test(t))return!1;if(bI.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new Wc(3e4,6e4);function Sb(){const r=Us().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function SI(r){return new Promise((e,t)=>{var a,l,u;function s(){Sb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sb(),t(Vs(r,"network-request-failed"))},timeout:TI.get()})}if((l=(a=Us().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Us().gapi)!=null&&u.load)s();else{const m=RC("iframefcb");return Us()[m]=()=>{gapi.load?s():t(Vs(r,"network-request-failed"))},SC(`${AC()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function AI(r){return Gh=Gh||SI(r),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Wc(5e3,15e3),NI="__/auth/iframe",CI="emulator/auth/iframe",II={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jI(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Sp(e,CI):`https://${r.config.authDomain}/${NI}`,s={apiKey:e.apiKey,appName:r.name,v:ol},a=kI.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Yc(s).slice(1)}`}async function OI(r){const e=await AI(r),t=Us().gapi;return Oe(t,r,"internal-error"),e.open({where:document.body,url:jI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:II,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Vs(r,"network-request-failed"),m=Us().setTimeout(()=>{l(u)},RI.get());function g(){Us().clearTimeout(m),a(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PI=500,MI=600,VI="_blank",UI="http://localhost";class Ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LI(r,e,t,s=PI,a=MI){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...DI,width:s.toString(),height:a.toString(),top:l,left:u},y=vn().toLowerCase();t&&(m=Yx(y)?VI:t),Kx(y)&&(e=e||UI,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[I,L])=>`${T}${I}=${L},`,"");if(yC(y)&&m!=="_self")return zI(e||"",m),new Ab(null);const x=window.open(e||"",m,v);Oe(x,r,"popup-blocked");try{x.focus()}catch{}return new Ab(x)}function zI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="__/auth/handler",qI="emulator/auth/handler",$I=encodeURIComponent("fac");async function Rb(r,e,t,s,a,l){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ol,eventId:a};if(e instanceof rE){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",zR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))u[v]=x}if(e instanceof Xc){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(u.scopes=v.join(","))}r.tenantId&&(u.tid=r.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await r._getAppCheckToken(),y=g?`#${$I}=${encodeURIComponent(g)}`:"";return`${HI(r)}?${Yc(m).slice(1)}${y}`}function HI({config:r}){return r.emulator?Sp(r,qI):`https://${r.authDomain}/${BI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="webStorageSupport";class FI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cE,this._completeRedirectFn=gI,this._overrideRedirectResult=dI}async _openPopup(e,t,s,a){var u;yr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Rb(e,t,s,Lg(),a);return LI(e,l,Cp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Rb(e,t,s,Lg(),a);return QC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(yr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await OI(e),s=new yI(e);return t.register("authEvent",a=>(Oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fg,{type:fg},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[fg];l!==void 0&&t(!!l),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eE()||Qx()||Rp()}}const GI=FI;var Nb="@firebase/auth",Cb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YI(r){Wo(new Aa("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=s.options;Oe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tE(r)},y=new EC(s,a,l,g);return CC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Wo(new Aa("auth-internal",e=>{const t=Ad(e.getProvider("auth").getImmediate());return(s=>new KI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Nb,Cb,QI(r)),pi(Nb,Cb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=5*60,XI=Cx("authIdTokenMaxAge")||WI;let Ib=null;const JI=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>XI)return;const a=t==null?void 0:t.token;Ib!==a&&(Ib=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ZI(r=Px()){const e=Ep(r,"auth");if(e.isInitialized())return e.getImmediate();const t=NC(r,{popupRedirectResolver:GI,persistence:[sI,FC,cE]}),s=Cx("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=JI(l.toString());zC(t,u,()=>u(t.currentUser)),LC(t,m=>u(m))}}const a=Rx("auth");return a&&IC(t,`http://${a}`),t}function ek(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}TC({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=Vs("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",ek().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YI("Browser");var kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vi,pE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function R(){}R.prototype=A.prototype,C.F=A.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(O,j,M){for(var N=Array(arguments.length-2),We=2;We<arguments.length;We++)N[We-2]=arguments[We];return A.prototype[j].apply(O,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,A,R){R||(R=0);const O=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)O[j]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(j=0;j<16;++j)O[j]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=C.g[0],R=C.g[1],j=C.g[2];let M=C.g[3],N;N=A+(M^R&(j^M))+O[0]+3614090360&4294967295,A=R+(N<<7&4294967295|N>>>25),N=M+(j^A&(R^j))+O[1]+3905402710&4294967295,M=A+(N<<12&4294967295|N>>>20),N=j+(R^M&(A^R))+O[2]+606105819&4294967295,j=M+(N<<17&4294967295|N>>>15),N=R+(A^j&(M^A))+O[3]+3250441966&4294967295,R=j+(N<<22&4294967295|N>>>10),N=A+(M^R&(j^M))+O[4]+4118548399&4294967295,A=R+(N<<7&4294967295|N>>>25),N=M+(j^A&(R^j))+O[5]+1200080426&4294967295,M=A+(N<<12&4294967295|N>>>20),N=j+(R^M&(A^R))+O[6]+2821735955&4294967295,j=M+(N<<17&4294967295|N>>>15),N=R+(A^j&(M^A))+O[7]+4249261313&4294967295,R=j+(N<<22&4294967295|N>>>10),N=A+(M^R&(j^M))+O[8]+1770035416&4294967295,A=R+(N<<7&4294967295|N>>>25),N=M+(j^A&(R^j))+O[9]+2336552879&4294967295,M=A+(N<<12&4294967295|N>>>20),N=j+(R^M&(A^R))+O[10]+4294925233&4294967295,j=M+(N<<17&4294967295|N>>>15),N=R+(A^j&(M^A))+O[11]+2304563134&4294967295,R=j+(N<<22&4294967295|N>>>10),N=A+(M^R&(j^M))+O[12]+1804603682&4294967295,A=R+(N<<7&4294967295|N>>>25),N=M+(j^A&(R^j))+O[13]+4254626195&4294967295,M=A+(N<<12&4294967295|N>>>20),N=j+(R^M&(A^R))+O[14]+2792965006&4294967295,j=M+(N<<17&4294967295|N>>>15),N=R+(A^j&(M^A))+O[15]+1236535329&4294967295,R=j+(N<<22&4294967295|N>>>10),N=A+(j^M&(R^j))+O[1]+4129170786&4294967295,A=R+(N<<5&4294967295|N>>>27),N=M+(R^j&(A^R))+O[6]+3225465664&4294967295,M=A+(N<<9&4294967295|N>>>23),N=j+(A^R&(M^A))+O[11]+643717713&4294967295,j=M+(N<<14&4294967295|N>>>18),N=R+(M^A&(j^M))+O[0]+3921069994&4294967295,R=j+(N<<20&4294967295|N>>>12),N=A+(j^M&(R^j))+O[5]+3593408605&4294967295,A=R+(N<<5&4294967295|N>>>27),N=M+(R^j&(A^R))+O[10]+38016083&4294967295,M=A+(N<<9&4294967295|N>>>23),N=j+(A^R&(M^A))+O[15]+3634488961&4294967295,j=M+(N<<14&4294967295|N>>>18),N=R+(M^A&(j^M))+O[4]+3889429448&4294967295,R=j+(N<<20&4294967295|N>>>12),N=A+(j^M&(R^j))+O[9]+568446438&4294967295,A=R+(N<<5&4294967295|N>>>27),N=M+(R^j&(A^R))+O[14]+3275163606&4294967295,M=A+(N<<9&4294967295|N>>>23),N=j+(A^R&(M^A))+O[3]+4107603335&4294967295,j=M+(N<<14&4294967295|N>>>18),N=R+(M^A&(j^M))+O[8]+1163531501&4294967295,R=j+(N<<20&4294967295|N>>>12),N=A+(j^M&(R^j))+O[13]+2850285829&4294967295,A=R+(N<<5&4294967295|N>>>27),N=M+(R^j&(A^R))+O[2]+4243563512&4294967295,M=A+(N<<9&4294967295|N>>>23),N=j+(A^R&(M^A))+O[7]+1735328473&4294967295,j=M+(N<<14&4294967295|N>>>18),N=R+(M^A&(j^M))+O[12]+2368359562&4294967295,R=j+(N<<20&4294967295|N>>>12),N=A+(R^j^M)+O[5]+4294588738&4294967295,A=R+(N<<4&4294967295|N>>>28),N=M+(A^R^j)+O[8]+2272392833&4294967295,M=A+(N<<11&4294967295|N>>>21),N=j+(M^A^R)+O[11]+1839030562&4294967295,j=M+(N<<16&4294967295|N>>>16),N=R+(j^M^A)+O[14]+4259657740&4294967295,R=j+(N<<23&4294967295|N>>>9),N=A+(R^j^M)+O[1]+2763975236&4294967295,A=R+(N<<4&4294967295|N>>>28),N=M+(A^R^j)+O[4]+1272893353&4294967295,M=A+(N<<11&4294967295|N>>>21),N=j+(M^A^R)+O[7]+4139469664&4294967295,j=M+(N<<16&4294967295|N>>>16),N=R+(j^M^A)+O[10]+3200236656&4294967295,R=j+(N<<23&4294967295|N>>>9),N=A+(R^j^M)+O[13]+681279174&4294967295,A=R+(N<<4&4294967295|N>>>28),N=M+(A^R^j)+O[0]+3936430074&4294967295,M=A+(N<<11&4294967295|N>>>21),N=j+(M^A^R)+O[3]+3572445317&4294967295,j=M+(N<<16&4294967295|N>>>16),N=R+(j^M^A)+O[6]+76029189&4294967295,R=j+(N<<23&4294967295|N>>>9),N=A+(R^j^M)+O[9]+3654602809&4294967295,A=R+(N<<4&4294967295|N>>>28),N=M+(A^R^j)+O[12]+3873151461&4294967295,M=A+(N<<11&4294967295|N>>>21),N=j+(M^A^R)+O[15]+530742520&4294967295,j=M+(N<<16&4294967295|N>>>16),N=R+(j^M^A)+O[2]+3299628645&4294967295,R=j+(N<<23&4294967295|N>>>9),N=A+(j^(R|~M))+O[0]+4096336452&4294967295,A=R+(N<<6&4294967295|N>>>26),N=M+(R^(A|~j))+O[7]+1126891415&4294967295,M=A+(N<<10&4294967295|N>>>22),N=j+(A^(M|~R))+O[14]+2878612391&4294967295,j=M+(N<<15&4294967295|N>>>17),N=R+(M^(j|~A))+O[5]+4237533241&4294967295,R=j+(N<<21&4294967295|N>>>11),N=A+(j^(R|~M))+O[12]+1700485571&4294967295,A=R+(N<<6&4294967295|N>>>26),N=M+(R^(A|~j))+O[3]+2399980690&4294967295,M=A+(N<<10&4294967295|N>>>22),N=j+(A^(M|~R))+O[10]+4293915773&4294967295,j=M+(N<<15&4294967295|N>>>17),N=R+(M^(j|~A))+O[1]+2240044497&4294967295,R=j+(N<<21&4294967295|N>>>11),N=A+(j^(R|~M))+O[8]+1873313359&4294967295,A=R+(N<<6&4294967295|N>>>26),N=M+(R^(A|~j))+O[15]+4264355552&4294967295,M=A+(N<<10&4294967295|N>>>22),N=j+(A^(M|~R))+O[6]+2734768916&4294967295,j=M+(N<<15&4294967295|N>>>17),N=R+(M^(j|~A))+O[13]+1309151649&4294967295,R=j+(N<<21&4294967295|N>>>11),N=A+(j^(R|~M))+O[4]+4149444226&4294967295,A=R+(N<<6&4294967295|N>>>26),N=M+(R^(A|~j))+O[11]+3174756917&4294967295,M=A+(N<<10&4294967295|N>>>22),N=j+(A^(M|~R))+O[2]+718787259&4294967295,j=M+(N<<15&4294967295|N>>>17),N=R+(M^(j|~A))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+M&4294967295}s.prototype.v=function(C,A){A===void 0&&(A=C.length);const R=A-this.blockSize,O=this.C;let j=this.h,M=0;for(;M<A;){if(j==0)for(;M<=R;)a(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<A;)if(O[j++]=C.charCodeAt(M++),j==this.blockSize){a(this,O),j=0;break}}else for(;M<A;)if(O[j++]=C[M++],j==this.blockSize){a(this,O),j=0;break}}this.h=j,this.o+=A},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)C[A++]=this.g[R]>>>O&255;return C};function l(C,A){var R=m;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=A(C)}function u(C,A){this.h=A;const R=[];let O=!0;for(let j=C.length-1;j>=0;j--){const M=C[j]|0;O&&M==A||(R[j]=M,O=!1)}this.g=R}var m={};function g(C){return-128<=C&&C<128?l(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return x;if(C<0)return z(y(-C));const A=[];let R=1;for(let O=0;C>=R;O++)A[O]=C/R|0,R*=4294967296;return new u(A,0)}function v(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return z(v(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let O=x;for(let M=0;M<C.length;M+=8){var j=Math.min(8,C.length-M);const N=parseInt(C.substring(M,M+j),A);j<8?(j=y(Math.pow(A,j)),O=O.j(j).add(y(N))):(O=O.j(R),O=O.add(y(N)))}return O}var x=g(0),T=g(1),I=g(16777216);r=u.prototype,r.m=function(){if(B(this))return-z(this).m();let C=0,A=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);C+=(O>=0?O:4294967296+O)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(B(this))return"-"+z(this).toString(C);const A=y(Math.pow(C,6));var R=this;let O="";for(;;){const j=le(R,A).g;R=re(R,j.j(A));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=j,L(R))return M+O;for(;M.length<6;)M="0"+M;O=M+O}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function B(C){return C.h==-1}r.l=function(C){return C=re(this,C),B(C)?-1:L(C)?0:1};function z(C){const A=C.g.length,R=[];for(let O=0;O<A;O++)R[O]=~C.g[O];return new u(R,~C.h).add(T)}r.abs=function(){return B(this)?z(this):this},r.add=function(C){const A=Math.max(this.g.length,C.g.length),R=[];let O=0;for(let j=0;j<=A;j++){let M=O+(this.i(j)&65535)+(C.i(j)&65535),N=(M>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);O=N>>>16,M&=65535,N&=65535,R[j]=N<<16|M}return new u(R,R[R.length-1]&-2147483648?-1:0)};function re(C,A){return C.add(z(A))}r.j=function(C){if(L(this)||L(C))return x;if(B(this))return B(C)?z(this).j(z(C)):z(z(this).j(C));if(B(C))return z(this.j(z(C)));if(this.l(I)<0&&C.l(I)<0)return y(this.m()*C.m());const A=this.g.length+C.g.length,R=[];for(var O=0;O<2*A;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let j=0;j<C.g.length;j++){const M=this.i(O)>>>16,N=this.i(O)&65535,We=C.i(j)>>>16,Ue=C.i(j)&65535;R[2*O+2*j]+=N*Ue,$(R,2*O+2*j),R[2*O+2*j+1]+=M*Ue,$(R,2*O+2*j+1),R[2*O+2*j+1]+=N*We,$(R,2*O+2*j+1),R[2*O+2*j+2]+=M*We,$(R,2*O+2*j+2)}for(C=0;C<A;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=A;C<2*A;C++)R[C]=0;return new u(R,0)};function $(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function W(C,A){this.g=C,this.h=A}function le(C,A){if(L(A))throw Error("division by zero");if(L(C))return new W(x,x);if(B(C))return A=le(z(C),A),new W(z(A.g),z(A.h));if(B(A))return A=le(C,z(A)),new W(z(A.g),A.h);if(C.g.length>30){if(B(C)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var R=T,O=A;O.l(C)<=0;)R=ce(R),O=ce(O);var j=oe(R,1),M=oe(O,1);for(O=oe(O,2),R=oe(R,2);!L(O);){var N=M.add(O);N.l(C)<=0&&(j=j.add(R),M=N),O=oe(O,1),R=oe(R,1)}return A=re(C,j.j(A)),new W(j,A)}for(j=x;C.l(A)>=0;){for(R=Math.max(1,Math.floor(C.m()/A.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),M=y(R),N=M.j(A);B(N)||N.l(C)>0;)R-=O,M=y(R),N=M.j(A);L(M)&&(M=T),j=j.add(M),C=re(C,N)}return new W(j,C)}r.B=function(C){return le(this,C).h},r.and=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)&C.i(O);return new u(R,this.h&C.h)},r.or=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)|C.i(O);return new u(R,this.h|C.h)},r.xor=function(C){const A=Math.max(this.g.length,C.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)^C.i(O);return new u(R,this.h^C.h)};function ce(C){const A=C.g.length+1,R=[];for(let O=0;O<A;O++)R[O]=C.i(O)<<1|C.i(O-1)>>>31;return new u(R,C.h)}function oe(C,A){const R=A>>5;A%=32;const O=C.g.length-R,j=[];for(let M=0;M<O;M++)j[M]=A>0?C.i(M+R)>>>A|C.i(M+R+1)<<32-A:C.i(M+R);return new u(j,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,pE=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,vi=u}).apply(typeof kb<"u"?kb:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yE,Tc,vE,Kh,qg,_E,bE,wE;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var _=0;_<h.length;++_){var b=h[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function a(h,_){if(_)e:{var b=s;h=h.split(".");for(var S=0;S<h.length-1;S++){var F=h[S];if(!(F in b))break e;b=b[F]}h=h[h.length-1],S=b[h],_=_(S),_!=S&&_!=null&&e(b,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var b=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&b.push([S,_[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function m(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function g(h,_,b){return h.call.apply(h.bind,arguments)}function y(h,_,b){return y=g,y.apply(null,arguments)}function v(h,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function x(h,_){function b(){}b.prototype=_.prototype,h.Z=_.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(S,F,Y){for(var ue=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ue[Pe-2]=arguments[Pe];return _.prototype[F].apply(S,ue)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const _=h.length;if(_>0){const b=Array(_);for(let S=0;S<_;S++)b[S]=h[S];return b}return[]}function L(h,_){for(let S=1;S<arguments.length;S++){const F=arguments[S];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=h.length||0;const Y=F.length||0;h.length=b+Y;for(let ue=0;ue<Y;ue++)h[b+ue]=F[ue]}else h.push(F)}}class B{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(h){u.setTimeout(()=>{throw h},0)}function re(){var h=C;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,b){const S=W.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var W=new B(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,oe=!1,C=new $,A=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(R)}};function R(){for(var h;h=re();){try{h.h.call(h.g)}catch(b){z(b)}var _=W;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}oe=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,_),u.removeEventListener("test",b,_)}catch{}return h}();function N(h){return/^[\s\xa0]*$/.test(h)}function We(h,_){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}x(We,j),We.prototype.init=function(h,_){const b=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(b=="mouseover"?_=h.fromElement:b=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ue="closure_listenable_"+(Math.random()*1e6|0),V=0;function ie(h,_,b,S,F){this.listener=h,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=F,this.key=++V,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ze(h,_,b){for(const S in h)_.call(b,h[S],S,h)}function P(h,_){for(const b in h)_.call(void 0,h[b],b,h)}function se(h){const _={};for(const b in h)_[b]=h[b];return _}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,_){let b,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(b in S)h[b]=S[b];for(let Y=0;Y<he.length;Y++)b=he[Y],Object.prototype.hasOwnProperty.call(S,b)&&(h[b]=S[b])}}function ae(h){this.src=h,this.g={},this.h=0}ae.prototype.add=function(h,_,b,S,F){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ue=ve(h,_,S,F);return ue>-1?(_=h[ue],b||(_.fa=!1)):(_=new ie(_,this.src,Y,!!S,F),_.fa=b,h.push(_)),_};function Ee(h,_){const b=_.type;if(b in h.g){var S=h.g[b],F=Array.prototype.indexOf.call(S,_,void 0),Y;(Y=F>=0)&&Array.prototype.splice.call(S,F,1),Y&&(te(_),h.g[b].length==0&&(delete h.g[b],h.h--))}}function ve(h,_,b,S){for(let F=0;F<h.length;++F){const Y=h[F];if(!Y.da&&Y.listener==_&&Y.capture==!!b&&Y.ha==S)return F}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),et={};function un(h,_,b,S,F){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)un(h,_[Y],b,S,F);return null}return b=lu(b),h&&h[Ue]?h.J(_,b,m(S)?!!S.capture:!1,F):_s(h,_,b,!1,S,F)}function _s(h,_,b,S,F,Y){if(!_)throw Error("Invalid event type");const ue=m(F)?!!F.capture:!!F;let Pe=ml(h);if(Pe||(h[$e]=Pe=new ae(h)),b=Pe.add(_,b,S,ue,Y),b.proxy)return b;if(S=bs(),b.proxy=S,S.src=h,S.listener=b,h.addEventListener)M||(F=ue),F===void 0&&(F=!1),h.addEventListener(_.toString(),S,F);else if(h.attachEvent)h.attachEvent(Ma(_.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function bs(){function h(b){return _.call(h.src,h.listener,b)}const _=Gd;return h}function ts(h,_,b,S,F){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)ts(h,_[Y],b,S,F);else S=m(S)?!!S.capture:!!S,b=lu(b),h&&h[Ue]?(h=h.i,Y=String(_).toString(),Y in h.g&&(_=h.g[Y],b=ve(_,b,S,F),b>-1&&(te(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete h.g[Y],h.h--)))):h&&(h=ml(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,b,S,F)),(b=h>-1?_[h]:null)&&ki(b))}function ki(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Ue])Ee(_.i,h);else{var b=h.type,S=h.proxy;_.removeEventListener?_.removeEventListener(b,S,h.capture):_.detachEvent?_.detachEvent(Ma(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=ml(_))?(Ee(b,h),b.h==0&&(b.src=null,_[$e]=null)):te(h)}}}function Ma(h){return h in et?et[h]:et[h]="on"+h}function Gd(h,_){if(h.da)h=!0;else{_=new We(_,this);const b=h.listener,S=h.ha||h.src;h.fa&&ki(h),h=b.call(S,_)}return h}function ml(h){return h=h[$e],h instanceof ae?h:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function lu(h){return typeof h=="function"?h:(h[Tn]||(h[Tn]=function(_){return h.handleEvent(_)}),h[Tn])}function zt(){O.call(this),this.i=new ae(this),this.M=this,this.G=null}x(zt,O),zt.prototype[Ue]=!0,zt.prototype.removeEventListener=function(h,_,b,S){ts(this,h,_,b,S)};function Kt(h,_){var b,S=h.G;if(S)for(b=[];S;S=S.G)b.push(S);if(h=h.M,S=_.type||_,typeof _=="string")_=new j(_,h);else if(_ instanceof j)_.target=_.target||h;else{var F=_;_=new j(S,h),D(_,F)}F=!0;let Y,ue;if(b)for(ue=b.length-1;ue>=0;ue--)Y=_.g=b[ue],F=Hs(Y,S,!0,_)&&F;if(Y=_.g=h,F=Hs(Y,S,!0,_)&&F,F=Hs(Y,S,!1,_)&&F,b)for(ue=0;ue<b.length;ue++)Y=_.g=b[ue],F=Hs(Y,S,!1,_)&&F}zt.prototype.N=function(){if(zt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const b=h.g[_];for(let S=0;S<b.length;S++)te(b[S]);delete h.g[_],h.h--}}this.G=null},zt.prototype.J=function(h,_,b,S){return this.i.add(String(h),_,!1,b,S)},zt.prototype.K=function(h,_,b,S){return this.i.add(String(h),_,!0,b,S)};function Hs(h,_,b,S){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let F=!0;for(let Y=0;Y<_.length;++Y){const ue=_[Y];if(ue&&!ue.da&&ue.capture==b){const Pe=ue.listener,pt=ue.ha||ue.src;ue.fa&&Ee(h.i,ue),F=Pe.call(pt,S)!==!1&&F}}return F&&!S.defaultPrevented}function Kd(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function gl(h){h.g=Kd(()=>{h.g=null,h.i&&(h.i=!1,gl(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Qd extends O{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:gl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(h){O.call(this),this.h=h,this.g={}}x(ji,O);var wr=[];function hn(h){ze(h.g,function(_,b){this.g.hasOwnProperty(b)&&ki(_)},h),h.g={}}ji.prototype.N=function(){ji.Z.N.call(this),hn(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=u.JSON.stringify,_n=u.JSON.parse,Yd=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function cu(){}function uu(){}var ws={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xr(){j.call(this,"d")}x(xr,j);function ns(){j.call(this,"c")}x(ns,j);var $n={},Er=null;function Va(){return Er=Er||new zt}$n.Ia="serverreachability";function pl(h){j.call(this,$n.Ia,h)}x(pl,j);function Tr(h){const _=Va();Kt(_,new pl(_))}$n.STAT_EVENT="statevent";function Ua(h,_){j.call(this,$n.STAT_EVENT,h),this.stat=_}x(Ua,j);function St(h){const _=Va();Kt(_,new Ua(_,h))}$n.Ja="timingevent";function hu(h,_){j.call(this,$n.Ja,h),this.size=_}x(hu,j);function Sr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function Ar(){this.g=!0}Ar.prototype.ua=function(){this.g=!1};function yl(h,_,b,S,F,Y){h.info(function(){if(h.g)if(Y){var ue="",Pe=Y.split("&");for(let st=0;st<Pe.length;st++){var pt=Pe[st].split("=");if(pt.length>1){const Nt=pt[0];pt=pt[1];const jn=Nt.split("_");ue=jn.length>=2&&jn[1]=="type"?ue+(Nt+"="+pt+"&"):ue+(Nt+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+b+`
`+ue})}function vl(h,_,b,S,F,Y,ue){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+b+`
`+Y+" "+ue})}function Fs(h,_,b,S){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+xs(h,b)+(S?" "+S:"")})}function Wd(h,_){h.info(function(){return"TIMEOUT: "+_})}Ar.prototype.info=function(){};function xs(h,_){if(!h.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var b=Y[h];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ue=1;ue<S.length;ue++)S[ue]=""}}}}return qn(Y)}catch{return _}}var At={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gs;function Oi(){}x(Oi,cu),Oi.prototype.g=function(){return new XMLHttpRequest},Gs=new Oi;function Di(h){return encodeURIComponent(String(h))}function Xd(h){var _=1;h=h.split(":");const b=[];for(;_>0&&h.length;)b.push(h.shift()),_--;return h.length&&b.push(h.join(":")),b}function ss(h,_,b,S){this.j=h,this.i=_,this.l=b,this.S=S||1,this.V=new ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}var La={},Es={};function Ts(h,_,b){h.M=1,h.A=Qs(bt(_)),h.u=b,h.R=!0,Nr(h,null)}function Nr(h,_){h.F=Date.now(),Pi(h),h.B=bt(h.A);var b=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),gu(b.i,"t",S),h.C=0,b=h.j.L,h.h=new Rr,h.g=Ya(h.j,b?_:null,!h.u),h.P>0&&(h.O=new Qd(y(h.Y,h,h.g),h.P)),_=h.V,b=h.g,S=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(wr[0]=F.toString()),F=wr);for(let Y=0;Y<F.length;Y++){const ue=un(b,F[Y],S||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=h.J?se(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Tr(),yl(h.i,h.v,h.B,h.l,h.S,h.u)}ss.prototype.ba=function(h){h=h.target;const _=this.O;_&&dn(h)==3?_.j():this.Y(h)},ss.prototype.Y=function(h){try{if(h==this.g)e:{const Pe=dn(this.g),pt=this.g.ya(),st=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Gi(this.g)))){this.K||Pe!=4||pt==7||(pt==8||st<=0?Tr(3):Tr(2)),As(this);var _=this.g.ca();this.X=_;var b=Cr(this);if(this.o=_==200,vl(this.i,this.v,this.B,this.l,this.S,Pe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(S)){var Y=S;break t}}Y=null}if(h=Y)Fs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,za(this,h);else{this.o=!1,this.m=3,St(12),Rs(this),Mi(this);break e}}if(this.R){h=!0;let Nt;for(;!this.K&&this.C<b.length;)if(Nt=du(this,b),Nt==Es){Pe==4&&(this.m=4,St(14),h=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==La){this.m=4,St(15),Fs(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Fs(this.i,this.l,Nt,null),za(this,Nt);if(Rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||b.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)Fs(this.i,this.l,b,"[Invalid Chunked Response]"),Rs(this),Mi(this);else if(b.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Nl(ue),ue.P=!0,St(11))}}else Fs(this.i,this.l,b,null),za(this,b);Pe==4&&Rs(this),this.o&&!this.K&&(Pe==4?Cl(this.j,this):(this.o=!1,Pi(this)))}else Ki(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Rs(this),Mi(this)}}}catch{}finally{}};function Cr(h){if(!Rt(h))return h.g.la();const _=Gi(h.g);if(_==="")return"";let b="";const S=_.length,F=dn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Rs(h),Mi(h),"";h.h.i=new u.TextDecoder}for(let Y=0;Y<S;Y++)h.h.h=!0,b+=h.h.i.decode(_[Y],{stream:!(F&&Y==S-1)});return _.length=0,h.h.g+=b,h.C=0,h.h.g}function Rt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function du(h,_){var b=h.C,S=_.indexOf(`
`,b);return S==-1?Es:(b=Number(_.substring(b,S)),isNaN(b)?La:(S+=1,S+b>_.length?Es:(_=_.slice(S,S+b),h.C=S+b,_)))}ss.prototype.cancel=function(){this.K=!0,Rs(this)};function Pi(h){h.T=Date.now()+h.H,Ss(h,h.H)}function Ss(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Sr(y(h.aa,h),_)}function As(h){h.D&&(u.clearTimeout(h.D),h.D=null)}ss.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Wd(this.i,this.B),this.M!=2&&(Tr(),St(17)),Rs(this),this.m=2,Mi(this)):Ss(this,this.T-h)};function Mi(h){h.j.I==0||h.K||Cl(h.j,h)}function Rs(h){As(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,hn(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function za(h,_){try{var b=h.j;if(b.I!=0&&(b.g==h||Li(b.h,h))){if(!h.L&&Li(b.h,h)&&b.I==3){try{var S=b.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Qa(b),Ns(b);else break e;Rl(b),St(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Sr(y(b.Va,b),6e3));Hn(b.h)<=1&&b.ta&&(b.ta=void 0)}else Xs(b,11)}else if((h.L||b.g==h)&&Qa(b),!N(_))for(F=b.Ba.g.parse(_),_=0;_<F.length;_++){let st=F[_];const Nt=st[0];if(!(Nt<=b.K))if(b.K=Nt,st=st[1],b.I==2)if(st[0]=="c"){b.M=st[1],b.ba=st[2];const jn=st[3];jn!=null&&(b.ka=jn,b.j.info("VER="+b.ka));const Cs=st[4];Cs!=null&&(b.za=Cs,b.j.info("SVER="+b.za));const as=st[5];as!=null&&typeof as=="number"&&as>0&&(S=1.5*as,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const os=h.g;if(os){const ls=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ls){var Y=S.h;Y.g||ls.indexOf("spdy")==-1&&ls.indexOf("quic")==-1&&ls.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ba(Y,Y.h),Y.h=null))}if(S.G){const kl=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(S.wa=kl,at(S.J,S.G,kl))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ue=h;if(S.na=Tu(S,S.L?S.ba:null,S.W),ue.L){Ks(S.h,ue);var Pe=ue,pt=S.O;pt&&(Pe.H=pt),Pe.D&&(As(Pe),Pi(Pe)),S.g=ue}else bu(S);b.i.length>0&&Xi(b)}else st[0]!="stop"&&st[0]!="close"||Xs(b,7);else b.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Xs(b,7):Yi(b):st[0]!="noop"&&b.l&&b.l.qa(st),b.A=0)}}Tr(4)}catch{}}var Jd=class{constructor(h,_){this.g=h,this.map=_}};function Vi(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ui(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Hn(h){return h.h?1:h.g?h.g.size:0}function Li(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ba(h,_){h.g?h.g.add(_):h.h=_}function Ks(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Vi.prototype.cancel=function(){if(this.i=qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function qa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const b of h.g.values())_=_.concat(b.G);return _}return I(h.i)}var $a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zd(h,_){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const S=h[b].indexOf("=");let F,Y=null;S>=0?(F=h[b].substring(0,S),Y=h[b].substring(S+1)):F=h[b],_(F,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function rs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof rs?(this.l=h.l,Ir(this,h.j),this.o=h.o,this.g=h.g,zi(this,h.u),this.h=h.h,kr(this,pu(h.i)),this.m=h.m):h&&(_=String(h).match($a))?(this.l=!1,Ir(this,_[1]||"",!0),this.o=Bi(_[2]||""),this.g=Bi(_[3]||"",!0),zi(this,_[4]),this.h=Bi(_[5]||"",!0),kr(this,_[6]||"",!0),this.m=Bi(_[7]||"")):(this.l=!1,this.i=new Fn(null,this.l))}rs.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Qt(_,bl,!0),":");var b=this.g;return(b||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Qt(_,bl,!0),"@"),h.push(Di(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Qt(b,b.charAt(0)=="/"?jr:wl,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Qt(b,mu)),h.join("")},rs.prototype.resolve=function(h){const _=bt(this);let b=!!h.j;b?Ir(_,h.j):b=!!h.o,b?_.o=h.o:b=!!h.g,b?_.g=h.g:b=h.u!=null;var S=h.h;if(b)zi(_,h.u);else if(b=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=_.h.lastIndexOf("/");F!=-1&&(S=_.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const Y=[];for(let ue=0;ue<F.length;){const Pe=F[ue++];Pe=="."?S&&ue==F.length&&Y.push(""):Pe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),S&&ue==F.length&&Y.push("")):(Y.push(Pe),S=!0)}S=Y.join("/")}else S=F}return b?_.h=S:b=h.i.toString()!=="",b?kr(_,pu(h.i)):b=!!h.m,b&&(_.m=h.m),_};function bt(h){return new rs(h)}function Ir(h,_,b){h.j=b?Bi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function zi(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function kr(h,_,b){_ instanceof Fn?(h.i=_,Tl(h.i,h.l)):(b||(_=Qt(_,fu)),h.i=new Fn(_,h.l))}function at(h,_,b){h.i.set(_,b)}function Qs(h){return at(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Bi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qt(h,_,b){return typeof h=="string"?(h=encodeURI(h).replace(_,_l),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _l(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var bl=/[#\/\?@]/g,wl=/[#\?:]/g,jr=/[#\?]/g,fu=/[#\?@]/g,mu=/#/g;function Fn(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Ys(h){h.g||(h.g=new Map,h.h=0,h.i&&Zd(h.i,function(_,b){h.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}r=Fn.prototype,r.add=function(h,_){Ys(this),this.i=null,h=is(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(_),this.h+=1,this};function xl(h,_){Ys(h),_=is(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function El(h,_){return Ys(h),_=is(h,_),h.g.has(_)}r.forEach=function(h,_){Ys(this),this.g.forEach(function(b,S){b.forEach(function(F){h.call(_,F,S,this)},this)},this)};function Ha(h,_){Ys(h);let b=[];if(typeof _=="string")El(h,_)&&(b=b.concat(h.g.get(is(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)b=b.concat(h[_]);return b}r.set=function(h,_){return Ys(this),this.i=null,h=is(this,h),El(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},r.get=function(h,_){return h?(h=Ha(this,h),h.length>0?String(h[0]):_):_};function gu(h,_,b){xl(h,_),b.length>0&&(h.i=null,h.g.set(is(h,_),I(b)),h.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var b=_[S];const F=Di(b);b=Ha(this,b);for(let Y=0;Y<b.length;Y++){let ue=F;b[Y]!==""&&(ue+="="+Di(b[Y])),h.push(ue)}}return this.i=h.join("&")};function pu(h){const _=new Fn;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function is(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Tl(h,_){_&&!h.j&&(Ys(h),h.i=null,h.g.forEach(function(b,S){const F=S.toLowerCase();S!=F&&(xl(this,S),gu(this,F,b))},h)),h.j=_}function Sl(h,_){const b=new Ar;if(u.Image){const S=new Image;S.onload=v(bn,b,"TestLoadImage: loaded",!0,_,S),S.onerror=v(bn,b,"TestLoadImage: error",!1,_,S),S.onabort=v(bn,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=v(bn,b,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else _(!1)}function Or(h,_){const b=new Ar,S=new AbortController,F=setTimeout(()=>{S.abort(),bn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:S.signal}).then(Y=>{clearTimeout(F),Y.ok?bn(b,"TestPingServer: ok",!0,_):bn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),bn(b,"TestPingServer: error",!1,_)})}function bn(h,_,b,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(b)}catch{}}function yu(){this.g=new Yd}function qi(h){this.i=h.Sb||null,this.h=h.ab||!1}x(qi,cu),qi.prototype.g=function(){return new $i(this.i,this.h)};function $i(h,_){zt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x($i,zt),r=$i.prototype,r.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,Ws(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wn(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?wn(this):Ws(this),this.readyState==3&&Dr(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,wn(this))},r.Na=function(h){this.g&&(this.response=h,wn(this))},r.ga=function(){this.g&&wn(this)};function wn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ws(h)}r.setRequestHeader=function(h,_){this.A.append(h,_)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=_.next();return h.join(`\r
`)};function Ws(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pr(h){let _="";return ze(h,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function Gn(h,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Pr(b),typeof h=="string"?b!=null&&Di(b):at(h,_,b))}function dt(h){zt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(dt,zt);var Fa=/^https?$/i,vu=["POST","PUT"];r=dt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gs.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Y){Hi(this,Y);return}if(h=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)b.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())b.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(vu,_,void 0)>=0)||S||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of b)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Hi(this,Y)}};function Hi(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Fi(h),Bt(h)}function Fi(h){h.A||(h.A=!0,Kt(h,"complete"),Kt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Kt(this,"complete"),Kt(this,"abort"),Bt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Al(this):this.Xa())},r.Xa=function(){Al(this)};function Al(h){if(h.h&&typeof l<"u"){if(h.v&&dn(h)==4)setTimeout(h.Ca.bind(h),0);else if(Kt(h,"readystatechange"),dn(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=Y===0){let ue=String(h.D).match($a)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),S=!Fa.test(ue?ue.toLowerCase():"")}b=S}if(b)Kt(h,"complete"),Kt(h,"success");else{h.o=6;try{var F=dn(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",Fi(h)}}finally{Bt(h)}}}}function Bt(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,_||Kt(h,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function dn(h){return h.g?h.g.readyState:0}r.ca=function(){try{return dn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),_n(_)}};function Gi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(h){const _={};h=(h.g&&dn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(N(h[S]))continue;var b=Xd(h[S]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=_[F]||[];_[F]=Y,Y.push(b)}P(_,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(h,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||_}function Ga(h){this.za=0,this.i=[],this.j=new Ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qi("baseRetryDelayMs",5e3,h),this.Za=Qi("retryDelaySeedMs",1e4,h),this.Ta=Qi("forwardChannelMaxRetries",2,h),this.va=Qi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Vi(h&&h.concurrentRequestLimit),this.Ba=new yu,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ga.prototype,r.ka=8,r.I=1,r.connect=function(h,_,b,S){St(0),this.W=h,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Tu(this,null,this.W),Xi(this)};function Yi(h){if(Wi(h),h.I==3){var _=h.V++,b=bt(h.J);if(at(b,"SID",h.M),at(b,"RID",_),at(b,"TYPE","terminate"),Ji(h,b),_=new ss(h,h.j,_),_.M=2,_.A=Qs(bt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=_.A,b=!0),b||(_.g=Ya(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Pi(_)}Eu(h)}function Ns(h){h.g&&(Nl(h),h.g.cancel(),h.g=null)}function Wi(h){Ns(h),h.v&&(u.clearTimeout(h.v),h.v=null),Qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Xi(h){if(!Ui(h.h)&&!h.m){h.m=!0;var _=h.Ea;ce||A(),oe||(ce(),oe=!0),C.add(_,h),h.D=0}}function ef(h,_){return Hn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Sr(y(h.Ea,h,_),xu(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new ss(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=se(Y),D(Y,this.U)):Y=this.U),this.u!==null||this.R||(F.J=Y,Y=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Ka(this,F,_),b=bt(this.J),at(b,"RID",h),at(b,"CVER",22),this.G&&at(b,"X-HTTP-Session-Id",this.G),Ji(this,b),Y&&(this.R?_="headers="+Di(Pr(Y))+"&"+_:this.u&&Gn(b,this.u,Y)),Ba(this.h,F),this.Ra&&at(b,"TYPE","init"),this.S?(at(b,"$req",_),at(b,"SID","null"),F.U=!0,Ts(F,b,null)):Ts(F,b,_),this.I=2}}else this.I==3&&(h?_u(this,h):this.i.length==0||Ui(this.h)||_u(this))};function _u(h,_){var b;_?b=_.l:b=h.V++;const S=bt(h.J);at(S,"SID",h.M),at(S,"RID",b),at(S,"AID",h.K),Ji(h,S),h.u&&h.o&&Gn(S,h.u,h.o),b=new ss(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Ka(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ba(h.h,b),Ts(b,S,_)}function Ji(h,_){h.H&&ze(h.H,function(b,S){at(_,S,b)}),h.l&&ze({},function(b,S){at(_,S,b)})}function Ka(h,_,b){b=Math.min(h.i.length,b);const S=h.l?y(h.l.Ka,h.l,h):null;e:{var F=h.i;let Pe=-1;for(;;){const pt=["count="+b];Pe==-1?b>0?(Pe=F[0].g,pt.push("ofs="+Pe)):Pe=0:pt.push("ofs="+Pe);let st=!0;for(let Nt=0;Nt<b;Nt++){var Y=F[Nt].g;const jn=F[Nt].map;if(Y-=Pe,Y<0)Pe=Math.max(0,F[Nt].g-100),st=!1;else try{Y="req"+Y+"_"||"";try{var ue=jn instanceof Map?jn:Object.entries(jn);for(const[Cs,as]of ue){let os=as;m(as)&&(os=qn(as)),pt.push(Y+Cs+"="+encodeURIComponent(os))}}catch(Cs){throw pt.push(Y+"type="+encodeURIComponent("_badmap")),Cs}}catch{S&&S(jn)}}if(st){ue=pt.join("&");break e}}ue=void 0}return h=h.i.splice(0,b),_.G=h,ue}function bu(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;ce||A(),oe||(ce(),oe=!0),C.add(_,h),h.A=0}}function Rl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Sr(y(h.Da,h),xu(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Sr(y(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Ns(this),wu(this))};function Nl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function wu(h){h.g=new ss(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=bt(h.na);at(_,"RID","rpc"),at(_,"SID",h.M),at(_,"AID",h.K),at(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&at(_,"TO",h.ia),at(_,"TYPE","xmlhttp"),Ji(h,_),h.u&&h.o&&Gn(_,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Qs(bt(_)),b.u=null,b.R=!0,Nr(b,h)}r.Va=function(){this.C!=null&&(this.C=null,Ns(this),Rl(this),St(19))};function Qa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Cl(h,_){var b=null;if(h.g==_){Qa(h),Nl(h),h.g=null;var S=2}else if(Li(h.h,_))b=_.G,Ks(h.h,_),S=1;else return;if(h.I!=0){if(_.o)if(S==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var F=h.D;S=Va(),Kt(S,new hu(S,b)),Xi(h)}else bu(h);else if(F=_.m,F==3||F==0&&_.X>0||!(S==1&&ef(h,_)||S==2&&Rl(h)))switch(b&&b.length>0&&(_=h.h,_.i=_.i.concat(b)),F){case 1:Xs(h,5);break;case 4:Xs(h,10);break;case 3:Xs(h,6);break;default:Xs(h,2)}}}function xu(h,_){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*_}function Xs(h,_){if(h.j.info("Error code "+_),_==2){var b=y(h.bb,h),S=h.Ua;const F=!S;S=new rs(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ir(S,"https"),Qs(S),F?Sl(S.toString(),b):Or(S.toString(),b)}else St(2);h.I=0,h.l&&h.l.pa(_),Eu(h),Wi(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Eu(h){if(h.I=0,h.ja=[],h.l){const _=qa(h.h);(_.length!=0||h.i.length!=0)&&(L(h.ja,_),L(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Tu(h,_,b){var S=b instanceof rs?bt(b):new rs(b);if(S.g!="")_&&(S.g=_+"."+S.g),zi(S,S.u);else{var F=u.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;const Y=new rs(null);S&&Ir(Y,S),_&&(Y.g=_),F&&zi(Y,F),b&&(Y.h=b),S=Y}return b=h.G,_=h.wa,b&&_&&at(S,b,_),at(S,"VER",h.ka),Ji(h,S),S}function Ya(h,_,b){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new dt(new qi({ab:b})):new dt(h.ma),_.Fa(h.L),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Su(){}r=Su.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Wa(){}Wa.prototype.g=function(h,_){return new xn(h,_)};function xn(h,_){zt.call(this),this.g=new Ga(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!N(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!N(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Mr(this)}x(xn,zt),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Yi(this.g)},xn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=qn(h),h=b);_.i.push(new Jd(_.Ya++,h)),_.I==3&&Xi(_)},xn.prototype.N=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,xn.Z.N.call(this)};function Il(h){xr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const b in _){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}x(Il,xr);function Au(){ns.call(this),this.status=1}x(Au,ns);function Mr(h){this.g=h}x(Mr,Su),Mr.prototype.ra=function(){Kt(this.g,"a")},Mr.prototype.qa=function(h){Kt(this.g,new Il(h))},Mr.prototype.pa=function(h){Kt(this.g,new Au)},Mr.prototype.oa=function(){Kt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,wE=function(){return new Wa},bE=function(){return Va()},_E=$n,qg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,Kh=At,nn.COMPLETE="complete",vE=nn,uu.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",zt.prototype.listen=zt.prototype.J,Tc=uu,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,yE=dt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const jb="@firebase/firestore",Ob="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new wp("@firebase/firestore");function Uo(){return Na.logLevel}function fe(r,...e){if(Na.logLevel<=Ke.DEBUG){const t=e.map(kp);Na.debug(`Firestore (${cl}): ${r}`,...t)}}function vr(r,...e){if(Na.logLevel<=Ke.ERROR){const t=e.map(kp);Na.error(`Firestore (${cl}): ${r}`,...t)}}function Xo(r,...e){if(Na.logLevel<=Ke.WARN){const t=e.map(kp);Na.warn(`Firestore (${cl}): ${r}`,...t)}}function kp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,xE(r,s,t)}function xE(r,e,t){let s=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw vr(s),new Error(s)}function nt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||xE(e,a,s)}function Ve(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pn.UNAUTHENTICATED))}shutdown(){}}class nk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sk{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new EE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class rk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ik{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new rk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ak{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Db(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=ok(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Qe(r,e){return r<e?-1:r>e?1:0}function $g(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return mg(a)===mg(l)?Qe(a,l):mg(a)?1:-1}return Qe(r.length,e.length)}const lk=55296,ck=57343;function mg(r){const e=r.charCodeAt(0);return e>=lk&&e<=ck}function Jo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="__name__";class Ms{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Ms.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Qe(e.length,t.length)}static compareSegments(e,t){const s=Ms.isNumericId(e),a=Ms.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ms.extractNumericId(e).compare(Ms.extractNumericId(t)):$g(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class gt extends Ms{construct(e,t,s){return new gt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const uk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Ms{construct(e,t,s){return new ln(e,t,s)}static isValidIdentifier(e){return uk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pb}static keyField(){return new ln([Pb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new de(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(s+=m,a++):(l(),a++)}if(l(),u)throw new de(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(gt.fromString(e))}static fromName(e){return new xe(gt.fromString(e).popFirst(5))}static empty(){return new xe(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r,e,t){if(!t)throw new de(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function hk(r,e,t,s){if(e===!0&&s===!0)throw new de(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Mb(r){if(!xe.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vb(r){if(xe.isDocumentKey(r))throw new de(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function SE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Cd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function ps(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new de(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cd(r);throw new de(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Zc(r,e){if(!SE(r))throw new de(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new de(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=-62135596800,Lb=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Lb);return new yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ub)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lb}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ub;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Lt("string",yt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new yt(0,0))}static max(){return new De(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=-1;function dk(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=De.fromTimestamp(s===1e9?new yt(t+1,0):new yt(t,s));return new xi(a,xe.empty(),e)}function fk(r){return new xi(r.readTime,r.key,zc)}class xi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new xi(De.min(),xe.empty(),zc)}static max(){return new xi(De.max(),xe.empty(),zc)}}function mk(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:Qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==gk)throw r;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,s)=>{t(e)})}static reject(e){return new ne((t,s)=>{s(e)})}static waitFor(e){return new ne((t,s)=>{let a=0,l=0,u=!1;e.forEach(m=>{++a,m.next(()=>{++l,u&&l===a&&t()},g=>s(g))}),u=!0,l===a&&t()})}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next(a=>a?ne.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new ne((s,a)=>{const l=e.length,u=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next(v=>{u[y]=v,++m,m===l&&s(u)},v=>a(v))}})}static doWhile(e,t){return new ne((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function yk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function kd(r){return r==null}function ld(r){return r===0&&1/r==-1/0}function vk(r){return typeof r=="number"&&Number.isInteger(r)&&!ld(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="";function _k(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=zb(e)),e=bk(r.get(t),e);return zb(e)}function bk(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case AE:t+="";break;default:t+=l}}return t}function zb(r){return r+AE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ni(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function RE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dh(this.root,e,this.comparator,!0)}}class Dh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??on.RED,this.left=a??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new on(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return on.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qb(this.data.getIterator())}getIteratorFrom(e){return new qb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class qb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new Gt(ln.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new NE("Invalid base64 string: "+l):l}}(e);return new cn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const wk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const t=wk.exec(r);if(nt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:kt(r.seconds),nanos:kt(r.nanos)}}function kt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ti(r){return typeof r=="string"?cn.fromBase64String(r):cn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="server_timestamp",IE="__type__",kE="__previous_value__",jE="__local_write_time__";function Dp(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[IE])==null?void 0:s.stringValue)===CE}function jd(r){const e=r.mapValue.fields[kE];return Dp(e)?jd(e):e}function Bc(r){const e=Ei(r.mapValue.fields[jE].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,s,a,l,u,m,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const cd="(default)";class qc{constructor(e,t){this.projectId=e,this.database=t||cd}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===cd}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="__type__",Ek="__max__",Ph={mapValue:{}},DE="__vector__",ud="value";function Si(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dp(r)?4:Sk(r)?9007199254740991:Tk(r)?10:11:Ce(28295,{value:r})}function $s(r,e){if(r===e)return!0;const t=Si(r);if(t!==Si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Bc(r).isEqual(Bc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ei(a.timestampValue),m=Ei(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,l){return Ti(a.bytesValue).isEqual(Ti(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,l){return kt(a.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(a.geoPointValue.longitude)===kt(l.geoPointValue.longitude)}(r,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return kt(a.integerValue)===kt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=kt(a.doubleValue),m=kt(l.doubleValue);return u===m?ld(u)===ld(m):isNaN(u)&&isNaN(m)}return!1}(r,e);case 9:return Jo(r.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if(Bb(u)!==Bb(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!$s(u[g],m[g])))return!1;return!0}(r,e);default:return Ce(52216,{left:r})}}function $c(r,e){return(r.values||[]).find(t=>$s(t,e))!==void 0}function Zo(r,e){if(r===e)return 0;const t=Si(r),s=Si(e);if(t!==s)return Qe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(r.booleanValue,e.booleanValue);case 2:return function(l,u){const m=kt(l.integerValue||l.doubleValue),g=kt(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return $b(r.timestampValue,e.timestampValue);case 4:return $b(Bc(r),Bc(e));case 5:return $g(r.stringValue,e.stringValue);case 6:return function(l,u){const m=Ti(l),g=Ti(u);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,u){const m=l.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const v=Qe(m[y],g[y]);if(v!==0)return v}return Qe(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,u){const m=Qe(kt(l.latitude),kt(u.latitude));return m!==0?m:Qe(kt(l.longitude),kt(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Hb(r.arrayValue,e.arrayValue);case 10:return function(l,u){var T,I,L,B;const m=l.fields||{},g=u.fields||{},y=(T=m[ud])==null?void 0:T.arrayValue,v=(I=g[ud])==null?void 0:I.arrayValue,x=Qe(((L=y==null?void 0:y.values)==null?void 0:L.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return x!==0?x:Hb(y,v)}(r.mapValue,e.mapValue);case 11:return function(l,u){if(l===Ph.mapValue&&u===Ph.mapValue)return 0;if(l===Ph.mapValue)return 1;if(u===Ph.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=u.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let x=0;x<g.length&&x<v.length;++x){const T=$g(g[x],v[x]);if(T!==0)return T;const I=Zo(m[g[x]],y[v[x]]);if(I!==0)return I}return Qe(g.length,v.length)}(r.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function $b(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Qe(r,e);const t=Ei(r),s=Ei(e),a=Qe(t.seconds,s.seconds);return a!==0?a:Qe(t.nanos,s.nanos)}function Hb(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Zo(t[a],s[a]);if(l)return l}return Qe(t.length,s.length)}function el(r){return Hg(r)}function Hg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ti(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return xe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Hg(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Hg(t.fields[u])}`;return a+"}"}(r.mapValue):Ce(61005,{value:r})}function Qh(r){switch(Si(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jd(r);return e?16+Qh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ti(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+Qh(l),0)}(r.arrayValue);case 10:case 11:return function(s){let a=0;return Ni(s.fields,(l,u)=>{a+=l.length+Qh(u)}),a}(r.mapValue);default:throw Ce(13486,{value:r})}}function Fb(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Fg(r){return!!r&&"integerValue"in r}function Pp(r){return!!r&&"arrayValue"in r}function Gb(r){return!!r&&"nullValue"in r}function Kb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Yh(r){return!!r&&"mapValue"in r}function Tk(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[OE])==null?void 0:s.stringValue)===DE}function kc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ni(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=kc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(r.arrayValue.values[t]);return e}return{...r}}function Sk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ek}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Yh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=ln.emptyPath(),s={},a=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=m.popLast()}u?s[m.lastSegment()]=kc(u):a.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Yh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Yh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ni(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new In(kc(this.value))}}function PE(r){const e=[];return Ni(r.fields,(t,s)=>{const a=new ln([t]);if(Yh(s)){const l=PE(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,s,a,l,u,m){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new yn(e,0,De.min(),De.min(),De.min(),In.empty(),0)}static newFoundDocument(e,t,s,a){return new yn(e,1,t,De.min(),s,a,0)}static newNoDocument(e,t){return new yn(e,2,t,De.min(),De.min(),In.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,De.min(),De.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.position=e,this.inclusive=t}}function Qb(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(u.referenceValue),t.key):s=Zo(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Yb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!$s(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ak(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{}class Ut extends ME{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Nk(e,t,s):t==="array-contains"?new kk(e,s):t==="in"?new jk(e,s):t==="not-in"?new Ok(e,s):t==="array-contains-any"?new Dk(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Ck(e,s):new Ik(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&Si(this.value)===Si(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends ME{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vs(e,t)}matches(e){return VE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VE(r){return r.op==="and"}function UE(r){return Rk(r)&&VE(r)}function Rk(r){for(const e of r.filters)if(e instanceof vs)return!1;return!0}function Gg(r){if(r instanceof Ut)return r.field.canonicalString()+r.op.toString()+el(r.value);if(UE(r))return r.filters.map(e=>Gg(e)).join(",");{const e=r.filters.map(t=>Gg(t)).join(",");return`${r.op}(${e})`}}function LE(r,e){return r instanceof Ut?function(s,a){return a instanceof Ut&&s.op===a.op&&s.field.isEqual(a.field)&&$s(s.value,a.value)}(r,e):r instanceof vs?function(s,a){return a instanceof vs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,u,m)=>l&&LE(u,a.filters[m]),!0):!1}(r,e):void Ce(19439)}function zE(r){return r instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`}(r):r instanceof vs?function(t){return t.op.toString()+" {"+t.getFilters().map(zE).join(" ,")+"}"}(r):"Filter"}class Nk extends Ut{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ck extends Ut{constructor(e,t){super(e,"in",t),this.keys=BE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ik extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=BE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(s=>xe.fromName(s.referenceValue))}class kk extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pp(t)&&$c(t.arrayValue,this.value)}}class jk extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$c(this.value.arrayValue,t)}}class Ok extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$c(this.value.arrayValue,t)}}class Dk extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>$c(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t=null,s=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function Wb(r,e=null,t=[],s=[],a=null,l=null,u=null){return new Pk(r,e,t,s,a,l,u)}function Mp(r){const e=Ve(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Gg(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>el(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>el(s)).join(",")),e.Te=t}return e.Te}function Vp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Ak(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!LE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Yb(r.startAt,e.startAt)&&Yb(r.endAt,e.endAt)}function Kg(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t=null,s=[],a=[],l=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Mk(r,e,t,s,a,l,u,m){return new eu(r,e,t,s,a,l,u,m)}function Up(r){return new eu(r)}function Xb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function qE(r){return r.collectionGroup!==null}function jc(r){const e=Ve(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new Gt(ln.comparator);return u.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new dd(l,s))}),t.has(ln.keyField().canonicalString())||e.Ie.push(new dd(ln.keyField(),s))}return e.Ie}function Ls(r){const e=Ve(r);return e.Ee||(e.Ee=Vk(e,jc(r))),e.Ee}function Vk(r,e){if(r.limitType==="F")return Wb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new dd(a.field,l)});const t=r.endAt?new hd(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new hd(r.startAt.position,r.startAt.inclusive):null;return Wb(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Qg(r,e){const t=r.filters.concat([e]);return new eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Yg(r,e,t){return new eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Od(r,e){return Vp(Ls(r),Ls(e))&&r.limitType===e.limitType}function $E(r){return`${Mp(Ls(r))}|lt:${r.limitType}`}function Lo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>zE(a)).join(", ")}]`),kd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>el(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>el(a)).join(",")),`Target(${s})`}(Ls(r))}; limitType=${r.limitType})`}function Dd(r,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):xe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,a){for(const l of jc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(r,e)&&function(s,a){return!(s.startAt&&!function(u,m,g){const y=Qb(u,m,g);return u.inclusive?y<=0:y<0}(s.startAt,jc(s),a)||s.endAt&&!function(u,m,g){const y=Qb(u,m,g);return u.inclusive?y>=0:y>0}(s.endAt,jc(s),a))}(r,e)}function Uk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function HE(r){return(e,t)=>{let s=!1;for(const a of jc(r)){const l=Lk(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function Lk(r,e,t){const s=r.field.isKeyField()?xe.comparator(e.key,t.key):function(l,u,m){const g=u.data.field(l),y=m.data.field(l);return g!==null&&y!==null?Zo(g,y):Ce(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new xt(xe.comparator);function _r(){return zk}const FE=new xt(xe.comparator);function Sc(...r){let e=FE;for(const t of r)e=e.insert(t.key,t);return e}function GE(r){let e=FE;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function wa(){return Oc()}function KE(){return Oc()}function Oc(){return new ja(r=>r.toString(),(r,e)=>r.isEqual(e))}const Bk=new xt(xe.comparator),qk=new Gt(xe.comparator);function Ye(...r){let e=qk;for(const t of r)e=e.add(t);return e}const $k=new Gt(Qe);function Hk(){return $k}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function QE(r){return{integerValue:""+r}}function Fk(r,e){return vk(e)?QE(e):Lp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this._=void 0}}function Gk(r,e,t){return r instanceof fd?function(a,l){const u={fields:{[IE]:{stringValue:CE},[jE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Dp(l)&&(l=jd(l)),l&&(u.fields[kE]=l),{mapValue:u}}(t,e):r instanceof Hc?WE(r,e):r instanceof Fc?XE(r,e):function(a,l){const u=YE(a,l),m=Jb(u)+Jb(a.Ae);return Fg(u)&&Fg(a.Ae)?QE(m):Lp(a.serializer,m)}(r,e)}function Kk(r,e,t){return r instanceof Hc?WE(r,e):r instanceof Fc?XE(r,e):t}function YE(r,e){return r instanceof md?function(s){return Fg(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class fd extends Pd{}class Hc extends Pd{constructor(e){super(),this.elements=e}}function WE(r,e){const t=JE(e);for(const s of r.elements)t.some(a=>$s(a,s))||t.push(s);return{arrayValue:{values:t}}}class Fc extends Pd{constructor(e){super(),this.elements=e}}function XE(r,e){let t=JE(e);for(const s of r.elements)t=t.filter(a=>!$s(a,s));return{arrayValue:{values:t}}}class md extends Pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Jb(r){return kt(r.integerValue||r.doubleValue)}function JE(r){return Pp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Qk(r,e){return r.field.isEqual(e.field)&&function(s,a){return s instanceof Hc&&a instanceof Hc||s instanceof Fc&&a instanceof Fc?Jo(s.elements,a.elements,$s):s instanceof md&&a instanceof md?$s(s.Ae,a.Ae):s instanceof fd&&a instanceof fd}(r.transform,e.transform)}class Yk{constructor(e,t){this.version=e,this.transformResults=t}}class ys{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Md{}function ZE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new zp(r.key,ys.none()):new tu(r.key,r.data,ys.none());{const t=r.data,s=In.empty();let a=new Gt(ln.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Ci(r.key,s,new Bn(a.toArray()),ys.none())}}function Wk(r,e,t){r instanceof tu?function(a,l,u){const m=a.value.clone(),g=ew(a.fieldTransforms,l,u.transformResults);m.setAll(g),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(r,e,t):r instanceof Ci?function(a,l,u){if(!Wh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=ew(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(eT(a)),g.setAll(m),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(r,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Dc(r,e,t,s){return r instanceof tu?function(l,u,m,g){if(!Wh(l.precondition,u))return m;const y=l.value.clone(),v=tw(l.fieldTransforms,g,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ci?function(l,u,m,g){if(!Wh(l.precondition,u))return m;const y=tw(l.fieldTransforms,g,u),v=u.data;return v.setAll(eT(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(x=>x.field))}(r,e,t,s):function(l,u,m){return Wh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m}(r,e,t)}function Xk(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=YE(s.transform,a||null);l!=null&&(t===null&&(t=In.empty()),t.set(s.field,l))}return t||null}function Zb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Jo(s,a,(l,u)=>Qk(l,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class tu extends Md{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ci extends Md{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function eT(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function ew(r,e,t){const s=new Map;nt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,m=e.data.field(l.field);s.set(l.field,Kk(u,m,t[a]))}return s}function tw(r,e,t){const s=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);s.set(a.field,Gk(l,u,e))}return s}class zp extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jk extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Wk(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Dc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Dc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=KE();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const g=ZE(u,m);g!==null&&s.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,s)=>Zb(t,s))&&Jo(this.baseMutations,e.baseMutations,(t,s)=>Zb(t,s))}}class Bp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return Bk}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new Bp(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Je;function nj(r){switch(r){case Z.OK:return Ce(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ce(15467,{code:r})}}function tT(r){if(r===void 0)return vr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Pt.OK:return Z.OK;case Pt.CANCELLED:return Z.CANCELLED;case Pt.UNKNOWN:return Z.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return Z.INTERNAL;case Pt.UNAVAILABLE:return Z.UNAVAILABLE;case Pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Pt.NOT_FOUND:return Z.NOT_FOUND;case Pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Pt.ABORTED:return Z.ABORTED;case Pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Pt.DATA_LOSS:return Z.DATA_LOSS;default:return Ce(39323,{code:r})}}(Je=Pt||(Pt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new vi([4294967295,4294967295],0);function nw(r){const e=sj().encode(r),t=new pE;return t.update(e),new Uint8Array(t.digest())}function sw(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vi([t,s],0),new vi([a,l],0)]}class qp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(s<0)throw new Ac(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vi.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(vi.fromNumber(s)));return a.compare(rj)===1&&(a=new vi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nw(e),[s,a]=sw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new qp(l,a,t);return s.forEach(m=>u.insert(m)),u}insert(e){if(this.ge===0)return;const t=nw(e),[s,a]=sw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Vd(De.min(),a,new xt(Qe),_r(),Ye())}}class nu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nu(s,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class nT{constructor(e,t){this.targetId=e,this.Ce=t}}class sT{constructor(e,t,s=cn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class rw{constructor(){this.ve=0,this.Fe=iw(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),s=Ye();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ce(38017,{changeType:l})}}),new nu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=iw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ij{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=Mh(),this.He=Mh(),this.Ye=new xt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Kg(l))if(s===0){const u=new xe(l.path);this.et(t,u,yn.newNoDocument(u,De.min()))}else nt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=Ti(s).toUint8Array()}catch(g){if(g instanceof NE)return Xo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new qp(u,a,l)}catch(g){return Xo(g instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,u)=>{const m=this.ot(u);if(m){if(l.current&&Kg(m.target)){const g=new xe(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,yn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}});let s=Ye();this.He.forEach((l,u)=>{let m=!0;u.forEachWhile(g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(l))}),this.je.forEach((l,u)=>u.setReadTime(e));const a=new Vd(e,t,this.Ye,this.je,s);return this.je=_r(),this.Je=Mh(),this.He=Mh(),this.Ye=new xt(Qe),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rw),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mh(){return new xt(xe.comparator)}function iw(){return new xt(xe.comparator)}const aj={asc:"ASCENDING",desc:"DESCENDING"},oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lj={and:"AND",or:"OR"};class cj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wg(r,e){return r.useProto3Json||kd(e)?e:{value:e}}function gd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function uj(r,e){return gd(r,e.toTimestamp())}function zs(r){return nt(!!r,49232),De.fromTimestamp(function(t){const s=Ei(t);return new yt(s.seconds,s.nanos)}(r))}function $p(r,e){return Xg(r,e).canonicalString()}function Xg(r,e){const t=function(a){return new gt(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function iT(r){const e=gt.fromString(r);return nt(uT(e),10190,{key:e.toString()}),e}function Jg(r,e){return $p(r.databaseId,e.path)}function gg(r,e){const t=iT(e);if(t.get(1)!==r.databaseId.projectId)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new de(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(oT(t))}function aT(r,e){return $p(r.databaseId,e)}function hj(r){const e=iT(r);return e.length===4?gt.emptyPath():oT(e)}function Zg(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function oT(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function aw(r,e,t){return{name:Jg(r,e),fields:t.value.mapValue.fields}}function dj(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(nt(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(y){const v=y.code===void 0?Z.UNKNOWN:tT(y.code);return new de(v,y.message||"")}(u);t=new sT(s,a,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=gg(r,s.document.name),l=zs(s.document.updateTime),u=s.document.createTime?zs(s.document.createTime):De.min(),m=new In({mapValue:{fields:s.document.fields}}),g=yn.newFoundDocument(a,l,u,m),y=s.targetIds||[],v=s.removedTargetIds||[];t=new Xh(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=gg(r,s.document),l=s.readTime?zs(s.readTime):De.min(),u=yn.newNoDocument(a,l),m=s.removedTargetIds||[];t=new Xh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=gg(r,s.document),l=s.removedTargetIds||[];t=new Xh([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new tj(a,l),m=s.targetId;t=new nT(m,u)}}return t}function fj(r,e){let t;if(e instanceof tu)t={update:aw(r,e.key,e.value)};else if(e instanceof zp)t={delete:Jg(r,e.key)};else if(e instanceof Ci)t={update:aw(r,e.key,e.data),updateMask:xj(e.fieldMask)};else{if(!(e instanceof Jk))return Ce(16599,{Vt:e.type});t={verify:Jg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,u){const m=u.transform;if(m instanceof fd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Hc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof md)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:u.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:uj(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)}(r,e.precondition)),t}function mj(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map(t=>function(a,l){let u=a.updateTime?zs(a.updateTime):zs(l);return u.isEqual(De.min())&&(u=zs(l)),new Yk(u,a.transformResults||[])}(t,e))):[]}function gj(r,e){return{documents:[aT(r,e.path)]}}function pj(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=aT(r,a);const l=function(y){if(y.length!==0)return cT(vs.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(T){return{field:zo(T.field),direction:_j(T.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Wg(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:t,parent:a}}function yj(r){let e=hj(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){nt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(x){const T=lT(x);return T instanceof vs&&UE(T)?T.getFilters():[T]}(t.where));let u=[];t.orderBy&&(u=function(x){return x.map(T=>function(L){return new dd(Bo(L.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(T))}(t.orderBy));let m=null;t.limit&&(m=function(x){let T;return T=typeof x=="object"?x.value:x,kd(T)?null:T}(t.limit));let g=null;t.startAt&&(g=function(x){const T=!!x.before,I=x.values||[];return new hd(I,T)}(t.startAt));let y=null;return t.endAt&&(y=function(x){const T=!x.before,I=x.values||[];return new hd(I,T)}(t.endAt)),Mk(e,a,u,l,m,"F",g,y)}function vj(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Bo(t.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Bo(t.unaryFilter.field);return Ut.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bo(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Bo(t.unaryFilter.field);return Ut.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ut.create(Bo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return vs.create(t.compositeFilter.filters.map(s=>lT(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(t.compositeFilter.op))}(r):Ce(30097,{filter:r})}function _j(r){return aj[r]}function bj(r){return oj[r]}function wj(r){return lj[r]}function zo(r){return{fieldPath:r.canonicalString()}}function Bo(r){return ln.fromServerFormat(r.fieldPath)}function cT(r){return r instanceof Ut?function(t){if(t.op==="=="){if(Kb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(Gb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Kb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(Gb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:bj(t.op),value:t.value}}}(r):r instanceof vs?function(t){const s=t.getFilters().map(a=>cT(a));return s.length===1?s[0]:{compositeFilter:{op:wj(t.op),filters:s}}}(r):Ce(54877,{filter:r})}function xj(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,s,a,l=De.min(),u=De.min(),m=cn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.yt=e}}function Tj(r){const e=yj({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Yg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.Cn=new Aj}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(xi.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Aj{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Gt(gt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Gt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hT=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(hT,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="LruGarbageCollector",Rj=1048576;function cw([r,e],[t,s]){const a=Qe(r,t);return a===0?Qe(e,s):a}class Nj{constructor(e){this.Ir=e,this.buffer=new Gt(cw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();cw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cj{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(lw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hl(t)?fe(lw,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)})}}class Ij{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Id.ce);const s=new Nj(t);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(ow)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ow):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,m,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,u=Date.now(),this.nthSequenceNumber(e,a))).next(x=>(s=x,m=Date.now(),this.removeTargets(e,s,t))).next(x=>(l=x,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(x=>(y=Date.now(),Uo()<=Ke.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x})))}}function kj(r,e){return new Ij(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.changes=new ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&Dc(s.mutation,a,Bn.empty(),yt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ye()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ye()){const a=wa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let u=Sc();return l.forEach((m,g)=>{u=u.insert(m,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const s=wa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ye()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,s,a){let l=_r();const u=Oc(),m=function(){return Oc()}();return t.forEach((g,y)=>{const v=s.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof Ci)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Dc(v.mutation,y,v.mutation.getFieldMask(),yt.now())):u.set(y.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>m.set(y,new Oj(v,u.get(y)??null))),m))}recalculateAndSaveOverlays(e,t){const s=Oc();let a=new xt((u,m)=>u-m),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||Bn.empty();v=m.applyToLocalView(y,v),s.set(g,v);const x=(a.get(m.batchId)||Ye()).add(g);a=a.insert(m.batchId,x)})}).next(()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,v=g.value,x=KE();v.forEach(T=>{if(!l.has(T)){const I=ZE(t.get(T),s.get(T));I!==null&&x.set(T,I),l=l.add(T)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return ne.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ne.resolve(wa());let m=zc,g=l;return u.next(y=>ne.forEach(y,(v,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),l.get(v)?ne.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{g=g.insert(v,T)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,g,y,Ye())).next(v=>({batchId:m,changes:GE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(s=>{let a=Sc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Sc();return this.indexManager.getCollectionParents(e,l).next(m=>ne.forEach(m,g=>{const y=function(x,T){return new eu(T,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,a).next(v=>{v.forEach((x,T)=>{u=u.insert(x,T)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(u=>{l.forEach((g,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,yn.newInvalidDocument(v)))});let m=Sc();return u.forEach((g,y)=>{const v=l.get(g);v!==void 0&&Dc(v.mutation,y,Bn.empty(),yt.now()),Dd(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:zs(a.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:Tj(a.bundledQuery),readTime:zs(a.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.overlays=new xt(xe.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=wa();return ne.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.St(e,t,l)}),ne.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const a=wa(),l=t.length+1,u=new xe(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return ne.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new xt((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=wa(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=wa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,v)=>m.set(y,v)),!(m.size()>=a)););return ne.resolve(m)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new ej(t,s));let l=this.qr.get(t);l===void 0&&(l=Ye(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.Qr=new Gt(Zt.$r),this.Ur=new Gt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Zt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new xe(new gt([])),s=new Zt(t,e),a=new Zt(t,e+1),l=[];return this.Ur.forEachInRange([s,a],u=>{this.Gr(u),l.push(u.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new gt([])),s=new Zt(t,e),a=new Zt(t,e+1);let l=Ye();return this.Ur.forEachInRange([s,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Zt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Zt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Zk(l,t,s,a);this.mutationQueue.push(u);for(const m of a)this.Zr=this.Zr.add(new Zt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(u)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return ne.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Op:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Zt(t,0),a=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],u=>{const m=this.Xr(u.Yr);l.push(m)}),ne.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Gt(Qe);return t.forEach(a=>{const l=new Zt(a,0),u=new Zt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],m=>{s=s.add(m.Yr)})}),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const u=new Zt(new xe(l),0);let m=new Gt(Qe);return this.Zr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Yr)),!0)},u),ne.resolve(this.ti(m))}ti(e){const t=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,a=>{const l=new Zt(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new Zt(t,0),a=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.ri=e,this.docs=function(){return new xt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let s=_r();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():yn.newInvalidDocument(a))}),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=_r();const u=t.path,m=new xe(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||mk(fk(v),s)<=0||(a.has(v.key)||Dd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ne.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ce(9500)}ii(e,t){return ne.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new zj(this)}getSize(e){return ne.resolve(this.size)}}class zj extends jj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.persistence=e,this.si=new ja(t=>Mp(t),Vp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Hp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach((s,a)=>t(a)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach((u,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),ne.waitFor(l).next(()=>a)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),ne.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Id(0),this.li=!1,this.li=!0,this.hi=new Vj,this.referenceDelegate=e(this),this.Pi=new Bj(this),this.indexManager=new Sj,this.remoteDocumentCache=function(a){return new Lj(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Ej(t),this.Ii=new Pj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Uj(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const a=new qj(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return ne.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class qj extends pk{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Ri=new Hp,this.Vi=null}static mi(e){return new Fp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,s=>{const a=xe.fromPath(s);return this.gi(e,a).next(l=>{l||t.removeEntry(a,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pd{constructor(e,t){this.persistence=e,this.pi=new ja(s=>_k(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=kj(this,t)}static mi(e,t){return new pd(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return ne.forEach(this.pi,(s,a)=>this.br(e,s,a).next(l=>l?ne.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,u=>this.br(e,u,t).next(m=>{m||(s++,l.removeEntry(u,De.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ne.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Ye(),a=Ye();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Gp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DR()?8:yk(vn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ws(e,t,a,s).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new $j;return this.Ss(e,t,u).next(m=>{if(l.result=m,this.Vs)return this.bs(e,t,u,m.size)})}).next(()=>l.result)}bs(e,t,s,a){return s.documentReadCount<this.fs?(Uo()<=Ke.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(Uo()<=Ke.DEBUG&&fe("QueryEngine","Query:",Lo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Uo()<=Ke.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ls(t))):ne.resolve())}ys(e,t){if(Xb(t))return ne.resolve(null);let s=Ls(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Yg(t,null,"F"),s=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const u=Ye(...l);return this.ps.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.Ds(t,m);return this.Cs(t,y,u,g.readTime)?this.ys(e,Yg(t,null,"F")):this.vs(e,y,t,g)}))})))}ws(e,t,s,a){return Xb(t)||a.isEqual(De.min())?ne.resolve(null):this.ps.getDocuments(e,s).next(l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?ne.resolve(null):(Uo()<=Ke.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lo(t)),this.vs(e,u,t,dk(a,zc)).next(m=>m))})}Ds(e,t){let s=new Gt(HE(e));return t.forEach((a,l)=>{Dd(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Uo()<=Ke.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ps.getDocumentsMatchingQuery(e,t,xi.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LocalStore",Fj=3e8;class Gj{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new xt(Qe),this.xs=new ja(l=>Mp(l),Vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Kj(r,e,t,s){return new Gj(r,e,t,s)}async function fT(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const u=[],m=[];let g=Ye();for(const y of a){u.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ls:y,removedBatchIds:u,addedBatchIds:m}))})})}function Qj(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(m,g,y,v){const x=y.batch,T=x.keys();let I=ne.resolve();return T.forEach(L=>{I=I.next(()=>v.getEntry(g,L)).next(B=>{const z=y.docVersions.get(L);nt(z!==null,48541),B.version.compareTo(z)<0&&(x.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),v.addEntry(B)))})}),I.next(()=>m.mutationQueue.removeMutationBatch(g,x))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Ye();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function mT(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Yj(r,e){const t=Ve(r),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach((v,x)=>{const T=a.get(x);if(!T)return;m.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,x).next(()=>t.Pi.addMatchingKeys(l,v.addedDocuments,x)));let I=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?I=I.withResumeToken(cn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,s)),a=a.insert(x,I),function(B,z,re){return B.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=Fj?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(T,I,v)&&m.push(t.Pi.updateTargetData(l,I))});let g=_r(),y=Ye();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),m.push(Wj(l,u,e.documentUpdates).next(v=>{g=v.ks,y=v.qs})),!s.isEqual(De.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next(x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s));m.push(v)}return ne.waitFor(m).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,y)).next(()=>g)}).then(l=>(t.Ms=a,l))}function Wj(r,e,t){let s=Ye(),a=Ye();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let u=_r();return t.forEach((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):fe(Kp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{ks:u,qs:a}})}function Xj(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Op),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Jj(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Pi.getTargetData(s,e).next(l=>l?(a=l,ne.resolve(a)):t.Pi.allocateTargetId(s).next(u=>(a=new fi(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function ep(r,e,t){const s=Ve(r),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,u=>s.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!hl(u))throw u;fe(Kp,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function uw(r,e,t){const s=Ve(r);let a=De.min(),l=Ye();return s.persistence.runTransaction("Execute query","readwrite",u=>function(g,y,v){const x=Ve(g),T=x.xs.get(v);return T!==void 0?ne.resolve(x.Ms.get(T)):x.Pi.getTargetData(y,v)}(s,u,Ls(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,m.targetId).next(g=>{l=g})}).next(()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:De.min(),t?l:Ye())).next(m=>(Zj(s,Uk(e),m),{documents:m,Qs:l})))}function Zj(r,e,t){let s=r.Os.get(e)||De.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Os.set(e,s)}class hw{constructor(){this.activeTargetIds=Hk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eO{constructor(){this.Mo=new hw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="ConnectivityMonitor";class fw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(dw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(dw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function tp(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",nO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===cd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=tp(),m=this.zo(e,t.toUriEncodedString());fe(pg,`Sending RPC '${e}' ${u}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:y}=new URL(m),v=al(y);return this.Jo(e,m,g,s,v).then(x=>(fe(pg,`Received RPC '${e}' ${u}: `,x),x),x=>{throw Xo(pg,`RPC '${e}' ${u} failed with error: `,x,"url: ",m,"request:",s),x})}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const s=nO[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class iO extends sO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=tp();return new Promise((m,g)=>{const y=new yE;y.setWithCredentials(!0),y.listenOnce(vE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Kh.NO_ERROR:const x=y.getResponseJson();fe(gn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),m(x);break;case Kh.TIMEOUT:fe(gn,`RPC '${e}' ${u} timed out`),g(new de(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const T=y.getStatus();if(fe(gn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let I=y.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I==null?void 0:I.error;if(L&&L.status&&L.message){const B=function(re){const $=re.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf($)>=0?$:Z.UNKNOWN}(L.status);g(new de(B,L.message))}else g(new de(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new de(Z.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{fe(gn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);fe(gn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,s,15)})}T_(e,t,s){const a=tp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=wE(),m=bE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");fe(gn,`Creating RPC '${e}' stream ${a}: ${v}`,g);const x=u.createWebChannel(v,g);this.I_(x);let T=!1,I=!1;const L=new rO({Yo:z=>{I?fe(gn,`Not sending because RPC '${e}' stream ${a} is closed:`,z):(T||(fe(gn,`Opening RPC '${e}' stream ${a} transport.`),x.open(),T=!0),fe(gn,`RPC '${e}' stream ${a} sending:`,z),x.send(z))},Zo:()=>x.close()}),B=(z,re,$)=>{z.listen(re,W=>{try{$(W)}catch(le){setTimeout(()=>{throw le},0)}})};return B(x,Tc.EventType.OPEN,()=>{I||(fe(gn,`RPC '${e}' stream ${a} transport opened.`),L.o_())}),B(x,Tc.EventType.CLOSE,()=>{I||(I=!0,fe(gn,`RPC '${e}' stream ${a} transport closed`),L.a_(),this.E_(x))}),B(x,Tc.EventType.ERROR,z=>{I||(I=!0,Xo(gn,`RPC '${e}' stream ${a} transport errored. Name:`,z.name,"Message:",z.message),L.a_(new de(Z.UNAVAILABLE,"The operation could not be completed")))}),B(x,Tc.EventType.MESSAGE,z=>{var re;if(!I){const $=z.data[0];nt(!!$,16349);const W=$,le=(W==null?void 0:W.error)||((re=W[0])==null?void 0:re.error);if(le){fe(gn,`RPC '${e}' stream ${a} received error:`,le);const ce=le.status;let oe=function(R){const O=Pt[R];if(O!==void 0)return tT(O)}(ce),C=le.message;oe===void 0&&(oe=Z.INTERNAL,C="Unknown error status: "+ce+" with message "+le.message),I=!0,L.a_(new de(oe,C)),x.close()}else fe(gn,`RPC '${e}' stream ${a} received:`,$),L.u_($)}}),B(m,_E.STAT_EVENT,z=>{z.stat===qg.PROXY?fe(gn,`RPC '${e}' stream ${a} detected buffering proxy`):z.stat===qg.NOPROXY&&fe(gn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{L.__()},0),L}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function yg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(r){return new cj(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&fe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="PersistentStream";class pT{constructor(e,t,s,a,l,u,m,g){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new gT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===t&&this.G_(s,a)},s=>{e(()=>{const a=new de(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return fe(mw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(fe(mw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aO extends pT{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dj(this.serializer,e),s=function(l){if(!("targetChange"in l))return De.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?zs(u.readTime):De.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Zg(this.serializer),t.addTarget=function(l,u){let m;const g=u.target;if(m=Kg(g)?{documents:gj(l,g)}:{query:pj(l,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=rT(l,u.resumeToken);const y=Wg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(De.min())>0){m.readTime=gd(l,u.snapshotVersion.toTimestamp());const y=Wg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=vj(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Zg(this.serializer),t.removeTarget=e,this.q_(t)}}class oO extends pT{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mj(e.writeResults,e.commitTime),s=zs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>fj(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{}class cO extends lO{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Go(e,Xg(t,s),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(Z.UNKNOWN,l.toString())})}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.Ho(e,Xg(t,s),a,u,m,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(Z.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class uO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class hO{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(u=>{s.enqueueAndForget(async()=>{Oa(this)&&(fe(Ca,"Restarting streams for network reachability change."),await async function(g){const y=Ve(g);y.Ea.add(4),await su(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ld(y)}(this))})}),this.Ra=new uO(s,a)}}async function Ld(r){if(Oa(r))for(const e of r.da)await e(!0)}async function su(r){for(const e of r.da)await e(!1)}function yT(r,e){const t=Ve(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xp(t)?Wp(t):dl(t).O_()&&Yp(t,e))}function Qp(r,e){const t=Ve(r),s=dl(t);t.Ia.delete(e),s.O_()&&vT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Oa(t)&&t.Ra.set("Unknown"))}function Yp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(r).Y_(e)}function vT(r,e){r.Va.Ue(e),dl(r).Z_(e)}function Wp(r){r.Va=new ij({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),dl(r).start(),r.Ra.ua()}function Xp(r){return Oa(r)&&!dl(r).x_()&&r.Ia.size>0}function Oa(r){return Ve(r).Ea.size===0}function _T(r){r.Va=void 0}async function dO(r){r.Ra.set("Online")}async function fO(r){r.Ia.forEach((e,t)=>{Yp(r,e)})}async function mO(r,e){_T(r),Xp(r)?(r.Ra.ha(e),Wp(r)):r.Ra.set("Unknown")}async function gO(r,e,t){if(r.Ra.set("Online"),e instanceof sT&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.Va.removeTarget(m))}(r,e)}catch(s){fe(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yd(r,s)}else if(e instanceof Xh?r.Va.Ze(e):e instanceof nT?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const s=await mT(r.localStore);t.compareTo(s)>=0&&await function(l,u){const m=l.Va.Tt(u);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,u))}}),m.targetMismatches.forEach((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),vT(l,g);const x=new fi(v.target,g,y,v.sequenceNumber);Yp(l,x)}),l.remoteSyncer.applyRemoteEvent(m)}(r,t)}catch(s){fe(Ca,"Failed to raise snapshot:",s),await yd(r,s)}}async function yd(r,e,t){if(!hl(e))throw e;r.Ea.add(1),await su(r),r.Ra.set("Offline"),t||(t=()=>mT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{fe(Ca,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ld(r)})}function bT(r,e){return e().catch(t=>yd(r,t,e))}async function zd(r){const e=Ve(r),t=Ai(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Op;for(;pO(e);)try{const a=await Xj(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,yO(e,a)}catch(a){await yd(e,a)}wT(e)&&xT(e)}function pO(r){return Oa(r)&&r.Ta.length<10}function yO(r,e){r.Ta.push(e);const t=Ai(r);t.O_()&&t.X_&&t.ea(e.mutations)}function wT(r){return Oa(r)&&!Ai(r).x_()&&r.Ta.length>0}function xT(r){Ai(r).start()}async function vO(r){Ai(r).ra()}async function _O(r){const e=Ai(r);for(const t of r.Ta)e.ea(t.mutations)}async function bO(r,e,t){const s=r.Ta.shift(),a=Bp.from(s,e,t);await bT(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await zd(r)}async function wO(r,e){e&&Ai(r).X_&&await async function(s,a){if(function(u){return nj(u)&&u!==Z.ABORTED}(a.code)){const l=s.Ta.shift();Ai(s).B_(),await bT(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await zd(s)}}(r,e),wT(r)&&xT(r)}async function gw(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),fe(Ca,"RemoteStore received new credentials");const s=Oa(t);t.Ea.add(3),await su(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ld(t)}async function xO(r,e){const t=Ve(r);e?(t.Ea.delete(2),await Ld(t)):e||(t.Ea.add(2),await su(t),t.Ra.set("Unknown"))}function dl(r){return r.ma||(r.ma=function(t,s,a){const l=Ve(t);return l.sa(),new aO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Xo:dO.bind(null,r),t_:fO.bind(null,r),r_:mO.bind(null,r),H_:gO.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),Xp(r)?Wp(r):r.Ra.set("Unknown")):(await r.ma.stop(),_T(r))})),r.ma}function Ai(r){return r.fa||(r.fa=function(t,s,a){const l=Ve(t);return l.sa(),new oO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:vO.bind(null,r),r_:wO.bind(null,r),ta:_O.bind(null,r),na:bO.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await zd(r)):(await r.fa.stop(),r.Ta.length>0&&(fe(Ca,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,m=new Jp(e,t,u,a,l);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(r,e){if(vr("AsyncQueue",`${e}: ${r}`),hl(r))return new de(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=Sc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.ga=new xt(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class nl{constructor(e,t,s,a,l,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new nl(e,t,Qo.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class TO{constructor(){this.queries=yw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ve(t),l=a.queries;a.queries=yw(),l.forEach((u,m)=>{for(const g of m.Sa)g.onError(s)})})(this,new de(Z.ABORTED,"Firestore shutting down"))}}function yw(){return new ja(r=>$E(r),Od)}async function ET(r,e){const t=Ve(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new EO,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=Zp(u,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ey(t)}async function TT(r,e){const t=Ve(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function SO(r,e){const t=Ve(r);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.Sa)m.Fa(a)&&(s=!0);u.wa=a}}s&&ey(t)}function AO(r,e,t){const s=Ve(r),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function ey(r){r.Ca.forEach(e=>{e.next()})}var np,vw;(vw=np||(np={})).Ma="default",vw.Cache="cache";class ST{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==np.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.key=e}}class RT{constructor(e){this.key=e}}class RO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=HE(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new pw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,x)=>{const T=a.get(v),I=Dd(this.query,x)?x:null,L=!!T&&this.mutatedKeys.has(T.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let z=!1;T&&I?T.data.isEqual(I.data)?L!==B&&(s.track({type:3,doc:I}),z=!0):this.su(T,I)||(s.track({type:2,doc:I}),z=!0,(g&&this.eu(I,g)>0||y&&this.eu(I,y)<0)&&(m=!0)):!T&&I?(s.track({type:0,doc:I}),z=!0):T&&!I&&(s.track({type:1,doc:T}),z=!0,(g||y)&&(m=!0)),z&&(I?(u=u.add(I),l=B?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((v,x)=>function(I,L){const B=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:z})}};return B(I)-B(L)}(v.type,x.type)||this.eu(v.doc,x.doc)),this.ou(s),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,y=g!==this.Za;return this.Za=g,u.length!==0||y?{snapshot:new nl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new RT(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new AT(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ty="SyncEngine";class NO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class CO{constructor(e){this.key=e,this.hu=!1}}class IO{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ja(m=>$E(m),Od),this.Iu=new Map,this.Eu=new Set,this.du=new xt(xe.comparator),this.Au=new Map,this.Ru=new Hp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kO(r,e,t=!0){const s=OT(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await NT(s,e,t,!0),a}async function jO(r,e){const t=OT(r);await NT(t,e,!0,!1)}async function NT(r,e,t,s){const a=await Jj(r.localStore,Ls(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await OO(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&yT(r.remoteStore,a),m}async function OO(r,e,t,s,a){r.pu=(x,T,I)=>async function(B,z,re,$){let W=z.view.ru(re);W.Cs&&(W=await uw(B.localStore,z.query,!1).then(({documents:C})=>z.view.ru(C,W)));const le=$&&$.targetChanges.get(z.targetId),ce=$&&$.targetMismatches.get(z.targetId)!=null,oe=z.view.applyChanges(W,B.isPrimaryClient,le,ce);return bw(B,z.targetId,oe.au),oe.snapshot}(r,x,T,I);const l=await uw(r.localStore,e,!0),u=new RO(e,l.Qs),m=u.ru(l.documents),g=nu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),y=u.applyChanges(m,r.isPrimaryClient,g);bw(r,t,y.au);const v=new NO(e,t,u);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function DO(r,e,t){const s=Ve(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter(u=>!Od(u,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await ep(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Qp(s.remoteStore,a.targetId),sp(s,a.targetId)}).catch(ul)):(sp(s,a.targetId),await ep(s.localStore,a.targetId,!0))}async function PO(r,e){const t=Ve(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Qp(t.remoteStore,s.targetId))}async function MO(r,e,t){const s=$O(r);try{const a=await function(u,m){const g=Ve(u),y=yt.now(),v=m.reduce((I,L)=>I.add(L.key),Ye());let x,T;return g.persistence.runTransaction("Locally write mutations","readwrite",I=>{let L=_r(),B=Ye();return g.Ns.getEntries(I,v).next(z=>{L=z,L.forEach((re,$)=>{$.isValidDocument()||(B=B.add(re))})}).next(()=>g.localDocuments.getOverlayedDocuments(I,L)).next(z=>{x=z;const re=[];for(const $ of m){const W=Xk($,x.get($.key).overlayedDocument);W!=null&&re.push(new Ci($.key,W,PE(W.value.mapValue),ys.exists(!0)))}return g.mutationQueue.addMutationBatch(I,y,re,m)}).next(z=>{T=z;const re=z.applyToLocalDocumentSet(x,B);return g.documentOverlayCache.saveOverlays(I,z.batchId,re)})}).then(()=>({batchId:T.batchId,changes:GE(x)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(u,m,g){let y=u.Vu[u.currentUser.toKey()];y||(y=new xt(Qe)),y=y.insert(m,g),u.Vu[u.currentUser.toKey()]=y}(s,a.batchId,t),await ru(s,a.changes),await zd(s.remoteStore)}catch(a){const l=Zp(a,"Failed to persist write");t.reject(l)}}async function CT(r,e){const t=Ve(r);try{const s=await Yj(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Au.get(l);u&&(nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?nt(u.hu,14607):a.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))}),await ru(t,s,e)}catch(s){await ul(s)}}function _w(r,e,t){const s=Ve(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)}),function(u,m){const g=Ve(u);g.onlineState=m;let y=!1;g.queries.forEach((v,x)=>{for(const T of x.Sa)T.va(m)&&(y=!0)}),y&&ey(g)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function VO(r,e,t){const s=Ve(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new xt(xe.comparator);u=u.insert(l,yn.newNoDocument(l,De.min()));const m=Ye().add(l),g=new Vd(De.min(),new Map,new xt(Qe),u,m);await CT(s,g),s.du=s.du.remove(l),s.Au.delete(e),ny(s)}else await ep(s.localStore,e,!1).then(()=>sp(s,e,t)).catch(ul)}async function UO(r,e){const t=Ve(r),s=e.batch.batchId;try{const a=await Qj(t.localStore,e);kT(t,s,null),IT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ru(t,a)}catch(a){await ul(a)}}async function LO(r,e,t){const s=Ve(r);try{const a=await function(u,m){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return g.mutationQueue.lookupMutationBatch(y,m).next(x=>(nt(x!==null,37113),v=x.keys(),g.mutationQueue.removeMutationBatch(y,x))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>g.localDocuments.getDocuments(y,v))})}(s.localStore,e);kT(s,e,t),IT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ru(s,a)}catch(a){await ul(a)}}function IT(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function kT(r,e,t){const s=Ve(r);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function sp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(s=>{r.Ru.containsKey(s)||jT(r,s)})}function jT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Qp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ny(r))}function bw(r,e,t){for(const s of t)s instanceof AT?(r.Ru.addReference(s.key,e),zO(r,s)):s instanceof RT?(fe(ty,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||jT(r,s.key)):Ce(19791,{wu:s})}function zO(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(fe(ty,"New document in limbo: "+t),r.Eu.add(s),ny(r))}function ny(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new xe(gt.fromString(e)),s=r.fu.next();r.Au.set(s,new CO(t)),r.du=r.du.insert(t,s),yT(r.remoteStore,new fi(Ls(Up(t.path)),s,"TargetPurposeLimboResolution",Id.ce))}}async function ru(r,e,t){const s=Ve(r),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach((m,g)=>{u.push(s.pu(g,e,t).then(y=>{var v;if((y||t)&&s.isPrimaryClient){const x=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){a.push(y);const x=Gp.As(g.targetId,y);l.push(x)}}))}),await Promise.all(u),s.Pu.H_(a),await async function(g,y){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ne.forEach(y,T=>ne.forEach(T.Es,I=>v.persistence.referenceDelegate.addReference(x,T.targetId,I)).next(()=>ne.forEach(T.ds,I=>v.persistence.referenceDelegate.removeReference(x,T.targetId,I)))))}catch(x){if(!hl(x))throw x;fe(Kp,"Failed to update sequence numbers: "+x)}for(const x of y){const T=x.targetId;if(!x.fromCache){const I=v.Ms.get(T),L=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(T,B)}}}(s.localStore,l))}async function BO(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){fe(ty,"User change. New user:",e.toKey());const s=await fT(t.localStore,e);t.currentUser=e,function(l,u){l.mu.forEach(m=>{m.forEach(g=>{g.reject(new de(Z.CANCELLED,u))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ru(t,s.Ls)}}function qO(r,e){const t=Ve(r),s=t.Au.get(e);if(s&&s.hu)return Ye().add(s.key);{let a=Ye();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}function OT(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=CT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VO.bind(null,e),e.Pu.H_=SO.bind(null,e.eventManager),e.Pu.yu=AO.bind(null,e.eventManager),e}function $O(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LO.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Kj(this.persistence,new Hj,e.initialUser,this.serializer)}Cu(e){return new dT(Fp.mi,this.serializer)}Du(e){return new eO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class HO extends vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof pd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Cj(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new dT(s=>pd.mi(s,t),this.serializer)}}class rp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_w(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=BO.bind(null,this.syncEngine),await xO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TO}()}createDatastore(e){const t=Ud(e.databaseInfo.databaseId),s=function(l){return new iO(l)}(e.databaseInfo);return function(l,u,m,g){return new cO(l,u,m,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,u,m){return new hO(s,a,l,u,m)}(this.localStore,this.datastore,e.asyncQueue,t=>_w(this.syncEngine,t,0),function(){return fw.v()?new fw:new tO}())}createSyncEngine(e,t){return function(a,l,u,m,g,y,v){const x=new IO(a,l,u,m,g,y);return v&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Ve(a);fe(Ca,"RemoteStore shutting down."),l.Ea.add(5),await su(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}rp.provider={build:()=>new rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="FirestoreClient";class FO{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=pn.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async u=>{fe(Ri,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(fe(Ri,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Zp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function vg(r,e){r.asyncQueue.verifyOperationInProgress(),fe(Ri,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async a=>{s.isEqual(a)||(await fT(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function ww(r,e){r.asyncQueue.verifyOperationInProgress();const t=await GO(r);fe(Ri,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>gw(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,a)=>gw(e.remoteStore,a)),r._onlineComponents=e}async function GO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){fe(Ri,"Using user provided OfflineComponentProvider");try{await vg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await vg(r,new vd)}}else fe(Ri,"Using default OfflineComponentProvider"),await vg(r,new HO(void 0));return r._offlineComponents}async function PT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(fe(Ri,"Using user provided OnlineComponentProvider"),await ww(r,r._uninitializedComponentsProvider._online)):(fe(Ri,"Using default OnlineComponentProvider"),await ww(r,new rp))),r._onlineComponents}function KO(r){return PT(r).then(e=>e.syncEngine)}async function ip(r){const e=await PT(r),t=e.eventManager;return t.onListen=kO.bind(null,e.syncEngine),t.onUnlisten=DO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PO.bind(null,e.syncEngine),t}function QO(r,e,t={}){const s=new _i;return r.asyncQueue.enqueueAndForget(async()=>function(l,u,m,g,y){const v=new DT({next:T=>{v.Nu(),u.enqueueAndForget(()=>TT(l,x)),T.fromCache&&g.source==="server"?y.reject(new de(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),x=new ST(m,v,{includeMetadataChanges:!0,qa:!0});return ET(l,x)}(await ip(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firestore.googleapis.com",Ew=!0;class Tw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VT,this.ssl=Ew}else this.host=e.host,this.ssl=e.ssl??Ew;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rj)throw new de(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MT(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new tk;switch(s.type){case"firstParty":return new ik(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=xw.get(t);s&&(fe("ComponentProvider","Removing Datastore"),xw.delete(t),s.terminate())}(this),Promise.resolve()}}function YO(r,e,t,s={}){var y;r=ps(r,Bd);const a=al(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;a&&(Ix(`https://${m}`),kx("Firestore",!0)),l.host!==VT&&l.host!==m&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:s};if(!Sa(g,u)&&(r._setSettings(g),s.mockUserToken)){let v,x;if(typeof s.mockUserToken=="string")v=s.mockUserToken,x=pn.MOCK_USER;else{v=SR(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new de(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new pn(T)}r._authCredentials=new nk(new EE(v,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class jt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Zc(t,jt._jsonSchema))return new jt(e,s||null,new xe(gt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Lt("string",jt._jsonSchemaVersion),referencePath:Lt("string")};class bi extends Da{constructor(e,t,s){super(e,t,Up(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new xe(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function Sw(r,e,...t){if(r=tn(r),TE("collection","path",e),r instanceof Bd){const s=gt.fromString(e,...t);return Vb(s),new bi(r,null,s)}{if(!(r instanceof jt||r instanceof bi))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return Vb(s),new bi(r.firestore,null,s)}}function _g(r,e,...t){if(r=tn(r),arguments.length===1&&(e=jp.newId()),TE("doc","path",e),r instanceof Bd){const s=gt.fromString(e,...t);return Mb(s),new jt(r,null,new xe(s))}{if(!(r instanceof jt||r instanceof bi))throw new de(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return Mb(s),new jt(r.firestore,r instanceof bi?r.converter:null,new xe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="AsyncQueue";class Rw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new gT(this,"async_queue_retry"),this._c=()=>{const s=yg();s&&fe(Aw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=yg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new _i;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;fe(Aw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",Nw(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Jp.createAndSchedule(this,e,t,s,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:Nw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Ia extends Bd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Rw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rw(e),this._firestoreClient=void 0,await e}}}function WO(r,e){const t=typeof r=="object"?r:Px(),s=typeof r=="string"?r:cd,a=Ep(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=ER("firestore");l&&YO(a,...l)}return a}function sy(r){if(r._terminated)throw new de(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||XO(r),r._firestoreClient}function XO(r){var s,a,l;const e=r._freezeSettings(),t=function(m,g,y,v){return new xk(m,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,MT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new FO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(cn.fromBase64String(e))}catch(t){throw new de(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new es(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,es._jsonSchema))return es.fromBase64String(e.bytes)}}es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:Lt("string",es._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:Lt("string",Bs._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new qs(e.vectorValues);throw new de(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:Lt("string",qs._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO=/^__.*__$/;class ZO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new tu(e,this.data,t,this.fieldTransforms)}}class UT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:r})}}class iy{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new iy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LT(this.Ac)&&JO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class e4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ud(e)}Cc(e,t,s,a=!1){return new iy({Ac:e,methodName:t,Dc:s,path:ln.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ay(r){const e=r._freezeSettings(),t=Ud(r._databaseId);return new e4(r._databaseId,!!e.ignoreUndefinedProperties,t)}function t4(r,e,t,s,a,l={}){const u=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);oy("Data must be an object, but it was:",u,s);const m=zT(s,u);let g,y;if(l.merge)g=new Bn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const T=ap(e,x,t);if(!u.contains(T))throw new de(Z.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);qT(v,T)||v.push(T)}g=new Bn(v),y=u.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,y=u.fieldTransforms;return new ZO(new In(m),g,y)}class $d extends ry{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function n4(r,e,t,s){const a=r.Cc(1,e,t);oy("Data must be an object, but it was:",a,s);const l=[],u=In.empty();Ni(s,(g,y)=>{const v=ly(e,g,t);y=tn(y);const x=a.yc(v);if(y instanceof $d)l.push(v);else{const T=iu(y,x);T!=null&&(l.push(v),u.set(v,T))}});const m=new Bn(l);return new UT(u,m,a.fieldTransforms)}function s4(r,e,t,s,a,l){const u=r.Cc(1,e,t),m=[ap(e,s,t)],g=[a];if(l.length%2!=0)throw new de(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)m.push(ap(e,l[T])),g.push(l[T+1]);const y=[],v=In.empty();for(let T=m.length-1;T>=0;--T)if(!qT(y,m[T])){const I=m[T];let L=g[T];L=tn(L);const B=u.yc(I);if(L instanceof $d)y.push(I);else{const z=iu(L,B);z!=null&&(y.push(I),v.set(I,z))}}const x=new Bn(y);return new UT(v,x,u.fieldTransforms)}function r4(r,e,t,s=!1){return iu(t,r.Cc(s?4:3,e))}function iu(r,e){if(BT(r=tn(r)))return oy("Unsupported field value:",e,r),zT(r,e);if(r instanceof ry)return function(s,a){if(!LT(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const l=[];let u=0;for(const m of s){let g=iu(m,a.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}}(r,e)}return function(s,a){if((s=tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Fk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:gd(a.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gd(a.serializer,l)}}if(s instanceof Bs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof es)return{bytesValue:rT(a.serializer,s._byteString)};if(s instanceof jt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:$p(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof qs)return function(u,m){return{mapValue:{fields:{[OE]:{stringValue:DE},[ud]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Lp(m.serializer,y)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${Cd(s)}`)}(r,e)}function zT(r,e){const t={};return RE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(r,(s,a)=>{const l=iu(a,e.mc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function BT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof Bs||r instanceof es||r instanceof jt||r instanceof ry||r instanceof qs)}function oy(r,e,t){if(!BT(t)||!SE(t)){const s=Cd(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function ap(r,e,t){if((e=tn(e))instanceof qd)return e._internalPath;if(typeof e=="string")return ly(r,e);throw _d("Field path arguments must be of type string or ",r,!1,void 0,t)}const i4=new RegExp("[~\\*/\\[\\]]");function ly(r,e,t){if(e.search(i4)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function _d(r,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${a}`),g+=")"),new de(Z.INVALID_ARGUMENT,m+r+g)}function qT(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class a4 extends $T{data(){return super.data()}}function cy(r,e){return typeof e=="string"?ly(r,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new de(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uy{}class o4 extends uy{}function l4(r,e,...t){let s=[];e instanceof uy&&s.push(e),s=s.concat(t),function(l){const u=l.filter(g=>g instanceof hy).length,m=l.filter(g=>g instanceof Hd).length;if(u>1||u>0&&m>0)throw new de(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Hd extends o4{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hd(e,t,s)}_apply(e){const t=this._parse(e);return FT(e._query,t),new Da(e.firestore,e.converter,Qg(e._query,t))}_parse(e){const t=ay(e.firestore);return function(l,u,m,g,y,v,x){let T;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){kw(x,v);const L=[];for(const B of x)L.push(Iw(g,l,B));T={arrayValue:{values:L}}}else T=Iw(g,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||kw(x,v),T=r4(m,u,x,v==="in"||v==="not-in");return Ut.create(y,v,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function c4(r,e,t){const s=e,a=cy("where",r);return Hd._create(a,s,t)}class hy extends uy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hy(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:vs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const m=l.getFlattenedFilters();for(const g of m)FT(u,g),u=Qg(u,g)}(e._query,t),new Da(e.firestore,e.converter,Qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Iw(r,e,t){if(typeof(t=tn(t))=="string"){if(t==="")throw new de(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qE(e)&&t.indexOf("/")!==-1)throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(gt.fromString(t));if(!xe.isDocumentKey(s))throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Fb(r,new xe(s))}if(t instanceof jt)return Fb(r,t._key);throw new de(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(t)}.`)}function kw(r,e){if(!Array.isArray(r)||r.length===0)throw new de(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FT(r,e){const t=function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class u4{convertValue(e,t="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ni(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[ud].arrayValue)==null?void 0:a.values)==null?void 0:l.map(u=>kt(u.doubleValue));return new qs(t)}convertGeoPoint(e){return new Bs(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=gt.fromString(e);nt(uT(s),9688,{name:e});const a=new qc(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return a.isEqual(t)||vr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ea extends $T{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(cy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ea._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:Lt("string",Ea._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Jh extends Ea{data(e={}){return super.data(e)}}class Ta{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Rc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Jh(this._firestore,this._userDataWriter,s.key,s,new Rc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(m=>{const g=new Jh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Rc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const g=new Jh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Rc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:d4(m.type),doc:g,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d4(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:Lt("string",Ta._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class dy extends u4{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function f4(r){r=ps(r,Da);const e=ps(r.firestore,Ia),t=sy(e),s=new dy(e);return HT(r._query),QO(t,r._query).then(a=>new Ta(e,s,r,a))}function m4(r,e,t){r=ps(r,jt);const s=ps(r.firestore,Ia),a=h4(r.converter,e,t);return fy(s,[t4(ay(s),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,ys.none())])}function g4(r,e,t,...s){r=ps(r,jt);const a=ps(r.firestore,Ia),l=ay(a);let u;return u=typeof(e=tn(e))=="string"||e instanceof qd?s4(l,"updateDoc",r._key,e,t,s):n4(l,"updateDoc",r._key,e),fy(a,[u.toMutation(r._key,ys.exists(!0))])}function p4(r){return fy(ps(r.firestore,Ia),[new zp(r._key,ys.none())])}function y4(r,...e){var g,y,v;r=tn(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Cw(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cw(e[s])){const x=e[s];e[s]=(g=x.next)==null?void 0:g.bind(x),e[s+1]=(y=x.error)==null?void 0:y.bind(x),e[s+2]=(v=x.complete)==null?void 0:v.bind(x)}let l,u,m;if(r instanceof jt)u=ps(r.firestore,Ia),m=Up(r._key.path),l={next:x=>{e[s]&&e[s](v4(u,r,x))},error:e[s+1],complete:e[s+2]};else{const x=ps(r,Da);u=ps(x.firestore,Ia),m=x._query;const T=new dy(u);l={next:I=>{e[s]&&e[s](new Ta(u,T,x,I))},error:e[s+1],complete:e[s+2]},HT(r._query)}return function(T,I,L,B){const z=new DT(B),re=new ST(I,z,L);return T.asyncQueue.enqueueAndForget(async()=>ET(await ip(T),re)),()=>{z.Nu(),T.asyncQueue.enqueueAndForget(async()=>TT(await ip(T),re))}}(sy(u),m,a,l)}function fy(r,e){return function(s,a){const l=new _i;return s.asyncQueue.enqueueAndForget(async()=>MO(await KO(s),a,l)),l.promise}(sy(r),e)}function v4(r,e,t){const s=t.docs.get(e._key),a=new dy(r);return new Ea(r,a,e._key,s,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){cl=a})(ol),Wo(new Aa("firestore",(s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),m=new Ia(new sk(s.getProvider("auth-internal")),new ak(u,s.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new de(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(y.options.projectId,v)}(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),pi(jb,Ob,e),pi(jb,Ob,"esm2020")})();const _4="modulepreload",b4=function(r){return"/"+r},jw={},au=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let u=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));a=u(t.map(y=>{if(y=b4(y),y in jw)return;jw[y]=!0;const v=y.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":_4,v||(T.as="script"),T.crossOrigin="",T.href=y,g&&T.setAttribute("nonce",g),document.head.appendChild(T),v)return new Promise((I,L)=>{T.addEventListener("load",I),T.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return a.then(u=>{for(const m of u||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})},w4=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class my extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Ow extends my{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dw extends my{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pw extends my{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var op;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(op||(op={}));var x4=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class E4{constructor(e,{headers:t={},customFetch:s,region:a=op.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=w4(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return x4(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:l,method:u,body:m,signal:g}=s;let y={},{region:v}=s;v||(v=this.region);const x=new URL(`${this.url}/${t}`);v&&v!=="any"&&(y["x-region"]=v,x.searchParams.set("forceFunctionRegion",v));let T;m&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",T=m):typeof m=="string"?(y["Content-Type"]="text/plain",T=m):typeof FormData<"u"&&m instanceof FormData?T=m:(y["Content-Type"]="application/json",T=JSON.stringify(m)));const I=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:T,signal:g}).catch(re=>{throw re.name==="AbortError"?re:new Ow(re)}),L=I.headers.get("x-relay-error");if(L&&L==="true")throw new Dw(I);if(!I.ok)throw new Pw(I);let B=((a=I.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),z;return B==="application/json"?z=yield I.json():B==="application/octet-stream"?z=yield I.blob():B==="text/event-stream"?z=I:B==="multipart/form-data"?z=yield I.formData():z=yield I.text(),{data:z,error:null,response:I}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new Ow(l)}:{data:null,error:l,response:l instanceof Pw||l instanceof Dw?l.context:void 0}}})}}var Jt={},Ro={},No={},Co={},Io={},ko={},T4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sl=T4();const S4=sl.fetch,GT=sl.fetch.bind(sl),KT=sl.Headers,A4=sl.Request,R4=sl.Response,fl=Object.freeze(Object.defineProperty({__proto__:null,Headers:KT,Request:A4,Response:R4,default:GT,fetch:S4},Symbol.toStringTag,{value:"Module"})),N4=zS(fl);var Uh={},Mw;function QT(){if(Mw)return Uh;Mw=1,Object.defineProperty(Uh,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Uh.default=r,Uh}var Vw;function YT(){if(Vw)return ko;Vw=1;var r=ko&&ko.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ko,"__esModule",{value:!0});const e=r(N4),t=r(QT());class s{constructor(l){var u,m;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(m=l.isMaybeSingle)!==null&&m!==void 0?m:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let g=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var v,x,T,I;let L=null,B=null,z=null,re=y.status,$=y.statusText;if(y.ok){if(this.method!=="HEAD"){const oe=await y.text();oe===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?B=oe:B=JSON.parse(oe))}const le=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),ce=(T=y.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");le&&ce&&ce.length>1&&(z=parseInt(ce[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(B)&&(B.length>1?(L={code:"PGRST116",details:`Results contain ${B.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},B=null,z=null,re=406,$="Not Acceptable"):B.length===1?B=B[0]:B=null)}else{const le=await y.text();try{L=JSON.parse(le),Array.isArray(L)&&y.status===404&&(B=[],L=null,re=200,$="OK")}catch{y.status===404&&le===""?(re=204,$="No Content"):L={message:le}}if(L&&this.isMaybeSingle&&(!((I=L==null?void 0:L.details)===null||I===void 0)&&I.includes("0 rows"))&&(L=null,re=200,$="OK"),L&&this.shouldThrowOnError)throw new t.default(L)}return{error:L,data:B,count:z,status:re,statusText:$}});return this.shouldThrowOnError||(g=g.catch(y=>{var v,x,T;return{error:{message:`${(v=y==null?void 0:y.name)!==null&&v!==void 0?v:"FetchError"}: ${y==null?void 0:y.message}`,details:`${(x=y==null?void 0:y.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(T=y==null?void 0:y.code)!==null&&T!==void 0?T:""}`},data:null,count:null,status:0,statusText:""}})),g.then(l,u)}returns(){return this}overrideTypes(){return this}}return ko.default=s,ko}var Uw;function WT(){if(Uw)return Io;Uw=1;var r=Io&&Io.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Io,"__esModule",{value:!0});const e=r(YT());class t extends e.default{select(a){let l=!1;const u=(a??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:m,referencedTable:g=m}={}){const y=g?`${g}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:m=u}={}){const g=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(y,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:m=!1,wal:g=!1,format:y="text"}={}){var v;const x=[a?"analyze":null,l?"verbose":null,u?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),T=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${T}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Io.default=t,Io}var Lw;function gy(){if(Lw)return Co;Lw=1;var r=Co&&Co.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Co,"__esModule",{value:!0});const e=r(WT());class t extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const u=Array.from(new Set(l)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:u,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const y=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${g}fts${y}.${l}`),this}match(a){return Object.entries(a).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(a,l,u){return this.url.searchParams.append(a,`not.${l}.${u}`),this}or(a,{foreignTable:l,referencedTable:u=l}={}){const m=u?`${u}.or`:"or";return this.url.searchParams.append(m,`(${a})`),this}filter(a,l,u){return this.url.searchParams.append(a,`${l}.${u}`),this}}return Co.default=t,Co}var zw;function XT(){if(zw)return No;zw=1;var r=No&&No.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(No,"__esModule",{value:!0});const e=r(gy());class t{constructor(a,{headers:l={},schema:u,fetch:m}){this.url=a,this.headers=new Headers(l),this.schema=u,this.fetch=m}select(a,l){const{head:u=!1,count:m}=l??{},g=u?"HEAD":"GET";let y=!1;const v=(a??"*").split("").map(x=>/\s/.test(x)&&!y?"":(x==='"'&&(y=!y),x)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:u=!0}={}){var m;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(y.length>0){const v=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:m,defaultToNull:g=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const x=a.reduce((T,I)=>T.concat(Object.keys(I)),[]);if(x.length>0){const T=[...new Set(x)].map(I=>`"${I}"`);this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(a,{count:l}={}){var u;const m="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var l;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return No.default=t,No}var Bw;function C4(){if(Bw)return Ro;Bw=1;var r=Ro&&Ro.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ro,"__esModule",{value:!0});const e=r(XT()),t=r(gy());class s{constructor(l,{headers:u={},schema:m,fetch:g}={}){this.url=l,this.headers=new Headers(u),this.schemaName=m,this.fetch=g}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:m=!1,get:g=!1,count:y}={}){var v;let x;const T=new URL(`${this.url}/rpc/${l}`);let I;m||g?(x=m?"HEAD":"GET",Object.entries(u).filter(([B,z])=>z!==void 0).map(([B,z])=>[B,Array.isArray(z)?`{${z.join(",")}}`:`${z}`]).forEach(([B,z])=>{T.searchParams.append(B,z)})):(x="POST",I=u);const L=new Headers(this.headers);return y&&L.set("Prefer",`count=${y}`),new t.default({method:x,url:T,headers:L,schema:this.schemaName,body:I,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Ro.default=s,Ro}var qw;function I4(){if(qw)return Jt;qw=1;var r=Jt&&Jt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PostgrestError=Jt.PostgrestBuilder=Jt.PostgrestTransformBuilder=Jt.PostgrestFilterBuilder=Jt.PostgrestQueryBuilder=Jt.PostgrestClient=void 0;const e=r(C4());Jt.PostgrestClient=e.default;const t=r(XT());Jt.PostgrestQueryBuilder=t.default;const s=r(gy());Jt.PostgrestFilterBuilder=s.default;const a=r(WT());Jt.PostgrestTransformBuilder=a.default;const l=r(YT());Jt.PostgrestBuilder=l.default;const u=r(QT());return Jt.PostgrestError=u.default,Jt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},Jt}var k4=I4();const j4=LS(k4),{PostgrestClient:O4,PostgrestQueryBuilder:ZP,PostgrestFilterBuilder:eM,PostgrestTransformBuilder:tM,PostgrestBuilder:nM,PostgrestError:sM}=j4;class D4{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const P4="2.75.0",M4=`realtime-js/${P4}`,V4="1.0.0",lp=1e4,U4=1e3,L4=100;var Pc;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Pc||(Pc={}));var Ft;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ft||(Ft={}));var fs;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(fs||(fs={}));var cp;(function(r){r.websocket="websocket"})(cp||(cp={}));var _a;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(_a||(_a={}));class z4{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const m=s.decode(e.slice(u,u+a));u=u+a;const g=s.decode(e.slice(u,u+l));u=u+l;const y=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:m,event:g,payload:y}}}class JT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(mt||(mt={}));const $w=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=B4(u,r,e,a),l),{}):{}},B4=(r,e,t,s)=>{const a=e.find(m=>m.name===r),l=a==null?void 0:a.type,u=t[r];return l&&!s.includes(l)?ZT(l,u):up(u)},ZT=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return F4(e,t)}switch(r){case mt.bool:return q4(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return $4(e);case mt.json:case mt.jsonb:return H4(e);case mt.timestamp:return G4(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return up(e);default:return up(e)}},up=r=>r,q4=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},$4=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},H4=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},F4=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let l;const u=r.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(m=>ZT(e,m))}return r},G4=r=>typeof r=="string"?r.replace(" ","T"):r,e1=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class bg{constructor(e,t,s={},a=lp){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Hw;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Hw||(Hw={}));class Mc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:u,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mc.syncState(this.state,a,l,u),this.pendingDiffs.forEach(g=>{this.state=Mc.syncDiff(this.state,g,l,u)}),this.pendingDiffs=[],m()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Mc.syncDiff(this.state,a,l,u),m())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const l=this.cloneDeep(e),u=this.transformState(t),m={},g={};return this.map(l,(y,v)=>{u[y]||(g[y]=v)}),this.map(u,(y,v)=>{const x=l[y];if(x){const T=v.map(z=>z.presence_ref),I=x.map(z=>z.presence_ref),L=v.filter(z=>I.indexOf(z.presence_ref)<0),B=x.filter(z=>T.indexOf(z.presence_ref)<0);L.length>0&&(m[y]=L),B.length>0&&(g[y]=B)}else m[y]=v}),this.syncDiff(l,{joins:m,leaves:g},s,a)}static syncDiff(e,t,s,a){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(m,g)=>{var y;const v=(y=e[m])!==null&&y!==void 0?y:[];if(e[m]=this.cloneDeep(g),v.length>0){const x=e[m].map(I=>I.presence_ref),T=v.filter(I=>x.indexOf(I.presence_ref)<0);e[m].unshift(...T)}s(m,v,g)}),this.map(u,(m,g)=>{let y=e[m];if(!y)return;const v=g.map(x=>x.presence_ref);y=y.filter(x=>v.indexOf(x.presence_ref)<0),e[m]=y,a(m,y,g),y.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fw;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Fw||(Fw={}));var Vc;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Vc||(Vc={}));var dr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class py{constructor(e,t={config:{}},s){var a,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bg(this,fs.join,this.params,this.timeout),this.rejoinTimer=new JT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fs.reply,{},(u,m)=>{this._trigger(this._replyEventName(m),u)}),this.presence=new Mc(this),this.broadcastEndpointURL=e1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ft.closed){const{config:{broadcast:u,presence:m,private:g}}=this.params,y=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(I=>I.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Vc.PRESENCE]&&this.bindings[Vc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,x={},T={broadcast:u,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(I=>e==null?void 0:e(dr.CHANNEL_ERROR,I)),this._onClose(()=>e==null?void 0:e(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:T},x)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:I})=>{var L;if(this.socket.setAuth(),I===void 0){e==null||e(dr.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,z=(L=B==null?void 0:B.length)!==null&&L!==void 0?L:0,re=[];for(let $=0;$<z;$++){const W=B[$],{filter:{event:le,schema:ce,table:oe,filter:C}}=W,A=I&&I[$];if(A&&A.event===le&&A.schema===ce&&A.table===oe&&A.filter===C)re.push(Object.assign(Object.assign({},W),{id:A.id}));else{this.unsubscribe(),this.state=Ft.errored,e==null||e(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=re,e&&e(dr.SUBSCRIBED);return}}).receive("error",I=>{this.state=Ft.errored,e==null||e(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(I).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Ft.joined&&e===Vc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=y.body)===null||a===void 0?void 0:a.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,m,g;const y=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(m=(u=this.params)===null||u===void 0?void 0:u.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),y.receive("ok",()=>l("ok")),y.receive("error",()=>l("error")),y.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ft.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new bg(this,fs.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ft.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new bg(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>L4){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,l;const u=e.toLocaleLowerCase(),{close:m,error:g,leave:y,join:v}=fs;if(s&&[m,g,y,v].indexOf(u)>=0&&s!==this._joinRef())return;let T=this._onMessage(u,t,s);if(t&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(I=>{var L,B,z;return((L=I.filter)===null||L===void 0?void 0:L.event)==="*"||((z=(B=I.filter)===null||B===void 0?void 0:B.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===u}).map(I=>I.callback(T,s)):(l=this.bindings[u])===null||l===void 0||l.filter(I=>{var L,B,z,re,$,W;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in I){const le=I.id,ce=(L=I.filter)===null||L===void 0?void 0:L.event;return le&&((B=t.ids)===null||B===void 0?void 0:B.includes(le))&&(ce==="*"||(ce==null?void 0:ce.toLocaleLowerCase())===((z=t.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))}else{const le=($=(re=I==null?void 0:I.filter)===null||re===void 0?void 0:re.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return le==="*"||le===((W=t==null?void 0:t.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===u}).map(I=>{if(typeof T=="object"&&"ids"in T){const L=T.data,{schema:B,table:z,commit_timestamp:re,type:$,errors:W}=L;T=Object.assign(Object.assign({},{schema:B,table:z,commit_timestamp:re,eventType:$,new:{},old:{},errors:W}),this._getPayloadRecords(L))}I.callback(T,s)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&py.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fs.close,{},e)}_onError(e){this._on(fs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=$w(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=$w(e.columns,e.old_record)),t}}const wg=()=>{},Lh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},K4=[1e3,2e3,5e3,1e4],Q4=1e4,Y4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W4{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lp,this.transport=null,this.heartbeatIntervalMs=Lh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wg,this.ref=0,this.reconnectTimer=null,this.logger=wg,this.conn=null,this.sendBuffer=[],this.serializer=new z4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>au(async()=>{const{default:m}=await Promise.resolve().then(()=>fl);return{default:m}},void 0).then(({default:m})=>m(...u)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${cp.websocket}`,this.httpEndpoint=e1(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=D4.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:V4}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pc.connecting:return _a.Connecting;case Pc.open:return _a.Open;case Pc.closing:return _a.Closing;default:return _a.Closed}}isConnected(){return this.connectionState()===_a.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new py(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:a,ref:l}=e,u=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${t} ${s} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(U4,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Lh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:u}=t,m=u?`(${u})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${m}`.trim(),l),this.channels.filter(y=>y._isMember(s)).forEach(y=>y._trigger(a,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Y4],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:M4};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(fs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new JT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,l,u,m,g,y,v;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:lp,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Lh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:wg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:x=>K4[x-1]||Q4,this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(x,T)=>T(JSON.stringify(x)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class X4 extends yy{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hp extends yy{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var J4=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const t1=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Z4=()=>J4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield au(()=>Promise.resolve().then(()=>fl),void 0)).Response:Response}),dp=r=>{if(Array.isArray(r))return r.map(t=>dp(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=dp(s)}),e},eD=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Pa=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const xg=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),tD=(r,e,t)=>Pa(void 0,void 0,void 0,function*(){const s=yield Z4();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(a=>{const l=r.status||500,u=(a==null?void 0:a.statusCode)||l+"";e(new X4(xg(a),l,u))}).catch(a=>{e(new hp(xg(a),a))}):e(new hp(xg(r),r))}),nD=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(eD(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function ou(r,e,t,s,a,l){return Pa(this,void 0,void 0,function*(){return new Promise((u,m)=>{r(t,nD(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>tD(g,m,s))})})}function bd(r,e,t,s){return Pa(this,void 0,void 0,function*(){return ou(r,"GET",e,t,s)})}function Ps(r,e,t,s,a){return Pa(this,void 0,void 0,function*(){return ou(r,"POST",e,s,a,t)})}function fp(r,e,t,s,a){return Pa(this,void 0,void 0,function*(){return ou(r,"PUT",e,s,a,t)})}function sD(r,e,t,s){return Pa(this,void 0,void 0,function*(){return ou(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function n1(r,e,t,s,a){return Pa(this,void 0,void 0,function*(){return ou(r,"DELETE",e,s,a,t)})}var rD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class iD{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return rD(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}var aD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class oD{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new iD(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return aD(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}var Nn=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const lD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cD{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=t1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return Nn(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Gw),a);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=s,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),a!=null&&a.headers&&(m=Object.assign(Object.assign({},m),a.headers));const y=this._removeEmptyFolders(t),v=this._getFinalPath(y),x=yield(e=="PUT"?fp:Ps)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:m},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}upload(e,t,s){return Nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return Nn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),m=new URL(this.url+`/object/upload/sign/${u}`);m.searchParams.set("token",t);try{let g;const y=Object.assign({upsert:Gw.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",y.cacheControl)):(g=s,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const x=yield fp(this.fetch,m.toString(),g,{headers:v});return{data:{path:l,fullPath:x.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Vt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return Nn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield Ps(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+l.url),m=u.searchParams.get("token");if(!m)throw new yy("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:m},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Nn(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return Nn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ps(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return Nn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Ps(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return Nn(this,void 0,void 0,function*(){try{const a=yield Ps(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"",m=this._getFinalPath(e),g=()=>bd(this.fetch,`${this.url}/${a}/${m}${u}`,{headers:this.headers,noResolveJson:!0});return new oD(g,this.shouldThrowOnError)}info(e){return Nn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield bd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:dp(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}exists(e){return Nn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield sD(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s)&&s instanceof hp){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const m=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let y=a.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${s}${y}`)}}}remove(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield n1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Nn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},lD),t),{prefix:e||""});return{data:yield Ps(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}listV2(e,t){return Nn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ps(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const uD="2.75.0",hD={"X-Client-Info":`storage-js/${uD}`};var jo=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class dD{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hD),t),this.fetch=t1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jo(this,void 0,void 0,function*(){try{return{data:yield bd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}getBucket(e){return jo(this,void 0,void 0,function*(){try{return{data:yield bd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}createBucket(e){return jo(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Ps(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return jo(this,void 0,void 0,function*(){try{return{data:yield fp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return jo(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return jo(this,void 0,void 0,function*(){try{return{data:yield n1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}class fD extends dD{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new cD(this.url,this.headers,e,this.fetch)}}const mD="2.75.0";let Nc="";typeof Deno<"u"?Nc="deno":typeof document<"u"?Nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nc="react-native":Nc="node";const gD={"X-Client-Info":`supabase-js-${Nc}/${mD}`},pD={headers:gD},yD={schema:"public"},vD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_D={};var bD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const wD=r=>{let e;return r?e=r:typeof fetch>"u"?e=GT:e=fetch,(...t)=>e(...t)},xD=()=>typeof Headers>"u"?KT:Headers,ED=(r,e,t)=>{const s=wD(t),a=xD();return(l,u)=>bD(void 0,void 0,void 0,function*(){var m;const g=(m=yield e())!==null&&m!==void 0?m:r;let y=new a(u==null?void 0:u.headers);return y.has("apikey")||y.set("apikey",r),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},u),{headers:y}))})};var TD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};function SD(r){return r.endsWith("/")?r:r+"/"}function AD(r,e){var t,s;const{db:a,auth:l,realtime:u,global:m}=r,{db:g,auth:y,realtime:v,global:x}=e,T={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},y),l),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(t=x==null?void 0:x.headers)!==null&&t!==void 0?t:{}),(s=m==null?void 0:m.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>TD(this,void 0,void 0,function*(){return""})};return r.accessToken?T.accessToken=r.accessToken:delete T.accessToken,T}function RD(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const s1="2.75.0",qo=30*1e3,mp=3,Eg=mp*qo,ND="http://localhost:9999",CD="supabase.auth.token",ID={"X-Client-Info":`gotrue-js/${s1}`},gp="X-Supabase-Api-Version",r1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jD=10*60*1e3;class Gc extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Te(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class OD extends Gc{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function DD(r){return Te(r)&&r.name==="AuthApiError"}class ba extends Gc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ii extends Gc{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class oi extends Ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function PD(r){return Te(r)&&r.name==="AuthSessionMissingError"}class Oo extends Ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zh extends Ii{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bh extends Ii{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MD(r){return Te(r)&&r.name==="AuthImplicitGrantRedirectError"}class Kw extends Ii{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pp extends Ii{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Tg(r){return Te(r)&&r.name==="AuthRetryableFetchError"}class Qw extends Ii{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class yp extends Ii{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yw=` 	
\r=`.split(""),VD=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Yw.length;e+=1)r[Yw[e].charCodeAt(0)]=-2;for(let e=0;e<wd.length;e+=1)r[wd[e].charCodeAt(0)]=e;return r})();function Ww(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(wd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(wd[s]),e.queuedBits-=6}}function i1(r,e,t){const s=VD[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Xw(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{zD(u,s,t)};for(let u=0;u<r.length;u+=1)i1(r.charCodeAt(u),a,l);return e.join("")}function UD(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function LD(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}UD(s,e)}}function zD(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Yo(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)i1(r.charCodeAt(a),t,s);return new Uint8Array(e)}function BD(r){const e=[];return LD(r,t=>e.push(t)),new Uint8Array(e)}function xa(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>Ww(a,t,s)),Ww(null,t,s),e.join("")}function qD(r){return Math.round(Date.now()/1e3)+r}function $D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const zn=()=>typeof window<"u"&&typeof document<"u",ga={tested:!1,writable:!1},a1=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ga.tested)return ga.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ga.tested=!0,ga.writable=!0}catch{ga.tested=!0,ga.writable=!1}return ga.writable};function HD(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const o1=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},FD=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",$o=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},pa=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ai=async(r,e)=>{await r.removeItem(e)};class Fd{constructor(){this.promise=new Fd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fd.promiseConstructor=Promise;function Sg(r){const e=r.split(".");if(e.length!==3)throw new yp("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!kD.test(e[s]))throw new yp("JWT not in base64url format");return{header:JSON.parse(Xw(e[0])),payload:JSON.parse(Xw(e[1])),signature:Yo(e[2]),raw:{header:e[0],payload:e[1]}}}async function GD(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function KD(r,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await r(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function QD(r){return("0"+r.toString(16)).substr(-2)}function YD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,QD).join("")}async function WD(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function XD(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await WD(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Do(r,e,t=!1){const s=YD();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await $o(r,`${e}-code-verifier`,a);const l=await XD(s);return[l,s===l?"plain":"s256"]}const JD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ZD(r){const e=r.headers.get(gp);if(!e||!e.match(JD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eP(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function tP(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Po(r){if(!nP.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ag(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jw(r){return JSON.parse(JSON.stringify(r))}var sP=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};const va=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),rP=[502,503,504];async function Zw(r){var e;if(!FD(r))throw new pp(va(r),0);if(rP.includes(r.status))throw new pp(va(r),r.status);let t;try{t=await r.json()}catch(l){throw new ba(va(l),l)}let s;const a=ZD(r);if(a&&a.getTime()>=r1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Qw(va(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new oi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Qw(va(t),r.status,t.weak_password.reasons);throw new OD(va(t),r.status||500,s)}const iP=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Me(r,e,t,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[gp]||(l[gp]=r1["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const m=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await aP(r,e,t+m,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function aP(r,e,t,s,a,l){const u=iP(e,s,a,l);let m;try{m=await r(t,Object.assign({},u))}catch(g){throw console.error(g),new pp(va(g),0)}if(m.ok||await Zw(m),s!=null&&s.noResolveJson)return m;try{return await m.json()}catch(g){await Zw(g)}}function ds(r){var e;let t=null;cP(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=qD(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function ex(r){const e=ds(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function di(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function oP(r){return{data:r,error:null}}function lP(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l}=r,u=sP(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},u);return{data:{properties:m,user:g},error:null}}function tx(r){return r}function cP(r){return r.access_token&&r.refresh_token&&r.expires_in}const Rg=["global","local","others"];var uP=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};class hP{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=o1(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Rg[0]){if(Rg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rg.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:di})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=uP(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:lP,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Te(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:di})}catch(t){if(Te(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,l,u,m,g;try{const y={nextPage:null,lastPage:0,total:0},v=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:tx});if(v.error)throw v.error;const x=await v.json(),T=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,I=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return I.length>0&&(I.forEach(L=>{const B=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(L.split(";")[1].split("=")[1]);y[`${z}Page`]=B}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(Te(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){Po(e);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:di})}catch(t){if(Te(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Po(e);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:di})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Po(e);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:di})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Po(e.userId);try{const{data:t,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Po(e.userId),Po(e.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,l,u,m,g;try{const y={nextPage:null,lastPage:0,total:0},v=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:tx});if(v.error)throw v.error;const x=await v.json(),T=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,I=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return I.length>0&&(I.forEach(L=>{const B=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(L.split(";")[1].split("=")[1]);y[`${z}Page`]=B}),y.total=parseInt(T)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(Te(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}}function nx(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Mo={debug:!!(globalThis&&a1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class l1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dP extends l1{}async function fP(r,e,t){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new dP(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Mo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function mP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function c1(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function gP(r){return parseInt(r,16)}function pP(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function yP(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:m,requestId:g,resources:y,scheme:v,uri:x,version:T}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const I=c1(r.address),L=v?`${v}://${s}`:s,B=r.statement?`${r.statement}
`:"",z=`${L} wants you to sign in with your Ethereum account:
${I}

${B}`;let re=`URI: ${x}
Version: ${T}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(re+=`
Expiration Time: ${a.toISOString()}`),m&&(re+=`
Not Before: ${m.toISOString()}`),g&&(re+=`
Request ID: ${g}`),y){let $=`
Resources:`;for(const W of y){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);$+=`
- ${W}`}re+=$}return`${z}
${re}`}class Mt extends Error{constructor({message:e,code:t,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class xd extends Mt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function vP({error:r,options:e}){var t,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Mt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(h1(u)){if(l.rp.id!==u)return new Mt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function _P({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Mt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(h1(s)){if(t.rpId!==s)return new Mt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}var u1=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};class bP{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const wP=new bP;function xP(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=u1(r,["challenge","user","excludeCredentials"]),l=Yo(e).buffer,u=Object.assign(Object.assign({},t),{id:Yo(t.id).buffer}),m=Object.assign(Object.assign({},a),{challenge:l,user:u});if(s&&s.length>0){m.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const y=s[g];m.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:Yo(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function EP(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=u1(r,["challenge","allowCredentials"]),a=Yo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const m=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},m),{id:Yo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function TP(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:xa(new Uint8Array(r.response.attestationObject)),clientDataJSON:xa(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SP(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:xa(new Uint8Array(a.authenticatorData)),clientDataJSON:xa(new Uint8Array(a.clientDataJSON)),signature:xa(new Uint8Array(a.signature)),userHandle:a.userHandle?xa(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function h1(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function sx(){var r,e;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function AP(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xd("Browser returned unexpected credential type",e)}:{data:null,error:new xd("Empty credential response",e)}}catch(e){return{data:null,error:vP({error:e,options:r})}}}async function RP(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xd("Browser returned unexpected credential type",e)}:{data:null,error:new xd("Empty credential response",e)}}catch(e){return{data:null,error:_P({error:e,options:r})}}}const NP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},CP={userVerification:"preferred",hints:["security-key"]};function Ed(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const l in a){const u=a[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(t(u))s[l]=u;else if(e(u)){const m=s[l];e(m)?s[l]=Ed(m,u):s[l]=Ed(u)}else s[l]=u}return s}function IP(r,e){return Ed(NP,r,e||{})}function kP(r,e){return Ed(CP,r,e||{})}class jP{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},l){try{const{data:u,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:m};const g=a??wP.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:y}=u.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${s}`),y.displayName||(y.displayName=y.name)}switch(u.webauthn.type){case"create":{const y=IP(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:x}=await AP({publicKey:y,signal:g});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}case"request":{const y=kP(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:x}=await RP(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:y,signal:g}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}}}catch(u){return Te(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!t)return{data:null,error:new Gc("rpId is required for WebAuthn authentication")};try{if(!sx())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:u,error:m}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:l});if(!u)return{data:null,error:m};const{webauthn:g}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(u){return Te(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!t)return{data:null,error:new Gc("rpId is required for WebAuthn registration")};try{if(!sx())return{data:null,error:new ba("Browser does not support WebAuthn",null)};const{data:u,error:m}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var x;return(x=v.data)===null||x===void 0?void 0:x.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===e&&T.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:m};const{data:g,error:y}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(u){return Te(u)?{data:null,error:u}:{data:null,error:new ba("Unexpected error in register",u)}}}}mP();const OP={url:ND,storageKey:CD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ID,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rx(r,e,t){return await t()}const Vo={};class Kc{get jwks(){var e,t;return(t=(e=Vo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Vo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kc.nextInstanceID,Kc.nextInstanceID+=1,this.instanceID>0&&zn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},OP),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new hP({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=o1(a.fetch),this.lock=a.lock||rx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:zn()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=fP:this.lock=rx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jP(this)},this.persistSession?(a.storage?this.storage=a.storage:a1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=nx(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${s1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=HD(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),zn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),MD(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:m}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",m),await this._saveSession(u),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Te(t)?{error:t}:{error:new ba("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:ds}),{data:u,error:m}=l;if(m||!u)return{data:{user:null,session:null},error:m};const g=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(l){if(Te(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,s,a;try{let l;if("email"in e){const{email:v,password:x,options:T}=e;let I=null,L=null;this.flowType==="pkce"&&([I,L]=await Do(this.storage,this.storageKey)),l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:v,password:x,data:(t=T==null?void 0:T.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:I,code_challenge_method:L},xform:ds})}else if("phone"in e){const{phone:v,password:x,options:T}=e;l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},channel:(a=T==null?void 0:T.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:ds})}else throw new zh("You must provide either an email or phone number and a password");const{data:u,error:m}=l;if(m||!u)return{data:{user:null,session:null},error:m};const g=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(l){if(Te(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:m}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ex})}else if("phone"in e){const{phone:l,password:u,options:m}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:ex})}else throw new zh("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Oo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,l,u,m,g,y,v,x,T;let I,L;if("message"in e)I=e.message,L=e.signature;else{const{chain:B,wallet:z,statement:re,options:$}=e;let W;if(zn())if(typeof z=="object")W=z;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")W=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=z}const le=new URL((t=$==null?void 0:$.url)!==null&&t!==void 0?t:window.location.href),ce=await W.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ce||ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const oe=c1(ce[0]);let C=(s=$==null?void 0:$.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!C){const R=await W.request({method:"eth_chainId"});C=gP(R)}const A={domain:le.host,address:oe,statement:re,uri:le.href,version:"1",chainId:C,nonce:(a=$==null?void 0:$.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=$==null?void 0:$.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(m=$==null?void 0:$.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=$==null?void 0:$.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=$==null?void 0:$.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=$==null?void 0:$.signInWithEthereum)===null||v===void 0?void 0:v.resources};I=yP(A),L=await W.request({method:"personal_sign",params:[pP(I),oe]})}try{const{data:B,error:z}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:I,signature:L},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ds});if(z)throw z;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new Oo}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:z})}catch(B){if(Te(B))return{data:{user:null,session:null},error:B};throw B}}async signInWithSolana(e){var t,s,a,l,u,m,g,y,v,x,T,I;let L,B;if("message"in e)L=e.message,B=e.signature;else{const{chain:z,wallet:re,statement:$,options:W}=e;let le;if(zn())if(typeof re=="object")le=re;else{const oe=window;if("solana"in oe&&typeof oe.solana=="object"&&("signIn"in oe.solana&&typeof oe.solana.signIn=="function"||"signMessage"in oe.solana&&typeof oe.solana.signMessage=="function"))le=oe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof re!="object"||!(W!=null&&W.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=re}const ce=new URL((t=W==null?void 0:W.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in le&&le.signIn){const oe=await le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W==null?void 0:W.signInWithSolana),{version:"1",domain:ce.host,uri:ce.href}),$?{statement:$}:null));let C;if(Array.isArray(oe)&&oe[0]&&typeof oe[0]=="object")C=oe[0];else if(oe&&typeof oe=="object"&&"signedMessage"in oe&&"signature"in oe)C=oe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)L=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),B=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in le)||typeof le.signMessage!="function"||!("publicKey"in le)||typeof le!="object"||!le.publicKey||!("toBase58"in le.publicKey)||typeof le.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");L=[`${ce.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${ce.href}`,`Issued At: ${(a=(s=W==null?void 0:W.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=W==null?void 0:W.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((u=W==null?void 0:W.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((m=W==null?void 0:W.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((g=W==null?void 0:W.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((y=W==null?void 0:W.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((x=(v=W==null?void 0:W.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...W.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const oe=await le.signMessage(new TextEncoder().encode(L),"utf8");if(!oe||!(oe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=oe}}try{const{data:z,error:re}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:L,signature:xa(B)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(I=e.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:ds});if(re)throw re;return!z||!z.session||!z.user?{data:{user:null,session:null},error:new Oo}:(z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),{data:Object.assign({},z),error:re})}catch(z){if(Te(z))return{data:{user:null,session:null},error:z};throw z}}async _exchangeCodeForSession(e){const t=await pa(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:l,error:u}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ds});if(await ai(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Oo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(Te(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:l,nonce:u}=e,m=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ds}),{data:g,error:y}=m;return y?{data:{user:null,session:null},error:y}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Oo}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:y})}catch(t){if(Te(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,l,u;try{if("email"in e){const{email:m,options:g}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Do(this.storage,this.storageKey));const{error:x}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:m,options:g}=e,{data:y,error:v}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(u=g==null?void 0:g.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:v}}throw new zh("You must provide either an email or phone number.")}catch(m){if(Te(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(e){var t,s;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:m}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:ds});if(m)throw m;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,y=u.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(a){if(Te(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Do(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:oP})}catch(l){if(Te(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new oi;const{error:a}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:u}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:u,error:m}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:m}}throw new zh("You must provide either an email or phone number and a type")}catch(t){if(Te(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Eg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await pa(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Ag()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,y,v)=>(!u&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,y,v))})}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:di}):await this._useSession(async t=>{var s,a,l;const{data:u,error:m}=t;if(m)throw m;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oi}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:di})})}catch(t){if(Te(t))return PD(t)&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new oi;const u=a.session;let m=null,g=null;this.flowType==="pkce"&&e.email!=null&&([m,g]=await Do(this.storage,this.storageKey));const{data:y,error:v}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:u.access_token,xform:di});if(v)throw v;return u.user=y.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oi;const t=Date.now()/1e3;let s=t,a=!0,l=null;const{payload:u}=Sg(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(Te(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:m}=t;if(m)throw m;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new oi;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Te(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!zn())throw new Bh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Kw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Kw("No code detected.");const{data:$,error:W}=await this._exchangeCodeForSession(e.code);if(W)throw W;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:m,expires_at:g,token_type:y}=e;if(!l||!m||!u||!y)throw new Bh("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(m);let T=v+x;g&&(T=parseInt(g));const I=T-v;I*1e3<=qo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${x}s`);const L=T-x;v-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,T,v):v-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,T,v);const{data:B,error:z}=await this._getUser(l);if(z)throw z;const re={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:x,expires_at:T,refresh_token:u,token_type:y,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:re,redirectType:e.type},error:null}}catch(s){if(Te(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{error:l};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:m}=await this.admin.signOut(u,e);if(m&&!(DD(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return e!=="others"&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=$D(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:l},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Do(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(Te(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async l=>{var u,m,g,y,v;const{data:x,error:T}=l;if(T)throw T;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",I,{headers:this.headers,jwt:(v=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return zn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Te(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:u,provider:m,token:g,access_token:y,nonce:v}=e,x=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:m,id_token:g,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ds}),{data:T,error:I}=x;return I?{data:{user:null,session:null},error:I}:!T||!T.session||!T.user?{data:{user:null,session:null},error:new Oo}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),{data:T,error:I})}catch(a){if(Te(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:u}=t;if(u)throw u;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await KD(async a=>(a>0&&await GD(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ds})),(a,l)=>{const u=200*Math.pow(2,a);return l&&Tg(l)&&Date.now()+u-s<qo})}catch(s){if(this._debug(t,"error",s),Te(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),zn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await pa(this.storage,this.storageKey);if(a&&this.userStorage){let u=await pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await $o(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Ag()}else if(a&&!a.user&&!a.user){const u=await pa(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await ai(this.storage,this.storageKey+"-user"),await $o(this.storage,this.storageKey,a)):a.user=Ag()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Eg;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Eg}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Tg(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:m}=await this._getUser(a.access_token);!m&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new oi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fd;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new oi;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(a,"error",l),Te(l)){const u={data:null,error:l};return Tg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(u),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await $o(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=Jw(a);await $o(this.storage,this.storageKey,l)}else{const a=Jw(t);await $o(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ai(this.storage,this.storageKey),await ai(this.storage,this.storageKey+"-code-verifier"),await ai(this.storage,this.storageKey+"-user"),this.userStorage&&await ai(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/qo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qo}ms, refresh threshold is ${mp} ticks`),a<=mp&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof l1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Do(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(m.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;return l?{data:null,error:l}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:u}=t;if(u)return{data:null,error:u};const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:y}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(t){if(Te(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?TP(e.webauthn.credential_response):SP(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:g}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:g})})}catch(t){if(Te(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:m}=u;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:xP(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:EP(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Te(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Sg(a.access_token);let m=null;u.aal&&(m=u.aal);let g=m;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(g="aal2");const v=u.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(m=>m.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(m=>m.kid===e),s&&this.jwks_cached_at+jD>a)return s;const{data:l,error:u}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(m=>m.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:I,error:L}=await this.getSession();if(L||!I.session)return{data:null,error:L};s=I.session.access_token}const{header:a,payload:l,signature:u,raw:{header:m,payload:g}}=Sg(s);t!=null&&t.allowExpired||eP(l.exp);const y=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!y){const{error:I}=await this.getUser(s);if(I)throw I;return{data:{claims:l,header:a,signature:u},error:null}}const v=tP(a.alg),x=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,u,BD(`${m}.${g}`)))throw new yp("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}}}Kc.nextInstanceID=0;const DP=Kc;class PP extends DP{constructor(e){super(e)}}var MP=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class VP{constructor(e,t,s){var a,l,u;this.supabaseUrl=e,this.supabaseKey=t;const m=RD(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:yD,realtime:_D,auth:Object.assign(Object.assign({},vD),{storageKey:g}),global:pD},v=AD(s??{},y);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=ED(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new O4(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new fD(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new E4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return MP(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:u,flowType:m,lock:g,debug:y},v,x){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PP({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),v),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,flowType:m,lock:g,debug:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(I=>I.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new W4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const UP=(r,e,t)=>new VP(r,e,t);function LP(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}LP()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ut=(r,e,t,s={})=>({code:r,message:e,provider:t,context:s,timestamp:new Date().toISOString()});class zP{constructor(e){this.config=e,this.app=null,this.auth=null,this.db=null}async connect(){try{this.app=Dx(this.config),this.auth=ZI(this.app),this.db=WO(this.app),await new Promise(e=>{const t=BC(this.auth,s=>{t(),e(s)})}),console.log("✅ Firebase connected successfully")}catch(e){throw ut("FIREBASE_CONNECT_ERROR",`Failed to connect to Firebase: ${e.message}`,"firebase",{originalError:e})}}async signIn(){try{const e=await PC(this.auth);return sessionStorage.setItem("firebase_token",await e.user.getIdToken()),{user:e.user,token:await e.user.getIdToken()}}catch(e){throw ut("FIREBASE_AUTH_ERROR",`Firebase authentication failed: ${e.message}`,"firebase",{originalError:e})}}async signOut(){try{await qC(this.auth),sessionStorage.removeItem("firebase_token")}catch(e){throw ut("FIREBASE_SIGNOUT_ERROR",`Firebase sign out failed: ${e.message}`,"firebase",{originalError:e})}}currentUser(){return this.auth.currentUser}async read(e,t={}){try{let a=Sw(this.db,e);if(t.where){const[u,m,g]=t.where;a=l4(a,c4(u,m,g))}return(await f4(a)).docs.map(u=>({id:u.id,...u.data()}))}catch(s){throw ut("FIREBASE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"firebase",{collectionPath:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const a=_g(this.db,e,t);return await m4(a,{...s,updatedAt:new Date().toISOString()},{merge:!0}),{id:t,...s}}catch(a){throw ut("FIREBASE_WRITE_ERROR",`Failed to write to ${e}/${t}: ${a.message}`,"firebase",{collectionPath:e,docId:t,originalError:a})}}async update(e,t,s){try{const a=_g(this.db,e,t);return await g4(a,{...s,updatedAt:new Date().toISOString()}),{id:t,...s}}catch(a){throw ut("FIREBASE_UPDATE_ERROR",`Failed to update ${e}/${t}: ${a.message}`,"firebase",{collectionPath:e,docId:t,originalError:a})}}async delete(e,t){try{const s=_g(this.db,e,t);return await p4(s),{id:t,deleted:!0}}catch(s){throw ut("FIREBASE_DELETE_ERROR",`Failed to delete ${e}/${t}: ${s.message}`,"firebase",{collectionPath:e,docId:t,originalError:s})}}onSnapshot(e,t){try{const s=Sw(this.db,e);return y4(s,a=>{const l=a.docs.map(u=>({id:u.id,...u.data()}));t(l,null)},a=>{t(null,ut("FIREBASE_SNAPSHOT_ERROR",`Snapshot error on ${e}: ${a.message}`,"firebase",{collectionPath:e,originalError:a}))})}catch(s){throw ut("FIREBASE_SNAPSHOT_SETUP_ERROR",`Failed to setup snapshot for ${e}: ${s.message}`,"firebase",{collectionPath:e,originalError:s})}}}class BP{constructor(e){this.config=e,this.client=null}async connect(){try{this.client=UP(this.config.url,this.config.anonKey),console.log("✅ Supabase connected successfully")}catch(e){throw ut("SUPABASE_CONNECT_ERROR",`Failed to connect to Supabase: ${e.message}`,"supabase",{originalError:e})}}async signIn(){try{const{data:e,error:t}=await this.client.auth.signInAnonymously();if(t)throw t;return sessionStorage.setItem("supabase_token",e.session.access_token),{user:e.user,token:e.session.access_token}}catch(e){throw ut("SUPABASE_AUTH_ERROR",`Supabase authentication failed: ${e.message}`,"supabase",{originalError:e})}}async signOut(){try{await this.client.auth.signOut(),sessionStorage.removeItem("supabase_token")}catch(e){throw ut("SUPABASE_SIGNOUT_ERROR",`Supabase sign out failed: ${e.message}`,"supabase",{originalError:e})}}async currentUser(){const{data:{user:e}}=await this.client.auth.getUser();return e}async read(e,t={}){try{let s=this.client.from(e).select("*");if(t.where){const[u,m,g]=t.where;switch(m){case"==":s=s.eq(u,g);break;case">":s=s.gt(u,g);break;case"<":s=s.lt(u,g);break;case">=":s=s.gte(u,g);break;case"<=":s=s.lte(u,g);break}}const{data:a,error:l}=await s;if(l)throw l;return a}catch(s){throw ut("SUPABASE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"supabase",{tableName:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const{data:a,error:l}=await this.client.from(e).upsert({id:t,...s,updated_at:new Date().toISOString()});if(l)throw l;return a}catch(a){throw ut("SUPABASE_WRITE_ERROR",`Failed to write to ${e}: ${a.message}`,"supabase",{tableName:e,docId:t,originalError:a})}}async update(e,t,s){try{const{data:a,error:l}=await this.client.from(e).update({...s,updated_at:new Date().toISOString()}).eq("id",t);if(l)throw l;return a}catch(a){throw ut("SUPABASE_UPDATE_ERROR",`Failed to update ${e}: ${a.message}`,"supabase",{tableName:e,docId:t,originalError:a})}}async delete(e,t){try{const{error:s}=await this.client.from(e).delete().eq("id",t);if(s)throw s;return{id:t,deleted:!0}}catch(s){throw ut("SUPABASE_DELETE_ERROR",`Failed to delete from ${e}: ${s.message}`,"supabase",{tableName:e,docId:t,originalError:s})}}onSnapshot(e,t){try{const s=this.client.channel(`${e}_changes`).on("postgres_changes",{event:"*",schema:"public",table:e},a=>{this.read(e).then(l=>t(l,null)).catch(l=>t(null,l))}).subscribe();return()=>{this.client.removeChannel(s)}}catch(s){throw ut("SUPABASE_SNAPSHOT_ERROR",`Failed to setup snapshot for ${e}: ${s.message}`,"supabase",{tableName:e,originalError:s})}}}class qP{constructor(e){this.config=e,this.endpoint=e.endpoint,this.key=e.key,this.databaseId=e.databaseId||"FineGuardDB",this.authenticated=!1}async connect(){try{const e=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls`,{method:"GET",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"}});if(!e.ok)throw new Error(`Azure connection failed: ${e.statusText}`);this.authenticated=!0,console.log("✅ Azure Cosmos DB connected successfully")}catch(e){throw ut("AZURE_CONNECT_ERROR",`Failed to connect to Azure Cosmos DB: ${e.message}`,"azure",{originalError:e})}}async signIn(){try{return sessionStorage.setItem("azure_token",this.key),{user:{id:"azure-user"},token:this.key}}catch(e){throw ut("AZURE_AUTH_ERROR",`Azure authentication failed: ${e.message}`,"azure",{originalError:e})}}async signOut(){sessionStorage.removeItem("azure_token"),this.authenticated=!1}currentUser(){return this.authenticated?{id:"azure-user"}:null}async read(e,t={}){try{let s="SELECT * FROM c";if(t.where){const[u,m,g]=t.where,y=m==="=="?"=":m,v=typeof g=="string"?`"${g}"`:g;s+=` WHERE c.${u} ${y} ${v}`}const a=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs`,{method:"POST",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/query+json","x-ms-documentdb-isquery":"true"},body:JSON.stringify({query:s})});if(!a.ok)throw new Error(`Read failed: ${a.statusText}`);return(await a.json()).Documents||[]}catch(s){throw ut("AZURE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"azure",{containerName:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const a=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs`,{method:"POST",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"},body:JSON.stringify({id:t,...s,_updatedAt:new Date().toISOString()})});if(!a.ok)throw new Error(`Write failed: ${a.statusText}`);return await a.json()}catch(a){throw ut("AZURE_WRITE_ERROR",`Failed to write to ${e}: ${a.message}`,"azure",{containerName:e,docId:t,originalError:a})}}async update(e,t,s){try{const a=await this.read(e,{where:["id","==",t]});if(!a||a.length===0)throw new Error("Document not found");const l=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs/${t}`,{method:"PUT",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"},body:JSON.stringify({...a[0],...s,_updatedAt:new Date().toISOString()})});if(!l.ok)throw new Error(`Update failed: ${l.statusText}`);return await l.json()}catch(a){throw ut("AZURE_UPDATE_ERROR",`Failed to update ${e}: ${a.message}`,"azure",{containerName:e,docId:t,originalError:a})}}async delete(e,t){try{const s=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs/${t}`,{method:"DELETE",headers:{Authorization:this.key,"x-ms-version":"2018-12-31"}});if(!s.ok)throw new Error(`Delete failed: ${s.statusText}`);return{id:t,deleted:!0}}catch(s){throw ut("AZURE_DELETE_ERROR",`Failed to delete from ${e}: ${s.message}`,"azure",{containerName:e,docId:t,originalError:s})}}onSnapshot(e,t){const s=setInterval(async()=>{try{const a=await this.read(e);t(a,null)}catch(a){t(null,a)}},5e3);return()=>clearInterval(s)}}const $P=r=>{let e;if(!r||!r.provider)throw ut("INVALID_CONFIG","Configuration must include a provider field","connector",{config:r});switch(r.provider){case"firebase":if(!r.firebaseConfig)throw ut("INVALID_CONFIG","Firebase provider requires firebaseConfig","connector",{config:r});e=new zP(r.firebaseConfig);break;case"supabase":if(!r.supabaseConfig)throw ut("INVALID_CONFIG","Supabase provider requires supabaseConfig","connector",{config:r});e=new BP(r.supabaseConfig);break;case"azure":if(!r.azureConfig)throw ut("INVALID_CONFIG","Azure provider requires azureConfig","connector",{config:r});e=new qP(r.azureConfig);break;default:throw ut("UNSUPPORTED_PROVIDER",`Provider "${r.provider}" is not supported`,"connector",{config:r})}return{async connect(){return await e.connect(),{auth:{signIn:()=>e.signIn(),signOut:()=>e.signOut(),currentUser:()=>e.currentUser()},db:{read:(t,s)=>e.read(t,s),write:(t,s,a)=>e.write(t,s,a),update:(t,s,a)=>e.update(t,s,a),delete:(t,s)=>e.delete(t,s),onSnapshot:(t,s)=>e.onSnapshot(t,s)}}},getProvider(){return r.provider}}},HP=()=>{const[r,e]=me.useState("firebase"),[t,s]=me.useState(null),[a,l]=me.useState(!1),[u,m]=me.useState(!1),[g,y]=me.useState(null),[v,x]=me.useState([]),[T,I]=me.useState([]),[L,B]=me.useState("companies"),[z,re]=me.useState(!1),[$,W]=me.useState(!1),[le,ce]=me.useState(null),[oe,C]=me.useState({}),A={firebase:{provider:"firebase",firebaseConfig:{apiKey:"demo-api-key",authDomain:"fineguard-demo.firebaseapp.com",projectId:"fineguard-demo",storageBucket:"fineguard-demo.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"}},supabase:{provider:"supabase",supabaseConfig:{url:"https://your-project.supabase.co",anonKey:"your-anon-key-here"}},azure:{provider:"azure",azureConfig:{endpoint:"https://your-account.documents.azure.com:443/",key:"your-azure-key-here",databaseId:"FineGuardDB"}}},R=async()=>{m(!0),y(null);try{const V=A[r],ie=$P(V),{auth:te,db:ze}=await ie.connect();await te.signIn(),s({auth:te,db:ze}),l(!0),await O(ze)}catch(V){y(V.message||"Failed to connect to database"),console.error("Connection error:",V)}finally{m(!1)}},O=async V=>{try{const ie=await V.read("companies"),te=await V.read("obligations");x(ie||[]),I(te||[])}catch(ie){console.error("Error loading data:",ie),y("Failed to load data from database")}},j=async()=>{if(t)try{await t.auth.signOut(),s(null),l(!1),x([]),I([])}catch(V){console.error("Disconnect error:",V)}},M=()=>{C(L==="companies"?{name:"",companyNumber:"",address:"",riskLevel:"low",complianceScore:100}:{companyId:"",title:"",description:"",dueDate:"",status:"pending",penalty:0}),ce("new")},N=async()=>{if(t){m(!0);try{const V=L==="companies"?"companies":"obligations",ie=le==="new"?`${Date.now()}`:le;await t.db.write(V,ie,oe),await O(t.db),ce(null),C({})}catch(V){y(`Failed to save: ${V.message}`)}finally{m(!1)}}},We=async V=>{if(!(!t||!confirm("Are you sure you want to delete this item?"))){m(!0);try{const ie=L==="companies"?"companies":"obligations";await t.db.delete(ie,V),await O(t.db)}catch(ie){y(`Failed to delete: ${ie.message}`)}finally{m(!1)}}},Ue=V=>{ce(V.id),C(V)};return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Panel"}),d.jsx("p",{className:"text-muted-foreground",children:"Manage database connections and data"})]}),d.jsx(en,{variant:a?"default":"secondary",className:"text-lg px-4 py-2",children:a?d.jsxs(d.Fragment,{children:[d.jsx(_t,{className:"h-4 w-4 mr-2"})," Connected"]}):d.jsxs(d.Fragment,{children:[d.jsx(d2,{className:"h-4 w-4 mr-2"})," Disconnected"]})})]}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(Zh,{className:"h-6 w-6"}),"Database Connection"]}),d.jsx(kn,{children:"Choose your database provider and connect"})]}),d.jsxs(we,{className:"space-y-4",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("label",{className:"font-medium",children:"Provider:"}),d.jsxs("select",{value:r,onChange:V=>e(V.target.value),disabled:a,className:"px-4 py-2 border rounded-lg bg-background",children:[d.jsx("option",{value:"firebase",children:"Firebase"}),d.jsx("option",{value:"supabase",children:"Supabase"}),d.jsx("option",{value:"azure",children:"Azure Cosmos DB"})]}),a?d.jsx(Se,{onClick:j,variant:"destructive",children:"Disconnect"}):d.jsxs(Se,{onClick:R,disabled:u,className:"bg-gradient-to-r from-cyan-400 to-blue-500",children:[u?d.jsx(jg,{className:"h-4 w-4 mr-2 animate-spin"}):d.jsx(Zh,{className:"h-4 w-4 mr-2"}),"Connect"]})]}),g&&d.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[d.jsx(xx,{className:"h-5 w-5 text-red-600"}),d.jsx("p",{className:"text-red-600 dark:text-red-400",children:g})]}),a&&d.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:[d.jsx(_t,{className:"h-5 w-5 text-green-600"}),d.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["Connected to ",r.charAt(0).toUpperCase()+r.slice(1)]})]})]})]}),a&&d.jsxs(be,{children:[d.jsx(ke,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(wx,{className:"h-6 w-6"}),"Data Management"]}),d.jsx(kn,{children:"View and manage your compliance data"})]}),d.jsxs(Se,{onClick:M,className:"bg-gradient-to-r from-cyan-400 to-blue-500",children:[d.jsx(F2,{className:"h-4 w-4 mr-2"}),"Add New"]})]})}),d.jsxs(we,{children:[d.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[d.jsxs("button",{onClick:()=>B("companies"),className:`px-6 py-3 font-medium transition-colors ${L==="companies"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:["Companies (",v.length,")"]}),d.jsxs("button",{onClick:()=>B("obligations"),className:`px-6 py-3 font-medium transition-colors ${L==="obligations"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:["Obligations (",T.length,")"]}),d.jsx("button",{onClick:()=>B("ai-crm"),className:`px-6 py-3 font-medium transition-colors ${L==="ai-crm"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:"AI CRM 🤖"}),d.jsx("button",{onClick:()=>B("marketing"),className:`px-6 py-3 font-medium transition-colors ${L==="marketing"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:"Marketing 📧"})]}),d.jsx("div",{className:"space-y-4",children:L==="ai-crm"?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"p-6 bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-950 dark:to-blue-950 rounded-lg border-2 border-cyan-200 dark:border-cyan-800",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:"🤖 AI CRM Module"}),d.jsx("p",{className:"text-muted-foreground mb-6",children:"Intelligent customer relationship management powered by AI. Automatically score leads, predict churn, and recommend next best actions."}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"AI Lead Scoring"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically score and prioritize leads based on engagement, company data, and compliance history."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable AI Scoring"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Churn Prediction"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Predict which clients are at risk of leaving and receive proactive retention recommendations."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable Churn Detection"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Next Best Action"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI-powered recommendations for the best next step with each client based on their compliance status."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable NBA Engine"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Smart Segmentation"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically segment clients by risk level, industry, compliance score, and engagement."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Configure Segments"})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg border",children:[d.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI CRM features require a FineGuard Premium license.",d.jsx("a",{href:"/pricing",className:"text-cyan-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})}):L==="marketing"?d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 rounded-lg border-2 border-purple-200 dark:border-purple-800",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:"📧 Marketing Admin Module"}),d.jsx("p",{className:"text-muted-foreground mb-6",children:"Automated marketing campaigns, email sequences, and client communications powered by AI copywriting."}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Email Campaigns"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create and send automated email campaigns to clients based on compliance deadlines and risk levels."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Campaign"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"AI Copywriting"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate professional email content automatically using AI, tailored to each client's situation."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Enable AI Writer"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"SMS & WhatsApp"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send urgent compliance alerts via SMS and WhatsApp for critical deadlines."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Configure Messaging"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Drip Sequences"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set up automated email sequences for onboarding, reminders, and follow-ups."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Sequence"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Analytics Dashboard"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track email open rates, click-through rates, and campaign performance."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"View Analytics"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Template Library"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Access pre-built email templates for common compliance scenarios."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Browse Templates"})]})]})]}),d.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg border",children:[d.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Marketing features require a FineGuard Premium license.",d.jsx("a",{href:"/pricing",className:"text-purple-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})}):L==="companies"?v.length>0?v.map(V=>d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-lg",children:V.name}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",V.companyNumber]}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx(en,{variant:V.riskLevel==="critical"?"destructive":"default",children:V.riskLevel}),d.jsxs(en,{variant:"outline",children:[V.complianceScore,"% Compliance"]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Se,{size:"sm",variant:"outline",onClick:()=>Ue(V),children:d.jsx(Z0,{className:"h-4 w-4"})}),d.jsx(Se,{size:"sm",variant:"destructive",onClick:()=>We(V.id),children:d.jsx(tb,{className:"h-4 w-4"})})]})]},V.id)):d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No companies found"}):T.length>0?T.map(V=>d.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold text-lg",children:V.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:V.companyName}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx(en,{variant:V.status==="overdue"?"destructive":"default",children:V.status}),d.jsxs(en,{variant:"outline",children:["Due: ",V.dueDate]}),V.penalty>0&&d.jsxs(en,{variant:"destructive",children:["£",V.penalty," penalty"]})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Se,{size:"sm",variant:"outline",onClick:()=>Ue(V),children:d.jsx(Z0,{className:"h-4 w-4"})}),d.jsx(Se,{size:"sm",variant:"destructive",onClick:()=>We(V.id),children:d.jsx(tb,{className:"h-4 w-4"})})]})]},V.id)):d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No obligations found"})})]})]}),le&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>ce(null),children:d.jsxs(be,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:V=>V.stopPropagation(),children:[d.jsx(ke,{children:d.jsxs(je,{children:[le==="new"?"Add New":"Edit"," ",L==="companies"?"Company":"Obligation"]})}),d.jsxs(we,{className:"space-y-4",children:[L==="companies"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Name"}),d.jsx("input",{type:"text",value:oe.name||"",onChange:V=>C({...oe,name:V.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Number"}),d.jsx("input",{type:"text",value:oe.companyNumber||"",onChange:V=>C({...oe,companyNumber:V.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),d.jsx("input",{type:"text",value:oe.address||"",onChange:V=>C({...oe,address:V.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Risk Level"}),d.jsxs("select",{value:oe.riskLevel||"low",onChange:V=>C({...oe,riskLevel:V.target.value}),className:"w-full p-2 border rounded-lg bg-background",children:[d.jsx("option",{value:"low",children:"Low"}),d.jsx("option",{value:"medium",children:"Medium"}),d.jsx("option",{value:"high",children:"High"}),d.jsx("option",{value:"critical",children:"Critical"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Compliance Score"}),d.jsx("input",{type:"number",value:oe.complianceScore||100,onChange:V=>C({...oe,complianceScore:parseInt(V.target.value)}),className:"w-full p-2 border rounded-lg bg-background",min:"0",max:"100"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),d.jsx("input",{type:"text",value:oe.title||"",onChange:V=>C({...oe,title:V.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),d.jsx("textarea",{value:oe.description||"",onChange:V=>C({...oe,description:V.target.value}),className:"w-full p-2 border rounded-lg bg-background",rows:3})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date"}),d.jsx("input",{type:"date",value:oe.dueDate||"",onChange:V=>C({...oe,dueDate:V.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),d.jsxs("select",{value:oe.status||"pending",onChange:V=>C({...oe,status:V.target.value}),className:"w-full p-2 border rounded-lg bg-background",children:[d.jsx("option",{value:"pending",children:"Pending"}),d.jsx("option",{value:"overdue",children:"Overdue"}),d.jsx("option",{value:"completed",children:"Completed"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Penalty (£)"}),d.jsx("input",{type:"number",value:oe.penalty||0,onChange:V=>C({...oe,penalty:parseInt(V.target.value)}),className:"w-full p-2 border rounded-lg bg-background",min:"0"})]})]}),d.jsxs("div",{className:"flex gap-2 pt-4",children:[d.jsxs(Se,{onClick:N,className:"flex-1 bg-gradient-to-r from-cyan-400 to-blue-500",children:[u?d.jsx(jg,{className:"h-4 w-4 mr-2 animate-spin"}):d.jsx(_t,{className:"h-4 w-4 mr-2"}),"Save"]}),d.jsx(Se,{onClick:()=>ce(null),variant:"outline",className:"flex-1",children:"Cancel"})]})]})]})}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsx(je,{className:"flex items-center gap-2",children:"🤖 AI CRM Module"}),d.jsx(kn,{children:"Intelligent customer relationship management powered by AI"})]}),d.jsxs(we,{children:[d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"AI Lead Scoring"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically score and prioritize leads based on engagement, company data, and compliance history."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable AI Scoring"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Churn Prediction"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Predict which clients are at risk of leaving and receive proactive retention recommendations."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable Churn Detection"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Next Best Action"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI-powered recommendations for the best next step with each client based on their compliance status."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable NBA Engine"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Smart Segmentation"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically segment clients by risk level, industry, compliance score, and engagement."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Configure Segments"})]})]})]}),d.jsxs("div",{className:"mt-6 bg-muted p-4 rounded-lg border",children:[d.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI CRM features require a FineGuard Premium license.",d.jsx("a",{href:"/pricing",className:"text-cyan-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})]}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsx(je,{className:"flex items-center gap-2",children:"📧 Marketing Admin Module"}),d.jsx(kn,{children:"Automated marketing campaigns and client communications"})]}),d.jsxs(we,{children:[d.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Email Campaigns"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create and send automated email campaigns to clients based on compliance deadlines and risk levels."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Campaign"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"AI Copywriting"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate professional email content automatically using AI, tailored to each client's situation."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Enable AI Writer"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"SMS & WhatsApp"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send urgent compliance alerts via SMS and WhatsApp for critical deadlines."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Configure Messaging"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Drip Sequences"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set up automated email sequences for onboarding, reminders, and follow-ups."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Sequence"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Analytics Dashboard"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track email open rates, click-through rates, and campaign performance."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"View Analytics"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{className:"text-lg",children:"Template Library"})}),d.jsxs(we,{children:[d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Access pre-built email templates for common compliance scenarios."}),d.jsx(Se,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Browse Templates"})]})]})]}),d.jsxs("div",{className:"mt-6 bg-muted p-4 rounded-lg border",children:[d.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Marketing features require a FineGuard Premium license.",d.jsx("a",{href:"/pricing",className:"text-purple-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})]})]})},Ec="2024-10-11",Ng="https://api.company-information.service.gov.uk";function FP(){const[r,e]=me.useState(()=>sessionStorage.getItem("ch_api_key")||""),[t,s]=me.useState(!1),[a,l]=me.useState("Idle"),[u,m]=me.useState([]),[g,y]=me.useState({current:0,total:0}),v=me.useRef(!1),[x,T]=me.useState([]),[I,L]=me.useState(!1),[B,z]=me.useState(null),re=R=>{m(O=>[`[${new Date().toLocaleTimeString()}] ${R}`,...O.slice(0,199)])},$=R=>{e(R),sessionStorage.setItem("ch_api_key",R)},W=async(R,O=0)=>{const j=await fetch(`${Ng}/search/companies?incorporated_from=${R}&incorporated_to=${R}&start_index=${O}`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});if(!j.ok)throw new Error(`API error: ${j.status} ${j.statusText}`);return await j.json()},le=async R=>{const O=await fetch(`${Ng}/company/${R}`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});if(!O.ok)throw new Error(`Company profile error: ${O.status}`);return await O.json()},ce=async R=>{try{const O=await fetch(`${Ng}/company/${R}/registered-office-address`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});return O.ok?await O.json():null}catch{return null}},oe=async R=>{var O,j;try{const[M,N]=await Promise.all([le(R.company_number),ce(R.company_number)]),We=N?[N.address_line_1,N.address_line_2,N.locality,N.region,N.postal_code].filter(Boolean).join(", "):"Address not available";return{company_name:R.title,company_number:R.company_number,company_status:R.company_status,company_type:M==null?void 0:M.type,incorporation_date:R.date_of_creation,registered_address:We,accounts_due_date:((O=M==null?void 0:M.accounts)==null?void 0:O.next_due)||"Not available",cs_due_date:((j=M==null?void 0:M.confirmation_statement)==null?void 0:j.next_due)||"Not available",sic_codes:(M==null?void 0:M.sic_codes)||[],jurisdiction:(M==null?void 0:M.jurisdiction)||"england-wales",last_updated:new Date().toISOString()}}catch(M){return re(`Error processing company ${R.company_number}: ${M.message}`),null}},C=async()=>{if(!r){re("Companies House API Key is required to start.");return}s(!0),v.current=!1,m([]),y({current:0,total:0}),T([]);try{re(`Starting real data collection for companies incorporated on: ${Ec}`),l("Searching Companies House...");let R=0;const O=100;let j=0,M=0;const N=[];if(j=(await W(Ec,0)).total_results,y({current:0,total:j}),re(`Found ${j} companies incorporated on ${Ec}`),j===0){re("No companies found for the specified date."),s(!1),l("Idle");return}for(;R<j&&!v.current;){l(`Fetching companies ${R+1}-${Math.min(R+O,j)}...`);const V=await W(Ec,R);N.push(...V.items),R+=O,await new Promise(ie=>setTimeout(ie,200))}if(v.current){re("Agent paused by user."),l("Paused");return}l("Enriching company data...");const Ue=[];for(const V of N){if(v.current){re("Agent paused by user."),l("Paused");return}try{const ie=await oe(V);ie&&(Ue.push(ie),T([...Ue])),M++,y({current:M,total:j}),M%10===0&&re(`Processed ${M}/${j} companies`),await new Promise(te=>setTimeout(te,100))}catch(ie){re(`Failed to process company ${V.company_number}: ${ie.message}`);continue}}re(`Successfully processed ${M} real companies from Companies House`),l("Finished")}catch(R){re(`Agent failed: ${R.message}`),l("Error")}finally{s(!1)}},A=()=>{v.current=!0};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx(qh,{className:"w-10 h-10 text-blue-600"}),d.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"Live Companies House Data"})]}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fetch and analyze real-time company data directly from Companies House API"})]}),d.jsxs(be,{className:"mb-8",children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(Zh,{className:"w-6 h-6 text-blue-600"}),"Real Companies House Data Collector"]}),d.jsxs(kn,{children:["This agent will fetch real company data from the Companies House API for companies incorporated on ",Ec,"."]})]}),d.jsxs(we,{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2 mb-2",children:[d.jsx(R2,{className:"w-4 h-4"}),"Companies House API Key"]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"password",value:r,onChange:R=>$(R.target.value),placeholder:"Enter your Companies House API key",className:"w-full p-3 border rounded-lg bg-background pr-10"}),r.length>0&&d.jsx(r2,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),d.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Get your API key from: ",d.jsx("a",{href:"https://developer.company-information.service.gov.uk/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Companies House Developer Portal"})]})]}),d.jsx("div",{className:"flex items-center gap-4",children:t?d.jsxs(Se,{onClick:A,className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",children:[d.jsx(l2,{className:"w-5 h-5 mr-2"})," Pause Collection"]}):d.jsxs(Se,{onClick:C,disabled:!r,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",children:[d.jsx(u2,{className:"w-5 h-5 mr-2"})," Start Live Data Collection"]})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold mb-2",children:[d.jsxs("span",{children:["Status: ",d.jsx(en,{variant:"outline",children:a})]}),d.jsxs("span",{className:"text-gray-500",children:[g.current," / ",g.total]})]}),d.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:d.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-3 rounded-full transition-all duration-500",style:{width:g.total>0?`${g.current/g.total*100}%`:"0%"}})})]}),d.jsx("div",{className:"bg-gray-900 text-green-400 font-mono text-xs rounded-lg p-4 h-48 overflow-y-auto",children:u.length>0?u.map((R,O)=>d.jsx("p",{className:"whitespace-pre-wrap",children:R},O)):d.jsx("p",{className:"text-gray-500",children:"Agent log will appear here..."})})]})]}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(wx,{className:"w-6 h-6 text-blue-600"}),"Live Company Database"]}),d.jsx(kn,{children:"Real-time company data from Companies House"})]}),d.jsx(we,{children:I?d.jsxs("div",{className:"text-center p-8",children:[d.jsx(C2,{className:"w-8 h-8 animate-spin mx-auto text-blue-500"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Loading company data..."})]}):B?d.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-center",children:B}):x.length===0?d.jsxs("div",{className:"text-center text-gray-500 p-8",children:[d.jsx(Zh,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),d.jsx("p",{children:"No data yet. Start the agent to collect real company data."})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-xs uppercase",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 text-left",children:"Company Name & Number"}),d.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),d.jsx("th",{className:"px-4 py-3 text-left",children:"Registered Address"}),d.jsx("th",{className:"px-4 py-3 text-left",children:"Accounts Due"}),d.jsx("th",{className:"px-4 py-3 text-left",children:"CS Due"})]})}),d.jsx("tbody",{children:x.map((R,O)=>d.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[d.jsxs("td",{className:"px-4 py-3",children:[d.jsx("div",{className:"font-medium",children:R.company_name}),d.jsx("div",{className:"font-mono text-xs text-gray-500",children:R.company_number})]}),d.jsx("td",{className:"px-4 py-3",children:d.jsx(en,{variant:R.company_status==="active"?"default":R.company_status==="dissolved"?"destructive":"secondary",children:R.company_status})}),d.jsx("td",{className:"px-4 py-3 text-xs max-w-xs truncate",title:R.registered_address,children:R.registered_address}),d.jsx("td",{className:"px-4 py-3 font-mono text-red-600 dark:text-red-400 font-bold text-xs",children:R.accounts_due_date}),d.jsx("td",{className:"px-4 py-3 font-mono text-blue-600 dark:text-blue-400 font-bold text-xs",children:R.cs_due_date})]},O))})]})})})]})]})})}const GP=({isOpen:r,onClose:e,onAuthSuccess:t})=>{const[s,a]=me.useState(!0),[l,u]=me.useState({email:"",password:"",name:"",confirmPassword:""}),[m,g]=me.useState(!1),[y,v]=me.useState(""),[x,T]=me.useState("");if(!r)return null;const I=async B=>{B.preventDefault(),v(""),T(""),g(!0);try{if(!s){if(l.password!==l.confirmPassword)throw new Error("Passwords do not match");if(l.password.length<6)throw new Error("Password must be at least 6 characters")}if(await new Promise(z=>setTimeout(z,1e3)),s){const z={email:l.email,name:l.email.split("@")[0],subscription:"free"};localStorage.setItem("fineguard_user",JSON.stringify(z)),T("Login successful!"),setTimeout(()=>{t(z),e()},1e3)}else{const z={email:l.email,name:l.name,subscription:"free"};localStorage.setItem("fineguard_user",JSON.stringify(z)),T("Account created successfully!"),setTimeout(()=>{t(z),e()},1e3)}}catch(z){v(z.message)}finally{g(!1)}},L=B=>{u({...l,[B.target.name]:B.target.value})};return d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-background border-2 border-cyan-400/30 rounded-3xl max-w-md w-full p-8 relative shadow-2xl",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-muted rounded-full transition-colors",children:d.jsx(Ex,{className:"h-5 w-5"})}),d.jsxs("div",{className:"text-center mb-6",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-2xl",children:"🛡️"})}),d.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"})]}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:s?"Welcome Back":"Create Account"}),d.jsx("p",{className:"text-muted-foreground text-sm",children:s?"Sign in to access your compliance dashboard":"Start protecting your business today"})]}),y&&d.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-500 text-sm",children:y}),x&&d.jsxs("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-green-500 text-sm flex items-center gap-2",children:[d.jsx(_t,{className:"h-4 w-4"}),x]}),d.jsxs("form",{onSubmit:I,className:"space-y-4",children:[!s&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx(bp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),d.jsx("input",{type:"text",name:"name",value:l.name,onChange:L,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"John Doe",required:!s})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx(D2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),d.jsx("input",{type:"email",name:"email",value:l.email,onChange:L,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"you@example.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(J0,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),d.jsx("input",{type:"password",name:"password",value:l.password,onChange:L,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"••••••••",required:!0})]})]}),!s&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(J0,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),d.jsx("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:L,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"••••••••",required:!s})]})]}),d.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-lg font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Processing...":s?"Sign In":"Create Account"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsx("button",{onClick:()=>{a(!s),v(""),T("")},className:"text-sm text-cyan-500 hover:underline",children:s?"Don't have an account? Sign up":"Already have an account? Sign in"})}),s&&d.jsx("div",{className:"mt-4 text-center",children:d.jsx("button",{className:"text-sm text-muted-foreground hover:text-cyan-500 transition-colors",children:"Forgot password?"})})]})})},KP=({user:r,onLogout:e,onUpgrade:t})=>{const a={free:{name:"Free",color:"text-gray-500",icon:"🆓"},starter:{name:"Starter",color:"text-blue-500",icon:"🌟",price:"£1"},pro:{name:"Pro",color:"text-purple-500",icon:"👑",price:"£15"},ultimate:{name:"Ultimate",color:"text-amber-500",icon:"💎",price:"£99"}}[r.subscription||"free"];return d.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsx("div",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 rounded-3xl p-8 mb-8 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",r.name,"!"]}),d.jsx("p",{className:"text-white/80",children:"Manage your FineGuard subscription and settings"})]}),d.jsx("div",{className:"text-6xl",children:a.icon})]})}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2 space-y-6",children:[d.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(W0,{className:"h-5 w-5 text-cyan-500"}),"Current Subscription"]}),d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:`text-2xl font-bold ${a.color} mb-1`,children:[a.name," Plan"]}),a.price&&d.jsxs("div",{className:"text-muted-foreground",children:[a.price,"/month"]})]}),r.subscription==="free"&&d.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-full font-semibold hover:shadow-lg hover:scale-105 transition-all",children:"Upgrade Now"})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Your Features:"}),r.subscription==="free"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Up to 1 company"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Basic compliance tracking"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.jsx(bx,{className:"h-4 w-4"}),d.jsx("span",{children:"AI features not included"})]})]}):r.subscription==="starter"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Up to 1 company"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Email alerts"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"AI compliance checklists"})]})]}):r.subscription==="pro"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Up to 5 companies"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"AI-powered insights"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Priority support"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Risk scoring"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Unlimited companies"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"Dedicated account manager"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"White-label option"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(_t,{className:"h-4 w-4 text-green-500"}),d.jsx("span",{children:"API access"})]})]})]})]}),d.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(bp,{className:"h-5 w-5 text-cyan-500"}),"Account Details"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Name"}),d.jsx("div",{className:"font-medium",children:r.name})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Email"}),d.jsx("div",{className:"font-medium",children:r.email})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Member Since"}),d.jsx("div",{className:"font-medium",children:new Date().toLocaleDateString()})]})]})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[d.jsx("h2",{className:"text-lg font-bold mb-4",children:"Quick Actions"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("button",{className:"w-full p-3 text-left hover:bg-muted rounded-lg transition-colors flex items-center gap-3",children:[d.jsx(y2,{className:"h-5 w-5 text-cyan-500"}),d.jsx("span",{children:"Billing & Payments"})]}),d.jsxs("button",{className:"w-full p-3 text-left hover:bg-muted rounded-lg transition-colors flex items-center gap-3",children:[d.jsx(Og,{className:"h-5 w-5 text-cyan-500"}),d.jsx("span",{children:"Account Settings"})]}),r.subscription!=="ultimate"&&d.jsxs("button",{onClick:t,className:"w-full p-3 text-left hover:bg-muted rounded-lg transition-colors flex items-center gap-3 border border-cyan-400/30",children:[d.jsx(W0,{className:"h-5 w-5 text-amber-500"}),d.jsx("span",{className:"text-cyan-500 font-semibold",children:"Upgrade Plan"})]}),d.jsxs("button",{onClick:e,className:"w-full p-3 text-left hover:bg-red-500/10 rounded-lg transition-colors flex items-center gap-3 text-red-500",children:[d.jsx(j2,{className:"h-5 w-5"}),d.jsx("span",{children:"Sign Out"})]})]})]}),d.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[d.jsx("h2",{className:"text-lg font-bold mb-4",children:"Need Help?"}),d.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Our support team is here to help you with any questions."}),d.jsx("button",{className:"w-full py-2 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all",children:"Contact Support"})]})]})]})]})})},QP=()=>{const[r,e]=me.useState([]),[t,s]=me.useState([]),[a,l]=me.useState([]),[u,m]=me.useState("dashboard"),[g,y]=me.useState([]);me.useEffect(()=>{v(),x(),I()},[]);const v=()=>{s([{id:"companies-house",name:"Companies House API",status:"connected",icon:"🏢",lastSync:new Date().toISOString(),recordsSync:1247},{id:"hmrc",name:"HMRC Gateway",status:"connected",icon:"💷",lastSync:new Date().toISOString(),recordsSync:892},{id:"xero",name:"Xero Accounting",status:"connected",icon:"📊",lastSync:new Date().toISOString(),recordsSync:456},{id:"quickbooks",name:"QuickBooks",status:"ready",icon:"📗",lastSync:null,recordsSync:0},{id:"sendgrid",name:"SendGrid Email",status:"connected",icon:"📧",lastSync:new Date().toISOString(),recordsSync:3421},{id:"twilio",name:"Twilio SMS",status:"connected",icon:"📱",lastSync:new Date().toISOString(),recordsSync:234},{id:"openai",name:"OpenAI GPT-4",status:"connected",icon:"🤖",lastSync:new Date().toISOString(),recordsSync:5678},{id:"stripe",name:"Stripe Payments",status:"connected",icon:"💳",lastSync:new Date().toISOString(),recordsSync:189}])},x=()=>{e([{id:"lead-scorer",name:"AI Lead Scoring Agent",status:"running",type:"ai",icon:"🎯",tasksCompleted:342,accuracy:94.5,lastAction:"Scored 15 new leads",nextRun:"2 minutes"},{id:"churn-predictor",name:"Churn Prediction Agent",status:"running",type:"ai",icon:"⚠️",tasksCompleted:128,accuracy:91.2,lastAction:"Identified 3 at-risk clients",nextRun:"15 minutes"},{id:"compliance-monitor",name:"Compliance Monitoring Agent",status:"running",type:"automation",icon:"🛡️",tasksCompleted:1247,accuracy:99.8,lastAction:"Checked 45 deadlines",nextRun:"1 hour"},{id:"email-automation",name:"Email Campaign Agent",status:"running",type:"automation",icon:"📧",tasksCompleted:892,accuracy:87.3,lastAction:"Sent 23 reminder emails",nextRun:"30 minutes"},{id:"data-enrichment",name:"Data Enrichment Agent",status:"running",type:"automation",icon:"🔍",tasksCompleted:567,accuracy:96.1,lastAction:"Enriched 12 company profiles",nextRun:"5 minutes"},{id:"nba-engine",name:"Next Best Action Agent",status:"running",type:"ai",icon:"🎲",tasksCompleted:234,accuracy:88.9,lastAction:"Generated 8 recommendations",nextRun:"10 minutes"}]);const W=setInterval(()=>{T()},3e3);return()=>clearInterval(W)},T=()=>{const $=[{agent:"AI Lead Scoring Agent",action:"Scored lead: Tech Startup Ltd - Score: 85/100",type:"success"},{agent:"Churn Prediction Agent",action:"Alert: Global Solutions Ltd showing churn signals",type:"warning"},{agent:"Compliance Monitoring Agent",action:"Deadline approaching: Annual Accounts for 3 companies",type:"info"},{agent:"Email Campaign Agent",action:"Sent reminder email to Startup Ventures Ltd",type:"success"},{agent:"Data Enrichment Agent",action:"Updated company profile: New director added",type:"info"},{agent:"Next Best Action Agent",action:"Recommendation: Schedule call with high-value client",type:"success"}],W=$[Math.floor(Math.random()*$.length)];y(le=>[{...W,timestamp:new Date().toLocaleTimeString(),id:Date.now()},...le].slice(0,50))},I=()=>{l([{id:1,name:"Deadline Alert Workflow",trigger:"When deadline is 7 days away",actions:["Send email","Create task","Update CRM"],status:"active",runs:234},{id:2,name:"New Client Onboarding",trigger:"When new client is added",actions:["Send welcome email","Create checklist","Assign account manager"],status:"active",runs:45},{id:3,name:"High-Risk Client Alert",trigger:"When compliance score drops below 60%",actions:["Alert account manager","Generate mitigation plan","Schedule review"],status:"active",runs:12},{id:4,name:"Monthly Reporting",trigger:"First day of each month",actions:["Generate reports","Email to clients","Update dashboard"],status:"active",runs:6},{id:5,name:"Lead Nurture Sequence",trigger:"When lead score exceeds 70",actions:["Add to nurture campaign","Assign to sales","Send personalized email"],status:"active",runs:89}])},L=$=>{e(W=>W.map(le=>le.id===$?{...le,status:le.status==="running"?"paused":"running"}:le))},B=()=>d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[d.jsx(be,{children:d.jsx(we,{className:"pt-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Agents"}),d.jsx("p",{className:"text-3xl font-bold",children:r.filter($=>$.status==="running").length})]}),d.jsx(XA,{className:"h-10 w-10 text-cyan-500"})]})})}),d.jsx(be,{children:d.jsx(we,{className:"pt-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Tasks Today"}),d.jsx("p",{className:"text-3xl font-bold",children:"3,492"})]}),d.jsx(_t,{className:"h-10 w-10 text-green-500"})]})})}),d.jsx(be,{children:d.jsx(we,{className:"pt-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Accuracy"}),d.jsx("p",{className:"text-3xl font-bold",children:"93.2%"})]}),d.jsx(eR,{className:"h-10 w-10 text-purple-500"})]})})}),d.jsx(be,{children:d.jsx(we,{className:"pt-6",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Connected Services"}),d.jsx("p",{className:"text-3xl font-bold",children:t.filter($=>$.status==="connected").length})]}),d.jsx(ng,{className:"h-10 w-10 text-blue-500"})]})})})]}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(Ch,{className:"h-5 w-5 text-cyan-500"}),"Active AI Agents"]}),d.jsx(kn,{children:"Real-time monitoring of autonomous agents"})]}),d.jsx(we,{children:d.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map($=>d.jsx(be,{className:"border-cyan-400/30",children:d.jsxs(we,{className:"pt-6",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-3xl",children:$.icon}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold",children:$.name}),d.jsx(en,{variant:$.status==="running"?"default":"secondary",className:"mt-1",children:$.status==="running"?d.jsxs(d.Fragment,{children:[d.jsx(Ch,{className:"h-3 w-3 mr-1 animate-pulse"})," Running"]}):d.jsxs(d.Fragment,{children:[d.jsx(rg,{className:"h-3 w-3 mr-1"})," Paused"]})})]})]}),d.jsx(Se,{size:"sm",variant:"outline",onClick:()=>L($.id),children:$.status==="running"?d.jsx(rg,{className:"h-4 w-4"}):d.jsx($2,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Tasks Completed:"}),d.jsx("span",{className:"font-semibold",children:$.tasksCompleted})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Accuracy:"}),d.jsxs("span",{className:"font-semibold text-green-500",children:[$.accuracy,"%"]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Last Action:"}),d.jsx("span",{className:"font-semibold text-xs",children:$.lastAction})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Next Run:"}),d.jsx("span",{className:"font-semibold text-cyan-500",children:$.nextRun})]})]})]})},$.id))})})]}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(jg,{className:"h-5 w-5 text-cyan-500"}),"Live Agent Activity"]}),d.jsx(kn,{children:"Real-time log of agent actions"})]}),d.jsx(we,{children:d.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:g.map($=>d.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[d.jsx("div",{className:`mt-1 ${$.type==="success"?"text-green-500":$.type==="warning"?"text-amber-500":"text-blue-500"}`,children:$.type==="success"?d.jsx(_t,{className:"h-4 w-4"}):$.type==="warning"?d.jsx(bx,{className:"h-4 w-4"}):d.jsx(Q0,{className:"h-4 w-4"})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"font-semibold text-sm",children:$.agent}),d.jsx("span",{className:"text-xs text-muted-foreground",children:$.timestamp})]}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:$.action})]})]},$.id))})})]})]}),z=()=>d.jsx("div",{className:"space-y-6",children:d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(ng,{className:"h-5 w-5 text-cyan-500"}),"Connected Services"]}),d.jsx(kn,{children:"Manage integrations with external platforms"})]}),d.jsx(we,{children:d.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.map($=>d.jsx(be,{className:"border-cyan-400/30",children:d.jsxs(we,{className:"pt-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"text-3xl",children:$.icon}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold",children:$.name}),d.jsx(en,{variant:$.status==="connected"?"default":"secondary",className:"mt-1",children:$.status==="connected"?d.jsxs(d.Fragment,{children:[d.jsx(_t,{className:"h-3 w-3 mr-1"})," Connected"]}):d.jsxs(d.Fragment,{children:[d.jsx(Q0,{className:"h-3 w-3 mr-1"})," Ready"]})})]})]}),d.jsx(Se,{size:"sm",variant:"outline",children:d.jsx(Og,{className:"h-4 w-4"})})]}),$.status==="connected"&&d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Last Sync:"}),d.jsx("span",{className:"font-semibold",children:new Date($.lastSync).toLocaleTimeString()})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-muted-foreground",children:"Records Synced:"}),d.jsx("span",{className:"font-semibold text-green-500",children:$.recordsSync.toLocaleString()})]})]})]})},$.id))})})]})}),re=()=>d.jsx("div",{className:"space-y-6",children:d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(kh,{className:"h-5 w-5 text-cyan-500"}),"AI Automation Workflows"]}),d.jsx(kn,{children:"Automated workflows powered by AI"})]}),d.jsxs(we,{children:[d.jsx("div",{className:"space-y-4",children:a.map($=>d.jsx(be,{className:"border-cyan-400/30",children:d.jsx(we,{className:"pt-6",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h4",{className:"font-semibold",children:$.name}),d.jsxs(en,{variant:"default",className:"bg-green-500",children:[d.jsx(Ch,{className:"h-3 w-3 mr-1"})," Active"]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(kh,{className:"h-4 w-4 text-amber-500"}),d.jsx("span",{className:"text-muted-foreground",children:"Trigger:"}),d.jsx("span",{className:"font-medium",children:$.trigger})]}),d.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[d.jsx(QA,{className:"h-4 w-4 text-cyan-500 mt-0.5"}),d.jsxs("div",{children:[d.jsx("span",{className:"text-muted-foreground",children:"Actions:"}),d.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:$.actions.map((W,le)=>d.jsx(en,{variant:"outline",className:"text-xs",children:W},le))})]})]}),d.jsx("div",{className:"flex items-center gap-4 text-sm",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(n2,{className:"h-4 w-4 text-purple-500"}),d.jsx("span",{className:"text-muted-foreground",children:"Runs:"}),d.jsx("span",{className:"font-semibold",children:$.runs})]})})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Se,{size:"sm",variant:"outline",children:d.jsx(Og,{className:"h-4 w-4"})}),d.jsx(Se,{size:"sm",variant:"outline",children:d.jsx(rg,{className:"h-4 w-4"})})]})]})})},$.id))}),d.jsxs(Se,{className:"w-full mt-4 bg-gradient-to-r from-cyan-400 to-blue-500",children:[d.jsx(kh,{className:"h-4 w-4 mr-2"}),"Create New Automation"]})]})]})});return d.jsx("div",{className:"min-h-screen bg-background py-8 px-4",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"Advanced CRM & AI Automation"}),d.jsx("p",{className:"text-muted-foreground",children:"Autonomous agents and intelligent workflows for compliance management"})]}),d.jsx("div",{className:"flex gap-2 mb-6 border-b",children:[{id:"dashboard",label:"Dashboard",icon:Ch},{id:"services",label:"Services",icon:ng},{id:"automations",label:"Automations",icon:kh}].map($=>d.jsxs("button",{onClick:()=>m($.id),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${u===$.id?"border-cyan-500 text-cyan-500":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[d.jsx($.icon,{className:"h-4 w-4"}),$.label]},$.id))}),u==="dashboard"&&d.jsx(B,{}),u==="services"&&d.jsx(z,{}),u==="automations"&&d.jsx(re,{})]})})},YP={companies:[{id:1,name:"Tech Innovations Ltd",companyNumber:"12345678",address:"123 Business Park, London, SW1A 1AA",riskLevel:"high",complianceScore:65,overdueCount:2,obligationCount:8},{id:2,name:"Global Solutions Ltd",companyNumber:"87654321",address:"456 Enterprise Road, Manchester, M1 1AB",riskLevel:"medium",complianceScore:78,overdueCount:0,obligationCount:6},{id:3,name:"Startup Ventures Ltd",companyNumber:"11223344",address:"789 Innovation Street, Bristol, BS1 1CD",riskLevel:"critical",complianceScore:45,overdueCount:3,obligationCount:5}],obligations:[{id:1,companyId:1,companyName:"Tech Innovations Ltd",title:"Annual Accounts Filing",description:"Submit annual financial statements to Companies House",dueDate:"2024-03-15",status:"overdue",penalty:1500,daysOverdue:45,phoneNumber:"+447912345678"},{id:2,companyId:1,companyName:"Tech Innovations Ltd",title:"Confirmation Statement",description:"Annual confirmation of company details",dueDate:"2024-04-20",status:"pending",penalty:0,daysOverdue:0,phoneNumber:"+447912345678"},{id:3,companyId:2,companyName:"Global Solutions Ltd",title:"VAT Return",description:"Quarterly VAT submission to HMRC",dueDate:"2024-05-10",status:"pending",penalty:0,daysOverdue:0,phoneNumber:"+447987654321"},{id:4,companyId:3,companyName:"Startup Ventures Ltd",title:"Corporation Tax",description:"Corporation tax payment and filing",dueDate:"2024-02-28",status:"overdue",penalty:2500,daysOverdue:62,phoneNumber:"+447445566778"},{id:5,companyId:3,companyName:"Startup Ventures Ltd",title:"Annual Accounts Filing",description:"Submit annual financial statements",dueDate:"2024-01-31",status:"overdue",penalty:1800,daysOverdue:90,phoneNumber:"+447445566778"}]};function WP(){const[r,e]=me.useState(!1),[t,s]=me.useState("home"),[a,l]=me.useState(!1),[u,m]=me.useState(YP),[g,y]=me.useState(null),[v,x]=me.useState(null),[T,I]=me.useState(!1),[L,B]=me.useState({title:"",content:"",loading:!1}),[z,re]=me.useState(!1),[$,W]=me.useState(null);me.useEffect(()=>{const D=localStorage.getItem("fineguard_user");D&&W(JSON.parse(D))},[]),me.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const le=D=>{const ae={day:"numeric",month:"short",year:"numeric"};return new Date(D).toLocaleDateString("en-GB",ae)},ce=D=>{const ae=new Date,ve=new Date(D)-ae;return Math.ceil(ve/(1e3*60*60*24))},oe=D=>{switch(D){case"low":return"bg-green-500";case"medium":return"bg-blue-500";case"high":return"bg-orange-500";case"critical":return"bg-red-600";default:return"bg-gray-500"}},C=D=>{switch(D){case"completed":return"bg-green-500";case"overdue":return"bg-red-600";case"pending":return"bg-blue-500";default:return"bg-gray-500"}},A={overdueCount:u.obligations.filter(D=>D.status==="overdue").length,totalCompanies:u.companies.length,avgScore:(u.companies.reduce((D,ae)=>D+ae.complianceScore,0)/u.companies.length).toFixed(1),penaltyRisk:u.obligations.filter(D=>D.status==="overdue").reduce((D,ae)=>D+ae.penalty,0)},R=D=>{m(ae=>({...ae,obligations:ae.obligations.map(Ee=>Ee.id===D?{...Ee,status:"completed",penalty:0}:Ee),companies:ae.companies.map(Ee=>{const ve=ae.obligations.find($e=>$e.id===D);return Ee.id===(ve==null?void 0:ve.companyId)?{...Ee,complianceScore:Math.min(100,Ee.complianceScore+5)}:Ee})})),x(null)},O=D=>{I(!0),B({title:`AI Mitigation Plan for ${D.name}`,content:"",loading:!0}),setTimeout(()=>{B({title:`AI Mitigation Plan for ${D.name}`,loading:!1,content:`
**Current Risk Level:** ${D.riskLevel.toUpperCase()}
**Generated:** ${new Date().toLocaleDateString()}

### Immediate Actions Required:
1. **Review Overdue Filings** - Address all overdue obligations within 7 days
2. **Engage Compliance Officer** - Assign dedicated resource for monitoring
3. **Implement Early Warning System** - Set up 30-day advance reminders

### Strategic Recommendations:
- Conduct comprehensive compliance audit
- Implement automated tracking system
- Schedule quarterly compliance reviews
- Establish escalation procedures for high-risk items

### Priority Timeline:
- **Week 1:** Clear all critical overdue items
- **Month 1:** Implement monitoring system
- **Quarter 1:** Achieve 85%+ compliance score
        `})},2e3)},j=D=>{I(!0),B({title:`AI Compliance Checklist: ${D.title}`,content:"",loading:!0}),setTimeout(()=>{B({title:`AI Compliance Checklist: ${D.title}`,loading:!1,content:`
### Pre-Submission Requirements:
- Verify company details are up to date
- Gather all required financial documents
- Review previous year's filing for consistency
- Confirm director approvals obtained

### Submission Steps:
1. **Document Preparation** - Ensure all statements are signed
2. **Online Portal Login** - Use Companies House WebFiling service
3. **Data Entry** - Input financial figures accurately
4. **Document Upload** - Attach signed PDF copies
5. **Final Review** - Verify all information before submission
6. **Confirmation** - Save submission reference number

### Post-Submission Actions:
- File confirmation email in company records
- Update internal compliance tracking system
- Schedule reminder for next filing period
- Notify relevant stakeholders of completion
        `})},1500)},M=[...u.obligations].sort((D,ae)=>D.status==="overdue"&&ae.status!=="overdue"?-1:ae.status==="overdue"&&D.status!=="overdue"?1:new Date(D.dueDate)-new Date(ae.dueDate)),N=[{id:"home",label:"Home",icon:T2},{id:"about",label:"About",icon:X0},{id:"how-it-works",label:"How It Works",icon:Y0},{id:"features",label:"Features",icon:eb},{id:"pricing",label:"Pricing",icon:w2},{id:"testimonials",label:"Testimonials",icon:sg},{id:"contact",label:"Contact",icon:ig},{id:"dashboard",label:"Dashboard",icon:xc},{id:"crm",label:"CRM",icon:aR},{id:"admin",label:"Admin",icon:Y0},{id:"live-data",label:"Live Data",icon:qh}],We=()=>{switch(t){case"home":return d.jsx(Ue,{});case"about":return d.jsx(V,{});case"how-it-works":return d.jsx(ie,{});case"features":return d.jsx(te,{});case"pricing":return d.jsx(ze,{});case"testimonials":return d.jsx(P,{});case"contact":return d.jsx(se,{});case"dashboard":return d.jsx(he,{});case"admin":return d.jsx(HP,{});case"live-data":return d.jsx(FP,{});case"crm":return d.jsx(QP,{});case"member":return $?d.jsx(KP,{user:$,onLogout:()=>{localStorage.removeItem("fineguard_user"),W(null),s("home")},onUpgrade:()=>s("pricing")}):d.jsx(Ue,{});default:return d.jsx(Ue,{})}},Ue=()=>d.jsxs("div",{className:"space-y-16",children:[d.jsxs("section",{className:"relative min-h-[600px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:nb,alt:"FineGuard Workshop",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/40 to-purple-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4 max-w-4xl",children:[d.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 animate-fade-in",children:"Welcome to FineGuard"}),d.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Where paperwork has personality and compliance is effortless"}),d.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[d.jsx(Se,{size:"lg",className:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 rounded-full px-10 py-6 text-lg font-semibold hover:shadow-2xl hover:shadow-cyan-400/40 transition-all hover:scale-105",onClick:()=>s("dashboard"),children:"Get Started"}),d.jsx(Se,{size:"lg",className:"border-2 border-cyan-400/50 bg-white/10 backdrop-blur-md text-white hover:bg-white/20 rounded-full px-10 py-6 text-lg font-semibold transition-all hover:scale-105",onClick:()=>s("how-it-works"),children:"Learn More"})]})]})]}),d.jsxs("section",{className:"container mx-auto px-4",children:[d.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Why Choose FineGuard?"}),d.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[d.jsxs(be,{className:"hover:shadow-xl transition-shadow",children:[d.jsxs(ke,{children:[d.jsx(xc,{className:"h-12 w-12 text-blue-600 mb-4"}),d.jsx(je,{children:"AI-Powered Protection"})]}),d.jsx(we,{children:d.jsx("p",{className:"text-muted-foreground",children:"Ultra, your AI guardian, monitors deadlines 24/7 so you never miss a filing."})})]}),d.jsxs(be,{className:"hover:shadow-xl transition-shadow",children:[d.jsxs(ke,{children:[d.jsx(eg,{className:"h-12 w-12 text-orange-600 mb-4"}),d.jsx(je,{children:"Smart Reminders"})]}),d.jsx(we,{children:d.jsx("p",{className:"text-muted-foreground",children:"Get timely notifications before deadlines with actionable compliance checklists."})})]}),d.jsxs(be,{className:"hover:shadow-xl transition-shadow",children:[d.jsxs(ke,{children:[d.jsx(ag,{className:"h-12 w-12 text-green-600 mb-4"}),d.jsx(je,{children:"Peace of Mind"})]}),d.jsx(we,{children:d.jsx("p",{className:"text-muted-foreground",children:"Focus on growing your business while we handle compliance automatically."})})]})]})]}),d.jsx("section",{className:"container mx-auto px-4",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("h2",{className:"text-4xl font-bold text-center mb-4",children:"See FineGuard in Action"}),d.jsx("p",{className:"text-center text-muted-foreground mb-8 text-lg",children:"Watch how Ultra protects your business from compliance penalties"}),d.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl border-4 border-cyan-400/30",children:d.jsxs("video",{controls:!0,className:"w-full",poster:nb,children:[d.jsx("source",{src:"/demo-video.mov",type:"video/quicktime"}),d.jsx("source",{src:"/demo-video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})}),d.jsx("section",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16 rounded-2xl mx-4",children:d.jsxs("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to protect your business?"}),d.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of UK businesses using FineGuard"}),d.jsx(Se,{size:"lg",className:"bg-white/90 backdrop-blur-md text-blue-900 hover:bg-white rounded-full px-10 py-6 text-lg font-semibold hover:shadow-2xl hover:scale-105 transition-all",onClick:()=>s("pricing"),children:"View Pricing Plans"})]})})]}),V=()=>d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:cR,alt:"Ultra Guardian",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-purple-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"The Story of Protection"}),d.jsx("p",{className:"text-xl opacity-90",children:"Giving peace of mind to UK founders"})]})]}),d.jsx("section",{className:"container mx-auto px-4 max-w-4xl",children:d.jsx(be,{children:d.jsxs(we,{className:"p-8 space-y-6",children:[d.jsx("h2",{className:"text-3xl font-bold",children:"Our Mission"}),d.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"FineGuard was born from a simple truth: small business owners shouldn't lose sleep over compliance deadlines. Every day, brilliant entrepreneurs face the burden of paperwork, filings, and regulations that distract from what they do best—building amazing businesses."}),d.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"That's where Ultra comes in. Our AI guardian watches over your compliance obligations 24/7, ensuring you never miss a deadline, never face unnecessary penalties, and always stay protected. From Companies House filings to HMRC submissions, we've got you covered."}),d.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-8",children:[d.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[d.jsx("h3",{className:"text-xl font-bold mb-2",children:"10,000+"}),d.jsx("p",{className:"text-muted-foreground",children:"Businesses Protected"})]}),d.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[d.jsx("h3",{className:"text-xl font-bold mb-2",children:"£2.5M+"}),d.jsx("p",{className:"text-muted-foreground",children:"Penalties Prevented"})]})]})]})})})]}),ie=()=>d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:uR,alt:"Engine Room",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-teal-900/30 to-blue-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Inside the System"}),d.jsx("p",{className:"text-xl opacity-90",children:"How FineGuard keeps you compliant"})]})]}),d.jsx("section",{className:"container mx-auto px-4 max-w-5xl",children:d.jsx("div",{className:"space-y-8",children:[{step:1,title:"Connect Your Business",description:"Simply add your company number and we'll sync with Companies House and HMRC to identify all your obligations."},{step:2,title:"Ultra Monitors Everything",description:"Our AI guardian tracks every deadline, regulation change, and filing requirement specific to your business."},{step:3,title:"Smart Reminders",description:"Get timely notifications via email, SMS, and dashboard alerts with AI-generated compliance checklists."},{step:4,title:"Stay Protected",description:"Never miss a deadline again. Focus on growth while we handle the compliance burden automatically."}].map(D=>d.jsx(be,{className:"hover:shadow-lg transition-shadow",children:d.jsxs(we,{className:"p-8 flex gap-6 items-start",children:[d.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center text-2xl font-bold",children:D.step}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-bold mb-2",children:D.title}),d.jsx("p",{className:"text-lg text-muted-foreground",children:D.description})]})]})},D.step))})})]}),te=()=>d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:hR,alt:"Features",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-indigo-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Never Miss a Deadline"}),d.jsx("p",{className:"text-xl opacity-90",children:"Powerful features for complete peace of mind"})]})]}),d.jsx("section",{className:"container mx-auto px-4",children:d.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:xc,title:"AI Guardian",desc:"Ultra monitors your obligations 24/7"},{icon:eg,title:"Smart Alerts",desc:"Multi-channel notifications (email, SMS, dashboard)"},{icon:qh,title:"Deadline Tracking",desc:"Never miss Companies House or HMRC filings"},{icon:Ih,title:"AI Checklists",desc:"Step-by-step compliance guidance"},{icon:ag,title:"Risk Scoring",desc:"Real-time compliance health monitoring"},{icon:_t,title:"Auto-Sync",desc:"Automatic updates from official sources"}].map((D,ae)=>d.jsxs(be,{className:"hover:shadow-xl transition-all hover:-translate-y-1",children:[d.jsxs(ke,{children:[d.jsx(D.icon,{className:"h-12 w-12 text-blue-600 mb-4"}),d.jsx(je,{children:D.title})]}),d.jsx(we,{children:d.jsx("p",{className:"text-muted-foreground",children:D.desc})})]},ae))})})]}),ze=()=>d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:dR,alt:"Pricing",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/30 to-blue-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Protection for Every Dream"}),d.jsx("p",{className:"text-xl opacity-90",children:"Transparent pricing, no hidden fees"})]})]}),d.jsx("section",{className:"container mx-auto px-4",children:d.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{name:"Starter",price:"£1",period:"/month",features:["1 company","Basic deadline tracking","Email notifications","Compliance dashboard","Monthly reports"]},{name:"Pro",price:"£15",period:"/month",popular:!0,features:["Up to 5 companies","AI-powered insights","Email alerts","Priority support","AI compliance checklists","Risk scoring"]},{name:"Ultimate",price:"£99",period:"/month",features:["Unlimited companies","Dedicated account manager","White-label option","API access","Custom integrations","24/7 phone support"]}].map(D=>d.jsxs(be,{className:`hover:shadow-2xl transition-all ${D.popular?"border-blue-600 border-2 scale-105":""}`,children:[D.popular&&d.jsx("div",{className:"bg-blue-600 text-white text-center py-2 rounded-t-lg font-semibold",children:"Most Popular"}),d.jsxs(ke,{className:"text-center",children:[d.jsx(je,{className:"text-2xl",children:D.name}),d.jsxs("div",{className:"mt-4",children:[d.jsx("span",{className:"text-5xl font-bold",children:D.price}),d.jsx("span",{className:"text-muted-foreground",children:D.period})]})]}),d.jsxs(we,{children:[d.jsx("ul",{className:"space-y-3",children:D.features.map((ae,Ee)=>d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx(_t,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),d.jsx("span",{children:ae})]},Ee))}),d.jsx(Se,{className:"w-full mt-6",variant:D.popular?"default":"outline",children:"Get Started"})]})]},D.name))})})]}),P=()=>d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:fR,alt:"Testimonials",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-900/30 to-blue-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Voices of Relief"}),d.jsx("p",{className:"text-xl opacity-90",children:"Trusted by UK businesses nationwide"})]})]}),d.jsx("section",{className:"container mx-auto px-4",children:d.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[{name:"Sarah Mitchell",role:"Bakery Owner, London",quote:"FineGuard saved me from a £1,500 penalty. Ultra reminded me about my accounts filing just in time!"},{name:"James Chen",role:"Tech Startup Founder",quote:"As a first-time founder, compliance was overwhelming. FineGuard made it effortless."},{name:"Emma Thompson",role:"Design Studio Director",quote:"The AI checklists are brilliant. I know exactly what to do for each filing."},{name:"David Patel",role:"Coffee Shop Chain Owner",quote:"Managing 3 companies was a nightmare. Now Ultra handles everything automatically."}].map((D,ae)=>d.jsx(be,{className:"hover:shadow-xl transition-shadow",children:d.jsxs(we,{className:"p-8",children:[d.jsx("div",{className:"flex items-center gap-2 mb-4 text-yellow-500",children:[...Array(5)].map((Ee,ve)=>d.jsx(eb,{className:"h-5 w-5 fill-current"},ve))}),d.jsxs("p",{className:"text-lg mb-4 italic",children:['"',D.quote,'"']}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:D.name}),d.jsx("p",{className:"text-sm text-muted-foreground",children:D.role})]})]})},ae))})})]}),se=()=>d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[d.jsx("img",{src:mR,alt:"Contact",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-indigo-900/30"}),d.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Reach Out Anytime"}),d.jsx("p",{className:"text-xl opacity-90",children:"We're here to help"})]})]}),d.jsx("section",{className:"container mx-auto px-4 max-w-4xl",children:d.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsx(je,{children:"Get in Touch"}),d.jsx(kn,{children:"Fill out the form and we'll respond within 24 hours"})]}),d.jsxs(we,{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),d.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",placeholder:"Your name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),d.jsx("input",{type:"email",className:"w-full p-2 border rounded-lg",placeholder:"your@email.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),d.jsx("textarea",{className:"w-full p-2 border rounded-lg",rows:4,placeholder:"How can we help?"})]}),d.jsx(Se,{className:"w-full",children:"Send Message"})]})]}),d.jsxs(be,{children:[d.jsx(ke,{children:d.jsx(je,{children:"Contact Information"})}),d.jsxs(we,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(ig,{className:"h-5 w-5 text-blue-600 mt-1"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:"Phone"}),d.jsx("p",{className:"text-muted-foreground",children:"+44 20 1234 5678"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(sg,{className:"h-5 w-5 text-blue-600 mt-1"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:"Email"}),d.jsx("p",{className:"text-muted-foreground",children:"hello@fineguard.co.uk"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx(tg,{className:"h-5 w-5 text-blue-600 mt-1"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:"Address"}),d.jsxs("p",{className:"text-muted-foreground",children:["123 Compliance Street",d.jsx("br",{}),"London, SW1A 1AA"]})]})]})]})]})]})})]}),he=()=>d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[d.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[d.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(je,{className:"text-sm font-medium",children:"Overdue Items"}),d.jsx(xx,{className:"h-4 w-4 text-red-600"})]}),d.jsxs(we,{children:[d.jsx("div",{className:"text-3xl font-bold text-red-600",children:A.overdueCount}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires immediate attention"})]})]}),d.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[d.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(je,{className:"text-sm font-medium",children:"Total Companies"}),d.jsx(tg,{className:"h-4 w-4 text-blue-600"})]}),d.jsxs(we,{children:[d.jsx("div",{className:"text-3xl font-bold",children:A.totalCompanies}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active monitoring"})]})]}),d.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[d.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(je,{className:"text-sm font-medium",children:"Avg Compliance"}),d.jsx(ag,{className:"h-4 w-4 text-green-600"})]}),d.jsxs(we,{children:[d.jsxs("div",{className:"text-3xl font-bold",children:[A.avgScore,"%"]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overall health score"})]})]}),d.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[d.jsxs(ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(je,{className:"text-sm font-medium",children:"Penalty Risk"}),d.jsx(eg,{className:"h-4 w-4 text-orange-600"})]}),d.jsxs(we,{children:[d.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["£",A.penaltyRisk.toLocaleString()]}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Potential exposure"})]})]})]}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(tg,{className:"h-5 w-5"}),"Companies"]}),d.jsx(kn,{children:"Manage your registered companies"})]}),d.jsx(we,{className:"space-y-3",children:u.companies.map(D=>d.jsxs("div",{onClick:()=>y(D),className:"p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer bg-card",children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsx("h3",{className:"font-semibold text-lg",children:D.name}),d.jsx(en,{className:`${oe(D.riskLevel)} text-white`,children:D.riskLevel.toUpperCase()})]}),d.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[d.jsxs("div",{children:["#",D.companyNumber]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{children:["Compliance: ",D.complianceScore,"%"]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("i",{className:"fas fa-tasks text-xs"}),D.obligationCount," obligations"]})]}),D.overdueCount>0&&d.jsxs(en,{variant:"destructive",className:"mt-2",children:[D.overdueCount," overdue"]})]})]},D.id))})]}),d.jsxs(be,{children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center gap-2",children:[d.jsx(qh,{className:"h-5 w-5"}),"Obligations"]}),d.jsx(kn,{children:"Track compliance deadlines"})]}),d.jsx(we,{className:"space-y-3",children:M.map(D=>{const ae=ce(D.dueDate);return d.jsxs("div",{onClick:()=>x(D),className:`p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer ${D.status==="overdue"?"border-red-500 bg-red-50 dark:bg-red-950/20":D.status==="completed"?"border-green-500 bg-green-50 dark:bg-green-950/20":"bg-card"}`,children:[d.jsxs("div",{className:"flex items-start justify-between mb-2",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-semibold",children:D.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:D.companyName})]}),d.jsx(en,{className:`${C(D.status)} text-white text-xs`,children:D.status==="overdue"?`${D.daysOverdue}d overdue`:D.status.toUpperCase()})]}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("i",{className:"fas fa-calendar-alt text-xs"}),le(D.dueDate),D.status==="pending"&&` (in ${ae} days)`]}),D.penalty>0&&D.status!=="completed"&&d.jsxs("span",{className:"font-semibold text-red-600",children:[d.jsx("i",{className:"fas fa-bell text-xs"})," £",D.penalty.toLocaleString()]})]})]},D.id)})})]})]})]});return d.jsxs("div",{className:"min-h-screen bg-background",children:[d.jsxs("header",{className:"sticky top-0 z-50 w-full",children:[d.jsx("div",{className:"mx-4 mt-4 rounded-full border border-cyan-400/30 bg-background/40 backdrop-blur-xl shadow-lg shadow-cyan-500/20",children:d.jsxs("div",{className:"container flex h-20 items-center justify-between px-6",children:[d.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>s("home"),children:[d.jsxs("div",{className:"relative",children:[d.jsx(xc,{className:"h-10 w-10 text-cyan-400"}),d.jsx("div",{className:"absolute inset-0 blur-lg bg-cyan-400/30"})]}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"by UltraTech AI"})]})]}),d.jsx("nav",{className:"hidden md:flex items-center gap-3",children:N.map(D=>d.jsx("button",{onClick:()=>s(D.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${t===D.id?"bg-cyan-400/20 text-cyan-400 shadow-lg shadow-cyan-400/20 border border-cyan-400/30":"text-foreground/70 hover:text-foreground hover:bg-white/10"}`,children:D.label},D.id))}),d.jsxs("div",{className:"flex items-center gap-3",children:[$?d.jsx("div",{className:"hidden md:flex items-center gap-2",children:d.jsxs(Se,{size:"sm",variant:"outline",className:"rounded-full border-cyan-400/30",onClick:()=>s("member"),children:[d.jsx(bp,{className:"h-4 w-4 mr-2"}),$.name]})}):d.jsxs(Se,{size:"sm",className:"hidden md:flex bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 rounded-full px-6 hover:shadow-lg hover:shadow-cyan-400/30 transition-all",onClick:()=>re(!0),children:[d.jsx(_t,{className:"h-4 w-4 mr-2"}),"Sign Up"]}),d.jsx(Se,{variant:"ghost",size:"icon",onClick:()=>e(!r),className:"rounded-full hover:bg-white/10",children:r?d.jsx(J2,{className:"h-5 w-5"}):d.jsx(L2,{className:"h-5 w-5"})}),d.jsx(Se,{variant:"ghost",size:"icon",className:"md:hidden rounded-full hover:bg-white/10",onClick:()=>l(!a),children:a?d.jsx(Ex,{className:"h-5 w-5"}):d.jsx(M2,{className:"h-5 w-5"})})]})]})}),a&&d.jsx("div",{className:"md:hidden border-t bg-background",children:d.jsx("nav",{className:"container px-4 py-4 space-y-2",children:N.map(D=>d.jsxs("button",{onClick:()=>{s(D.id),l(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${t===D.id?"bg-blue-100 dark:bg-blue-950 text-blue-600":"hover:bg-muted"}`,children:[d.jsx(D.icon,{className:"h-4 w-4"}),d.jsx("span",{className:"text-sm font-medium",children:D.label})]},D.id))})})]}),d.jsx("main",{className:"container mx-auto p-4 md:p-6",children:We()}),g&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>y(null),children:d.jsxs(be,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[d.jsx(ke,{children:d.jsxs(je,{className:"flex items-center justify-between",children:[d.jsx("span",{children:g.name}),d.jsx(Se,{variant:"ghost",size:"icon",onClick:()=>y(null),children:d.jsx("i",{className:"fas fa-times"})})]})}),d.jsxs(we,{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Company Number"}),d.jsx("p",{className:"font-semibold",children:g.companyNumber})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Risk Level"}),d.jsx(en,{className:`${oe(g.riskLevel)} text-white`,children:g.riskLevel.toUpperCase()})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Address"}),d.jsx("p",{children:g.address})]})]}),(g.riskLevel==="critical"||g.riskLevel==="high")&&d.jsxs(Se,{className:"w-full",onClick:()=>O(g),children:[d.jsx(Ih,{className:"mr-2 h-4 w-4"}),"AI Mitigation Plan"]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Obligations"}),d.jsx("div",{className:"space-y-2",children:u.obligations.filter(D=>D.companyId===g.id).map(D=>d.jsxs("div",{className:"p-3 border rounded-lg text-sm",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"font-medium",children:D.title}),d.jsx(en,{className:`${C(D.status)} text-white text-xs`,children:D.status})]}),d.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:["Due: ",le(D.dueDate)]})]},D.id))})]})]})]})}),v&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>x(null),children:d.jsxs(be,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[d.jsxs(ke,{children:[d.jsxs(je,{className:"flex items-center justify-between",children:[d.jsx("span",{children:v.title}),d.jsx(Se,{variant:"ghost",size:"icon",onClick:()=>x(null),children:d.jsx("i",{className:"fas fa-times"})})]}),d.jsx(kn,{children:v.companyName})]}),d.jsxs(we,{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),d.jsx(en,{className:`${C(v.status)} text-white mt-1`,children:v.status.toUpperCase()})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),d.jsx("p",{className:"font-semibold",children:le(v.dueDate)})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Potential Penalty"}),d.jsxs("p",{className:`font-semibold ${v.penalty>0&&v.status!=="completed"?"text-red-600":"text-green-600"}`,children:["£",v.penalty.toLocaleString()]})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Days ",v.status==="overdue"?"Overdue":"Until Due"]}),d.jsx("p",{className:"font-semibold",children:v.status==="overdue"?v.daysOverdue:ce(v.dueDate)})]})]}),d.jsxs(Se,{className:"w-full",onClick:()=>j(v),children:[d.jsx(Ih,{className:"mr-2 h-4 w-4"}),"AI Compliance Checklist"]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:v.description})]}),d.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[d.jsx(Se,{variant:"outline",onClick:()=>x(null),className:"flex-1",children:"Close"}),v.status!=="completed"&&d.jsxs(Se,{onClick:()=>R(v.id),className:"flex-1 bg-green-600 hover:bg-green-700",children:[d.jsx(_t,{className:"mr-2 h-4 w-4"}),"Mark Complete"]})]})]})]})}),T&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>I(!1),children:d.jsxs(be,{className:"max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[d.jsx(ke,{children:d.jsxs(je,{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx(Ih,{className:"h-5 w-5 text-purple-600"}),L.title]}),d.jsx(Se,{variant:"ghost",size:"icon",onClick:()=>I(!1),children:d.jsx("i",{className:"fas fa-times"})})]})}),d.jsx(we,{children:L.loading?d.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),d.jsx("p",{className:"text-muted-foreground",children:"Analyzing compliance data..."})]}):d.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:L.content.split(`
`).map((D,ae)=>D.startsWith("###")?d.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2",children:D.replace("###","").trim()},ae):D.startsWith("**")?d.jsx("p",{className:"font-semibold my-2",children:D.replace(/\*\*/g,"")},ae):D.startsWith("-")?d.jsx("li",{className:"ml-4",children:D.replace("-","").trim()},ae):D.match(/^\d+\./)?d.jsx("p",{className:"my-1",children:D},ae):D.trim()?d.jsx("p",{className:"my-2",children:D},ae):null)})})]})}),d.jsx("footer",{className:"mt-16 mb-4",children:d.jsx("div",{className:"mx-4 rounded-3xl border border-cyan-400/30 bg-background/40 backdrop-blur-xl shadow-lg shadow-cyan-500/20 p-8",children:d.jsxs("div",{className:"container mx-auto",children:[d.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:"relative",children:[d.jsx(xc,{className:"h-12 w-12 text-cyan-400"}),d.jsx("div",{className:"absolute inset-0 blur-lg bg-cyan-400/30"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"by UltraTech AI"})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm",children:[d.jsx("button",{onClick:()=>s("home"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Home"}),d.jsx("button",{onClick:()=>s("about"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"About"}),d.jsx("button",{onClick:()=>s("pricing"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Pricing"}),d.jsx("button",{onClick:()=>s("contact"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Contact"})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:d.jsx(sg,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:d.jsx(ig,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:d.jsx(X0,{className:"h-5 w-5"})})]})]}),d.jsx("div",{className:"mt-6 pt-6 border-t border-cyan-400/20 text-center",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2024 UltraTech AI. All rights reserved."})})]})})}),d.jsx(GP,{isOpen:z,onClose:()=>re(!1),onAuthSuccess:D=>{W(D),s("member")}})]})}WS.createRoot(document.getElementById("root")).render(d.jsx(me.StrictMode,{children:d.jsx(WP,{})}));
