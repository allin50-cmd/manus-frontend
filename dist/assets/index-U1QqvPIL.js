(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Cx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Ix(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),t}var Hm={exports:{}},vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function Nx(){if(T0)return vc;T0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:l}}return vc.Fragment=e,vc.jsx=t,vc.jsxs=t,vc}var S0;function kx(){return S0||(S0=1,Hm.exports=Nx()),Hm.exports}var y=kx(),Fm={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function Ox(){if(A0)return Ue;A0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function L(N,X,he){this.props=N,this.context=X,this.refs=B,this.updater=he||k}L.prototype.isReactComponent={},L.prototype.setState=function(N,X){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,X,"setState")},L.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function re(){}re.prototype=L.prototype;function te(N,X,he){this.props=N,this.context=X,this.refs=B,this.updater=he||k}var Y=te.prototype=new re;Y.constructor=te,U(Y,L.prototype),Y.isPureReactComponent=!0;var le=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function I(N,X,he,oe,de,Ve){return he=Ve.ref,{$$typeof:r,type:N,key:X,ref:he!==void 0?he:null,props:Ve}}function x(N,X){return I(N.type,X,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function D(N){var X={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return X[he]})}var j=/\/+/g;function P(N,X){return typeof N=="object"&&N!==null&&N.key!=null?D(""+N.key):X.toString(36)}function C(){}function Ye(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(X){N.status==="pending"&&(N.status="fulfilled",N.value=X)},function(X){N.status==="pending"&&(N.status="rejected",N.reason=X)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Le(N,X,he,oe,de){var Ve=typeof N;(Ve==="undefined"||Ve==="boolean")&&(N=null);var Ee=!1;if(N===null)Ee=!0;else switch(Ve){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(N.$$typeof){case r:case e:Ee=!0;break;case _:return Ee=N._init,Le(Ee(N._payload),X,he,oe,de)}}if(Ee)return de=de(N),Ee=oe===""?"."+P(N,0):oe,le(de)?(he="",Ee!=null&&(he=Ee.replace(j,"$&/")+"/"),Le(de,X,he,"",function(ln){return ln})):de!=null&&(R(de)&&(de=x(de,he+(de.key==null||N&&N.key===de.key?"":(""+de.key).replace(j,"$&/")+"/")+Ee)),X.push(de)),1;Ee=0;var Fe=oe===""?".":oe+":";if(le(N))for(var Ze=0;Ze<N.length;Ze++)oe=N[Ze],Ve=Fe+P(oe,Ze),Ee+=Le(oe,X,he,Ve,de);else if(Ze=S(N),typeof Ze=="function")for(N=Ze.call(N),Ze=0;!(oe=N.next()).done;)oe=oe.value,Ve=Fe+P(oe,Ze++),Ee+=Le(oe,X,he,Ve,de);else if(Ve==="object"){if(typeof N.then=="function")return Le(Ye(N),X,he,oe,de);throw X=String(N),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function M(N,X,he){if(N==null)return N;var oe=[],de=0;return Le(N,oe,"","",function(Ve){return X.call(he,Ve,de++)}),oe}function ie(N){if(N._status===-1){var X=N._result;X=X(),X.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=X)}if(N._status===1)return N._result.default;throw N._result}var ne=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function F(){}return Ue.Children={map:M,forEach:function(N,X,he){M(N,function(){X.apply(this,arguments)},he)},count:function(N){var X=0;return M(N,function(){X++}),X},toArray:function(N){return M(N,function(X){return X})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ue.Component=L,Ue.Fragment=t,Ue.Profiler=a,Ue.PureComponent=te,Ue.StrictMode=s,Ue.Suspense=m,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(N){return ce.H.useMemoCache(N)}},Ue.cache=function(N){return function(){return N.apply(null,arguments)}},Ue.cloneElement=function(N,X,he){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=U({},N.props),de=N.key,Ve=void 0;if(X!=null)for(Ee in X.ref!==void 0&&(Ve=void 0),X.key!==void 0&&(de=""+X.key),X)!ae.call(X,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&X.ref===void 0||(oe[Ee]=X[Ee]);var Ee=arguments.length-2;if(Ee===1)oe.children=he;else if(1<Ee){for(var Fe=Array(Ee),Ze=0;Ze<Ee;Ze++)Fe[Ze]=arguments[Ze+2];oe.children=Fe}return I(N.type,de,void 0,void 0,Ve,oe)},Ue.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ue.createElement=function(N,X,he){var oe,de={},Ve=null;if(X!=null)for(oe in X.key!==void 0&&(Ve=""+X.key),X)ae.call(X,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(de[oe]=X[oe]);var Ee=arguments.length-2;if(Ee===1)de.children=he;else if(1<Ee){for(var Fe=Array(Ee),Ze=0;Ze<Ee;Ze++)Fe[Ze]=arguments[Ze+2];de.children=Fe}if(N&&N.defaultProps)for(oe in Ee=N.defaultProps,Ee)de[oe]===void 0&&(de[oe]=Ee[oe]);return I(N,Ve,void 0,void 0,null,de)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(N){return{$$typeof:f,render:N}},Ue.isValidElement=R,Ue.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:ie}},Ue.memo=function(N,X){return{$$typeof:p,type:N,compare:X===void 0?null:X}},Ue.startTransition=function(N){var X=ce.T,he={};ce.T=he;try{var oe=N(),de=ce.S;de!==null&&de(he,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(F,ne)}catch(Ve){ne(Ve)}finally{ce.T=X}},Ue.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ue.use=function(N){return ce.H.use(N)},Ue.useActionState=function(N,X,he){return ce.H.useActionState(N,X,he)},Ue.useCallback=function(N,X){return ce.H.useCallback(N,X)},Ue.useContext=function(N){return ce.H.useContext(N)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(N,X){return ce.H.useDeferredValue(N,X)},Ue.useEffect=function(N,X,he){var oe=ce.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(N,X)},Ue.useId=function(){return ce.H.useId()},Ue.useImperativeHandle=function(N,X,he){return ce.H.useImperativeHandle(N,X,he)},Ue.useInsertionEffect=function(N,X){return ce.H.useInsertionEffect(N,X)},Ue.useLayoutEffect=function(N,X){return ce.H.useLayoutEffect(N,X)},Ue.useMemo=function(N,X){return ce.H.useMemo(N,X)},Ue.useOptimistic=function(N,X){return ce.H.useOptimistic(N,X)},Ue.useReducer=function(N,X,he){return ce.H.useReducer(N,X,he)},Ue.useRef=function(N){return ce.H.useRef(N)},Ue.useState=function(N){return ce.H.useState(N)},Ue.useSyncExternalStore=function(N,X,he){return ce.H.useSyncExternalStore(N,X,he)},Ue.useTransition=function(){return ce.H.useTransition()},Ue.version="19.1.0",Ue}var x0;function dp(){return x0||(x0=1,Fm.exports=Ox()),Fm.exports}var we=dp(),Gm={exports:{}},bc={},Km={exports:{}},Qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function jx(){return R0||(R0=1,function(r){function e(M,ie){var ne=M.length;M.push(ie);e:for(;0<ne;){var F=ne-1>>>1,N=M[F];if(0<a(N,ie))M[F]=ie,M[ne]=N,ne=F;else break e}}function t(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var ie=M[0],ne=M.pop();if(ne!==ie){M[0]=ne;e:for(var F=0,N=M.length,X=N>>>1;F<X;){var he=2*(F+1)-1,oe=M[he],de=he+1,Ve=M[de];if(0>a(oe,ne))de<N&&0>a(Ve,oe)?(M[F]=Ve,M[de]=ne,F=de):(M[F]=oe,M[he]=ne,F=he);else if(de<N&&0>a(Ve,ne))M[F]=Ve,M[de]=ne,F=de;else break e}}return ie}function a(M,ie){var ne=M.sortIndex-ie.sortIndex;return ne!==0?ne:M.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();r.unstable_now=function(){return u.now()-f}}var m=[],p=[],_=1,E=null,S=3,k=!1,U=!1,B=!1,L=!1,re=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function le(M){for(var ie=t(p);ie!==null;){if(ie.callback===null)s(p);else if(ie.startTime<=M)s(p),ie.sortIndex=ie.expirationTime,e(m,ie);else break;ie=t(p)}}function ce(M){if(B=!1,le(M),!U)if(t(m)!==null)U=!0,ae||(ae=!0,P());else{var ie=t(p);ie!==null&&Le(ce,ie.startTime-M)}}var ae=!1,I=-1,x=5,R=-1;function D(){return L?!0:!(r.unstable_now()-R<x)}function j(){if(L=!1,ae){var M=r.unstable_now();R=M;var ie=!0;try{e:{U=!1,B&&(B=!1,te(I),I=-1),k=!0;var ne=S;try{t:{for(le(M),E=t(m);E!==null&&!(E.expirationTime>M&&D());){var F=E.callback;if(typeof F=="function"){E.callback=null,S=E.priorityLevel;var N=F(E.expirationTime<=M);if(M=r.unstable_now(),typeof N=="function"){E.callback=N,le(M),ie=!0;break t}E===t(m)&&s(m),le(M)}else s(m);E=t(m)}if(E!==null)ie=!0;else{var X=t(p);X!==null&&Le(ce,X.startTime-M),ie=!1}}break e}finally{E=null,S=ne,k=!1}ie=void 0}}finally{ie?P():ae=!1}}}var P;if(typeof Y=="function")P=function(){Y(j)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ye=C.port2;C.port1.onmessage=j,P=function(){Ye.postMessage(null)}}else P=function(){re(j,0)};function Le(M,ie){I=re(function(){M(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(M){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var ne=S;S=ie;try{return M()}finally{S=ne}},r.unstable_requestPaint=function(){L=!0},r.unstable_runWithPriority=function(M,ie){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ne=S;S=M;try{return ie()}finally{S=ne}},r.unstable_scheduleCallback=function(M,ie,ne){var F=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?F+ne:F):ne=F,M){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ne+N,M={id:_++,callback:ie,priorityLevel:M,startTime:ne,expirationTime:N,sortIndex:-1},ne>F?(M.sortIndex=ne,e(p,M),t(m)===null&&M===t(p)&&(B?(te(I),I=-1):B=!0,Le(ce,ne-F))):(M.sortIndex=N,e(m,M),U||k||(U=!0,ae||(ae=!0,P()))),M},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(M){var ie=S;return function(){var ne=S;S=ie;try{return M.apply(this,arguments)}finally{S=ne}}}}(Qm)),Qm}var C0;function Dx(){return C0||(C0=1,Km.exports=jx()),Km.exports}var Ym={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function Px(){if(I0)return dn;I0=1;var r=dp();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:p,implementation:_}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dn.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},dn.flushSync=function(m){var p=u.T,_=s.p;try{if(u.T=null,s.p=2,m)return m()}finally{u.T=p,s.p=_,s.d.f()}},dn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(m,p))},dn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},dn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,E=f(_,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:k}):_==="script"&&s.d.X(m,{crossOrigin:E,integrity:S,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);s.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(m)},dn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=f(_,p.crossOrigin);s.d.L(m,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dn.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=f(p.as,p.crossOrigin);s.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(m)},dn.requestFormReset=function(m){s.d.r(m)},dn.unstable_batchedUpdates=function(m,p){return m(p)},dn.useFormState=function(m,p,_){return u.H.useFormState(m,p,_)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.1.0",dn}var N0;function Mx(){if(N0)return Ym.exports;N0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ym.exports=Px(),Ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0;function Vx(){if(k0)return bc;k0=1;var r=Dx(),e=dp(),t=Mx();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(s(188))}function m(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return f(d),n;if(g===c)return f(d),i;g=g.sibling}throw Error(s(188))}if(o.return!==c.return)o=d,c=g;else{for(var w=!1,T=d.child;T;){if(T===o){w=!0,o=d,c=g;break}if(T===c){w=!0,c=d,o=g;break}T=T.sibling}if(!w){for(T=g.child;T;){if(T===o){w=!0,o=g,c=d;break}if(T===c){w=!0,c=g,o=d;break}T=T.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),te=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ye(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case L:return"Profiler";case B:return"StrictMode";case ce:return"Suspense";case ae:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case Y:return(n.displayName||"Context")+".Provider";case te:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:Ye(n.type)||"Memo";case x:i=n._payload,n=n._init;try{return Ye(n(i))}catch{}}return null}var Le=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},F=[],N=-1;function X(n){return{current:n}}function he(n){0>N||(n.current=F[N],F[N]=null,N--)}function oe(n,i){N++,F[N]=n.current,n.current=i}var de=X(null),Ve=X(null),Ee=X(null),Fe=X(null);function Ze(n,i){switch(oe(Ee,i),oe(Ve,n),oe(de,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Xv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Xv(i),n=Jv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(de),oe(de,n)}function ln(){he(de),he(Ve),he(Ee)}function ys(n){n.memoizedState!==null&&oe(Fe,n);var i=de.current,o=Jv(i,n.type);i!==o&&(oe(Ve,n),oe(de,o))}function _s(n){Ve.current===n&&(he(de),he(Ve)),Fe.current===n&&(he(Fe),mc._currentValue=ne)}var Zn=Object.prototype.hasOwnProperty,Ni=r.unstable_scheduleCallback,Ma=r.unstable_cancelCallback,Hd=r.unstable_shouldYield,ml=r.unstable_requestPaint,En=r.unstable_now,lu=r.unstable_getCurrentPriorityLevel,Lt=r.unstable_ImmediatePriority,Gt=r.unstable_UserBlockingPriority,$s=r.unstable_NormalPriority,Fd=r.unstable_LowPriority,gl=r.unstable_IdlePriority,Gd=r.log,ki=r.unstable_setDisableYieldValue,br=null,cn=null;function zn(n){if(typeof Gd=="function"&&ki(n),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(br,n)}catch{}}var yn=Math.clz32?Math.clz32:uu,Kd=Math.log,cu=Math.LN2;function uu(n){return n>>>=0,n===0?32:31-(Kd(n)/cu|0)|0}var vs=256,wr=4194304;function es(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Bn(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var d=0,g=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~g,c!==0?d=es(c):(w&=T,w!==0?d=es(w):o||(o=T&~n,o!==0&&(d=es(o))))):(T=c&~g,T!==0?d=es(T):w!==0?d=es(w):o||(o=c&~n,o!==0&&(d=es(o)))),d===0?0:i!==0&&i!==d&&(i&g)===0&&(g=d&-d,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:d}function Er(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Va(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(){var n=vs;return vs<<=1,(vs&4194048)===0&&(vs=256),n}function Tr(){var n=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),n}function Ua(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function St(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hu(n,i,o,c,d,g){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(o=w&~o;0<o;){var W=31-yn(o),ee=1<<W;T[W]=0,O[W]=-1;var G=H[W];if(G!==null)for(H[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}o&=~ee}c!==0&&Sr(n,c,0),g!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=g&~(w&~i))}function Sr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-yn(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function Ar(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-yn(o),d=1<<c;d&i|n[c]&i&&(n[c]|=i),o&=~d}}function yl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function _l(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Hs(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:y0(n.type))}function Qd(n,i){var o=ie.p;try{return ie.p=n,i()}finally{ie.p=o}}var bs=Math.random().toString(36).slice(2),At="__reactFiber$"+bs,en="__reactProps$"+bs,Fs="__reactContainer$"+bs,Oi="__reactEvents$"+bs,ji="__reactListeners$"+bs,Yd="__reactHandles$"+bs,ts="__reactResources$"+bs,xr="__reactMarker$"+bs;function La(n){delete n[At],delete n[en],delete n[Oi],delete n[ji],delete n[Yd]}function ws(n){var i=n[At];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Fs]||o[At]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=n0(n);n!==null;){if(o=n[At])return o;n=n0(n)}return i}n=o,o=n.parentNode}return null}function Es(n){if(n=n[At]||n[Fs]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Rr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Cr(n){var i=n[ts];return i||(i=n[ts]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(n){n[xr]=!0}var du=new Set,Di={};function Ts(n,i){Ss(n,i),Ss(n+"Capture",i)}function Ss(n,i){for(Di[n]=i,n=0;n<i.length;n++)du.add(i[n])}var Pi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),As={},za={};function Wd(n){return Zn.call(za,n)?!0:Zn.call(As,n)?!1:Pi.test(n)?za[n]=!0:(As[n]=!0,!1)}function Mi(n,i,o){if(Wd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Vi(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function qn(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}var Ui,Ba;function Gs(n){if(Ui===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ui=i&&i[1]||"",Ba=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ui+n+Ba}var qa=!1;function $a(n,i){if(!n||qa)return"";qa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var G=K}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(K){G=K}n.call(ee.prototype)}}else{try{throw Error()}catch(K){G=K}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),w=g[0],T=g[1];if(w&&T){var O=w.split(`
`),H=T.split(`
`);for(d=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(c===O.length||d===H.length)for(c=O.length-1,d=H.length-1;1<=c&&0<=d&&O[c]!==H[d];)d--;for(;1<=c&&0<=d;c--,d--)if(O[c]!==H[d]){if(c!==1||d!==1)do if(c--,d--,0>d||O[c]!==H[d]){var W=`
`+O[c].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=c&&0<=d);break}}}finally{qa=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Gs(o):""}function Xd(n){switch(n.tag){case 26:case 27:case 5:return Gs(n.type);case 16:return Gs("Lazy");case 13:return Gs("Suspense");case 19:return Gs("SuspenseList");case 0:case 15:return $a(n.type,!1);case 11:return $a(n.type.render,!1);case 1:return $a(n.type,!0);case 31:return Gs("Activity");default:return""}}function ns(n){try{var i="";do i+=Xd(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function vt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ir(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Li(n){var i=Ir(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Nr(n){n._valueTracker||(n._valueTracker=Li(n))}function at(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ir(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Ks(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var zi=/[\n"\\]/g;function Kt(n){return n.replace(zi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vl(n,i,o,c,d,g,w,T){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+vt(i)):n.value!==""+vt(i)&&(n.value=""+vt(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?wl(n,w,vt(i)):o!=null?wl(n,w,vt(o)):c!=null&&n.removeAttribute("value"),d==null&&g!=null&&(n.defaultChecked=!!g),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+vt(T):n.removeAttribute("name")}function bl(n,i,o,c,d,g,w,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+vt(o):"",i=i!=null?""+vt(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w)}function wl(n,i,o){i==="number"&&Ks(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function kr(n,i,o,c){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&c&&(n[o].defaultSelected=!0)}else{for(o=""+vt(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function fu(n,i,o){if(i!=null&&(i=""+vt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+vt(o):""}function mu(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Le(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=vt(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function $n(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Qs.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Tl(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in i)c=i[d],i.hasOwnProperty(d)&&o[d]!==c&&El(n,d,c)}else for(var g in i)i.hasOwnProperty(g)&&El(n,g,i[g])}function Ha(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ss(n){return pu.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Sl=null;function Al(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Or=null,_n=null;function yu(n){var i=Es(n);if(i&&(n=i.stateNode)){var o=n[en]||null;e:switch(n=i.stateNode,i.type){case"input":if(vl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Kt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var d=c[en]||null;if(!d)throw Error(s(90));vl(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&at(c)}break e;case"textarea":fu(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&kr(n,!!o.multiple,i,!1)}}}var Bi=!1;function qi(n,i,o){if(Bi)return n(i,o);Bi=!0;try{var c=n(i);return c}finally{if(Bi=!1,(Or!==null||_n!==null)&&(ah(),Or&&(i=Or,n=_n,_n=Or=null,yu(i),n)))for(i=0;i<n.length;i++)yu(n[i])}}function jr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[en]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ys=!1;if(vn)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){Ys=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{Ys=!1}var Hn=null,dt=null,Fa=null;function _u(){if(Fa)return Fa;var n,i=dt,o=i.length,c,d="value"in Hn?Hn.value:Hn.textContent,g=d.length;for(n=0;n<o&&i[n]===d[n];n++);var w=o-n;for(c=1;c<=w&&i[o-c]===d[g-c];c++);return Fa=d.slice(n,1<c?1-c:void 0)}function $i(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Hi(){return!0}function xl(){return!1}function zt(n){function i(o,c,d,g,w){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hi:xl,this.isPropagationStopped=xl,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),i}var un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fi=zt(un),Gi=_({},un,{view:0,detail:0}),Ki=zt(Gi),Ga,Qi,xs,Yi=_({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(Ga=n.screenX-xs.screenX,Qi=n.screenY-xs.screenY):Qi=Ga=0,xs=n),Ga)},movementY:function(n){return"movementY"in n?n.movementY:Qi}}),Wi=zt(Yi),Jd=_({},Yi,{dataTransfer:0}),vu=zt(Jd),Xi=_({},Gi,{relatedTarget:0}),Ka=zt(Xi),bu=_({},un,{animationName:0,elapsedTime:0,pseudoElement:0}),Rl=zt(bu),Cl=_({},un,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wu=zt(Cl),Qa=_({},un,{data:0}),Il=zt(Qa),Eu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ws={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Su(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tu[n])?!!i[n]:!1}function Ya(){return Su}var Au=_({},Gi,{key:function(n){if(n.key){var i=Eu[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=$i(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ws[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(n){return n.type==="keypress"?$i(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$i(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wa=zt(Au),bn=_({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nl=zt(bn),xu=_({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),Pr=zt(xu),h=_({},un,{propertyName:0,elapsedTime:0,pseudoElement:0}),v=zt(h),b=_({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),A=zt(b),$=_({},un,{newState:0,oldState:0}),Q=zt($),ue=[9,13,27,32],Oe=vn&&"CompositionEvent"in window,pt=null;vn&&"documentMode"in document&&(pt=document.documentMode);var st=vn&&"TextEvent"in window&&!pt,Rt=vn&&(!Oe||pt&&8<pt&&11>=pt),Nn=" ",Rs=!1;function rs(n,i){switch(n){case"keyup":return ue.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function is(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var as=!1;function kl(n,i){switch(n){case"compositionend":return is(i);case"keypress":return i.which!==32?null:(Rs=!0,Nn);case"textInput":return n=i.data,n===Nn&&Rs?null:n;default:return null}}function tA(n,i){if(as)return n==="compositionend"||!Oe&&rs(n,i)?(n=_u(),Fa=dt=Hn=null,as=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rt&&i.locale!=="ko"?null:i.data;default:return null}}var nA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!nA[n.type]:i==="textarea"}function dy(n,i,o,c){Or?_n?_n.push(c):_n=[c]:Or=c,i=dh(i,"onChange"),0<i.length&&(o=new Fi("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ol=null,jl=null;function sA(n){Gv(n,0)}function Ru(n){var i=Rr(n);if(at(i))return n}function fy(n,i){if(n==="change")return i}var my=!1;if(vn){var Zd;if(vn){var ef="oninput"in document;if(!ef){var gy=document.createElement("div");gy.setAttribute("oninput","return;"),ef=typeof gy.oninput=="function"}Zd=ef}else Zd=!1;my=Zd&&(!document.documentMode||9<document.documentMode)}function py(){Ol&&(Ol.detachEvent("onpropertychange",yy),jl=Ol=null)}function yy(n){if(n.propertyName==="value"&&Ru(jl)){var i=[];dy(i,jl,n,Al(n)),qi(sA,i)}}function rA(n,i,o){n==="focusin"?(py(),Ol=i,jl=o,Ol.attachEvent("onpropertychange",yy)):n==="focusout"&&py()}function iA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ru(jl)}function aA(n,i){if(n==="click")return Ru(i)}function oA(n,i){if(n==="input"||n==="change")return Ru(i)}function lA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var kn=typeof Object.is=="function"?Object.is:lA;function Dl(n,i){if(kn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!Zn.call(i,d)||!kn(n[d],i[d]))return!1}return!0}function _y(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vy(n,i){var o=_y(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=_y(o)}}function by(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?by(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function wy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ks(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Ks(n.document)}return i}function tf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var cA=vn&&"documentMode"in document&&11>=document.documentMode,Xa=null,nf=null,Pl=null,sf=!1;function Ey(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;sf||Xa==null||Xa!==Ks(c)||(c=Xa,"selectionStart"in c&&tf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pl&&Dl(Pl,c)||(Pl=c,c=dh(nf,"onSelect"),0<c.length&&(i=new Fi("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Xa)))}function Ji(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Ja={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},rf={},Ty={};vn&&(Ty=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Zi(n){if(rf[n])return rf[n];if(!Ja[n])return n;var i=Ja[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Ty)return rf[n]=i[o];return n}var Sy=Zi("animationend"),Ay=Zi("animationiteration"),xy=Zi("animationstart"),uA=Zi("transitionrun"),hA=Zi("transitionstart"),dA=Zi("transitioncancel"),Ry=Zi("transitionend"),Cy=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function os(n,i){Cy.set(n,i),Ts(i,[n])}var Iy=new WeakMap;function Fn(n,i){if(typeof n=="object"&&n!==null){var o=Iy.get(n);return o!==void 0?o:(i={value:n,source:i,stack:ns(i)},Iy.set(n,i),i)}return{value:n,source:i,stack:ns(i)}}var Gn=[],Za=0,of=0;function Cu(){for(var n=Za,i=of=Za=0;i<n;){var o=Gn[i];Gn[i++]=null;var c=Gn[i];Gn[i++]=null;var d=Gn[i];Gn[i++]=null;var g=Gn[i];if(Gn[i++]=null,c!==null&&d!==null){var w=c.pending;w===null?d.next=d:(d.next=w.next,w.next=d),c.pending=d}g!==0&&Ny(o,d,g)}}function Iu(n,i,o,c){Gn[Za++]=n,Gn[Za++]=i,Gn[Za++]=o,Gn[Za++]=c,of|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function lf(n,i,o,c){return Iu(n,i,o,c),Nu(n)}function eo(n,i){return Iu(n,null,null,i),Nu(n)}function Ny(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var d=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(d=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,d&&i!==null&&(d=31-yn(o),n=g.hiddenUpdates,c=n[d],c===null?n[d]=[i]:c.push(i),i.lane=o|536870912),g):null}function Nu(n){if(50<ac)throw ac=0,mm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var to={};function fA(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(n,i,o,c){return new fA(n,i,o,c)}function cf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xs(n,i){var o=n.alternate;return o===null?(o=On(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ky(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ku(n,i,o,c,d,g){var w=0;if(c=n,typeof n=="function")cf(n)&&(w=1);else if(typeof n=="string")w=gx(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=On(31,o,i,d),n.elementType=R,n.lanes=g,n;case U:return ea(o.children,d,g,i);case B:w=8,d|=24;break;case L:return n=On(12,o,i,d|2),n.elementType=L,n.lanes=g,n;case ce:return n=On(13,o,i,d),n.elementType=ce,n.lanes=g,n;case ae:return n=On(19,o,i,d),n.elementType=ae,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:case Y:w=10;break e;case te:w=9;break e;case le:w=11;break e;case I:w=14;break e;case x:w=16,c=null;break e}w=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=On(w,o,i,d),i.elementType=n,i.type=c,i.lanes=g,i}function ea(n,i,o,c){return n=On(7,n,c,i),n.lanes=o,n}function uf(n,i,o){return n=On(6,n,null,i),n.lanes=o,n}function hf(n,i,o){return i=On(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var no=[],so=0,Ou=null,ju=0,Kn=[],Qn=0,ta=null,Js=1,Zs="";function na(n,i){no[so++]=ju,no[so++]=Ou,Ou=n,ju=i}function Oy(n,i,o){Kn[Qn++]=Js,Kn[Qn++]=Zs,Kn[Qn++]=ta,ta=n;var c=Js;n=Zs;var d=32-yn(c)-1;c&=~(1<<d),o+=1;var g=32-yn(i)+d;if(30<g){var w=d-d%5;g=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Js=1<<32-yn(i)+d|o<<d|c,Zs=g+n}else Js=1<<g|o<<d|c,Zs=n}function df(n){n.return!==null&&(na(n,1),Oy(n,1,0))}function ff(n){for(;n===Ou;)Ou=no[--so],no[so]=null,ju=no[--so],no[so]=null;for(;n===ta;)ta=Kn[--Qn],Kn[Qn]=null,Zs=Kn[--Qn],Kn[Qn]=null,Js=Kn[--Qn],Kn[Qn]=null}var wn=null,Et=null,et=!1,sa=null,Cs=!1,mf=Error(s(519));function ra(n){var i=Error(s(418,""));throw Ul(Fn(i,n)),mf}function jy(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[At]=n,i[en]=c,o){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(o=0;o<lc.length;o++)He(lc[o],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":He("invalid",i),bl(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Nr(i);break;case"select":He("invalid",i);break;case"textarea":He("invalid",i),mu(i,c.value,c.defaultValue,c.children),Nr(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||Wv(i.textContent,o)?(c.popover!=null&&(He("beforetoggle",i),He("toggle",i)),c.onScroll!=null&&He("scroll",i),c.onScrollEnd!=null&&He("scrollend",i),c.onClick!=null&&(i.onclick=fh),i=!0):i=!1,i||ra(n)}function Dy(n){for(wn=n.return;wn;)switch(wn.tag){case 5:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:wn=wn.return}}function Ml(n){if(n!==wn)return!1;if(!et)return Dy(n),et=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Nm(n.type,n.memoizedProps)),o=!o),o&&Et&&ra(n),Dy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){Et=cs(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}Et=null}}else i===27?(i=Et,Xr(n.type)?(n=Dm,Dm=null,Et=n):Et=i):Et=wn?cs(n.stateNode.nextSibling):null;return!0}function Vl(){Et=wn=null,et=!1}function Py(){var n=sa;return n!==null&&(An===null?An=n:An.push.apply(An,n),sa=null),n}function Ul(n){sa===null?sa=[n]:sa.push(n)}var gf=X(null),ia=null,er=null;function Mr(n,i,o){oe(gf,i._currentValue),i._currentValue=o}function tr(n){n._currentValue=gf.current,he(gf)}function pf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function yf(n,i,o,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var g=d.dependencies;if(g!==null){var w=d.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=d;for(var O=0;O<i.length;O++)if(T.context===i[O]){g.lanes|=o,T=g.alternate,T!==null&&(T.lanes|=o),pf(g.return,o,n),c||(w=null);break e}g=T.next}}else if(d.tag===18){if(w=d.return,w===null)throw Error(s(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),pf(w,o,n),w=null}else w=d.child;if(w!==null)w.return=d;else for(w=d;w!==null;){if(w===n){w=null;break}if(d=w.sibling,d!==null){d.return=w.return,w=d;break}w=w.return}d=w}}function Ll(n,i,o,c){n=null;for(var d=i,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var w=d.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var T=d.type;kn(d.pendingProps.value,w.value)||(n!==null?n.push(T):n=[T])}}else if(d===Fe.current){if(w=d.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(mc):n=[mc])}d=d.return}n!==null&&yf(i,n,o,c),i.flags|=262144}function Du(n){for(n=n.firstContext;n!==null;){if(!kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function aa(n){ia=n,er=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function hn(n){return My(ia,n)}function Pu(n,i){return ia===null&&aa(n),My(n,i)}function My(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},er===null){if(n===null)throw Error(s(308));er=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else er=er.next=i;return o}var mA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},gA=r.unstable_scheduleCallback,pA=r.unstable_NormalPriority,Bt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _f(){return{controller:new mA,data:new Map,refCount:0}}function zl(n){n.refCount--,n.refCount===0&&gA(pA,function(){n.controller.abort()})}var Bl=null,vf=0,ro=0,io=null;function yA(n,i){if(Bl===null){var o=Bl=[];vf=0,ro=wm(),io={status:"pending",value:void 0,then:function(c){o.push(c)}}}return vf++,i.then(Vy,Vy),i}function Vy(){if(--vf===0&&Bl!==null){io!==null&&(io.status="fulfilled");var n=Bl;Bl=null,ro=0,io=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function _A(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var d=0;d<o.length;d++)(0,o[d])(i)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var Uy=M.S;M.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&yA(n,i),Uy!==null&&Uy(n,i)};var oa=X(null);function bf(){var n=oa.current;return n!==null?n:ft.pooledCache}function Mu(n,i){i===null?oe(oa,oa.current):oe(oa,i.pool)}function Ly(){var n=bf();return n===null?null:{parent:Bt._currentValue,pool:n}}var ql=Error(s(460)),zy=Error(s(474)),Vu=Error(s(542)),wf={then:function(){}};function By(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Uu(){}function qy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Uu,Uu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Hy(n),n;default:if(typeof i.status=="string")i.then(Uu,Uu);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=c}},function(c){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Hy(n),n}throw $l=i,ql}}var $l=null;function $y(){if($l===null)throw Error(s(459));var n=$l;return $l=null,n}function Hy(n){if(n===ql||n===Vu)throw Error(s(483))}var Vr=!1;function Ef(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ur(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,i=Nu(n),Ny(n,null,o),i}return Iu(n,c,i,o),Nu(n)}function Hl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Ar(n,o)}}function Sf(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?d=g=i:g=g.next=i}else d=g=i;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Af=!1;function Fl(){if(Af){var n=io;if(n!==null)throw n}}function Gl(n,i,o,c){Af=!1;var d=n.updateQueue;Vr=!1;var g=d.firstBaseUpdate,w=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var O=T,H=O.next;O.next=null,w===null?g=H:w.next=H,w=O;var W=n.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==w&&(T===null?W.firstBaseUpdate=H:T.next=H,W.lastBaseUpdate=O))}if(g!==null){var ee=d.baseState;w=0,W=H=O=null,T=g;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(We&G)===G:(c&G)===G){G!==0&&G===ro&&(Af=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var xe=n,Te=T;G=i;var ct=o;switch(Te.tag){case 1:if(xe=Te.payload,typeof xe=="function"){ee=xe.call(ct,ee,G);break e}ee=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Te.payload,G=typeof xe=="function"?xe.call(ct,ee,G):xe,G==null)break e;ee=_({},ee,G);break e;case 2:Vr=!0}}G=T.callback,G!==null&&(n.flags|=64,K&&(n.flags|=8192),K=d.callbacks,K===null?d.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(H=W=K,O=ee):W=W.next=K,w|=G;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;K=T,T=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);W===null&&(O=ee),d.baseState=O,d.firstBaseUpdate=H,d.lastBaseUpdate=W,g===null&&(d.shared.lanes=0),Kr|=w,n.lanes=w,n.memoizedState=ee}}function Fy(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Gy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Fy(o[n],i)}var ao=X(null),Lu=X(0);function Ky(n,i){n=lr,oe(Lu,n),oe(ao,i),lr=n|i.baseLanes}function xf(){oe(Lu,lr),oe(ao,ao.current)}function Rf(){lr=Lu.current,he(ao),he(Lu)}var zr=0,ze=null,ot=null,Ot=null,zu=!1,oo=!1,la=!1,Bu=0,Kl=0,lo=null,vA=0;function Ct(){throw Error(s(321))}function Cf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!kn(n[o],i[o]))return!1;return!0}function If(n,i,o,c,d,g){return zr=g,ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=n===null||n.memoizedState===null?N_:k_,la=!1,g=o(c,d),la=!1,oo&&(g=Yy(i,o,c,d)),Qy(n),g}function Qy(n){M.H=Ku;var i=ot!==null&&ot.next!==null;if(zr=0,Ot=ot=ze=null,zu=!1,Kl=0,lo=null,i)throw Error(s(300));n===null||Qt||(n=n.dependencies,n!==null&&Du(n)&&(Qt=!0))}function Yy(n,i,o,c){ze=n;var d=0;do{if(oo&&(lo=null),Kl=0,oo=!1,25<=d)throw Error(s(301));if(d+=1,Ot=ot=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}M.H=xA,g=i(o,c)}while(oo);return g}function bA(){var n=M.H,i=n.useState()[0];return i=typeof i.then=="function"?Ql(i):i,n=n.useState()[0],(ot!==null?ot.memoizedState:null)!==n&&(ze.flags|=1024),i}function Nf(){var n=Bu!==0;return Bu=0,n}function kf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Of(n){if(zu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zu=!1}zr=0,Ot=ot=ze=null,oo=!1,Kl=Bu=0,lo=null}function Tn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ze.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function jt(){if(ot===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=ot.next;var i=Ot===null?ze.memoizedState:Ot.next;if(i!==null)Ot=i,ot=n;else{if(n===null)throw ze.alternate===null?Error(s(467)):Error(s(310));ot=n,n={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Ot===null?ze.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ql(n){var i=Kl;return Kl+=1,lo===null&&(lo=[]),n=qy(lo,n,i),i=ze,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?N_:k_),n}function qu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ql(n);if(n.$$typeof===Y)return hn(n)}throw Error(s(438,String(n)))}function Df(n){var i=null,o=ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=jf(),ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=D;return i.index++,o}function nr(n,i){return typeof i=="function"?i(n):i}function $u(n){var i=jt();return Pf(i,ot,n)}function Pf(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var d=n.baseQueue,g=c.pending;if(g!==null){if(d!==null){var w=d.next;d.next=g.next,g.next=w}i.baseQueue=d=g,c.pending=null}if(g=n.baseState,d===null)n.memoizedState=g;else{i=d.next;var T=w=null,O=null,H=i,W=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(We&ee)===ee:(zr&ee)===ee){var G=H.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===ro&&(W=!0);else if((zr&G)===G){H=H.next,G===ro&&(W=!0);continue}else ee={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=ee,w=g):O=O.next=ee,ze.lanes|=G,Kr|=G;ee=H.action,la&&o(g,ee),g=H.hasEagerState?H.eagerState:o(g,ee)}else G={lane:ee,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=G,w=g):O=O.next=G,ze.lanes|=ee,Kr|=ee;H=H.next}while(H!==null&&H!==i);if(O===null?w=g:O.next=T,!kn(g,n.memoizedState)&&(Qt=!0,W&&(o=io,o!==null)))throw o;n.memoizedState=g,n.baseState=w,n.baseQueue=O,c.lastRenderedState=g}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Mf(n){var i=jt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,d=o.pending,g=i.memoizedState;if(d!==null){o.pending=null;var w=d=d.next;do g=n(g,w.action),w=w.next;while(w!==d);kn(g,i.memoizedState)||(Qt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,c]}function Wy(n,i,o){var c=ze,d=jt(),g=et;if(g){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!kn((ot||d).memoizedState,o);w&&(d.memoizedState=o,Qt=!0),d=d.queue;var T=Zy.bind(null,c,d,n);if(Yl(2048,8,T,[n]),d.getSnapshot!==i||w||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,co(9,Hu(),Jy.bind(null,c,d,o,i),null),ft===null)throw Error(s(349));g||(zr&124)!==0||Xy(c,i,o)}return o}function Xy(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=ze.updateQueue,i===null?(i=jf(),ze.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Jy(n,i,o,c){i.value=o,i.getSnapshot=c,e_(i)&&t_(n)}function Zy(n,i,o){return o(function(){e_(i)&&t_(n)})}function e_(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!kn(n,o)}catch{return!0}}function t_(n){var i=eo(n,2);i!==null&&Vn(i,n,2)}function Vf(n){var i=Tn();if(typeof n=="function"){var o=n;if(n=o(),la){zn(!0);try{o()}finally{zn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:n},i}function n_(n,i,o,c){return n.baseState=o,Pf(n,ot,typeof c=="function"?c:nr)}function wA(n,i,o,c,d){if(Gu(n))throw Error(s(485));if(n=i.action,n!==null){var g={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};M.T!==null?o(!0):g.isTransition=!1,c(g),o=i.pending,o===null?(g.next=i.pending=g,s_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function s_(n,i){var o=i.action,c=i.payload,d=n.state;if(i.isTransition){var g=M.T,w={};M.T=w;try{var T=o(d,c),O=M.S;O!==null&&O(w,T),r_(n,i,T)}catch(H){Uf(n,i,H)}finally{M.T=g}}else try{g=o(d,c),r_(n,i,g)}catch(H){Uf(n,i,H)}}function r_(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){i_(n,i,c)},function(c){return Uf(n,i,c)}):i_(n,i,o)}function i_(n,i,o){i.status="fulfilled",i.value=o,a_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,s_(n,o)))}function Uf(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,a_(i),i=i.next;while(i!==c)}n.action=null}function a_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function o_(n,i){return i}function l_(n,i){if(et){var o=ft.formState;if(o!==null){e:{var c=ze;if(et){if(Et){t:{for(var d=Et,g=Cs;d.nodeType!==8;){if(!g){d=null;break t}if(d=cs(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Et=cs(d.nextSibling),c=d.data==="F!";break e}}ra(c)}c=!1}c&&(i=o[0])}}return o=Tn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o_,lastRenderedState:i},o.queue=c,o=R_.bind(null,ze,c),c.dispatch=o,c=Vf(!1),g=$f.bind(null,ze,!1,c.queue),c=Tn(),d={state:i,dispatch:null,action:n,pending:null},c.queue=d,o=wA.bind(null,ze,d,g,o),d.dispatch=o,c.memoizedState=n,[i,o,!1]}function c_(n){var i=jt();return u_(i,ot,n)}function u_(n,i,o){if(i=Pf(n,i,o_)[0],n=$u(nr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Ql(i)}catch(w){throw w===ql?Vu:w}else c=i;i=jt();var d=i.queue,g=d.dispatch;return o!==i.memoizedState&&(ze.flags|=2048,co(9,Hu(),EA.bind(null,d,o),null)),[c,g,n]}function EA(n,i){n.action=i}function h_(n){var i=jt(),o=ot;if(o!==null)return u_(i,o,n);jt(),i=i.memoizedState,o=jt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function co(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=ze.updateQueue,i===null&&(i=jf(),ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function Hu(){return{destroy:void 0,resource:void 0}}function d_(){return jt().memoizedState}function Fu(n,i,o,c){var d=Tn();c=c===void 0?null:c,ze.flags|=n,d.memoizedState=co(1|i,Hu(),o,c)}function Yl(n,i,o,c){var d=jt();c=c===void 0?null:c;var g=d.memoizedState.inst;ot!==null&&c!==null&&Cf(c,ot.memoizedState.deps)?d.memoizedState=co(i,g,o,c):(ze.flags|=n,d.memoizedState=co(1|i,g,o,c))}function f_(n,i){Fu(8390656,8,n,i)}function m_(n,i){Yl(2048,8,n,i)}function g_(n,i){return Yl(4,2,n,i)}function p_(n,i){return Yl(4,4,n,i)}function y_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function __(n,i,o){o=o!=null?o.concat([n]):null,Yl(4,4,y_.bind(null,i,n),o)}function Lf(){}function v_(n,i){var o=jt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Cf(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function b_(n,i){var o=jt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Cf(i,c[1]))return c[0];if(c=n(),la){zn(!0);try{n()}finally{zn(!1)}}return o.memoizedState=[c,i],c}function zf(n,i,o){return o===void 0||(zr&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=Tv(),ze.lanes|=n,Kr|=n,o)}function w_(n,i,o,c){return kn(o,i)?o:ao.current!==null?(n=zf(n,o,c),kn(n,i)||(Qt=!0),n):(zr&42)===0?(Qt=!0,n.memoizedState=o):(n=Tv(),ze.lanes|=n,Kr|=n,i)}function E_(n,i,o,c,d){var g=ie.p;ie.p=g!==0&&8>g?g:8;var w=M.T,T={};M.T=T,$f(n,!1,i,o);try{var O=d(),H=M.S;if(H!==null&&H(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=_A(O,c);Wl(n,i,W,Mn(n))}else Wl(n,i,c,Mn(n))}catch(ee){Wl(n,i,{then:function(){},status:"rejected",reason:ee},Mn())}finally{ie.p=g,M.T=w}}function TA(){}function Bf(n,i,o,c){if(n.tag!==5)throw Error(s(476));var d=T_(n).queue;E_(n,d,i,ne,o===null?TA:function(){return S_(n),o(c)})}function T_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:ne},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function S_(n){var i=T_(n).next.queue;Wl(n,i,{},Mn())}function qf(){return hn(mc)}function A_(){return jt().memoizedState}function x_(){return jt().memoizedState}function SA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Mn();n=Ur(o);var c=Lr(i,n,o);c!==null&&(Vn(c,i,o),Hl(c,i,o)),i={cache:_f()},n.payload=i;return}i=i.return}}function AA(n,i,o){var c=Mn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Gu(n)?C_(i,o):(o=lf(n,i,o,c),o!==null&&(Vn(o,n,c),I_(o,i,c)))}function R_(n,i,o){var c=Mn();Wl(n,i,o,c)}function Wl(n,i,o,c){var d={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Gu(n))C_(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,T=g(w,o);if(d.hasEagerState=!0,d.eagerState=T,kn(T,w))return Iu(n,i,d,0),ft===null&&Cu(),!1}catch{}finally{}if(o=lf(n,i,d,c),o!==null)return Vn(o,n,c),I_(o,i,c),!0}return!1}function $f(n,i,o,c){if(c={lane:2,revertLane:wm(),action:c,hasEagerState:!1,eagerState:null,next:null},Gu(n)){if(i)throw Error(s(479))}else i=lf(n,o,c,2),i!==null&&Vn(i,n,2)}function Gu(n){var i=n.alternate;return n===ze||i!==null&&i===ze}function C_(n,i){oo=zu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function I_(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Ar(n,o)}}var Ku={readContext:hn,use:qu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},N_={readContext:hn,use:qu,useCallback:function(n,i){return Tn().memoizedState=[n,i===void 0?null:i],n},useContext:hn,useEffect:f_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Fu(4194308,4,y_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Fu(4194308,4,n,i)},useInsertionEffect:function(n,i){Fu(4,2,n,i)},useMemo:function(n,i){var o=Tn();i=i===void 0?null:i;var c=n();if(la){zn(!0);try{n()}finally{zn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Tn();if(o!==void 0){var d=o(i);if(la){zn(!0);try{o(i)}finally{zn(!1)}}}else d=i;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=AA.bind(null,ze,n),[c.memoizedState,n]},useRef:function(n){var i=Tn();return n={current:n},i.memoizedState=n},useState:function(n){n=Vf(n);var i=n.queue,o=R_.bind(null,ze,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Lf,useDeferredValue:function(n,i){var o=Tn();return zf(o,n,i)},useTransition:function(){var n=Vf(!1);return n=E_.bind(null,ze,n.queue,!0,!1),Tn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=ze,d=Tn();if(et){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),ft===null)throw Error(s(349));(We&124)!==0||Xy(c,i,o)}d.memoizedState=o;var g={value:o,getSnapshot:i};return d.queue=g,f_(Zy.bind(null,c,g,n),[n]),c.flags|=2048,co(9,Hu(),Jy.bind(null,c,g,o,i),null),o},useId:function(){var n=Tn(),i=ft.identifierPrefix;if(et){var o=Zs,c=Js;o=(c&~(1<<32-yn(c)-1)).toString(32)+o,i="«"+i+"R"+o,o=Bu++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=vA++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:qf,useFormState:l_,useActionState:l_,useOptimistic:function(n){var i=Tn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=$f.bind(null,ze,!0,o),o.dispatch=i,[n,i]},useMemoCache:Df,useCacheRefresh:function(){return Tn().memoizedState=SA.bind(null,ze)}},k_={readContext:hn,use:qu,useCallback:v_,useContext:hn,useEffect:m_,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:p_,useMemo:b_,useReducer:$u,useRef:d_,useState:function(){return $u(nr)},useDebugValue:Lf,useDeferredValue:function(n,i){var o=jt();return w_(o,ot.memoizedState,n,i)},useTransition:function(){var n=$u(nr)[0],i=jt().memoizedState;return[typeof n=="boolean"?n:Ql(n),i]},useSyncExternalStore:Wy,useId:A_,useHostTransitionStatus:qf,useFormState:c_,useActionState:c_,useOptimistic:function(n,i){var o=jt();return n_(o,ot,n,i)},useMemoCache:Df,useCacheRefresh:x_},xA={readContext:hn,use:qu,useCallback:v_,useContext:hn,useEffect:m_,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:p_,useMemo:b_,useReducer:Mf,useRef:d_,useState:function(){return Mf(nr)},useDebugValue:Lf,useDeferredValue:function(n,i){var o=jt();return ot===null?zf(o,n,i):w_(o,ot.memoizedState,n,i)},useTransition:function(){var n=Mf(nr)[0],i=jt().memoizedState;return[typeof n=="boolean"?n:Ql(n),i]},useSyncExternalStore:Wy,useId:A_,useHostTransitionStatus:qf,useFormState:h_,useActionState:h_,useOptimistic:function(n,i){var o=jt();return ot!==null?n_(o,ot,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Df,useCacheRefresh:x_},uo=null,Xl=0;function Qu(n){var i=Xl;return Xl+=1,uo===null&&(uo=[]),qy(uo,n,i)}function Jl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Yu(n,i){throw i.$$typeof===E?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function O_(n){var i=n._init;return i(n._payload)}function j_(n){function i(z,V){if(n){var q=z.deletions;q===null?(z.deletions=[V],z.flags|=16):q.push(V)}}function o(z,V){if(!n)return null;for(;V!==null;)i(z,V),V=V.sibling;return null}function c(z){for(var V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function d(z,V){return z=Xs(z,V),z.index=0,z.sibling=null,z}function g(z,V,q){return z.index=q,n?(q=z.alternate,q!==null?(q=q.index,q<V?(z.flags|=67108866,V):q):(z.flags|=67108866,V)):(z.flags|=1048576,V)}function w(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,V,q,J){return V===null||V.tag!==6?(V=uf(q,z.mode,J),V.return=z,V):(V=d(V,q),V.return=z,V)}function O(z,V,q,J){var ge=q.type;return ge===U?W(z,V,q.props.children,J,q.key):V!==null&&(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&O_(ge)===V.type)?(V=d(V,q.props),Jl(V,q),V.return=z,V):(V=ku(q.type,q.key,q.props,null,z.mode,J),Jl(V,q),V.return=z,V)}function H(z,V,q,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=hf(q,z.mode,J),V.return=z,V):(V=d(V,q.children||[]),V.return=z,V)}function W(z,V,q,J,ge){return V===null||V.tag!==7?(V=ea(q,z.mode,J,ge),V.return=z,V):(V=d(V,q),V.return=z,V)}function ee(z,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=uf(""+V,z.mode,q),V.return=z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return q=ku(V.type,V.key,V.props,null,z.mode,q),Jl(q,V),q.return=z,q;case k:return V=hf(V,z.mode,q),V.return=z,V;case x:var J=V._init;return V=J(V._payload),ee(z,V,q)}if(Le(V)||P(V))return V=ea(V,z.mode,q,null),V.return=z,V;if(typeof V.then=="function")return ee(z,Qu(V),q);if(V.$$typeof===Y)return ee(z,Pu(z,V),q);Yu(z,V)}return null}function G(z,V,q,J){var ge=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ge!==null?null:T(z,V,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===ge?O(z,V,q,J):null;case k:return q.key===ge?H(z,V,q,J):null;case x:return ge=q._init,q=ge(q._payload),G(z,V,q,J)}if(Le(q)||P(q))return ge!==null?null:W(z,V,q,J,null);if(typeof q.then=="function")return G(z,V,Qu(q),J);if(q.$$typeof===Y)return G(z,V,Pu(z,q),J);Yu(z,q)}return null}function K(z,V,q,J,ge){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(q)||null,T(V,z,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return z=z.get(J.key===null?q:J.key)||null,O(V,z,J,ge);case k:return z=z.get(J.key===null?q:J.key)||null,H(V,z,J,ge);case x:var qe=J._init;return J=qe(J._payload),K(z,V,q,J,ge)}if(Le(J)||P(J))return z=z.get(q)||null,W(V,z,J,ge,null);if(typeof J.then=="function")return K(z,V,q,Qu(J),ge);if(J.$$typeof===Y)return K(z,V,q,Pu(V,J),ge);Yu(V,J)}return null}function xe(z,V,q,J){for(var ge=null,qe=null,_e=V,Se=V=0,Wt=null;_e!==null&&Se<q.length;Se++){_e.index>Se?(Wt=_e,_e=null):Wt=_e.sibling;var Je=G(z,_e,q[Se],J);if(Je===null){_e===null&&(_e=Wt);break}n&&_e&&Je.alternate===null&&i(z,_e),V=g(Je,V,Se),qe===null?ge=Je:qe.sibling=Je,qe=Je,_e=Wt}if(Se===q.length)return o(z,_e),et&&na(z,Se),ge;if(_e===null){for(;Se<q.length;Se++)_e=ee(z,q[Se],J),_e!==null&&(V=g(_e,V,Se),qe===null?ge=_e:qe.sibling=_e,qe=_e);return et&&na(z,Se),ge}for(_e=c(_e);Se<q.length;Se++)Wt=K(_e,z,Se,q[Se],J),Wt!==null&&(n&&Wt.alternate!==null&&_e.delete(Wt.key===null?Se:Wt.key),V=g(Wt,V,Se),qe===null?ge=Wt:qe.sibling=Wt,qe=Wt);return n&&_e.forEach(function(ni){return i(z,ni)}),et&&na(z,Se),ge}function Te(z,V,q,J){if(q==null)throw Error(s(151));for(var ge=null,qe=null,_e=V,Se=V=0,Wt=null,Je=q.next();_e!==null&&!Je.done;Se++,Je=q.next()){_e.index>Se?(Wt=_e,_e=null):Wt=_e.sibling;var ni=G(z,_e,Je.value,J);if(ni===null){_e===null&&(_e=Wt);break}n&&_e&&ni.alternate===null&&i(z,_e),V=g(ni,V,Se),qe===null?ge=ni:qe.sibling=ni,qe=ni,_e=Wt}if(Je.done)return o(z,_e),et&&na(z,Se),ge;if(_e===null){for(;!Je.done;Se++,Je=q.next())Je=ee(z,Je.value,J),Je!==null&&(V=g(Je,V,Se),qe===null?ge=Je:qe.sibling=Je,qe=Je);return et&&na(z,Se),ge}for(_e=c(_e);!Je.done;Se++,Je=q.next())Je=K(_e,z,Se,Je.value,J),Je!==null&&(n&&Je.alternate!==null&&_e.delete(Je.key===null?Se:Je.key),V=g(Je,V,Se),qe===null?ge=Je:qe.sibling=Je,qe=Je);return n&&_e.forEach(function(Rx){return i(z,Rx)}),et&&na(z,Se),ge}function ct(z,V,q,J){if(typeof q=="object"&&q!==null&&q.type===U&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var ge=q.key;V!==null;){if(V.key===ge){if(ge=q.type,ge===U){if(V.tag===7){o(z,V.sibling),J=d(V,q.props.children),J.return=z,z=J;break e}}else if(V.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===x&&O_(ge)===V.type){o(z,V.sibling),J=d(V,q.props),Jl(J,q),J.return=z,z=J;break e}o(z,V);break}else i(z,V);V=V.sibling}q.type===U?(J=ea(q.props.children,z.mode,J,q.key),J.return=z,z=J):(J=ku(q.type,q.key,q.props,null,z.mode,J),Jl(J,q),J.return=z,z=J)}return w(z);case k:e:{for(ge=q.key;V!==null;){if(V.key===ge)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){o(z,V.sibling),J=d(V,q.children||[]),J.return=z,z=J;break e}else{o(z,V);break}else i(z,V);V=V.sibling}J=hf(q,z.mode,J),J.return=z,z=J}return w(z);case x:return ge=q._init,q=ge(q._payload),ct(z,V,q,J)}if(Le(q))return xe(z,V,q,J);if(P(q)){if(ge=P(q),typeof ge!="function")throw Error(s(150));return q=ge.call(q),Te(z,V,q,J)}if(typeof q.then=="function")return ct(z,V,Qu(q),J);if(q.$$typeof===Y)return ct(z,V,Pu(z,q),J);Yu(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(o(z,V.sibling),J=d(V,q),J.return=z,z=J):(o(z,V),J=uf(q,z.mode,J),J.return=z,z=J),w(z)):o(z,V)}return function(z,V,q,J){try{Xl=0;var ge=ct(z,V,q,J);return uo=null,ge}catch(_e){if(_e===ql||_e===Vu)throw _e;var qe=On(29,_e,null,z.mode);return qe.lanes=J,qe.return=z,qe}finally{}}}var ho=j_(!0),D_=j_(!1),Yn=X(null),Is=null;function Br(n){var i=n.alternate;oe(qt,qt.current&1),oe(Yn,n),Is===null&&(i===null||ao.current!==null||i.memoizedState!==null)&&(Is=n)}function P_(n){if(n.tag===22){if(oe(qt,qt.current),oe(Yn,n),Is===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Is=n)}}else qr()}function qr(){oe(qt,qt.current),oe(Yn,Yn.current)}function sr(n){he(Yn),Is===n&&(Is=null),he(qt)}var qt=X(0);function Wu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||jm(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Hf(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Ff={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=Mn(),d=Ur(c);d.payload=i,o!=null&&(d.callback=o),i=Lr(n,d,c),i!==null&&(Vn(i,n,c),Hl(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=Mn(),d=Ur(c);d.tag=1,d.payload=i,o!=null&&(d.callback=o),i=Lr(n,d,c),i!==null&&(Vn(i,n,c),Hl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Mn(),c=Ur(o);c.tag=2,i!=null&&(c.callback=i),i=Lr(n,c,o),i!==null&&(Vn(i,n,o),Hl(i,n,o))}};function M_(n,i,o,c,d,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):i.prototype&&i.prototype.isPureReactComponent?!Dl(o,c)||!Dl(d,g):!0}function V_(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Ff.enqueueReplaceState(i,i.state,null)}function ca(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}var Xu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function U_(n){Xu(n)}function L_(n){console.error(n)}function z_(n){Xu(n)}function Ju(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function B_(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Gf(n,i,o){return o=Ur(o),o.tag=3,o.payload={element:null},o.callback=function(){Ju(n,i)},o}function q_(n){return n=Ur(n),n.tag=3,n}function $_(n,i,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;n.payload=function(){return d(g)},n.callback=function(){B_(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){B_(i,o,c),typeof d!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function RA(n,i,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Ll(i,o,d,!0),o=Yn.current,o!==null){switch(o.tag){case 13:return Is===null?pm():o.alternate===null&&Tt===0&&(Tt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===wf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),_m(n,c,d)),!1;case 22:return o.flags|=65536,c===wf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),_m(n,c,d)),!1}throw Error(s(435,o.tag))}return _m(n,c,d),pm(),!1}if(et)return i=Yn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,c!==mf&&(n=Error(s(422),{cause:c}),Ul(Fn(n,o)))):(c!==mf&&(i=Error(s(423),{cause:c}),Ul(Fn(i,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=Fn(c,o),d=Gf(n.stateNode,c,d),Sf(n,d),Tt!==4&&(Tt=2)),!1;var g=Error(s(520),{cause:c});if(g=Fn(g,o),ic===null?ic=[g]:ic.push(g),Tt!==4&&(Tt=2),i===null)return!0;c=Fn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=Gf(o.stateNode,c,n),Sf(o,n),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Qr===null||!Qr.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=q_(d),$_(d,n,o,c),Sf(o,d),!1}o=o.return}while(o!==null);return!1}var H_=Error(s(461)),Qt=!1;function tn(n,i,o,c){i.child=n===null?D_(i,null,o,c):ho(i,n.child,o,c)}function F_(n,i,o,c,d){o=o.render;var g=i.ref;if("ref"in c){var w={};for(var T in c)T!=="ref"&&(w[T]=c[T])}else w=c;return aa(i),c=If(n,i,o,w,g,d),T=Nf(),n!==null&&!Qt?(kf(n,i,d),rr(n,i,d)):(et&&T&&df(i),i.flags|=1,tn(n,i,c,d),i.child)}function G_(n,i,o,c,d){if(n===null){var g=o.type;return typeof g=="function"&&!cf(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,K_(n,i,g,c,d)):(n=ku(o.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!em(n,d)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:Dl,o(w,c)&&n.ref===i.ref)return rr(n,i,d)}return i.flags|=1,n=Xs(g,c),n.ref=i.ref,n.return=i,i.child=n}function K_(n,i,o,c,d){if(n!==null){var g=n.memoizedProps;if(Dl(g,c)&&n.ref===i.ref)if(Qt=!1,i.pendingProps=c=g,em(n,d))(n.flags&131072)!==0&&(Qt=!0);else return i.lanes=n.lanes,rr(n,i,d)}return Kf(n,i,o,c,d)}function Q_(n,i,o){var c=i.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,n!==null){for(d=i.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;i.childLanes=g&~c}else i.childLanes=0,i.child=null;return Y_(n,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(i,g!==null?g.cachePool:null),g!==null?Ky(i,g):xf(),P_(i);else return i.lanes=i.childLanes=536870912,Y_(n,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(Mu(i,g.cachePool),Ky(i,g),qr(),i.memoizedState=null):(n!==null&&Mu(i,null),xf(),qr());return tn(n,i,d,o),i.child}function Y_(n,i,o,c){var d=bf();return d=d===null?null:{parent:Bt._currentValue,pool:d},i.memoizedState={baseLanes:o,cachePool:d},n!==null&&Mu(i,null),xf(),P_(i),n!==null&&Ll(n,i,c,!0),null}function Zu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Kf(n,i,o,c,d){return aa(i),o=If(n,i,o,c,void 0,d),c=Nf(),n!==null&&!Qt?(kf(n,i,d),rr(n,i,d)):(et&&c&&df(i),i.flags|=1,tn(n,i,o,d),i.child)}function W_(n,i,o,c,d,g){return aa(i),i.updateQueue=null,o=Yy(i,c,o,d),Qy(n),c=Nf(),n!==null&&!Qt?(kf(n,i,g),rr(n,i,g)):(et&&c&&df(i),i.flags|=1,tn(n,i,o,g),i.child)}function X_(n,i,o,c,d){if(aa(i),i.stateNode===null){var g=to,w=o.contextType;typeof w=="object"&&w!==null&&(g=hn(w)),g=new o(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ff,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},Ef(i),w=o.contextType,g.context=typeof w=="object"&&w!==null?hn(w):to,g.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Hf(i,o,w,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Ff.enqueueReplaceState(g,g.state,null),Gl(i,c,g,d),Fl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var T=i.memoizedProps,O=ca(o,T);g.props=O;var H=g.context,W=o.contextType;w=to,typeof W=="object"&&W!==null&&(w=hn(W));var ee=o.getDerivedStateFromProps;W=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||H!==w)&&V_(i,g,c,w),Vr=!1;var G=i.memoizedState;g.state=G,Gl(i,c,g,d),Fl(),H=i.memoizedState,T||G!==H||Vr?(typeof ee=="function"&&(Hf(i,o,ee,c),H=i.memoizedState),(O=Vr||M_(i,o,O,c,G,H,w))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=H),g.props=c,g.state=H,g.context=w,c=O):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,Tf(n,i),w=i.memoizedProps,W=ca(o,w),g.props=W,ee=i.pendingProps,G=g.context,H=o.contextType,O=to,typeof H=="object"&&H!==null&&(O=hn(H)),T=o.getDerivedStateFromProps,(H=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ee||G!==O)&&V_(i,g,c,O),Vr=!1,G=i.memoizedState,g.state=G,Gl(i,c,g,d),Fl();var K=i.memoizedState;w!==ee||G!==K||Vr||n!==null&&n.dependencies!==null&&Du(n.dependencies)?(typeof T=="function"&&(Hf(i,o,T,c),K=i.memoizedState),(W=Vr||M_(i,o,W,c,G,K,O)||n!==null&&n.dependencies!==null&&Du(n.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,O)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=K),g.props=c,g.state=K,g.context=O,c=W):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,Zu(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=ho(i,n.child,null,d),i.child=ho(i,null,o,d)):tn(n,i,o,d),i.memoizedState=g.state,n=i.child):n=rr(n,i,d),n}function J_(n,i,o,c){return Vl(),i.flags|=256,tn(n,i,o,c),i.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(n){return{baseLanes:n,cachePool:Ly()}}function Wf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Wn),n}function Z_(n,i,o){var c=i.pendingProps,d=!1,g=(i.flags&128)!==0,w;if((w=g)||(w=n!==null&&n.memoizedState===null?!1:(qt.current&2)!==0),w&&(d=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(et){if(d?Br(i):qr(),et){var T=Et,O;if(O=T){e:{for(O=T,T=Cs;O.nodeType!==8;){if(!T){T=null;break e}if(O=cs(O.nextSibling),O===null){T=null;break e}}T=O}T!==null?(i.memoizedState={dehydrated:T,treeContext:ta!==null?{id:Js,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},O=On(18,null,null,0),O.stateNode=T,O.return=i,i.child=O,wn=i,Et=null,O=!0):O=!1}O||ra(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return jm(T)?i.lanes=32:i.lanes=536870912,null;sr(i)}return T=c.children,c=c.fallback,d?(qr(),d=i.mode,T=eh({mode:"hidden",children:T},d),c=ea(c,d,o,null),T.return=i,c.return=i,T.sibling=c,i.child=T,d=i.child,d.memoizedState=Yf(o),d.childLanes=Wf(n,w,o),i.memoizedState=Qf,c):(Br(i),Xf(i,T))}if(O=n.memoizedState,O!==null&&(T=O.dehydrated,T!==null)){if(g)i.flags&256?(Br(i),i.flags&=-257,i=Jf(n,i,o)):i.memoizedState!==null?(qr(),i.child=n.child,i.flags|=128,i=null):(qr(),d=c.fallback,T=i.mode,c=eh({mode:"visible",children:c.children},T),d=ea(d,T,o,null),d.flags|=2,c.return=i,d.return=i,c.sibling=d,i.child=c,ho(i,n.child,null,o),c=i.child,c.memoizedState=Yf(o),c.childLanes=Wf(n,w,o),i.memoizedState=Qf,i=d);else if(Br(i),jm(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var H=w.dgst;w=H,c=Error(s(419)),c.stack="",c.digest=w,Ul({value:c,source:null,stack:null}),i=Jf(n,i,o)}else if(Qt||Ll(n,i,o,!1),w=(o&n.childLanes)!==0,Qt||w){if(w=ft,w!==null&&(c=o&-o,c=(c&42)!==0?1:yl(c),c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==O.retryLane))throw O.retryLane=c,eo(n,c),Vn(w,n,c),H_;T.data==="$?"||pm(),i=Jf(n,i,o)}else T.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,Et=cs(T.nextSibling),wn=i,et=!0,sa=null,Cs=!1,n!==null&&(Kn[Qn++]=Js,Kn[Qn++]=Zs,Kn[Qn++]=ta,Js=n.id,Zs=n.overflow,ta=i),i=Xf(i,c.children),i.flags|=4096);return i}return d?(qr(),d=c.fallback,T=i.mode,O=n.child,H=O.sibling,c=Xs(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,H!==null?d=Xs(H,d):(d=ea(d,T,o,null),d.flags|=2),d.return=i,c.return=i,c.sibling=d,i.child=c,c=d,d=i.child,T=n.child.memoizedState,T===null?T=Yf(o):(O=T.cachePool,O!==null?(H=Bt._currentValue,O=O.parent!==H?{parent:H,pool:H}:O):O=Ly(),T={baseLanes:T.baseLanes|o,cachePool:O}),d.memoizedState=T,d.childLanes=Wf(n,w,o),i.memoizedState=Qf,c):(Br(i),o=n.child,n=o.sibling,o=Xs(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function Xf(n,i){return i=eh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function eh(n,i){return n=On(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Jf(n,i,o){return ho(i,n.child,null,o),n=Xf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function ev(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),pf(n.return,i,o)}function Zf(n,i,o,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=d)}function tv(n,i,o){var c=i.pendingProps,d=c.revealOrder,g=c.tail;if(tn(n,i,c.children,o),c=qt.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ev(n,o,i);else if(n.tag===19)ev(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(oe(qt,c),d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&Wu(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),Zf(i,!1,d,o,g);break;case"backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Wu(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Zf(i,!0,o,null,g);break;case"together":Zf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function rr(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Kr|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Ll(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=Xs(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Xs(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function em(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Du(n)))}function CA(n,i,o){switch(i.tag){case 3:Ze(i,i.stateNode.containerInfo),Mr(i,Bt,n.memoizedState.cache),Vl();break;case 27:case 5:ys(i);break;case 4:Ze(i,i.stateNode.containerInfo);break;case 10:Mr(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Br(i),i.flags|=128,null):(o&i.child.childLanes)!==0?Z_(n,i,o):(Br(i),n=rr(n,i,o),n!==null?n.sibling:null);Br(i);break;case 19:var d=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Ll(n,i,o,!1),c=(o&i.childLanes)!==0),d){if(c)return tv(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(qt,qt.current),c)break;return null;case 22:case 23:return i.lanes=0,Q_(n,i,o);case 24:Mr(i,Bt,n.memoizedState.cache)}return rr(n,i,o)}function nv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Qt=!0;else{if(!em(n,o)&&(i.flags&128)===0)return Qt=!1,CA(n,i,o);Qt=(n.flags&131072)!==0}else Qt=!1,et&&(i.flags&1048576)!==0&&Oy(i,ju,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,d=c._init;if(c=d(c._payload),i.type=c,typeof c=="function")cf(c)?(n=ca(c,n),i.tag=1,i=X_(null,i,c,n,o)):(i.tag=0,i=Kf(null,i,c,n,o));else{if(c!=null){if(d=c.$$typeof,d===le){i.tag=11,i=F_(null,i,c,n,o);break e}else if(d===I){i.tag=14,i=G_(null,i,c,n,o);break e}}throw i=Ye(c)||c,Error(s(306,i,""))}}return i;case 0:return Kf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,d=ca(c,i.pendingProps),X_(n,i,c,d,o);case 3:e:{if(Ze(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var g=i.memoizedState;d=g.element,Tf(n,i),Gl(i,c,null,o);var w=i.memoizedState;if(c=w.cache,Mr(i,Bt,c),c!==g.cache&&yf(i,[Bt],o,!0),Fl(),c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=J_(n,i,c,o);break e}else if(c!==d){d=Fn(Error(s(424)),i),Ul(d),i=J_(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Et=cs(n.firstChild),wn=i,et=!0,sa=null,Cs=!0,o=D_(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Vl(),c===d){i=rr(n,i,o);break e}tn(n,i,c,o)}i=i.child}return i;case 26:return Zu(n,i),n===null?(o=a0(i.type,null,i.pendingProps,null))?i.memoizedState=o:et||(o=i.type,n=i.pendingProps,c=mh(Ee.current).createElement(o),c[At]=i,c[en]=n,sn(c,o,n),xt(c),i.stateNode=c):i.memoizedState=a0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ys(i),n===null&&et&&(c=i.stateNode=s0(i.type,i.pendingProps,Ee.current),wn=i,Cs=!0,d=Et,Xr(i.type)?(Dm=d,Et=cs(c.firstChild)):Et=d),tn(n,i,i.pendingProps.children,o),Zu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&et&&((d=c=Et)&&(c=nx(c,i.type,i.pendingProps,Cs),c!==null?(i.stateNode=c,wn=i,Et=cs(c.firstChild),Cs=!1,d=!0):d=!1),d||ra(i)),ys(i),d=i.type,g=i.pendingProps,w=n!==null?n.memoizedProps:null,c=g.children,Nm(d,g)?c=null:w!==null&&Nm(d,w)&&(i.flags|=32),i.memoizedState!==null&&(d=If(n,i,bA,null,null,o),mc._currentValue=d),Zu(n,i),tn(n,i,c,o),i.child;case 6:return n===null&&et&&((n=o=Et)&&(o=sx(o,i.pendingProps,Cs),o!==null?(i.stateNode=o,wn=i,Et=null,n=!0):n=!1),n||ra(i)),null;case 13:return Z_(n,i,o);case 4:return Ze(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=ho(i,null,c,o):tn(n,i,c,o),i.child;case 11:return F_(n,i,i.type,i.pendingProps,o);case 7:return tn(n,i,i.pendingProps,o),i.child;case 8:return tn(n,i,i.pendingProps.children,o),i.child;case 12:return tn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Mr(i,i.type,c.value),tn(n,i,c.children,o),i.child;case 9:return d=i.type._context,c=i.pendingProps.children,aa(i),d=hn(d),c=c(d),i.flags|=1,tn(n,i,c,o),i.child;case 14:return G_(n,i,i.type,i.pendingProps,o);case 15:return K_(n,i,i.type,i.pendingProps,o);case 19:return tv(n,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},n===null?(o=eh(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Xs(n.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return Q_(n,i,o);case 24:return aa(i),c=hn(Bt),n===null?(d=bf(),d===null&&(d=ft,g=_f(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),i.memoizedState={parent:c,cache:d},Ef(i),Mr(i,Bt,d)):((n.lanes&o)!==0&&(Tf(n,i),Gl(i,null,null,o),Fl()),d=n.memoizedState,g=i.memoizedState,d.parent!==c?(d={parent:c,cache:c},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Mr(i,Bt,c)):(c=g.cache,Mr(i,Bt,c),c!==d.cache&&yf(i,[Bt],o,!0))),tn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ir(n){n.flags|=4}function sv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!h0(i)){if(i=Yn.current,i!==null&&((We&4194048)===We?Is!==null:(We&62914560)!==We&&(We&536870912)===0||i!==Is))throw $l=wf,zy;n.flags|=8192}}function th(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Tr():536870912,n.lanes|=i,po|=i)}function Zl(n,i){if(!et)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function bt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function IA(n,i,o){var c=i.pendingProps;switch(ff(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(i),null;case 1:return bt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),tr(Bt),ln(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ml(i)?ir(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Py())),bt(i),null;case 26:return o=i.memoizedState,n===null?(ir(i),o!==null?(bt(i),sv(i,o)):(bt(i),i.flags&=-16777217)):o?o!==n.memoizedState?(ir(i),bt(i),sv(i,o)):(bt(i),i.flags&=-16777217):(n.memoizedProps!==c&&ir(i),bt(i),i.flags&=-16777217),null;case 27:_s(i),o=Ee.current;var d=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ir(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return bt(i),null}n=de.current,Ml(i)?jy(i):(n=s0(d,c,o),i.stateNode=n,ir(i))}return bt(i),null;case 5:if(_s(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ir(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return bt(i),null}if(n=de.current,Ml(i))jy(i);else{switch(d=mh(Ee.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?d.createElement(o,{is:c.is}):d.createElement(o)}}n[At]=i,n[en]=c;e:for(d=i.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break e;for(;d.sibling===null;){if(d.return===null||d.return===i)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i.stateNode=n;e:switch(sn(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ir(i)}}return bt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ir(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=Ee.current,Ml(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,d=wn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[At]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||Wv(n.nodeValue,o)),n||ra(i)}else n=mh(n).createTextNode(c),n[At]=i,i.stateNode=n}return bt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ml(i),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[At]=i}else Vl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;bt(i),d=!1}else d=Py(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(sr(i),i):(sr(i),null)}if(sr(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=i.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),th(i,i.updateQueue),bt(i),null;case 4:return ln(),n===null&&Am(i.stateNode.containerInfo),bt(i),null;case 10:return tr(i.type),bt(i),null;case 19:if(he(qt),d=i.memoizedState,d===null)return bt(i),null;if(c=(i.flags&128)!==0,g=d.rendering,g===null)if(c)Zl(d,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Wu(n),g!==null){for(i.flags|=128,Zl(d,!1),n=g.updateQueue,i.updateQueue=n,th(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)ky(o,n),o=o.sibling;return oe(qt,qt.current&1|2),i.child}n=n.sibling}d.tail!==null&&En()>rh&&(i.flags|=128,c=!0,Zl(d,!1),i.lanes=4194304)}else{if(!c)if(n=Wu(g),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,th(i,n),Zl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!et)return bt(i),null}else 2*En()-d.renderingStartTime>rh&&o!==536870912&&(i.flags|=128,c=!0,Zl(d,!1),i.lanes=4194304);d.isBackwards?(g.sibling=i.child,i.child=g):(n=d.last,n!==null?n.sibling=g:i.child=g,d.last=g)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=En(),i.sibling=null,n=qt.current,oe(qt,c?n&1|2:n&1),i):(bt(i),null);case 22:case 23:return sr(i),Rf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(bt(i),i.subtreeFlags&6&&(i.flags|=8192)):bt(i),o=i.updateQueue,o!==null&&th(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&he(oa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),tr(Bt),bt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function NA(n,i){switch(ff(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return tr(Bt),ln(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return _s(i),null;case 13:if(sr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Vl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he(qt),null;case 4:return ln(),null;case 10:return tr(i.type),null;case 22:case 23:return sr(i),Rf(),n!==null&&he(oa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return tr(Bt),null;case 25:return null;default:return null}}function rv(n,i){switch(ff(i),i.tag){case 3:tr(Bt),ln();break;case 26:case 27:case 5:_s(i);break;case 4:ln();break;case 13:sr(i);break;case 19:he(qt);break;case 10:tr(i.type);break;case 22:case 23:sr(i),Rf(),n!==null&&he(oa);break;case 24:tr(Bt)}}function ec(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&n)===n){c=void 0;var g=o.create,w=o.inst;c=g(),w.destroy=c}o=o.next}while(o!==d)}}catch(T){ht(i,i.return,T)}}function $r(n,i,o){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){var w=c.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,d=i;var O=o,H=T;try{H()}catch(W){ht(d,O,W)}}}c=c.next}while(c!==g)}}catch(W){ht(i,i.return,W)}}function iv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Gy(i,o)}catch(c){ht(n,n.return,c)}}}function av(n,i,o){o.props=ca(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ht(n,i,c)}}function tc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(d){ht(n,i,d)}}function Ns(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){ht(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ht(n,i,d)}else o.current=null}function ov(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){ht(n,n.return,d)}}function tm(n,i,o){try{var c=n.stateNode;XA(c,n.type,o,i),c[en]=i}catch(d){ht(n,n.return,d)}}function lv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xr(n.type)||n.tag===4}function nm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sm(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=fh));else if(c!==4&&(c===27&&Xr(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(sm(n,i,o),n=n.sibling;n!==null;)sm(n,i,o),n=n.sibling}function nh(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Xr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(nh(n,i,o),n=n.sibling;n!==null;)nh(n,i,o),n=n.sibling}function cv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);sn(i,c,o),i[At]=n,i[en]=o}catch(g){ht(n,n.return,g)}}var ar=!1,It=!1,rm=!1,uv=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function kA(n,i){if(n=n.containerInfo,Cm=bh,n=wy(n),tf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var w=0,T=-1,O=-1,H=0,W=0,ee=n,G=null;t:for(;;){for(var K;ee!==o||d!==0&&ee.nodeType!==3||(T=w+d),ee!==g||c!==0&&ee.nodeType!==3||(O=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(K=ee.firstChild)!==null;)G=ee,ee=K;for(;;){if(ee===n)break t;if(G===o&&++H===d&&(T=w),G===g&&++W===c&&(O=w),(K=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=K}o=T===-1||O===-1?null:{start:T,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Im={focusedElem:n,selectionRange:o},bh=!1,Yt=i;Yt!==null;)if(i=Yt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Yt=n;else for(;Yt!==null;){switch(i=Yt,g=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=i,d=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var xe=ca(o.type,d,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(xe,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Te){ht(o,o.return,Te)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Om(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Om(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Yt=n;break}Yt=i.return}}function hv(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Hr(n,o),c&4&&ec(5,o);break;case 1:if(Hr(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){ht(o,o.return,w)}else{var d=ca(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){ht(o,o.return,w)}}c&64&&iv(o),c&512&&tc(o,o.return);break;case 3:if(Hr(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Gy(n,i)}catch(w){ht(o,o.return,w)}}break;case 27:i===null&&c&4&&cv(o);case 26:case 5:Hr(n,o),i===null&&c&4&&ov(o),c&512&&tc(o,o.return);break;case 12:Hr(n,o);break;case 13:Hr(n,o),c&4&&mv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=zA.bind(null,o),rx(n,o))));break;case 22:if(c=o.memoizedState!==null||ar,!c){i=i!==null&&i.memoizedState!==null||It,d=ar;var g=It;ar=c,(It=i)&&!g?Fr(n,o,(o.subtreeFlags&8772)!==0):Hr(n,o),ar=d,It=g}break;case 30:break;default:Hr(n,o)}}function dv(n){var i=n.alternate;i!==null&&(n.alternate=null,dv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&La(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var _t=null,Sn=!1;function or(n,i,o){for(o=o.child;o!==null;)fv(n,i,o),o=o.sibling}function fv(n,i,o){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(br,o)}catch{}switch(o.tag){case 26:It||Ns(o,i),or(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:It||Ns(o,i);var c=_t,d=Sn;Xr(o.type)&&(_t=o.stateNode,Sn=!1),or(n,i,o),uc(o.stateNode),_t=c,Sn=d;break;case 5:It||Ns(o,i);case 6:if(c=_t,d=Sn,_t=null,or(n,i,o),_t=c,Sn=d,_t!==null)if(Sn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(o.stateNode)}catch(g){ht(o,i,g)}else try{_t.removeChild(o.stateNode)}catch(g){ht(o,i,g)}break;case 18:_t!==null&&(Sn?(n=_t,t0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_c(n)):t0(_t,o.stateNode));break;case 4:c=_t,d=Sn,_t=o.stateNode.containerInfo,Sn=!0,or(n,i,o),_t=c,Sn=d;break;case 0:case 11:case 14:case 15:It||$r(2,o,i),It||$r(4,o,i),or(n,i,o);break;case 1:It||(Ns(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&av(o,i,c)),or(n,i,o);break;case 21:or(n,i,o);break;case 22:It=(c=It)||o.memoizedState!==null,or(n,i,o),It=c;break;default:or(n,i,o)}}function mv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_c(n)}catch(o){ht(i,i.return,o)}}function OA(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new uv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new uv),i;default:throw Error(s(435,n.tag))}}function im(n,i){var o=OA(n);i.forEach(function(c){var d=BA.bind(null,n,c);o.has(c)||(o.add(c),c.then(d,d))})}function jn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],g=n,w=i,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(Xr(T.type)){_t=T.stateNode,Sn=!1;break e}break;case 5:_t=T.stateNode,Sn=!1;break e;case 3:case 4:_t=T.stateNode.containerInfo,Sn=!0;break e}T=T.return}if(_t===null)throw Error(s(160));fv(g,w,d),_t=null,Sn=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)gv(i,n),i=i.sibling}var ls=null;function gv(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:jn(i,n),Dn(n),c&4&&($r(3,n,n.return),ec(3,n),$r(5,n,n.return));break;case 1:jn(i,n),Dn(n),c&512&&(It||o===null||Ns(o,o.return)),c&64&&ar&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=ls;if(jn(i,n),Dn(n),c&512&&(It||o===null||Ns(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[xr]||g[At]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),sn(g,c,o),g[At]=n,xt(g),c=g;break e;case"link":var w=c0("link","href",d).get(c+(o.href||""));if(w){for(var T=0;T<w.length;T++)if(g=w[T],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(T,1);break t}}g=d.createElement(c),sn(g,c,o),d.head.appendChild(g);break;case"meta":if(w=c0("meta","content",d).get(c+(o.content||""))){for(T=0;T<w.length;T++)if(g=w[T],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(T,1);break t}}g=d.createElement(c),sn(g,c,o),d.head.appendChild(g);break;default:throw Error(s(468,c))}g[At]=n,xt(g),c=g}n.stateNode=c}else u0(d,n.type,n.stateNode);else n.stateNode=l0(d,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?u0(d,n.type,n.stateNode):l0(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&tm(n,n.memoizedProps,o.memoizedProps)}break;case 27:jn(i,n),Dn(n),c&512&&(It||o===null||Ns(o,o.return)),o!==null&&c&4&&tm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(jn(i,n),Dn(n),c&512&&(It||o===null||Ns(o,o.return)),n.flags&32){d=n.stateNode;try{$n(d,"")}catch(K){ht(n,n.return,K)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,tm(n,d,o!==null?o.memoizedProps:d)),c&1024&&(rm=!0);break;case 6:if(jn(i,n),Dn(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(K){ht(n,n.return,K)}}break;case 3:if(yh=null,d=ls,ls=gh(i.containerInfo),jn(i,n),ls=d,Dn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{_c(i.containerInfo)}catch(K){ht(n,n.return,K)}rm&&(rm=!1,pv(n));break;case 4:c=ls,ls=gh(n.stateNode.containerInfo),jn(i,n),Dn(n),ls=c;break;case 12:jn(i,n),Dn(n);break;case 13:jn(i,n),Dn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hm=En()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,im(n,c)));break;case 22:d=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=ar,W=It;if(ar=H||d,It=W||O,jn(i,n),It=W,ar=H,Dn(n),c&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(o===null||O||ar||It||ua(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){O=o=i;try{if(g=O.stateNode,d)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=O.stateNode;var ee=O.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){ht(O,O.return,K)}}}else if(i.tag===6){if(o===null){O=i;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(K){ht(O,O.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,im(n,o))));break;case 19:jn(i,n),Dn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,im(n,c)));break;case 30:break;case 21:break;default:jn(i,n),Dn(n)}}function Dn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(lv(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var d=o.stateNode,g=nm(n);nh(n,g,d);break;case 5:var w=o.stateNode;o.flags&32&&($n(w,""),o.flags&=-33);var T=nm(n);nh(n,T,w);break;case 3:case 4:var O=o.stateNode.containerInfo,H=nm(n);sm(n,H,O);break;default:throw Error(s(161))}}catch(W){ht(n,n.return,W)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function pv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;pv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Hr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)hv(n,i.alternate,i),i=i.sibling}function ua(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:$r(4,i,i.return),ua(i);break;case 1:Ns(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&av(i,i.return,o),ua(i);break;case 27:uc(i.stateNode);case 26:case 5:Ns(i,i.return),ua(i);break;case 22:i.memoizedState===null&&ua(i);break;case 30:ua(i);break;default:ua(i)}n=n.sibling}}function Fr(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,d=n,g=i,w=g.flags;switch(g.tag){case 0:case 11:case 15:Fr(d,g,o),ec(4,g);break;case 1:if(Fr(d,g,o),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){ht(c,c.return,H)}if(c=g,d=c.updateQueue,d!==null){var T=c.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)Fy(O[d],T)}catch(H){ht(c,c.return,H)}}o&&w&64&&iv(g),tc(g,g.return);break;case 27:cv(g);case 26:case 5:Fr(d,g,o),o&&c===null&&w&4&&ov(g),tc(g,g.return);break;case 12:Fr(d,g,o);break;case 13:Fr(d,g,o),o&&w&4&&mv(d,g);break;case 22:g.memoizedState===null&&Fr(d,g,o),tc(g,g.return);break;case 30:break;default:Fr(d,g,o)}i=i.sibling}}function am(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&zl(o))}function om(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&zl(n))}function ks(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yv(n,i,o,c),i=i.sibling}function yv(n,i,o,c){var d=i.flags;switch(i.tag){case 0:case 11:case 15:ks(n,i,o,c),d&2048&&ec(9,i);break;case 1:ks(n,i,o,c);break;case 3:ks(n,i,o,c),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&zl(n)));break;case 12:if(d&2048){ks(n,i,o,c),n=i.stateNode;try{var g=i.memoizedProps,w=g.id,T=g.onPostCommit;typeof T=="function"&&T(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){ht(i,i.return,O)}}else ks(n,i,o,c);break;case 13:ks(n,i,o,c);break;case 23:break;case 22:g=i.stateNode,w=i.alternate,i.memoizedState!==null?g._visibility&2?ks(n,i,o,c):nc(n,i):g._visibility&2?ks(n,i,o,c):(g._visibility|=2,fo(n,i,o,c,(i.subtreeFlags&10256)!==0)),d&2048&&am(w,i);break;case 24:ks(n,i,o,c),d&2048&&om(i.alternate,i);break;default:ks(n,i,o,c)}}function fo(n,i,o,c,d){for(d=d&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=n,w=i,T=o,O=c,H=w.flags;switch(w.tag){case 0:case 11:case 15:fo(g,w,T,O,d),ec(8,w);break;case 23:break;case 22:var W=w.stateNode;w.memoizedState!==null?W._visibility&2?fo(g,w,T,O,d):nc(g,w):(W._visibility|=2,fo(g,w,T,O,d)),d&&H&2048&&am(w.alternate,w);break;case 24:fo(g,w,T,O,d),d&&H&2048&&om(w.alternate,w);break;default:fo(g,w,T,O,d)}i=i.sibling}}function nc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,d=c.flags;switch(c.tag){case 22:nc(o,c),d&2048&&am(c.alternate,c);break;case 24:nc(o,c),d&2048&&om(c.alternate,c);break;default:nc(o,c)}i=i.sibling}}var sc=8192;function mo(n){if(n.subtreeFlags&sc)for(n=n.child;n!==null;)_v(n),n=n.sibling}function _v(n){switch(n.tag){case 26:mo(n),n.flags&sc&&n.memoizedState!==null&&yx(ls,n.memoizedState,n.memoizedProps);break;case 5:mo(n);break;case 3:case 4:var i=ls;ls=gh(n.stateNode.containerInfo),mo(n),ls=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=sc,sc=16777216,mo(n),sc=i):mo(n));break;default:mo(n)}}function vv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function rc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Yt=c,wv(c,n)}vv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)bv(n),n=n.sibling}function bv(n){switch(n.tag){case 0:case 11:case 15:rc(n),n.flags&2048&&$r(9,n,n.return);break;case 3:rc(n);break;case 12:rc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,sh(n)):rc(n);break;default:rc(n)}}function sh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Yt=c,wv(c,n)}vv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:$r(8,i,i.return),sh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,sh(i));break;default:sh(i)}n=n.sibling}}function wv(n,i){for(;Yt!==null;){var o=Yt;switch(o.tag){case 0:case 11:case 15:$r(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:zl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Yt=c;else e:for(o=n;Yt!==null;){c=Yt;var d=c.sibling,g=c.return;if(dv(c),c===o){Yt=null;break e}if(d!==null){d.return=g,Yt=d;break e}Yt=g}}}var jA={getCacheForType:function(n){var i=hn(Bt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},DA=typeof WeakMap=="function"?WeakMap:Map,rt=0,ft=null,$e=null,We=0,it=0,Pn=null,Gr=!1,go=!1,lm=!1,lr=0,Tt=0,Kr=0,ha=0,cm=0,Wn=0,po=0,ic=null,An=null,um=!1,hm=0,rh=1/0,ih=null,Qr=null,nn=0,Yr=null,yo=null,_o=0,dm=0,fm=null,Ev=null,ac=0,mm=null;function Mn(){if((rt&2)!==0&&We!==0)return We&-We;if(M.T!==null){var n=ro;return n!==0?n:wm()}return Hs()}function Tv(){Wn===0&&(Wn=(We&536870912)===0||et?pl():536870912);var n=Yn.current;return n!==null&&(n.flags|=32),Wn}function Vn(n,i,o){(n===ft&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(vo(n,0),Wr(n,We,Wn,!1)),St(n,o),((rt&2)===0||n!==ft)&&(n===ft&&((rt&2)===0&&(ha|=o),Tt===4&&Wr(n,We,Wn,!1)),Os(n))}function Sv(n,i,o){if((rt&6)!==0)throw Error(s(327));var c=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Er(n,i),d=c?VA(n,i):ym(n,i,!0),g=c;do{if(d===0){go&&!c&&Wr(n,i,0,!1);break}else{if(o=n.current.alternate,g&&!PA(o)){d=ym(n,i,!1),g=!1;continue}if(d===2){if(g=i,n.errorRecoveryDisabledLanes&g)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var T=n;d=ic;var O=T.current.memoizedState.isDehydrated;if(O&&(vo(T,w).flags|=256),w=ym(T,w,!1),w!==2){if(lm&&!O){T.errorRecoveryDisabledLanes|=g,ha|=g,d=4;break e}g=An,An=d,g!==null&&(An===null?An=g:An.push.apply(An,g))}d=w}if(g=!1,d!==2)continue}}if(d===1){vo(n,0),Wr(n,i,0,!0);break}e:{switch(c=n,g=d,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Wr(c,i,Wn,!Gr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=hm+300-En(),10<d)){if(Wr(c,i,Wn,!Gr),Bn(c,0,!0)!==0)break e;c.timeoutHandle=Zv(Av.bind(null,c,o,An,ih,um,i,Wn,ha,po,Gr,g,2,-0,0),d);break e}Av(c,o,An,ih,um,i,Wn,ha,po,Gr,g,0,-0,0)}}break}while(!0);Os(n)}function Av(n,i,o,c,d,g,w,T,O,H,W,ee,G,K){if(n.timeoutHandle=-1,ee=i.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(fc={stylesheets:null,count:0,unsuspend:px},_v(i),ee=_x(),ee!==null)){n.cancelPendingCommit=ee(Ov.bind(null,n,i,g,o,c,d,w,T,O,W,1,G,K)),Wr(n,g,w,!H);return}Ov(n,i,g,o,c,d,w,T,O)}function PA(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],g=d.getSnapshot;d=d.value;try{if(!kn(g(),d))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Wr(n,i,o,c){i&=~cm,i&=~ha,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var d=i;0<d;){var g=31-yn(d),w=1<<g;c[g]=-1,d&=~w}o!==0&&Sr(n,o,i)}function ah(){return(rt&6)===0?(oc(0),!1):!0}function gm(){if($e!==null){if(it===0)var n=$e.return;else n=$e,er=ia=null,Of(n),uo=null,Xl=0,n=$e;for(;n!==null;)rv(n.alternate,n),n=n.return;$e=null}}function vo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,ZA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),gm(),ft=n,$e=o=Xs(n.current,null),We=i,it=0,Pn=null,Gr=!1,go=Er(n,i),lm=!1,po=Wn=cm=ha=Kr=Tt=0,An=ic=null,um=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var d=31-yn(c),g=1<<d;i|=n[d],c&=~g}return lr=i,Cu(),o}function xv(n,i){ze=null,M.H=Ku,i===ql||i===Vu?(i=$y(),it=3):i===zy?(i=$y(),it=4):it=i===H_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pn=i,$e===null&&(Tt=1,Ju(n,Fn(i,n.current)))}function Rv(){var n=M.H;return M.H=Ku,n===null?Ku:n}function Cv(){var n=M.A;return M.A=jA,n}function pm(){Tt=4,Gr||(We&4194048)!==We&&Yn.current!==null||(go=!0),(Kr&134217727)===0&&(ha&134217727)===0||ft===null||Wr(ft,We,Wn,!1)}function ym(n,i,o){var c=rt;rt|=2;var d=Rv(),g=Cv();(ft!==n||We!==i)&&(ih=null,vo(n,i)),i=!1;var w=Tt;e:do try{if(it!==0&&$e!==null){var T=$e,O=Pn;switch(it){case 8:gm(),w=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(i=!0);var H=it;if(it=0,Pn=null,bo(n,T,O,H),o&&go){w=0;break e}break;default:H=it,it=0,Pn=null,bo(n,T,O,H)}}MA(),w=Tt;break}catch(W){xv(n,W)}while(!0);return i&&n.shellSuspendCounter++,er=ia=null,rt=c,M.H=d,M.A=g,$e===null&&(ft=null,We=0,Cu()),w}function MA(){for(;$e!==null;)Iv($e)}function VA(n,i){var o=rt;rt|=2;var c=Rv(),d=Cv();ft!==n||We!==i?(ih=null,rh=En()+500,vo(n,i)):go=Er(n,i);e:do try{if(it!==0&&$e!==null){i=$e;var g=Pn;t:switch(it){case 1:it=0,Pn=null,bo(n,i,g,1);break;case 2:case 9:if(By(g)){it=0,Pn=null,Nv(i);break}i=function(){it!==2&&it!==9||ft!==n||(it=7),Os(n)},g.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:By(g)?(it=0,Pn=null,Nv(i)):(it=0,Pn=null,bo(n,i,g,7));break;case 5:var w=null;switch($e.tag){case 26:w=$e.memoizedState;case 5:case 27:var T=$e;if(!w||h0(w)){it=0,Pn=null;var O=T.sibling;if(O!==null)$e=O;else{var H=T.return;H!==null?($e=H,oh(H)):$e=null}break t}}it=0,Pn=null,bo(n,i,g,5);break;case 6:it=0,Pn=null,bo(n,i,g,6);break;case 8:gm(),Tt=6;break e;default:throw Error(s(462))}}UA();break}catch(W){xv(n,W)}while(!0);return er=ia=null,M.H=c,M.A=d,rt=o,$e!==null?0:(ft=null,We=0,Cu(),Tt)}function UA(){for(;$e!==null&&!Hd();)Iv($e)}function Iv(n){var i=nv(n.alternate,n,lr);n.memoizedProps=n.pendingProps,i===null?oh(n):$e=i}function Nv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=W_(o,i,i.pendingProps,i.type,void 0,We);break;case 11:i=W_(o,i,i.pendingProps,i.type.render,i.ref,We);break;case 5:Of(i);default:rv(o,i),i=$e=ky(i,lr),i=nv(o,i,lr)}n.memoizedProps=n.pendingProps,i===null?oh(n):$e=i}function bo(n,i,o,c){er=ia=null,Of(i),uo=null,Xl=0;var d=i.return;try{if(RA(n,d,i,o,We)){Tt=1,Ju(n,Fn(o,n.current)),$e=null;return}}catch(g){if(d!==null)throw $e=d,g;Tt=1,Ju(n,Fn(o,n.current)),$e=null;return}i.flags&32768?(et||c===1?n=!0:go||(We&536870912)!==0?n=!1:(Gr=n=!0,(c===2||c===9||c===3||c===6)&&(c=Yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),kv(i,n)):oh(i)}function oh(n){var i=n;do{if((i.flags&32768)!==0){kv(i,Gr);return}n=i.return;var o=IA(i.alternate,i,lr);if(o!==null){$e=o;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=n}while(i!==null);Tt===0&&(Tt=5)}function kv(n,i){do{var o=NA(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Tt=6,$e=null}function Ov(n,i,o,c,d,g,w,T,O){n.cancelPendingCommit=null;do lh();while(nn!==0);if((rt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=of,hu(n,o,g,w,T,O),n===ft&&($e=ft=null,We=0),yo=i,Yr=n,_o=o,dm=g,fm=d,Ev=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,qA($s,function(){return Vv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=M.T,M.T=null,d=ie.p,ie.p=2,w=rt,rt|=4;try{kA(n,i,o)}finally{rt=w,ie.p=d,M.T=c}}nn=1,jv(),Dv(),Pv()}}function jv(){if(nn===1){nn=0;var n=Yr,i=yo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var c=ie.p;ie.p=2;var d=rt;rt|=4;try{gv(i,n);var g=Im,w=wy(n.containerInfo),T=g.focusedElem,O=g.selectionRange;if(w!==T&&T&&T.ownerDocument&&by(T.ownerDocument.documentElement,T)){if(O!==null&&tf(T)){var H=O.start,W=O.end;if(W===void 0&&(W=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(W,T.value.length);else{var ee=T.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var K=G.getSelection(),xe=T.textContent.length,Te=Math.min(O.start,xe),ct=O.end===void 0?Te:Math.min(O.end,xe);!K.extend&&Te>ct&&(w=ct,ct=Te,Te=w);var z=vy(T,Te),V=vy(T,ct);if(z&&V&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==V.node||K.focusOffset!==V.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),K.removeAllRanges(),Te>ct?(K.addRange(q),K.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),K.addRange(q))}}}}for(ee=[],K=T;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var J=ee[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}bh=!!Cm,Im=Cm=null}finally{rt=d,ie.p=c,M.T=o}}n.current=i,nn=2}}function Dv(){if(nn===2){nn=0;var n=Yr,i=yo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var c=ie.p;ie.p=2;var d=rt;rt|=4;try{hv(n,i.alternate,i)}finally{rt=d,ie.p=c,M.T=o}}nn=3}}function Pv(){if(nn===4||nn===3){nn=0,ml();var n=Yr,i=yo,o=_o,c=Ev;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?nn=5:(nn=0,yo=Yr=null,Mv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Qr=null),_l(o),i=i.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(br,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=M.T,d=ie.p,ie.p=2,M.T=null;try{for(var g=n.onRecoverableError,w=0;w<c.length;w++){var T=c[w];g(T.value,{componentStack:T.stack})}}finally{M.T=i,ie.p=d}}(_o&3)!==0&&lh(),Os(n),d=n.pendingLanes,(o&4194090)!==0&&(d&42)!==0?n===mm?ac++:(ac=0,mm=n):ac=0,oc(0)}}function Mv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,zl(i)))}function lh(n){return jv(),Dv(),Pv(),Vv()}function Vv(){if(nn!==5)return!1;var n=Yr,i=dm;dm=0;var o=_l(_o),c=M.T,d=ie.p;try{ie.p=32>o?32:o,M.T=null,o=fm,fm=null;var g=Yr,w=_o;if(nn=0,yo=Yr=null,_o=0,(rt&6)!==0)throw Error(s(331));var T=rt;if(rt|=4,bv(g.current),yv(g,g.current,w,o),rt=T,oc(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(br,g)}catch{}return!0}finally{ie.p=d,M.T=c,Mv(n,i)}}function Uv(n,i,o){i=Fn(o,i),i=Gf(n.stateNode,i,2),n=Lr(n,i,2),n!==null&&(St(n,2),Os(n))}function ht(n,i,o){if(n.tag===3)Uv(n,n,o);else for(;i!==null;){if(i.tag===3){Uv(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Qr===null||!Qr.has(c))){n=Fn(o,n),o=q_(2),c=Lr(i,o,2),c!==null&&($_(o,c,i,n),St(c,2),Os(c));break}}i=i.return}}function _m(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new DA;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(o)||(lm=!0,d.add(o),n=LA.bind(null,n,i,o),i.then(n,n))}function LA(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ft===n&&(We&o)===o&&(Tt===4||Tt===3&&(We&62914560)===We&&300>En()-hm?(rt&2)===0&&vo(n,0):cm|=o,po===We&&(po=0)),Os(n)}function Lv(n,i){i===0&&(i=Tr()),n=eo(n,i),n!==null&&(St(n,i),Os(n))}function zA(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Lv(n,o)}function BA(n,i){var o=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Lv(n,o)}function qA(n,i){return Ni(n,i)}var ch=null,wo=null,vm=!1,uh=!1,bm=!1,da=0;function Os(n){n!==wo&&n.next===null&&(wo===null?ch=wo=n:wo=wo.next=n),uh=!0,vm||(vm=!0,HA())}function oc(n,i){if(!bm&&uh){bm=!0;do for(var o=!1,c=ch;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var w=c.suspendedLanes,T=c.pingedLanes;g=(1<<31-yn(42|n)+1)-1,g&=d&~(w&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,$v(c,g))}else g=We,g=Bn(c,c===ft?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Er(c,g)||(o=!0,$v(c,g));c=c.next}while(o);bm=!1}}function $A(){zv()}function zv(){uh=vm=!1;var n=0;da!==0&&(JA()&&(n=da),da=0);for(var i=En(),o=null,c=ch;c!==null;){var d=c.next,g=Bv(c,i);g===0?(c.next=null,o===null?ch=d:o.next=d,d===null&&(wo=o)):(o=c,(n!==0||(g&3)!==0)&&(uh=!0)),c=d}oc(n)}function Bv(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var w=31-yn(g),T=1<<w,O=d[w];O===-1?((T&o)===0||(T&c)!==0)&&(d[w]=Va(T,i)):O<=i&&(n.expiredLanes|=T),g&=~T}if(i=ft,o=We,o=Bn(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(it===2||it===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ma(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Er(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Ma(c),_l(o)){case 2:case 8:o=Gt;break;case 32:o=$s;break;case 268435456:o=gl;break;default:o=$s}return c=qv.bind(null,n),o=Ni(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Ma(c),n.callbackPriority=2,n.callbackNode=null,2}function qv(n,i){if(nn!==0&&nn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(lh()&&n.callbackNode!==o)return null;var c=We;return c=Bn(n,n===ft?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Sv(n,c,i),Bv(n,En()),n.callbackNode!=null&&n.callbackNode===o?qv.bind(null,n):null)}function $v(n,i){if(lh())return null;Sv(n,i,!0)}function HA(){ex(function(){(rt&6)!==0?Ni(Lt,$A):zv()})}function wm(){return da===0&&(da=pl()),da}function Hv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ss(""+n)}function Fv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function FA(n,i,o,c,d){if(i==="submit"&&o&&o.stateNode===d){var g=Hv((d[en]||null).action),w=c.submitter;w&&(i=(i=w[en]||null)?Hv(i.formAction):w.getAttribute("formAction"),i!==null&&(g=i,w=null));var T=new Fi("action","action",null,c,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(da!==0){var O=w?Fv(d,w):new FormData(d);Bf(o,{pending:!0,data:O,method:d.method,action:g},null,O)}}else typeof g=="function"&&(T.preventDefault(),O=w?Fv(d,w):new FormData(d),Bf(o,{pending:!0,data:O,method:d.method,action:g},g,O))},currentTarget:d}]})}}for(var Em=0;Em<af.length;Em++){var Tm=af[Em],GA=Tm.toLowerCase(),KA=Tm[0].toUpperCase()+Tm.slice(1);os(GA,"on"+KA)}os(Sy,"onAnimationEnd"),os(Ay,"onAnimationIteration"),os(xy,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(uA,"onTransitionRun"),os(hA,"onTransitionStart"),os(dA,"onTransitionCancel"),os(Ry,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function Gv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],d=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var w=c.length-1;0<=w;w--){var T=c[w],O=T.instance,H=T.currentTarget;if(T=T.listener,O!==g&&d.isPropagationStopped())break e;g=T,d.currentTarget=H;try{g(d)}catch(W){Xu(W)}d.currentTarget=null,g=O}else for(w=0;w<c.length;w++){if(T=c[w],O=T.instance,H=T.currentTarget,T=T.listener,O!==g&&d.isPropagationStopped())break e;g=T,d.currentTarget=H;try{g(d)}catch(W){Xu(W)}d.currentTarget=null,g=O}}}}function He(n,i){var o=i[Oi];o===void 0&&(o=i[Oi]=new Set);var c=n+"__bubble";o.has(c)||(Kv(i,n,2,!1),o.add(c))}function Sm(n,i,o){var c=0;i&&(c|=4),Kv(o,n,c,i)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Am(n){if(!n[hh]){n[hh]=!0,du.forEach(function(o){o!=="selectionchange"&&(QA.has(o)||Sm(o,!1,n),Sm(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[hh]||(i[hh]=!0,Sm("selectionchange",!1,i))}}function Kv(n,i,o,c){switch(y0(i)){case 2:var d=wx;break;case 8:d=Ex;break;default:d=Lm}o=d.bind(null,i,o,n),d=void 0,!Ys||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function xm(n,i,o,c,d){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var T=c.stateNode.containerInfo;if(T===d)break;if(w===4)for(w=c.return;w!==null;){var O=w.tag;if((O===3||O===4)&&w.stateNode.containerInfo===d)return;w=w.return}for(;T!==null;){if(w=ws(T),w===null)return;if(O=w.tag,O===5||O===6||O===26||O===27){c=g=w;continue e}T=T.parentNode}}c=c.return}qi(function(){var H=g,W=Al(o),ee=[];e:{var G=Cy.get(n);if(G!==void 0){var K=Fi,xe=n;switch(n){case"keypress":if($i(o)===0)break e;case"keydown":case"keyup":K=Wa;break;case"focusin":xe="focus",K=Ka;break;case"focusout":xe="blur",K=Ka;break;case"beforeblur":case"afterblur":K=Ka;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Wi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Pr;break;case Sy:case Ay:case xy:K=Rl;break;case Ry:K=v;break;case"scroll":case"scrollend":K=Ki;break;case"wheel":K=A;break;case"copy":case"cut":case"paste":K=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Nl;break;case"toggle":case"beforetoggle":K=Q}var Te=(i&4)!==0,ct=!Te&&(n==="scroll"||n==="scrollend"),z=Te?G!==null?G+"Capture":null:G;Te=[];for(var V=H,q;V!==null;){var J=V;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||z===null||(J=jr(V,z),J!=null&&Te.push(cc(V,J,q))),ct)break;V=V.return}0<Te.length&&(G=new K(G,xe,null,o,W),ee.push({event:G,listeners:Te}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",G&&o!==Sl&&(xe=o.relatedTarget||o.fromElement)&&(ws(xe)||xe[Fs]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(xe=o.relatedTarget||o.toElement,K=H,xe=xe?ws(xe):null,xe!==null&&(ct=l(xe),Te=xe.tag,xe!==ct||Te!==5&&Te!==27&&Te!==6)&&(xe=null)):(K=null,xe=H),K!==xe)){if(Te=Wi,J="onMouseLeave",z="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(Te=Nl,J="onPointerLeave",z="onPointerEnter",V="pointer"),ct=K==null?G:Rr(K),q=xe==null?G:Rr(xe),G=new Te(J,V+"leave",K,o,W),G.target=ct,G.relatedTarget=q,J=null,ws(W)===H&&(Te=new Te(z,V+"enter",xe,o,W),Te.target=q,Te.relatedTarget=ct,J=Te),ct=J,K&&xe)t:{for(Te=K,z=xe,V=0,q=Te;q;q=Eo(q))V++;for(q=0,J=z;J;J=Eo(J))q++;for(;0<V-q;)Te=Eo(Te),V--;for(;0<q-V;)z=Eo(z),q--;for(;V--;){if(Te===z||z!==null&&Te===z.alternate)break t;Te=Eo(Te),z=Eo(z)}Te=null}else Te=null;K!==null&&Qv(ee,G,K,Te,!1),xe!==null&&ct!==null&&Qv(ee,ct,xe,Te,!0)}}e:{if(G=H?Rr(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var ge=fy;else if(hy(G))if(my)ge=oA;else{ge=iA;var qe=rA}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Ha(H.elementType)&&(ge=fy):ge=aA;if(ge&&(ge=ge(n,H))){dy(ee,ge,o,W);break e}qe&&qe(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&wl(G,"number",G.value)}switch(qe=H?Rr(H):window,n){case"focusin":(hy(qe)||qe.contentEditable==="true")&&(Xa=qe,nf=H,Pl=null);break;case"focusout":Pl=nf=Xa=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,Ey(ee,o,W);break;case"selectionchange":if(cA)break;case"keydown":case"keyup":Ey(ee,o,W)}var _e;if(Oe)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else as?rs(n,o)&&(Se="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Se="onCompositionStart");Se&&(Rt&&o.locale!=="ko"&&(as||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&as&&(_e=_u()):(Hn=W,dt="value"in Hn?Hn.value:Hn.textContent,as=!0)),qe=dh(H,Se),0<qe.length&&(Se=new Il(Se,n,null,o,W),ee.push({event:Se,listeners:qe}),_e?Se.data=_e:(_e=is(o),_e!==null&&(Se.data=_e)))),(_e=st?kl(n,o):tA(n,o))&&(Se=dh(H,"onBeforeInput"),0<Se.length&&(qe=new Il("onBeforeInput","beforeinput",null,o,W),ee.push({event:qe,listeners:Se}),qe.data=_e)),FA(ee,n,H,o,W)}Gv(ee,i)})}function cc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function dh(n,i){for(var o=i+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=jr(n,o),d!=null&&c.unshift(cc(n,d,g)),d=jr(n,i),d!=null&&c.push(cc(n,d,g))),n.tag===3)return c;n=n.return}return[]}function Eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Qv(n,i,o,c,d){for(var g=i._reactName,w=[];o!==null&&o!==c;){var T=o,O=T.alternate,H=T.stateNode;if(T=T.tag,O!==null&&O===c)break;T!==5&&T!==26&&T!==27||H===null||(O=H,d?(H=jr(o,g),H!=null&&w.unshift(cc(o,H,O))):d||(H=jr(o,g),H!=null&&w.push(cc(o,H,O)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var YA=/\r\n?/g,WA=/\u0000|\uFFFD/g;function Yv(n){return(typeof n=="string"?n:""+n).replace(YA,`
`).replace(WA,"")}function Wv(n,i){return i=Yv(i),Yv(n)===i}function fh(){}function lt(n,i,o,c,d,g){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||$n(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&$n(n,""+c);break;case"className":Vi(n,"class",c);break;case"tabIndex":Vi(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(n,o,c);break;case"style":Tl(n,c,g);break;case"data":if(i!=="object"){Vi(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ss(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&lt(n,i,"name",d.name,d,null),lt(n,i,"formEncType",d.formEncType,d,null),lt(n,i,"formMethod",d.formMethod,d,null),lt(n,i,"formTarget",d.formTarget,d,null)):(lt(n,i,"encType",d.encType,d,null),lt(n,i,"method",d.method,d,null),lt(n,i,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ss(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=fh);break;case"onScroll":c!=null&&He("scroll",n);break;case"onScrollEnd":c!=null&&He("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=ss(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":He("beforetoggle",n),He("toggle",n),Mi(n,"popover",c);break;case"xlinkActuate":qn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Mi(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gu.get(o)||o,Mi(n,o,c))}}function Rm(n,i,o,c,d,g){switch(o){case"style":Tl(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?$n(n,c):(typeof c=="number"||typeof c=="bigint")&&$n(n,""+c);break;case"onScroll":c!=null&&He("scroll",n);break;case"onScrollEnd":c!=null&&He("scrollend",n);break;case"onClick":c!=null&&(n.onclick=fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Di.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),i=o.slice(2,d?o.length-7:void 0),g=n[en]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(i,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,d);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Mi(n,o,c)}}}function sn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",n),He("load",n);var c=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(n,i,g,w,o,null)}}d&&lt(n,i,"srcSet",o.srcSet,o,null),c&&lt(n,i,"src",o.src,o,null);return;case"input":He("invalid",n);var T=g=w=d=null,O=null,H=null;for(c in o)if(o.hasOwnProperty(c)){var W=o[c];if(W!=null)switch(c){case"name":d=W;break;case"type":w=W;break;case"checked":O=W;break;case"defaultChecked":H=W;break;case"value":g=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:lt(n,i,c,W,o,null)}}bl(n,g,T,O,H,w,d,!1),Nr(n);return;case"select":He("invalid",n),c=w=g=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":g=T;break;case"defaultValue":w=T;break;case"multiple":c=T;default:lt(n,i,d,T,o,null)}i=g,o=w,n.multiple=!!c,i!=null?kr(n,!!c,i,!1):o!=null&&kr(n,!!c,o,!0);return;case"textarea":He("invalid",n),g=d=c=null;for(w in o)if(o.hasOwnProperty(w)&&(T=o[w],T!=null))switch(w){case"value":c=T;break;case"defaultValue":d=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:lt(n,i,w,T,o,null)}mu(n,c,d,g),Nr(n);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(c=o[O],c!=null))switch(O){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(n,i,O,c,o,null)}return;case"dialog":He("beforetoggle",n),He("toggle",n),He("cancel",n),He("close",n);break;case"iframe":case"object":He("load",n);break;case"video":case"audio":for(c=0;c<lc.length;c++)He(lc[c],n);break;case"image":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"embed":case"source":case"link":He("error",n),He("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(n,i,H,c,o,null)}return;default:if(Ha(i)){for(W in o)o.hasOwnProperty(W)&&(c=o[W],c!==void 0&&Rm(n,i,W,c,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(c=o[T],c!=null&&lt(n,i,T,c,o,null))}function XA(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,w=null,T=null,O=null,H=null,W=null;for(K in o){var ee=o[K];if(o.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=ee;default:c.hasOwnProperty(K)||lt(n,i,K,null,c,ee)}}for(var G in c){var K=c[G];if(ee=o[G],c.hasOwnProperty(G)&&(K!=null||ee!=null))switch(G){case"type":g=K;break;case"name":d=K;break;case"checked":H=K;break;case"defaultChecked":W=K;break;case"value":w=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:K!==ee&&lt(n,i,G,K,c,ee)}}vl(n,w,T,O,H,W,g,d);return;case"select":K=w=T=G=null;for(g in o)if(O=o[g],o.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":K=O;default:c.hasOwnProperty(g)||lt(n,i,g,null,c,O)}for(d in c)if(g=c[d],O=o[d],c.hasOwnProperty(d)&&(g!=null||O!=null))switch(d){case"value":G=g;break;case"defaultValue":T=g;break;case"multiple":w=g;default:g!==O&&lt(n,i,d,g,c,O)}i=T,o=w,c=K,G!=null?kr(n,!!o,G,!1):!!c!=!!o&&(i!=null?kr(n,!!o,i,!0):kr(n,!!o,o?[]:"",!1));return;case"textarea":K=G=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:lt(n,i,T,null,c,d)}for(w in c)if(d=c[w],g=o[w],c.hasOwnProperty(w)&&(d!=null||g!=null))switch(w){case"value":G=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==g&&lt(n,i,w,d,c,g)}fu(n,G,K);return;case"option":for(var xe in o)if(G=o[xe],o.hasOwnProperty(xe)&&G!=null&&!c.hasOwnProperty(xe))switch(xe){case"selected":n.selected=!1;break;default:lt(n,i,xe,null,c,G)}for(O in c)if(G=c[O],K=o[O],c.hasOwnProperty(O)&&G!==K&&(G!=null||K!=null))switch(O){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:lt(n,i,O,G,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)G=o[Te],o.hasOwnProperty(Te)&&G!=null&&!c.hasOwnProperty(Te)&&lt(n,i,Te,null,c,G);for(H in c)if(G=c[H],K=o[H],c.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:lt(n,i,H,G,c,K)}return;default:if(Ha(i)){for(var ct in o)G=o[ct],o.hasOwnProperty(ct)&&G!==void 0&&!c.hasOwnProperty(ct)&&Rm(n,i,ct,void 0,c,G);for(W in c)G=c[W],K=o[W],!c.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||Rm(n,i,W,G,c,K);return}}for(var z in o)G=o[z],o.hasOwnProperty(z)&&G!=null&&!c.hasOwnProperty(z)&&lt(n,i,z,null,c,G);for(ee in c)G=c[ee],K=o[ee],!c.hasOwnProperty(ee)||G===K||G==null&&K==null||lt(n,i,ee,G,c,K)}var Cm=null,Im=null;function mh(n){return n.nodeType===9?n:n.ownerDocument}function Xv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Nm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var km=null;function JA(){var n=window.event;return n&&n.type==="popstate"?n===km?!1:(km=n,!0):(km=null,!1)}var Zv=typeof setTimeout=="function"?setTimeout:void 0,ZA=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,ex=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(n){return e0.resolve(null).then(n).catch(tx)}:Zv;function tx(n){setTimeout(function(){throw n})}function Xr(n){return n==="head"}function t0(n,i){var o=i,c=0,d=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var w=n.ownerDocument;if(o&1&&uc(w.documentElement),o&2&&uc(w.body),o&4)for(o=w.head,uc(o),w=o.firstChild;w;){var T=w.nextSibling,O=w.nodeName;w[xr]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=T}}if(d===0){n.removeChild(g),_c(i);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);_c(i)}function Om(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Om(o),La(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function nx(n,i,o,c){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[xr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=cs(n.nextSibling),n===null)break}return null}function sx(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=cs(n.nextSibling),n===null))return null;return n}function jm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function rx(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function cs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Dm=null;function n0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function s0(n,i,o){switch(i=mh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function uc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);La(n)}var Xn=new Map,r0=new Set;function gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var cr=ie.d;ie.d={f:ix,r:ax,D:ox,C:lx,L:cx,m:ux,X:dx,S:hx,M:fx};function ix(){var n=cr.f(),i=ah();return n||i}function ax(n){var i=Es(n);i!==null&&i.tag===5&&i.type==="form"?S_(i):cr.r(n)}var To=typeof document>"u"?null:document;function i0(n,i,o){var c=To;if(c&&typeof i=="string"&&i){var d=Kt(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),r0.has(d)||(r0.add(d),n={rel:n,crossOrigin:o,href:i},c.querySelector(d)===null&&(i=c.createElement("link"),sn(i,"link",n),xt(i),c.head.appendChild(i)))}}function ox(n){cr.D(n),i0("dns-prefetch",n,null)}function lx(n,i){cr.C(n,i),i0("preconnect",n,i)}function cx(n,i,o){cr.L(n,i,o);var c=To;if(c&&n&&i){var d='link[rel="preload"][as="'+Kt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Kt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Kt(o.imageSizes)+'"]')):d+='[href="'+Kt(n)+'"]';var g=d;switch(i){case"style":g=So(n);break;case"script":g=Ao(n)}Xn.has(g)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Xn.set(g,n),c.querySelector(d)!==null||i==="style"&&c.querySelector(hc(g))||i==="script"&&c.querySelector(dc(g))||(i=c.createElement("link"),sn(i,"link",n),xt(i),c.head.appendChild(i)))}}function ux(n,i){cr.m(n,i);var o=To;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+Kt(c)+'"][href="'+Kt(n)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ao(n)}if(!Xn.has(g)&&(n=_({rel:"modulepreload",href:n},i),Xn.set(g,n),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(dc(g)))return}c=o.createElement("link"),sn(c,"link",n),xt(c),o.head.appendChild(c)}}}function hx(n,i,o){cr.S(n,i,o);var c=To;if(c&&n){var d=Cr(c).hoistableStyles,g=So(n);i=i||"default";var w=d.get(g);if(!w){var T={loading:0,preload:null};if(w=c.querySelector(hc(g)))T.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Xn.get(g))&&Pm(n,o);var O=w=c.createElement("link");xt(O),sn(O,"link",n),O._p=new Promise(function(H,W){O.onload=H,O.onerror=W}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ph(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:T},d.set(g,w)}}}function dx(n,i){cr.X(n,i);var o=To;if(o&&n){var c=Cr(o).hoistableScripts,d=Ao(n),g=c.get(d);g||(g=o.querySelector(dc(d)),g||(n=_({src:n,async:!0},i),(i=Xn.get(d))&&Mm(n,i),g=o.createElement("script"),xt(g),sn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function fx(n,i){cr.M(n,i);var o=To;if(o&&n){var c=Cr(o).hoistableScripts,d=Ao(n),g=c.get(d);g||(g=o.querySelector(dc(d)),g||(n=_({src:n,async:!0,type:"module"},i),(i=Xn.get(d))&&Mm(n,i),g=o.createElement("script"),xt(g),sn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function a0(n,i,o,c){var d=(d=Ee.current)?gh(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=So(o.href),o=Cr(d).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=So(o.href);var g=Cr(d).hoistableStyles,w=g.get(n);if(w||(d=d.ownerDocument||d,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,w),(g=d.querySelector(hc(n)))&&!g._p&&(w.instance=g,w.state.loading=5),Xn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xn.set(n,o),g||mx(d,n,o,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ao(o),o=Cr(d).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function So(n){return'href="'+Kt(n)+'"'}function hc(n){return'link[rel="stylesheet"]['+n+"]"}function o0(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function mx(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),sn(i,"link",o),xt(i),n.head.appendChild(i))}function Ao(n){return'[src="'+Kt(n)+'"]'}function dc(n){return"script[async]"+n}function l0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Kt(o.href)+'"]');if(c)return i.instance=c,xt(c),c;var d=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),xt(c),sn(c,"style",d),ph(c,o.precedence,n),i.instance=c;case"stylesheet":d=So(o.href);var g=n.querySelector(hc(d));if(g)return i.state.loading|=4,i.instance=g,xt(g),g;c=o0(o),(d=Xn.get(d))&&Pm(c,d),g=(n.ownerDocument||n).createElement("link"),xt(g);var w=g;return w._p=new Promise(function(T,O){w.onload=T,w.onerror=O}),sn(g,"link",c),i.state.loading|=4,ph(g,o.precedence,n),i.instance=g;case"script":return g=Ao(o.src),(d=n.querySelector(dc(g)))?(i.instance=d,xt(d),d):(c=o,(d=Xn.get(g))&&(c=_({},o),Mm(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),xt(d),sn(d,"link",c),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,ph(c,o.precedence,n));return i.instance}function ph(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,w=0;w<c.length;w++){var T=c[w];if(T.dataset.precedence===i)g=T;else if(g!==d)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Pm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Mm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var yh=null;function c0(n,i,o){if(yh===null){var c=new Map,d=yh=new Map;d.set(o,c)}else d=yh,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var g=o[d];if(!(g[xr]||g[At]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(i)||"";w=n+w;var T=c.get(w);T?T.push(g):c.set(w,[g])}}return c}function u0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function gx(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function h0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var fc=null;function px(){}function yx(n,i,o){if(fc===null)throw Error(s(475));var c=fc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=So(o.href),g=n.querySelector(hc(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=_h.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=g,xt(g);return}g=n.ownerDocument||n,o=o0(o),(d=Xn.get(d))&&Pm(o,d),g=g.createElement("link"),xt(g);var w=g;w._p=new Promise(function(T,O){w.onload=T,w.onerror=O}),sn(g,"link",o),i.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=_h.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function _x(){if(fc===null)throw Error(s(475));var n=fc;return n.stylesheets&&n.count===0&&Vm(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Vm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function _h(){if(this.count--,this.count===0){if(this.stylesheets)Vm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var vh=null;function Vm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,vh=new Map,i.forEach(vx,n),vh=null,_h.call(n))}function vx(n,i){if(!(i.state.loading&4)){var o=vh.get(n);if(o)var c=o.get(null);else{o=new Map,vh.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var w=d[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}d=i.instance,w=d.getAttribute("data-precedence"),g=o.get(w)||c,g===c&&o.set(null,d),o.set(w,d),this.count++,c=_h.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var mc={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function bx(n,i,o,c,d,g,w,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function d0(n,i,o,c,d,g,w,T,O,H,W,ee){return n=new bx(n,i,o,w,T,O,H,ee),i=1,g===!0&&(i|=24),g=On(3,null,null,i),n.current=g,g.stateNode=n,i=_f(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:i},Ef(g),n}function f0(n){return n?(n=to,n):to}function m0(n,i,o,c,d,g){d=f0(d),c.context===null?c.context=d:c.pendingContext=d,c=Ur(i),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Lr(n,c,i),o!==null&&(Vn(o,n,i),Hl(o,n,i))}function g0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Um(n,i){g0(n,i),(n=n.alternate)&&g0(n,i)}function p0(n){if(n.tag===13){var i=eo(n,67108864);i!==null&&Vn(i,n,67108864),Um(n,67108864)}}var bh=!0;function wx(n,i,o,c){var d=M.T;M.T=null;var g=ie.p;try{ie.p=2,Lm(n,i,o,c)}finally{ie.p=g,M.T=d}}function Ex(n,i,o,c){var d=M.T;M.T=null;var g=ie.p;try{ie.p=8,Lm(n,i,o,c)}finally{ie.p=g,M.T=d}}function Lm(n,i,o,c){if(bh){var d=zm(c);if(d===null)xm(n,i,c,wh,o),_0(n,c);else if(Sx(d,n,i,o,c))c.stopPropagation();else if(_0(n,c),i&4&&-1<Tx.indexOf(n)){for(;d!==null;){var g=Es(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=es(g.pendingLanes);if(w!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var O=1<<31-yn(w);T.entanglements[1]|=O,w&=~O}Os(g),(rt&6)===0&&(rh=En()+500,oc(0))}}break;case 13:T=eo(g,2),T!==null&&Vn(T,g,2),ah(),Um(g,2)}if(g=zm(c),g===null&&xm(n,i,c,wh,o),g===d)break;d=g}d!==null&&c.stopPropagation()}else xm(n,i,c,null,o)}}function zm(n){return n=Al(n),Bm(n)}var wh=null;function Bm(n){if(wh=null,n=ws(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return wh=n,null}function y0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lu()){case Lt:return 2;case Gt:return 8;case $s:case Fd:return 32;case gl:return 268435456;default:return 32}default:return 32}}var qm=!1,Jr=null,Zr=null,ei=null,gc=new Map,pc=new Map,ti=[],Tx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(n,i){switch(n){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":gc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(i.pointerId)}}function yc(n,i,o,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},i!==null&&(i=Es(i),i!==null&&p0(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Sx(n,i,o,c,d){switch(i){case"focusin":return Jr=yc(Jr,n,i,o,c,d),!0;case"dragenter":return Zr=yc(Zr,n,i,o,c,d),!0;case"mouseover":return ei=yc(ei,n,i,o,c,d),!0;case"pointerover":var g=d.pointerId;return gc.set(g,yc(gc.get(g)||null,n,i,o,c,d)),!0;case"gotpointercapture":return g=d.pointerId,pc.set(g,yc(pc.get(g)||null,n,i,o,c,d)),!0}return!1}function v0(n){var i=ws(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Qd(n.priority,function(){if(o.tag===13){var c=Mn();c=yl(c);var d=eo(o,c);d!==null&&Vn(d,o,c),Um(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Eh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=zm(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Sl=c,o.target.dispatchEvent(c),Sl=null}else return i=Es(o),i!==null&&p0(i),n.blockedOn=o,!1;i.shift()}return!0}function b0(n,i,o){Eh(n)&&o.delete(i)}function Ax(){qm=!1,Jr!==null&&Eh(Jr)&&(Jr=null),Zr!==null&&Eh(Zr)&&(Zr=null),ei!==null&&Eh(ei)&&(ei=null),gc.forEach(b0),pc.forEach(b0)}function Th(n,i){n.blockedOn===i&&(n.blockedOn=null,qm||(qm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ax)))}var Sh=null;function w0(n){Sh!==n&&(Sh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sh===n&&(Sh=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],d=n[i+2];if(typeof c!="function"){if(Bm(c||o)===null)continue;break}var g=Es(o);g!==null&&(n.splice(i,3),i-=3,Bf(g,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function _c(n){function i(O){return Th(O,n)}Jr!==null&&Th(Jr,n),Zr!==null&&Th(Zr,n),ei!==null&&Th(ei,n),gc.forEach(i),pc.forEach(i);for(var o=0;o<ti.length;o++){var c=ti[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ti.length&&(o=ti[0],o.blockedOn===null);)v0(o),o.blockedOn===null&&ti.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],g=o[c+1],w=d[en]||null;if(typeof g=="function")w||w0(o);else if(w){var T=null;if(g&&g.hasAttribute("formAction")){if(d=g,w=g[en]||null)T=w.formAction;else if(Bm(d)!==null)continue}else T=w.action;typeof T=="function"?o[c+1]=T:(o.splice(c,3),c-=3),w0(o)}}}function $m(n){this._internalRoot=n}Ah.prototype.render=$m.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Mn();m0(o,c,n,i,null,null)},Ah.prototype.unmount=$m.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;m0(n.current,2,null,n,null,null),ah(),i[Fs]=null}};function Ah(n){this._internalRoot=n}Ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=Hs();n={blockedOn:null,target:n,priority:i};for(var o=0;o<ti.length&&i!==0&&i<ti[o].priority;o++);ti.splice(o,0,n),o===0&&v0(n)}};var E0=e.version;if(E0!=="19.1.0")throw Error(s(527,E0,"19.1.0"));ie.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=m(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var xx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{br=xh.inject(xx),cn=xh}catch{}}return bc.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,c="",d=U_,g=L_,w=z_,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=d0(n,1,!1,null,null,o,c,d,g,w,T,null),n[Fs]=i.current,Am(n),new $m(i)},bc.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var c=!1,d="",g=U_,w=L_,T=z_,O=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(O=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),i=d0(n,1,!0,i,o??null,c,d,g,w,T,O,H),i.context=f0(null),o=i.current,c=Mn(),c=yl(c),d=Ur(c),d.callback=null,Lr(o,d,c),o=c,i.current.lanes=o,St(i,o),Os(i),n[Fs]=i.current,Am(n),new Ah(i)},bc.version="19.1.0",bc}var O0;function Ux(){if(O0)return Gm.exports;O0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Gm.exports=Vx(),Gm.exports}var Lx=Ux();function j0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function zx(...r){return e=>{let t=!1;const s=r.map(a=>{const l=j0(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():j0(r[a],null)}}}}function Bx(...r){return we.useCallback(zx(...r),r)}function qx(r){const e=$x(r),t=we.forwardRef((s,a)=>{const{children:l,...u}=s,f=we.Children.toArray(l),m=f.find(Fx);if(m){const p=m.props.children,_=f.map(E=>E===m?we.Children.count(p)>1?we.Children.only(null):we.isValidElement(p)?p.props.children:null:E);return y.jsx(e,{...u,ref:a,children:we.isValidElement(p)?we.cloneElement(p,void 0,_):null})}return y.jsx(e,{...u,ref:a,children:l})});return t.displayName=`${r}.Slot`,t}var Ww=qx("Slot");function $x(r){const e=we.forwardRef((t,s)=>{const{children:a,...l}=t,u=we.isValidElement(a)?Kx(a):void 0,f=Bx(u,s);if(we.isValidElement(a)){const m=Gx(l,a.props);return a.type!==we.Fragment&&(m.ref=f),we.cloneElement(a,m)}return we.Children.count(a)>1?we.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var Hx=Symbol("radix.slottable");function Fx(r){return we.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Hx}function Gx(r,e){const t={...e};for(const s in e){const a=r[s],l=e[s];/^on[A-Z]/.test(s)?a&&l?t[s]=(...f)=>{const m=l(...f);return a(...f),m}:a&&(t[s]=a):s==="style"?t[s]={...a,...l}:s==="className"&&(t[s]=[a,l].filter(Boolean).join(" "))}return{...r,...t}}function Kx(r){var s,a;let e=(s=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(a=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function Xw(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=Xw(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Jw(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=Xw(r))&&(s&&(s+=" "),s+=e);return s}const D0=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,P0=Jw,Zw=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return P0(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(p=>{const _=t==null?void 0:t[p],E=l==null?void 0:l[p];if(_===null)return null;const S=D0(_)||D0(E);return a[p][S]}),f=t&&Object.entries(t).reduce((p,_)=>{let[E,S]=_;return S===void 0||(p[E]=S),p},{}),m=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((p,_)=>{let{class:E,className:S,...k}=_;return Object.entries(k).every(U=>{let[B,L]=U;return Array.isArray(L)?L.includes({...l,...f}[B]):{...l,...f}[B]===L})?[...p,E,S]:p},[]);return P0(r,u,m,t==null?void 0:t.class,t==null?void 0:t.className)},fp="-",Qx=r=>{const e=Wx(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:u=>{const f=u.split(fp);return f[0]===""&&f.length!==1&&f.shift(),eE(f,e)||Yx(u)},getConflictingClassGroupIds:(u,f)=>{const m=t[u]||[];return f&&s[u]?[...m,...s[u]]:m}}},eE=(r,e)=>{var u;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),a=s?eE(r.slice(1),s):void 0;if(a)return a;if(e.validators.length===0)return;const l=r.join(fp);return(u=e.validators.find(({validator:f})=>f(l)))==null?void 0:u.classGroupId},M0=/^\[(.+)\]$/,Yx=r=>{if(M0.test(r)){const e=M0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},Wx=r=>{const{theme:e,classGroups:t}=r,s={nextPart:new Map,validators:[]};for(const a in t)Ag(t[a],s,a,e);return s},Ag=(r,e,t,s)=>{r.forEach(a=>{if(typeof a=="string"){const l=a===""?e:V0(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(Xx(a)){Ag(a(s),e,t,s);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{Ag(u,V0(e,l),t,s)})})},V0=(r,e)=>{let t=r;return e.split(fp).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},Xx=r=>r.isThemeGetter,Jx=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const a=(l,u)=>{t.set(l,u),e++,e>r&&(e=0,s=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=s.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},xg="!",Rg=":",Zx=Rg.length,e1=r=>{const{prefix:e,experimentalParseClassName:t}=r;let s=a=>{const l=[];let u=0,f=0,m=0,p;for(let U=0;U<a.length;U++){let B=a[U];if(u===0&&f===0){if(B===Rg){l.push(a.slice(m,U)),m=U+Zx;continue}if(B==="/"){p=U;continue}}B==="["?u++:B==="]"?u--:B==="("?f++:B===")"&&f--}const _=l.length===0?a:a.substring(m),E=t1(_),S=E!==_,k=p&&p>m?p-m:void 0;return{modifiers:l,hasImportantModifier:S,baseClassName:E,maybePostfixModifierPosition:k}};if(e){const a=e+Rg,l=s;s=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=s;s=l=>t({className:l,parseClassName:a})}return s},t1=r=>r.endsWith(xg)?r.substring(0,r.length-1):r.startsWith(xg)?r.substring(1):r,n1=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let l=[];return s.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},s1=r=>({cache:Jx(r.cacheSize),parseClassName:e1(r),sortModifiers:n1(r),...Qx(r)}),r1=/\s+/,i1=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],f=r.trim().split(r1);let m="";for(let p=f.length-1;p>=0;p-=1){const _=f[p],{isExternal:E,modifiers:S,hasImportantModifier:k,baseClassName:U,maybePostfixModifierPosition:B}=t(_);if(E){m=_+(m.length>0?" "+m:m);continue}let L=!!B,re=s(L?U.substring(0,B):U);if(!re){if(!L){m=_+(m.length>0?" "+m:m);continue}if(re=s(U),!re){m=_+(m.length>0?" "+m:m);continue}L=!1}const te=l(S).join(":"),Y=k?te+xg:te,le=Y+re;if(u.includes(le))continue;u.push(le);const ce=a(re,L);for(let ae=0;ae<ce.length;++ae){const I=ce[ae];u.push(Y+I)}m=_+(m.length>0?" "+m:m)}return m};function a1(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=tE(e))&&(s&&(s+=" "),s+=t);return s}const tE=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=tE(r[s]))&&(t&&(t+=" "),t+=e);return t};function o1(r,...e){let t,s,a,l=u;function u(m){const p=e.reduce((_,E)=>E(_),r());return t=s1(p),s=t.cache.get,a=t.cache.set,l=f,f(m)}function f(m){const p=s(m);if(p)return p;const _=i1(m,t);return a(m,_),_}return function(){return l(a1.apply(null,arguments))}}const $t=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},nE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,l1=/^\d+\/\d+$/,c1=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u1=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h1=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,d1=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f1=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xo=r=>l1.test(r),Be=r=>!!r&&!Number.isNaN(Number(r)),si=r=>!!r&&Number.isInteger(Number(r)),Wm=r=>r.endsWith("%")&&Be(r.slice(0,-1)),ur=r=>c1.test(r),m1=()=>!0,g1=r=>u1.test(r)&&!h1.test(r),rE=()=>!1,p1=r=>d1.test(r),y1=r=>f1.test(r),_1=r=>!pe(r)&&!ye(r),v1=r=>rl(r,oE,rE),pe=r=>nE.test(r),fa=r=>rl(r,lE,g1),Xm=r=>rl(r,S1,Be),U0=r=>rl(r,iE,rE),b1=r=>rl(r,aE,y1),Rh=r=>rl(r,cE,p1),ye=r=>sE.test(r),wc=r=>il(r,lE),w1=r=>il(r,A1),L0=r=>il(r,iE),E1=r=>il(r,oE),T1=r=>il(r,aE),Ch=r=>il(r,cE,!0),rl=(r,e,t)=>{const s=nE.exec(r);return s?s[1]?e(s[1]):t(s[2]):!1},il=(r,e,t=!1)=>{const s=sE.exec(r);return s?s[1]?e(s[1]):t:!1},iE=r=>r==="position"||r==="percentage",aE=r=>r==="image"||r==="url",oE=r=>r==="length"||r==="size"||r==="bg-size",lE=r=>r==="length",S1=r=>r==="number",A1=r=>r==="family-name",cE=r=>r==="shadow",x1=()=>{const r=$t("color"),e=$t("font"),t=$t("text"),s=$t("font-weight"),a=$t("tracking"),l=$t("leading"),u=$t("breakpoint"),f=$t("container"),m=$t("spacing"),p=$t("radius"),_=$t("shadow"),E=$t("inset-shadow"),S=$t("text-shadow"),k=$t("drop-shadow"),U=$t("blur"),B=$t("perspective"),L=$t("aspect"),re=$t("ease"),te=$t("animate"),Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ce=()=>[...le(),ye,pe],ae=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],x=()=>[ye,pe,m],R=()=>[xo,"full","auto",...x()],D=()=>[si,"none","subgrid",ye,pe],j=()=>["auto",{span:["full",si,ye,pe]},si,ye,pe],P=()=>[si,"auto",ye,pe],C=()=>["auto","min","max","fr",ye,pe],Ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Le=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...x()],ie=()=>[xo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],ne=()=>[r,ye,pe],F=()=>[...le(),L0,U0,{position:[ye,pe]}],N=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",E1,v1,{size:[ye,pe]}],he=()=>[Wm,wc,fa],oe=()=>["","none","full",p,ye,pe],de=()=>["",Be,wc,fa],Ve=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Fe=()=>[Be,Wm,L0,U0],Ze=()=>["","none",U,ye,pe],ln=()=>["none",Be,ye,pe],ys=()=>["none",Be,ye,pe],_s=()=>[Be,ye,pe],Zn=()=>[xo,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ur],breakpoint:[ur],color:[m1],container:[ur],"drop-shadow":[ur],ease:["in","out","in-out"],font:[_1],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ur],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ur],shadow:[ur],spacing:["px",Be],text:[ur],"text-shadow":[ur],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xo,pe,ye,L]}],container:["container"],columns:[{columns:[Be,pe,ye,f]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ce()}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[si,"auto",ye,pe]}],basis:[{basis:[xo,"full","auto",f,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Be,xo,"auto","initial","none",pe]}],grow:[{grow:["",Be,ye,pe]}],shrink:[{shrink:["",Be,ye,pe]}],order:[{order:[si,"first","last","none",ye,pe]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...Ye(),"normal"]}],"justify-items":[{"justify-items":[...Le(),"normal"]}],"justify-self":[{"justify-self":["auto",...Le()]}],"align-content":[{content:["normal",...Ye()]}],"align-items":[{items:[...Le(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Le(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ye()}],"place-items":[{"place-items":[...Le(),"baseline"]}],"place-self":[{"place-self":["auto",...Le()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[f,"screen",...ie()]}],"min-w":[{"min-w":[f,"screen","none",...ie()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[u]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",t,wc,fa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ye,Xm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wm,pe]}],"font-family":[{font:[w1,pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ye,pe]}],"line-clamp":[{"line-clamp":[Be,"none",ye,Xm]}],leading:[{leading:[l,...x()]}],"list-image":[{"list-image":["none",ye,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Be,"from-font","auto",ye,fa]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[Be,"auto",ye,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:N()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},si,ye,pe],radial:["",ye,pe],conic:[si,ye,pe]},T1,b1]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:oe()}],"rounded-s":[{"rounded-s":oe()}],"rounded-e":[{"rounded-e":oe()}],"rounded-t":[{"rounded-t":oe()}],"rounded-r":[{"rounded-r":oe()}],"rounded-b":[{"rounded-b":oe()}],"rounded-l":[{"rounded-l":oe()}],"rounded-ss":[{"rounded-ss":oe()}],"rounded-se":[{"rounded-se":oe()}],"rounded-ee":[{"rounded-ee":oe()}],"rounded-es":[{"rounded-es":oe()}],"rounded-tl":[{"rounded-tl":oe()}],"rounded-tr":[{"rounded-tr":oe()}],"rounded-br":[{"rounded-br":oe()}],"rounded-bl":[{"rounded-bl":oe()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ve(),"hidden","none"]}],"divide-style":[{divide:[...Ve(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...Ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Be,ye,pe]}],"outline-w":[{outline:["",Be,wc,fa]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",_,Ch,Rh]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",E,Ch,Rh]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[Be,fa]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",S,Ch,Rh]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[Be,ye,pe]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Be]}],"mask-image-linear-from-pos":[{"mask-linear-from":Fe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Fe()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":Fe()}],"mask-image-t-to-pos":[{"mask-t-to":Fe()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":Fe()}],"mask-image-r-to-pos":[{"mask-r-to":Fe()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":Fe()}],"mask-image-b-to-pos":[{"mask-b-to":Fe()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":Fe()}],"mask-image-l-to-pos":[{"mask-l-to":Fe()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":Fe()}],"mask-image-x-to-pos":[{"mask-x-to":Fe()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":Fe()}],"mask-image-y-to-pos":[{"mask-y-to":Fe()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[ye,pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":Fe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Fe()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[Be]}],"mask-image-conic-from-pos":[{"mask-conic-from":Fe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Fe()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:N()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,pe]}],filter:[{filter:["","none",ye,pe]}],blur:[{blur:Ze()}],brightness:[{brightness:[Be,ye,pe]}],contrast:[{contrast:[Be,ye,pe]}],"drop-shadow":[{"drop-shadow":["","none",k,Ch,Rh]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",Be,ye,pe]}],"hue-rotate":[{"hue-rotate":[Be,ye,pe]}],invert:[{invert:["",Be,ye,pe]}],saturate:[{saturate:[Be,ye,pe]}],sepia:[{sepia:["",Be,ye,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,pe]}],"backdrop-blur":[{"backdrop-blur":Ze()}],"backdrop-brightness":[{"backdrop-brightness":[Be,ye,pe]}],"backdrop-contrast":[{"backdrop-contrast":[Be,ye,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Be,ye,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Be,ye,pe]}],"backdrop-invert":[{"backdrop-invert":["",Be,ye,pe]}],"backdrop-opacity":[{"backdrop-opacity":[Be,ye,pe]}],"backdrop-saturate":[{"backdrop-saturate":[Be,ye,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Be,ye,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Be,"initial",ye,pe]}],ease:[{ease:["linear","initial",re,ye,pe]}],delay:[{delay:[Be,ye,pe]}],animate:[{animate:["none",te,ye,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,ye,pe]}],"perspective-origin":[{"perspective-origin":ce()}],rotate:[{rotate:ln()}],"rotate-x":[{"rotate-x":ln()}],"rotate-y":[{"rotate-y":ln()}],"rotate-z":[{"rotate-z":ln()}],scale:[{scale:ys()}],"scale-x":[{"scale-x":ys()}],"scale-y":[{"scale-y":ys()}],"scale-z":[{"scale-z":ys()}],"scale-3d":["scale-3d"],skew:[{skew:_s()}],"skew-x":[{"skew-x":_s()}],"skew-y":[{"skew-y":_s()}],transform:[{transform:[ye,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:ce()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Zn()}],"translate-x":[{"translate-x":Zn()}],"translate-y":[{"translate-y":Zn()}],"translate-z":[{"translate-z":Zn()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,pe]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[Be,wc,fa,Xm]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},R1=o1(x1);function ka(...r){return R1(Jw(r))}const C1=Zw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ce({className:r,variant:e,size:t,asChild:s=!1,...a}){const l=s?Ww:"button";return y.jsx(l,{"data-slot":"button",className:ka(C1({variant:e,size:t,className:r})),...a})}function Ie({className:r,...e}){return y.jsx("div",{"data-slot":"card",className:ka("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...e})}function Pe({className:r,...e}){return y.jsx("div",{"data-slot":"card-header",className:ka("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function Me({className:r,...e}){return y.jsx("div",{"data-slot":"card-title",className:ka("leading-none font-semibold",r),...e})}function Ps({className:r,...e}){return y.jsx("div",{"data-slot":"card-description",className:ka("text-muted-foreground text-sm",r),...e})}function Ne({className:r,...e}){return y.jsx("div",{"data-slot":"card-content",className:ka("px-6",r),...e})}const I1=Zw("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Cn({className:r,variant:e,asChild:t=!1,...s}){const a=t?Ww:"span";return y.jsx(a,{"data-slot":"badge",className:ka(I1({variant:e}),r),...s})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),k1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),z0=r=>{const e=k1(r);return e.charAt(0).toUpperCase()+e.slice(1)},uE=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),O1=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var j1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=we.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...f},m)=>we.createElement("svg",{ref:m,...j1,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:uE("lucide",a),...!l&&!O1(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,_])=>we.createElement(p,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(r,e)=>{const t=we.forwardRef(({className:s,...a},l)=>we.createElement(D1,{ref:l,iconNode:e,className:uE(`lucide-${N1(z0(r))}`,`lucide-${r}`,s),...a}));return t.displayName=z0(r),t};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Jm=tt("bell",P1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Ih=tt("brain",M1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Zm=tt("building-2",V1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],zh=tt("calendar",U1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],z1=tt("check",L1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ba=tt("circle-check",B1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],$1=tt("circle-pause",q1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],F1=tt("circle-play",H1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],K1=tt("circle-x",G1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],B0=tt("cog",Q1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Xh=tt("database",Y1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],X1=tt("dollar-sign",W1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hE=tt("file-text",J1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],eR=tt("house",Z1);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],q0=tt("info",tR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],sR=tt("key-round",nR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],iR=tt("loader",rR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],oR=tt("menu",aR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],eg=tt("message-square",lR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],uR=tt("moon",cR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],tg=tt("phone",hR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fR=tt("plus",dR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$0=tt("refresh-cw",mR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ec=tt("shield",gR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],H0=tt("square-pen",pR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],F0=tt("star",yR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],vR=tt("sun",_R);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],G0=tt("trash-2",bR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ng=tt("trending-up",wR);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dE=tt("triangle-alert",ER);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],SR=tt("x",TR),K0="/assets/IMG_3575(1)-B07akN18.jpeg",AR="/assets/IMG_3557(1)-Bf6w_X7O.jpeg",xR="/assets/IMG_3554(1)-CshQ5I98.jpeg",RR="/assets/IMG_3556(1)-CjDxWsQq.jpeg",CR="/assets/IMG_3561(1)-DXa8U5hT.jpeg",IR="/assets/IMG_3564(1)-C6wgy6i9.jpeg",NR="/assets/IMG_3551(1)-uvQF3SkX.jpeg";/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=()=>{};var Q0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},OR=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],f=r[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],u=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},mE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,f=u?r[a+1]:0,m=a+2<r.length,p=m?r[a+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|p>>6,k=p&63;m||(k=64,u||(S=64)),s.push(t[_],t[E],t[S],t[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(fE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):OR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const E=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||f==null||p==null||E==null)throw new jR;const S=l<<2|f>>4;if(s.push(S),p!==64){const k=f<<4&240|p>>2;if(s.push(k),E!==64){const U=p<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class jR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DR=function(r){const e=fE(r);return mE.encodeByteArray(e,!0)},Jh=function(r){return DR(r).replace(/\./g,"")},gE=function(r){try{return mE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>PR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof Q0>"u")return;const r=Q0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},UR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&gE(r[1]);return e&&JSON.parse(e)},Ed=()=>{try{return kR()||MR()||VR()||UR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},pE=r=>{var e,t;return(t=(e=Ed())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},LR=r=>{const e=pE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},yE=()=>{var r;return(r=Ed())==null?void 0:r.config},_E=r=>{var e;return(e=Ed())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Jh(JSON.stringify(t)),Jh(JSON.stringify(u)),""].join(".")}const Ic={};function qR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?r.emulator.push(e):r.prod.push(e);return r}function $R(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Y0=!1;function bE(r,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Ic[r]===e||Ic[r]||Y0)return;Ic[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=qR().prod.length>0;function u(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,k){S.setAttribute("width","24"),S.setAttribute("id",k),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Y0=!0,u()},S}function _(S,k){S.setAttribute("id",k),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=$R(s),k=t("text"),U=document.getElementById(k)||document.createElement("span"),B=t("learnmore"),L=document.getElementById(B)||document.createElement("a"),re=t("preprendIcon"),te=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Y=S.element;f(Y),_(L,B);const le=p();m(te,re),Y.append(te,U,L,le),document.body.appendChild(Y)}l?(U.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function FR(){var e;const r=(e=Ed())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YR(){const r=pn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function WR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XR(){try{return typeof indexedDB=="object"}catch{return!1}}function JR(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="FirebaseError";class vr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ZR,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?eC(l,s):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new vr(a,f,s)}}function eC(r,e){return r.replace(tC,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const tC=/\{\$([^}]+)}/g;function nC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Aa(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],u=e[a];if(W0(l)&&W0(u)){if(!Aa(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function W0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function sC(r,e){const t=new rC(r,e);return t.subscribe.bind(t)}class rC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");iC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=sg),a.error===void 0&&(a.error=sg),a.complete===void 0&&(a.complete=sg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function sg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(r){return r&&r._delegate?r._delegate:r}class xa{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new zR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lC(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:oC(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oC(r){return r===pa?void 0:r}function lC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const uC={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},hC=Ge.INFO,dC={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},fC=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=dC[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=hC,this._logHandler=fC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const mC=(r,e)=>e.some(t=>r instanceof t);let X0,J0;function gC(){return X0||(X0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pC(){return J0||(J0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wE=new WeakMap,Cg=new WeakMap,EE=new WeakMap,rg=new WeakMap,gp=new WeakMap;function yC(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(fi(r.result)),a()},u=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&wE.set(t,r)}).catch(()=>{}),gp.set(e,r),e}function _C(r){if(Cg.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Cg.set(r,e)}let Ig={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Cg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||EE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function vC(r){Ig=r(Ig)}function bC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(ig(this),e,...t);return EE.set(s,e.sort?e.sort():[e]),fi(s)}:pC().includes(r)?function(...e){return r.apply(ig(this),e),fi(wE.get(this))}:function(...e){return fi(r.apply(ig(this),e))}}function wC(r){return typeof r=="function"?bC(r):(r instanceof IDBTransaction&&_C(r),mC(r,gC())?new Proxy(r,Ig):r)}function fi(r){if(r instanceof IDBRequest)return yC(r);if(rg.has(r))return rg.get(r);const e=wC(r);return e!==r&&(rg.set(r,e),gp.set(e,r)),e}const ig=r=>gp.get(r);function EC(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),f=fi(u);return s&&u.addEventListener("upgradeneeded",m=>{s(fi(u.result),m.oldVersion,m.newVersion,fi(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const TC=["get","getKey","getAll","getAllKeys","count"],SC=["put","add","delete","clear"],ag=new Map;function Z0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ag.get(e))return ag.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=SC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||TC.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return ag.set(e,l),l}vC(r=>({...r,get:(e,t,s)=>Z0(e,t)||r.get(e,t,s),has:(e,t)=>!!Z0(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function xC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",eb="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new mp("@firebase/app"),RC="@firebase/app-compat",CC="@firebase/analytics-compat",IC="@firebase/analytics",NC="@firebase/app-check-compat",kC="@firebase/app-check",OC="@firebase/auth",jC="@firebase/auth-compat",DC="@firebase/database",PC="@firebase/data-connect",MC="@firebase/database-compat",VC="@firebase/functions",UC="@firebase/functions-compat",LC="@firebase/installations",zC="@firebase/installations-compat",BC="@firebase/messaging",qC="@firebase/messaging-compat",$C="@firebase/performance",HC="@firebase/performance-compat",FC="@firebase/remote-config",GC="@firebase/remote-config-compat",KC="@firebase/storage",QC="@firebase/storage-compat",YC="@firebase/firestore",WC="@firebase/ai",XC="@firebase/firestore-compat",JC="firebase",ZC="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",eI={[Ng]:"fire-core",[RC]:"fire-core-compat",[IC]:"fire-analytics",[CC]:"fire-analytics-compat",[kC]:"fire-app-check",[NC]:"fire-app-check-compat",[OC]:"fire-auth",[jC]:"fire-auth-compat",[DC]:"fire-rtdb",[PC]:"fire-data-connect",[MC]:"fire-rtdb-compat",[VC]:"fire-fn",[UC]:"fire-fn-compat",[LC]:"fire-iid",[zC]:"fire-iid-compat",[BC]:"fire-fcm",[qC]:"fire-fcm-compat",[$C]:"fire-perf",[HC]:"fire-perf-compat",[FC]:"fire-rc",[GC]:"fire-rc-compat",[KC]:"fire-gcs",[QC]:"fire-gcs-compat",[YC]:"fire-fst",[XC]:"fire-fst-compat",[WC]:"fire-vertex","fire-js":"fire-js",[JC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new Map,tI=new Map,Og=new Map;function tb(r,e){try{r.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Wo(r){const e=r.name;if(Og.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,r);for(const t of Zh.values())tb(t,r);for(const t of tI.values())tb(t,r);return!0}function pp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ds(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new Qc("app","Firebase",nI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=ZC;function TE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:kg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw mi.create("bad-app-name",{appName:String(a)});if(t||(t=yE()),!t)throw mi.create("no-options");const l=Zh.get(a);if(l){if(Aa(t,l.options)&&Aa(s,l.config))return l;throw mi.create("duplicate-app",{appName:a})}const u=new cC(a);for(const m of Og.values())u.addComponent(m);const f=new sI(t,s,u);return Zh.set(a,f),f}function SE(r=kg){const e=Zh.get(r);if(!e&&r===kg&&yE())return TE();if(!e)throw mi.create("no-app",{appName:r});return e}function gi(r,e,t){let s=eI[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(u.join(" "));return}Wo(new xa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="firebase-heartbeat-database",iI=1,Uc="firebase-heartbeat-store";let og=null;function AE(){return og||(og=EC(rI,iI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Uc)}catch(t){console.warn(t)}}}}).catch(r=>{throw mi.create("idb-open",{originalErrorMessage:r.message})})),og}async function aI(r){try{const t=(await AE()).transaction(Uc),s=await t.objectStore(Uc).get(xE(r));return await t.done,s}catch(e){if(e instanceof vr)mr.warn(e.message);else{const t=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(t.message)}}}async function nb(r,e){try{const s=(await AE()).transaction(Uc,"readwrite");await s.objectStore(Uc).put(e,xE(r)),await s.done}catch(t){if(t instanceof vr)mr.warn(t.message);else{const s=mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});mr.warn(s.message)}}}function xE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=1024,lI=30;class cI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=sb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>lI){const u=dI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){mr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sb(),{heartbeatsToSend:s,unsentEntries:a}=uI(this._heartbeatsCache.heartbeats),l=Jh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return mr.warn(t),""}}}function sb(){return new Date().toISOString().substring(0,10)}function uI(r,e=oI){const t=[];let s=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),rb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),rb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class hI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XR()?JR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return nb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rb(r){return Jh(JSON.stringify({version:2,heartbeats:r})).length}function dI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(r){Wo(new xa("platform-logger",e=>new AC(e),"PRIVATE")),Wo(new xa("heartbeat",e=>new cI(e),"PRIVATE")),gi(Ng,eb,r),gi(Ng,eb,"esm2020"),gi("fire-js","")}fI("");var mI="firebase",gI="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gi(mI,gI,"app");function RE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pI=RE,CE=new Qc("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new mp("@firebase/auth");function yI(r,...e){ed.logLevel<=Ge.WARN&&ed.warn(`Auth (${ol}): ${r}`,...e)}function Bh(r,...e){ed.logLevel<=Ge.ERROR&&ed.error(`Auth (${ol}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(r,...e){throw yp(r,...e)}function Ms(r,...e){return yp(r,...e)}function IE(r,e,t){const s={...pI(),[e]:t};return new Qc("auth","Firebase",s).create(e,{appName:r.name})}function pi(r){return IE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return CE.create(r,...e)}function Re(r,e,...t){if(!r)throw yp(e,...t)}function dr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Bh(e),new Error(e)}function pr(r,e){r||dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function _I(){return ib()==="http:"||ib()==="https:"}function ib(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_I()||KR()||"connection"in navigator)?navigator.onLine:!0}function bI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.shortDelay=e,this.longDelay=t,pr(t>e,"Short delay should be less than long delay!"),this.isMobile=HR()||QR()}get(){return vI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(r,e){pr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TI=new Wc(3e4,6e4);function Td(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ll(r,e,t,s,a={}){return kE(r,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const f=Yc({key:r.config.apiKey,...u}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:m,...l};return GR()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&al(r.emulatorConfig.host)&&(p.credentials="include"),NE.fetch()(await jE(r,r.config.apiHost,t,f),p)})}async function kE(r,e,t){r._canInitEmulator=!1;const s={...wI,...e};try{const a=new SI(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Nh(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Nh(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw Nh(r,"user-disabled",u);const _=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw IE(r,_,p);gr(r,_)}}catch(a){if(a instanceof vr)throw a;gr(r,"network-request-failed",{message:String(a)})}}async function OE(r,e,t,s,a={}){const l=await ll(r,e,t,s,a);return"mfaPendingCredential"in l&&gr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function jE(r,e,t,s){const a=`${e}${t}?${s}`,l=r,u=l.config.emulator?_p(r.config,a):`${r.config.apiScheme}://${a}`;return EI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class SI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ms(this.auth,"network-request-failed")),TI.get())})}}function Nh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ms(r,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(r,e){return ll(r,"POST","/v1/accounts:delete",e)}async function td(r,e){return ll(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xI(r,e=!1){const t=Zt(r),s=await t.getIdToken(e),a=vp(s);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Nc(lg(a.auth_time)),issuedAtTime:Nc(lg(a.iat)),expirationTime:Nc(lg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function lg(r){return Number(r)*1e3}function vp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const a=gE(t);return a?JSON.parse(a):(Bh("Failed to decode base64 JWT payload"),null)}catch(a){return Bh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function ab(r){const e=vp(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof vr&&RI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function RI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nc(this.lastLoginAt),this.creationTime=Nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(r){var E;const e=r.auth,t=await r.getIdToken(),s=await Lc(r,td(e,{idToken:t}));Re(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?DE(a.providerUserInfo):[],u=NI(r.providerData,l),f=r.isAnonymous,m=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),p=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Dg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(r,_)}async function II(r){const e=Zt(r);await nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NI(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function DE(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(r,e){const t=await kE(r,{},async()=>{const s=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await jE(r,a,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:s};return r.emulatorConfig&&al(r.emulatorConfig.host)&&(m.credentials="include"),NE.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OI(r,e){return ll(r,"POST","/v2/accounts:revokeToken",Td(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ab(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=ab(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await kI(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Fo;return s&&(Re(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Re(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new CI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Dg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xI(this,e)}reload(){return II(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await nd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(pi(this.auth));const e=await this.getIdToken();return await Lc(this,AI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:k,providerData:U,stsTokenManager:B}=t;Re(E&&B,e,"internal-error");const L=Fo.fromJSON(this.name,B);Re(typeof E=="string",e,"internal-error"),ri(s,e.name),ri(a,e.name),Re(typeof S=="boolean",e,"internal-error"),Re(typeof k=="boolean",e,"internal-error"),ri(l,e.name),ri(u,e.name),ri(f,e.name),ri(m,e.name),ri(p,e.name),ri(_,e.name);const re=new fs({uid:E,auth:e,email:a,emailVerified:S,displayName:s,isAnonymous:k,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:p,lastLoginAt:_});return U&&Array.isArray(U)&&(re.providerData=U.map(te=>({...te}))),m&&(re._redirectEventId=m),re}static async _fromIdTokenResponse(e,t,s=!1){const a=new Fo;a.updateFromServerResponse(t);const l=new fs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await nd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?DE(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Fo;f.updateFromIdToken(s);const m=new fs({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Dg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;function fr(r){pr(r instanceof Function,"Expected a class definition");let e=ob.get(r);return e?(pr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,ob.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}PE.type="NONE";const lb=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r,e,t){return`firebase:${r}:${e}:${t}`}class Go{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=qh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await td(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Go(fr(lb),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||fr(lb);const u=qh(s,e.config.apiKey,e.name);let f=null;for(const p of t)try{const _=await p._get(u);if(_){let E;if(typeof _=="string"){const S=await td(e,{idToken:_}).catch(()=>{});if(!S)break;E=await fs._fromGetAccountInfoResponse(e,S,_)}else E=fs._fromJSON(e,_);p!==l&&(f=E),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Go(l,e,s):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new Go(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ME(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BE(e))return"Blackberry";if(qE(e))return"Webos";if(VE(e))return"Safari";if((e.includes("chrome/")||UE(e))&&!e.includes("edge/"))return"Chrome";if(zE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ME(r=pn()){return/firefox\//i.test(r)}function VE(r=pn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UE(r=pn()){return/crios\//i.test(r)}function LE(r=pn()){return/iemobile/i.test(r)}function zE(r=pn()){return/android/i.test(r)}function BE(r=pn()){return/blackberry/i.test(r)}function qE(r=pn()){return/webos/i.test(r)}function bp(r=pn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function jI(r=pn()){var e;return bp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function DI(){return YR()&&document.documentMode===10}function $E(r=pn()){return bp(r)||zE(r)||qE(r)||BE(r)||/windows phone/i.test(r)||LE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(r,e=[]){let t;switch(r){case"Browser":t=cb(pn());break;case"Worker":t=`${cb(pn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(r,e={}){return ll(r,"GET","/v2/passwordPolicy",Td(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=6;class UI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ub(this),this.idTokenSubscription=new ub(this),this.beforeStateQueue=new PI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fr(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await td(this,{idToken:e}),s=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ds(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(s=m.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(pi(this));const t=e?Zt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MI(this),t=new UI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await OI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&yI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sd(r){return Zt(r)}class ub{constructor(e){this.auth=e,this.observer=null,this.addObserver=sC(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zI(r){wp=r}function BI(r){return wp.loadJS(r)}function qI(){return wp.gapiScript}function $I(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(r,e){const t=pp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Aa(l,e??{}))return a;gr(a,"already-initialized")}return t.initialize({options:e})}function FI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(fr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function GI(r,e,t){const s=Sd(r);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=FE(e),{host:u,port:f}=KI(e),m=f===null?"":`:${f}`,p={url:`${l}//${u}${m}/`},_=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(Aa(p,s.config.emulator)&&Aa(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,al(u)?(vE(`${l}//${u}${m}`),bE("Auth",!0)):QI()}function FE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function KI(r){const e=FE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:hb(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:hb(u)}}}function hb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function QI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,t){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,e){return OE(r,"POST","/v1/accounts:signInWithIdp",Td(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="http://localhost";class Ra extends GE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Ra(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:YI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends KE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Xc{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return li.credential(t,s)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Xc{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Xc{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ui.credential(t,s)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(r,e){return OE(r,"POST","/v1/accounts:signUp",Td(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await fs._fromIdTokenResponse(e,s,a),u=db(s);return new bi({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=db(s);return new bi({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function db(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(r){var a;if(ds(r.app))return Promise.reject(pi(r));const e=Sd(r);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new bi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await WI(e,{returnSecureToken:!0}),s=await bi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends vr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new sd(e,t,s,a)}}function QE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?sd._fromErrorAndOperation(r,l,e,s):l})}async function JI(r,e,t=!1){const s=await Lc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return bi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(r,e,t=!1){const{auth:s}=r;if(ds(s.app))return Promise.reject(pi(s));const a="reauthenticate";try{const l=await Lc(r,QE(s,a,e,r),t);Re(l.idToken,s,"internal-error");const u=vp(l.idToken);Re(u,s,"internal-error");const{sub:f}=u;return Re(r.uid===f,s,"user-mismatch"),bi._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&gr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(r,e,t=!1){if(ds(r.app))return Promise.reject(pi(r));const s="signIn",a=await QE(r,s,e),l=await bi._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}function t2(r,e,t,s){return Zt(r).onIdTokenChanged(e,t,s)}function n2(r,e,t){return Zt(r).beforeAuthStateChanged(e,t)}function s2(r,e,t,s){return Zt(r).onAuthStateChanged(e,t,s)}function r2(r){return Zt(r).signOut()}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1e3,a2=10;class WE extends YE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$E(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);DI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,a2):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const o2=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends YE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XE.type="SESSION";const JE=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Ad(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(u).map(async p=>p(t.origin,l)),m=await l2(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const p=Ep("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return window}function u2(r){Vs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function h2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d2(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function f2(){return ZE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="firebaseLocalStorageDb",m2=1,id="firebaseLocalStorage",tT="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xd(r,e){return r.transaction([id],e?"readwrite":"readonly").objectStore(id)}function g2(){const r=indexedDB.deleteDatabase(eT);return new Jc(r).toPromise()}function Pg(){const r=indexedDB.open(eT,m2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(id,{keyPath:tT})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(id)?e(s):(s.close(),await g2(),e(await Pg()))})})}async function fb(r,e,t){const s=xd(r,!0).put({[tT]:e,value:t});return new Jc(s).toPromise()}async function p2(r,e){const t=xd(r,!1).get(e),s=await new Jc(t).toPromise();return s===void 0?null:s.value}function mb(r,e){const t=xd(r,!0).delete(e);return new Jc(t).toPromise()}const y2=800,_2=3;class nT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>_2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(f2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await h2(),!this.activeServiceWorker)return;this.sender=new c2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pg();return await fb(e,rd,"1"),await mb(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>fb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>p2(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=xd(a,!1).getAll();return new Jc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nT.type="LOCAL";const v2=nT;new Wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(r,e){return e?fr(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends GE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function w2(r){return e2(r.auth,new Tp(r),r.bypassAuthState)}function E2(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),ZI(t,new Tp(r),r.bypassAuthState)}async function T2(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),JI(t,new Tp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w2;case"linkViaPopup":case"linkViaRedirect":return T2;case"reauthViaPopup":case"reauthViaRedirect":return E2;default:gr(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Wc(2e3,1e4);class Ho extends sT{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const e=Ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S2.get())};e()}}Ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="pendingRedirect",$h=new Map;class x2 extends sT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const s=await R2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R2(r,e){const t=N2(e),s=I2(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function C2(r,e){$h.set(r._key(),e)}function I2(r){return fr(r._redirectPersistence)}function N2(r){return qh(A2,r.config.apiKey,r.name)}async function k2(r,e,t=!1){if(ds(r.app))return Promise.reject(pi(r));const s=Sd(r),a=b2(s,e),u=await new x2(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=10*60*1e3;class j2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!rT(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ms(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O2&&this.cachedEventUids.clear(),this.cachedEventUids.has(gb(e))}saveEventToCache(e){this.cachedEventUids.add(gb(e)),this.lastProcessedEventTime=Date.now()}}function gb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function rT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D2(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(r,e={}){return ll(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V2=/^https?/;async function U2(r){if(r.config.emulator)return;const{authorizedDomains:e}=await P2(r);for(const t of e)try{if(L2(t))return}catch{}gr(r,"unauthorized-domain")}function L2(r){const e=jg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!V2.test(t))return!1;if(M2.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Wc(3e4,6e4);function pb(){const r=Vs().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function B2(r){return new Promise((e,t)=>{var a,l,u;function s(){pb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pb(),t(Ms(r,"network-request-failed"))},timeout:z2.get()})}if((l=(a=Vs().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Vs().gapi)!=null&&u.load)s();else{const f=$I("iframefcb");return Vs()[f]=()=>{gapi.load?s():t(Ms(r,"network-request-failed"))},BI(`${qI()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function q2(r){return Hh=Hh||B2(r),Hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new Wc(5e3,15e3),H2="__/auth/iframe",F2="emulator/auth/iframe",G2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},K2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q2(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?_p(e,F2):`https://${r.config.authDomain}/${H2}`,s={apiKey:e.apiKey,appName:r.name,v:ol},a=K2.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Yc(s).slice(1)}`}async function Y2(r){const e=await q2(r),t=Vs().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:Q2(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G2,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Ms(r,"network-request-failed"),f=Vs().setTimeout(()=>{l(u)},$2.get());function m(){Vs().clearTimeout(f),a(s)}s.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X2=500,J2=600,Z2="_blank",eN="http://localhost";class yb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tN(r,e,t,s=X2,a=J2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const m={...W2,width:s.toString(),height:a.toString(),top:l,left:u},p=pn().toLowerCase();t&&(f=UE(p)?Z2:t),ME(p)&&(e=e||eN,m.scrollbars="yes");const _=Object.entries(m).reduce((S,[k,U])=>`${S}${k}=${U},`,"");if(jI(p)&&f!=="_self")return nN(e||"",f),new yb(null);const E=window.open(e||"",f,_);Re(E,r,"popup-blocked");try{E.focus()}catch{}return new yb(E)}function nN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="__/auth/handler",rN="emulator/auth/handler",iN=encodeURIComponent("fac");async function _b(r,e,t,s,a,l){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ol,eventId:a};if(e instanceof KE){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",nC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Xc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}r.tenantId&&(u.tid=r.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await r._getAppCheckToken(),p=m?`#${iN}=${encodeURIComponent(m)}`:"";return`${aN(r)}?${Yc(f).slice(1)}${p}`}function aN({config:r}){return r.emulator?_p(r,rN):`https://${r.authDomain}/${sN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="webStorageSupport";class oN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JE,this._completeRedirectFn=k2,this._overrideRedirectResult=C2}async _openPopup(e,t,s,a){var u;pr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await _b(e,t,s,jg(),a);return tN(e,l,Ep())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await _b(e,t,s,jg(),a);return u2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(pr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Y2(e),s=new j2(e);return t.register("authEvent",a=>(Re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cg,{type:cg},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[cg];l!==void 0&&t(!!l),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=U2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $E()||VE()||bp()}}const lN=oN;var vb="@firebase/auth",bb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hN(r){Wo(new xa("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=s.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:u,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HE(r)},p=new LI(s,a,l,m);return FI(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Wo(new xa("auth-internal",e=>{const t=Sd(e.getProvider("auth").getImmediate());return(s=>new cN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(vb,bb,uN(r)),gi(vb,bb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=5*60,fN=_E("authIdTokenMaxAge")||dN;let wb=null;const mN=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>fN)return;const a=t==null?void 0:t.token;wb!==a&&(wb=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function gN(r=SE()){const e=pp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=HI(r,{popupRedirectResolver:lN,persistence:[v2,o2,JE]}),s=_E("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=mN(l.toString());n2(t,u,()=>u(t.currentUser)),t2(t,f=>u(f))}}const a=pE("auth");return a&&GI(t,`http://${a}`),t}function pN(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}zI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=Ms("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",pN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hN("Browser");var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,iT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function R(){}R.prototype=x.prototype,I.F=x.prototype,I.prototype=new R,I.prototype.constructor=I,I.D=function(D,j,P){for(var C=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)C[Ye-2]=arguments[Ye];return x.prototype[j].apply(D,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,x,R){R||(R=0);const D=Array(16);if(typeof x=="string")for(var j=0;j<16;++j)D[j]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(j=0;j<16;++j)D[j]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=I.g[0],R=I.g[1],j=I.g[2];let P=I.g[3],C;C=x+(P^R&(j^P))+D[0]+3614090360&4294967295,x=R+(C<<7&4294967295|C>>>25),C=P+(j^x&(R^j))+D[1]+3905402710&4294967295,P=x+(C<<12&4294967295|C>>>20),C=j+(R^P&(x^R))+D[2]+606105819&4294967295,j=P+(C<<17&4294967295|C>>>15),C=R+(x^j&(P^x))+D[3]+3250441966&4294967295,R=j+(C<<22&4294967295|C>>>10),C=x+(P^R&(j^P))+D[4]+4118548399&4294967295,x=R+(C<<7&4294967295|C>>>25),C=P+(j^x&(R^j))+D[5]+1200080426&4294967295,P=x+(C<<12&4294967295|C>>>20),C=j+(R^P&(x^R))+D[6]+2821735955&4294967295,j=P+(C<<17&4294967295|C>>>15),C=R+(x^j&(P^x))+D[7]+4249261313&4294967295,R=j+(C<<22&4294967295|C>>>10),C=x+(P^R&(j^P))+D[8]+1770035416&4294967295,x=R+(C<<7&4294967295|C>>>25),C=P+(j^x&(R^j))+D[9]+2336552879&4294967295,P=x+(C<<12&4294967295|C>>>20),C=j+(R^P&(x^R))+D[10]+4294925233&4294967295,j=P+(C<<17&4294967295|C>>>15),C=R+(x^j&(P^x))+D[11]+2304563134&4294967295,R=j+(C<<22&4294967295|C>>>10),C=x+(P^R&(j^P))+D[12]+1804603682&4294967295,x=R+(C<<7&4294967295|C>>>25),C=P+(j^x&(R^j))+D[13]+4254626195&4294967295,P=x+(C<<12&4294967295|C>>>20),C=j+(R^P&(x^R))+D[14]+2792965006&4294967295,j=P+(C<<17&4294967295|C>>>15),C=R+(x^j&(P^x))+D[15]+1236535329&4294967295,R=j+(C<<22&4294967295|C>>>10),C=x+(j^P&(R^j))+D[1]+4129170786&4294967295,x=R+(C<<5&4294967295|C>>>27),C=P+(R^j&(x^R))+D[6]+3225465664&4294967295,P=x+(C<<9&4294967295|C>>>23),C=j+(x^R&(P^x))+D[11]+643717713&4294967295,j=P+(C<<14&4294967295|C>>>18),C=R+(P^x&(j^P))+D[0]+3921069994&4294967295,R=j+(C<<20&4294967295|C>>>12),C=x+(j^P&(R^j))+D[5]+3593408605&4294967295,x=R+(C<<5&4294967295|C>>>27),C=P+(R^j&(x^R))+D[10]+38016083&4294967295,P=x+(C<<9&4294967295|C>>>23),C=j+(x^R&(P^x))+D[15]+3634488961&4294967295,j=P+(C<<14&4294967295|C>>>18),C=R+(P^x&(j^P))+D[4]+3889429448&4294967295,R=j+(C<<20&4294967295|C>>>12),C=x+(j^P&(R^j))+D[9]+568446438&4294967295,x=R+(C<<5&4294967295|C>>>27),C=P+(R^j&(x^R))+D[14]+3275163606&4294967295,P=x+(C<<9&4294967295|C>>>23),C=j+(x^R&(P^x))+D[3]+4107603335&4294967295,j=P+(C<<14&4294967295|C>>>18),C=R+(P^x&(j^P))+D[8]+1163531501&4294967295,R=j+(C<<20&4294967295|C>>>12),C=x+(j^P&(R^j))+D[13]+2850285829&4294967295,x=R+(C<<5&4294967295|C>>>27),C=P+(R^j&(x^R))+D[2]+4243563512&4294967295,P=x+(C<<9&4294967295|C>>>23),C=j+(x^R&(P^x))+D[7]+1735328473&4294967295,j=P+(C<<14&4294967295|C>>>18),C=R+(P^x&(j^P))+D[12]+2368359562&4294967295,R=j+(C<<20&4294967295|C>>>12),C=x+(R^j^P)+D[5]+4294588738&4294967295,x=R+(C<<4&4294967295|C>>>28),C=P+(x^R^j)+D[8]+2272392833&4294967295,P=x+(C<<11&4294967295|C>>>21),C=j+(P^x^R)+D[11]+1839030562&4294967295,j=P+(C<<16&4294967295|C>>>16),C=R+(j^P^x)+D[14]+4259657740&4294967295,R=j+(C<<23&4294967295|C>>>9),C=x+(R^j^P)+D[1]+2763975236&4294967295,x=R+(C<<4&4294967295|C>>>28),C=P+(x^R^j)+D[4]+1272893353&4294967295,P=x+(C<<11&4294967295|C>>>21),C=j+(P^x^R)+D[7]+4139469664&4294967295,j=P+(C<<16&4294967295|C>>>16),C=R+(j^P^x)+D[10]+3200236656&4294967295,R=j+(C<<23&4294967295|C>>>9),C=x+(R^j^P)+D[13]+681279174&4294967295,x=R+(C<<4&4294967295|C>>>28),C=P+(x^R^j)+D[0]+3936430074&4294967295,P=x+(C<<11&4294967295|C>>>21),C=j+(P^x^R)+D[3]+3572445317&4294967295,j=P+(C<<16&4294967295|C>>>16),C=R+(j^P^x)+D[6]+76029189&4294967295,R=j+(C<<23&4294967295|C>>>9),C=x+(R^j^P)+D[9]+3654602809&4294967295,x=R+(C<<4&4294967295|C>>>28),C=P+(x^R^j)+D[12]+3873151461&4294967295,P=x+(C<<11&4294967295|C>>>21),C=j+(P^x^R)+D[15]+530742520&4294967295,j=P+(C<<16&4294967295|C>>>16),C=R+(j^P^x)+D[2]+3299628645&4294967295,R=j+(C<<23&4294967295|C>>>9),C=x+(j^(R|~P))+D[0]+4096336452&4294967295,x=R+(C<<6&4294967295|C>>>26),C=P+(R^(x|~j))+D[7]+1126891415&4294967295,P=x+(C<<10&4294967295|C>>>22),C=j+(x^(P|~R))+D[14]+2878612391&4294967295,j=P+(C<<15&4294967295|C>>>17),C=R+(P^(j|~x))+D[5]+4237533241&4294967295,R=j+(C<<21&4294967295|C>>>11),C=x+(j^(R|~P))+D[12]+1700485571&4294967295,x=R+(C<<6&4294967295|C>>>26),C=P+(R^(x|~j))+D[3]+2399980690&4294967295,P=x+(C<<10&4294967295|C>>>22),C=j+(x^(P|~R))+D[10]+4293915773&4294967295,j=P+(C<<15&4294967295|C>>>17),C=R+(P^(j|~x))+D[1]+2240044497&4294967295,R=j+(C<<21&4294967295|C>>>11),C=x+(j^(R|~P))+D[8]+1873313359&4294967295,x=R+(C<<6&4294967295|C>>>26),C=P+(R^(x|~j))+D[15]+4264355552&4294967295,P=x+(C<<10&4294967295|C>>>22),C=j+(x^(P|~R))+D[6]+2734768916&4294967295,j=P+(C<<15&4294967295|C>>>17),C=R+(P^(j|~x))+D[13]+1309151649&4294967295,R=j+(C<<21&4294967295|C>>>11),C=x+(j^(R|~P))+D[4]+4149444226&4294967295,x=R+(C<<6&4294967295|C>>>26),C=P+(R^(x|~j))+D[11]+3174756917&4294967295,P=x+(C<<10&4294967295|C>>>22),C=j+(x^(P|~R))+D[2]+718787259&4294967295,j=P+(C<<15&4294967295|C>>>17),C=R+(P^(j|~x))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(j+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+P&4294967295}s.prototype.v=function(I,x){x===void 0&&(x=I.length);const R=x-this.blockSize,D=this.C;let j=this.h,P=0;for(;P<x;){if(j==0)for(;P<=R;)a(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<x;)if(D[j++]=I.charCodeAt(P++),j==this.blockSize){a(this,D),j=0;break}}else for(;P<x;)if(D[j++]=I[P++],j==this.blockSize){a(this,D),j=0;break}}this.h=j,this.o+=x},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;x=this.o*8;for(var R=I.length-8;R<I.length;++R)I[R]=x&255,x/=256;for(this.v(I),I=Array(16),x=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)I[x++]=this.g[R]>>>D&255;return I};function l(I,x){var R=f;return Object.prototype.hasOwnProperty.call(R,I)?R[I]:R[I]=x(I)}function u(I,x){this.h=x;const R=[];let D=!0;for(let j=I.length-1;j>=0;j--){const P=I[j]|0;D&&P==x||(R[j]=P,D=!1)}this.g=R}var f={};function m(I){return-128<=I&&I<128?l(I,function(x){return new u([x|0],x<0?-1:0)}):new u([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return L(p(-I));const x=[];let R=1;for(let D=0;I>=R;D++)x[D]=I/R|0,R*=4294967296;return new u(x,0)}function _(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return L(_(I.substring(1),x));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(x,8));let D=E;for(let P=0;P<I.length;P+=8){var j=Math.min(8,I.length-P);const C=parseInt(I.substring(P,P+j),x);j<8?(j=p(Math.pow(x,j)),D=D.j(j).add(p(C))):(D=D.j(R),D=D.add(p(C)))}return D}var E=m(0),S=m(1),k=m(16777216);r=u.prototype,r.m=function(){if(B(this))return-L(this).m();let I=0,x=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);I+=(D>=0?D:4294967296+D)*x,x*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(U(this))return"0";if(B(this))return"-"+L(this).toString(I);const x=p(Math.pow(I,6));var R=this;let D="";for(;;){const j=le(R,x).g;R=re(R,j.j(x));let P=((R.g.length>0?R.g[0]:R.h)>>>0).toString(I);if(R=j,U(R))return P+D;for(;P.length<6;)P="0"+P;D=P+D}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function U(I){if(I.h!=0)return!1;for(let x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function B(I){return I.h==-1}r.l=function(I){return I=re(this,I),B(I)?-1:U(I)?0:1};function L(I){const x=I.g.length,R=[];for(let D=0;D<x;D++)R[D]=~I.g[D];return new u(R,~I.h).add(S)}r.abs=function(){return B(this)?L(this):this},r.add=function(I){const x=Math.max(this.g.length,I.g.length),R=[];let D=0;for(let j=0;j<=x;j++){let P=D+(this.i(j)&65535)+(I.i(j)&65535),C=(P>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);D=C>>>16,P&=65535,C&=65535,R[j]=C<<16|P}return new u(R,R[R.length-1]&-2147483648?-1:0)};function re(I,x){return I.add(L(x))}r.j=function(I){if(U(this)||U(I))return E;if(B(this))return B(I)?L(this).j(L(I)):L(L(this).j(I));if(B(I))return L(this.j(L(I)));if(this.l(k)<0&&I.l(k)<0)return p(this.m()*I.m());const x=this.g.length+I.g.length,R=[];for(var D=0;D<2*x;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let j=0;j<I.g.length;j++){const P=this.i(D)>>>16,C=this.i(D)&65535,Ye=I.i(j)>>>16,Le=I.i(j)&65535;R[2*D+2*j]+=C*Le,te(R,2*D+2*j),R[2*D+2*j+1]+=P*Le,te(R,2*D+2*j+1),R[2*D+2*j+1]+=C*Ye,te(R,2*D+2*j+1),R[2*D+2*j+2]+=P*Ye,te(R,2*D+2*j+2)}for(I=0;I<x;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=x;I<2*x;I++)R[I]=0;return new u(R,0)};function te(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function Y(I,x){this.g=I,this.h=x}function le(I,x){if(U(x))throw Error("division by zero");if(U(I))return new Y(E,E);if(B(I))return x=le(L(I),x),new Y(L(x.g),L(x.h));if(B(x))return x=le(I,L(x)),new Y(L(x.g),x.h);if(I.g.length>30){if(B(I)||B(x))throw Error("slowDivide_ only works with positive integers.");for(var R=S,D=x;D.l(I)<=0;)R=ce(R),D=ce(D);var j=ae(R,1),P=ae(D,1);for(D=ae(D,2),R=ae(R,2);!U(D);){var C=P.add(D);C.l(I)<=0&&(j=j.add(R),P=C),D=ae(D,1),R=ae(R,1)}return x=re(I,j.j(x)),new Y(j,x)}for(j=E;I.l(x)>=0;){for(R=Math.max(1,Math.floor(I.m()/x.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),P=p(R),C=P.j(x);B(C)||C.l(I)>0;)R-=D,P=p(R),C=P.j(x);U(P)&&(P=S),j=j.add(P),I=re(I,C)}return new Y(j,I)}r.B=function(I){return le(this,I).h},r.and=function(I){const x=Math.max(this.g.length,I.g.length),R=[];for(let D=0;D<x;D++)R[D]=this.i(D)&I.i(D);return new u(R,this.h&I.h)},r.or=function(I){const x=Math.max(this.g.length,I.g.length),R=[];for(let D=0;D<x;D++)R[D]=this.i(D)|I.i(D);return new u(R,this.h|I.h)},r.xor=function(I){const x=Math.max(this.g.length,I.g.length),R=[];for(let D=0;D<x;D++)R[D]=this.i(D)^I.i(D);return new u(R,this.h^I.h)};function ce(I){const x=I.g.length+1,R=[];for(let D=0;D<x;D++)R[D]=I.i(D)<<1|I.i(D-1)>>>31;return new u(R,I.h)}function ae(I,x){const R=x>>5;x%=32;const D=I.g.length-R,j=[];for(let P=0;P<D;P++)j[P]=x>0?I.i(P+R)>>>x|I.i(P+R+1)<<32-x:I.i(P+R);return new u(j,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,iT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,yi=u}).apply(typeof Eb<"u"?Eb:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aT,Sc,oT,Fh,Mg,lT,cT,uT;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function a(h,v){if(v)e:{var b=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in b))break e;b=b[$]}h=h[h.length-1],A=b[h],v=v(A),v!=A&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(v){var b=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&b.push([A,v[A]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function m(h,v,b){return h.call.apply(h.bind,arguments)}function p(h,v,b){return p=m,p.apply(null,arguments)}function _(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,v){function b(){}b.prototype=v.prototype,h.Z=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Ob=function(A,$,Q){for(var ue=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ue[Oe-2]=arguments[Oe];return v.prototype[$].apply(A,ue)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const v=h.length;if(v>0){const b=Array(v);for(let A=0;A<v;A++)b[A]=h[A];return b}return[]}function U(h,v){for(let A=1;A<arguments.length;A++){const $=arguments[A];var b=typeof $;if(b=b!="object"?b:$?Array.isArray($)?"array":b:"null",b=="array"||b=="object"&&typeof $.length=="number"){b=h.length||0;const Q=$.length||0;h.length=b+Q;for(let ue=0;ue<Q;ue++)h[b+ue]=$[ue]}else h.push($)}}class B{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){u.setTimeout(()=>{throw h},0)}function re(){var h=I;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class te{constructor(){this.h=this.g=null}add(v,b){const A=Y.get();A.set(v,b),this.h?this.h.next=A:this.g=A,this.h=A}}var Y=new B(()=>new le,h=>h.reset());class le{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ae=!1,I=new te,x=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(R)}};function R(){for(var h;h=re();){try{h.h.call(h.g)}catch(b){L(b)}var v=Y;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}ae=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};u.addEventListener("test",b,v),u.removeEventListener("test",b,v)}catch{}return h}();function C(h){return/^[\s\xa0]*$/.test(h)}function Ye(h,v){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(Ye,j),Ye.prototype.init=function(h,v){const b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ye.Z.h.call(this)},Ye.prototype.h=function(){Ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),M=0;function ie(h,v,b,A,$){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!A,this.ha=$,this.key=++M,this.da=this.fa=!1}function ne(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function F(h,v,b){for(const A in h)v.call(b,h[A],A,h)}function N(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function X(h){const v={};for(const b in h)v[b]=h[b];return v}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,v){let b,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(b in A)h[b]=A[b];for(let Q=0;Q<he.length;Q++)b=he[Q],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function de(h){this.src=h,this.g={},this.h=0}de.prototype.add=function(h,v,b,A,$){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const ue=Ee(h,v,A,$);return ue>-1?(v=h[ue],b||(v.fa=!1)):(v=new ie(v,this.src,Q,!!A,$),v.fa=b,h.push(v)),v};function Ve(h,v){const b=v.type;if(b in h.g){var A=h.g[b],$=Array.prototype.indexOf.call(A,v,void 0),Q;(Q=$>=0)&&Array.prototype.splice.call(A,$,1),Q&&(ne(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Ee(h,v,b,A){for(let $=0;$<h.length;++$){const Q=h[$];if(!Q.da&&Q.listener==v&&Q.capture==!!b&&Q.ha==A)return $}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ze={};function ln(h,v,b,A,$){if(Array.isArray(v)){for(let Q=0;Q<v.length;Q++)ln(h,v[Q],b,A,$);return null}return b=lu(b),h&&h[Le]?h.J(v,b,f(A)?!!A.capture:!1,$):ys(h,v,b,!1,A,$)}function ys(h,v,b,A,$,Q){if(!v)throw Error("Invalid event type");const ue=f($)?!!$.capture:!!$;let Oe=ml(h);if(Oe||(h[Fe]=Oe=new de(h)),b=Oe.add(v,b,A,ue,Q),b.proxy)return b;if(A=_s(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)P||($=ue),$===void 0&&($=!1),h.addEventListener(v.toString(),A,$);else if(h.attachEvent)h.attachEvent(Ma(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function _s(){function h(b){return v.call(h.src,h.listener,b)}const v=Hd;return h}function Zn(h,v,b,A,$){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Zn(h,v[Q],b,A,$);else A=f(A)?!!A.capture:!!A,b=lu(b),h&&h[Le]?(h=h.i,Q=String(v).toString(),Q in h.g&&(v=h.g[Q],b=Ee(v,b,A,$),b>-1&&(ne(v[b]),Array.prototype.splice.call(v,b,1),v.length==0&&(delete h.g[Q],h.h--)))):h&&(h=ml(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ee(v,b,A,$)),(b=h>-1?v[h]:null)&&Ni(b))}function Ni(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Le])Ve(v.i,h);else{var b=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(b,A,h.capture):v.detachEvent?v.detachEvent(Ma(b),A):v.addListener&&v.removeListener&&v.removeListener(A),(b=ml(v))?(Ve(b,h),b.h==0&&(b.src=null,v[Fe]=null)):ne(h)}}}function Ma(h){return h in Ze?Ze[h]:Ze[h]="on"+h}function Hd(h,v){if(h.da)h=!0;else{v=new Ye(v,this);const b=h.listener,A=h.ha||h.src;h.fa&&Ni(h),h=b.call(A,v)}return h}function ml(h){return h=h[Fe],h instanceof de?h:null}var En="__closure_events_fn_"+(Math.random()*1e9>>>0);function lu(h){return typeof h=="function"?h:(h[En]||(h[En]=function(v){return h.handleEvent(v)}),h[En])}function Lt(){D.call(this),this.i=new de(this),this.M=this,this.G=null}E(Lt,D),Lt.prototype[Le]=!0,Lt.prototype.removeEventListener=function(h,v,b,A){Zn(this,h,v,b,A)};function Gt(h,v){var b,A=h.G;if(A)for(b=[];A;A=A.G)b.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new j(v,h);else if(v instanceof j)v.target=v.target||h;else{var $=v;v=new j(A,h),oe(v,$)}$=!0;let Q,ue;if(b)for(ue=b.length-1;ue>=0;ue--)Q=v.g=b[ue],$=$s(Q,A,!0,v)&&$;if(Q=v.g=h,$=$s(Q,A,!0,v)&&$,$=$s(Q,A,!1,v)&&$,b)for(ue=0;ue<b.length;ue++)Q=v.g=b[ue],$=$s(Q,A,!1,v)&&$}Lt.prototype.N=function(){if(Lt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const b=h.g[v];for(let A=0;A<b.length;A++)ne(b[A]);delete h.g[v],h.h--}}this.G=null},Lt.prototype.J=function(h,v,b,A){return this.i.add(String(h),v,!1,b,A)},Lt.prototype.K=function(h,v,b,A){return this.i.add(String(h),v,!0,b,A)};function $s(h,v,b,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let $=!0;for(let Q=0;Q<v.length;++Q){const ue=v[Q];if(ue&&!ue.da&&ue.capture==b){const Oe=ue.listener,pt=ue.ha||ue.src;ue.fa&&Ve(h.i,ue),$=Oe.call(pt,A)!==!1&&$}}return $&&!A.defaultPrevented}function Fd(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(h,v||0)}function gl(h){h.g=Fd(()=>{h.g=null,h.i&&(h.i=!1,gl(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Gd extends D{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:gl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(h){D.call(this),this.h=h,this.g={}}E(ki,D);var br=[];function cn(h){F(h.g,function(v,b){this.g.hasOwnProperty(b)&&Ni(v)},h),h.g={}}ki.prototype.N=function(){ki.Z.N.call(this),cn(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zn=u.JSON.stringify,yn=u.JSON.parse,Kd=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function cu(){}function uu(){}var vs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function wr(){j.call(this,"d")}E(wr,j);function es(){j.call(this,"c")}E(es,j);var Bn={},Er=null;function Va(){return Er=Er||new Lt}Bn.Ia="serverreachability";function pl(h){j.call(this,Bn.Ia,h)}E(pl,j);function Tr(h){const v=Va();Gt(v,new pl(v))}Bn.STAT_EVENT="statevent";function Ua(h,v){j.call(this,Bn.STAT_EVENT,h),this.stat=v}E(Ua,j);function St(h){const v=Va();Gt(v,new Ua(v,h))}Bn.Ja="timingevent";function hu(h,v){j.call(this,Bn.Ja,h),this.size=v}E(hu,j);function Sr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function Ar(){this.g=!0}Ar.prototype.ua=function(){this.g=!1};function yl(h,v,b,A,$,Q){h.info(function(){if(h.g)if(Q){var ue="",Oe=Q.split("&");for(let st=0;st<Oe.length;st++){var pt=Oe[st].split("=");if(pt.length>1){const Rt=pt[0];pt=pt[1];const Nn=Rt.split("_");ue=Nn.length>=2&&Nn[1]=="type"?ue+(Rt+"="+pt+"&"):ue+(Rt+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+v+`
`+b+`
`+ue})}function _l(h,v,b,A,$,Q,ue){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+v+`
`+b+`
`+Q+" "+ue})}function Hs(h,v,b,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+bs(h,b)+(A?" "+A:"")})}function Qd(h,v){h.info(function(){return"TIMEOUT: "+v})}Ar.prototype.info=function(){};function bs(h,v){if(!h.g)return v;if(!v)return null;try{const Q=JSON.parse(v);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var b=Q[h];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var $=A[0];if($!="noop"&&$!="stop"&&$!="close")for(let ue=1;ue<A.length;ue++)A[ue]=""}}}}return zn(Q)}catch{return v}}var At={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},en={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fs;function Oi(){}E(Oi,cu),Oi.prototype.g=function(){return new XMLHttpRequest},Fs=new Oi;function ji(h){return encodeURIComponent(String(h))}function Yd(h){var v=1;h=h.split(":");const b=[];for(;v>0&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function ts(h,v,b,A){this.j=h,this.i=v,this.l=b,this.S=A||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xr}function xr(){this.i=null,this.g="",this.h=!1}var La={},ws={};function Es(h,v,b){h.M=1,h.A=Ks(vt(v)),h.u=b,h.R=!0,Rr(h,null)}function Rr(h,v){h.F=Date.now(),Di(h),h.B=vt(h.A);var b=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),gu(b.i,"t",A),h.C=0,b=h.j.L,h.h=new xr,h.g=Ya(h.j,b?v:null,!h.u),h.P>0&&(h.O=new Gd(p(h.Y,h,h.g),h.P)),v=h.V,b=h.g,A=h.ba;var $="readystatechange";Array.isArray($)||($&&(br[0]=$.toString()),$=br);for(let Q=0;Q<$.length;Q++){const ue=ln(b,$[Q],A||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.J?X(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Tr(),yl(h.i,h.v,h.B,h.l,h.S,h.u)}ts.prototype.ba=function(h){h=h.target;const v=this.O;v&&un(h)==3?v.j():this.Y(h)},ts.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=un(this.g),pt=this.g.ya(),st=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Fi(this.g)))){this.K||Oe!=4||pt==7||(pt==8||st<=0?Tr(3):Tr(2)),Ss(this);var v=this.g.ca();this.X=v;var b=Cr(this);if(this.o=v==200,_l(this.i,this.v,this.B,this.l,this.S,Oe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var Q=A;break t}}Q=null}if(h=Q)Hs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,za(this,h);else{this.o=!1,this.m=3,St(12),As(this),Pi(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<b.length;)if(Rt=du(this,b),Rt==ws){Oe==4&&(this.m=4,St(14),h=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==La){this.m=4,St(15),Hs(this.i,this.l,b,"[Invalid Chunk]"),h=!1;break}else Hs(this.i,this.l,Rt,null),za(this,Rt);if(xt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||b.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)Hs(this.i,this.l,b,"[Invalid Chunked Response]"),As(this),Pi(this);else if(b.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Cl(ue),ue.P=!0,St(11))}}else Hs(this.i,this.l,b,null),za(this,b);Oe==4&&As(this),this.o&&!this.K&&(Oe==4?Il(this.j,this):(this.o=!1,Di(this)))}else Gi(this.g),v==400&&b.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),As(this),Pi(this)}}}catch{}finally{}};function Cr(h){if(!xt(h))return h.g.la();const v=Fi(h.g);if(v==="")return"";let b="";const A=v.length,$=un(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return As(h),Pi(h),"";h.h.i=new u.TextDecoder}for(let Q=0;Q<A;Q++)h.h.h=!0,b+=h.h.i.decode(v[Q],{stream:!($&&Q==A-1)});return v.length=0,h.h.g+=b,h.C=0,h.h.g}function xt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function du(h,v){var b=h.C,A=v.indexOf(`
`,b);return A==-1?ws:(b=Number(v.substring(b,A)),isNaN(b)?La:(A+=1,A+b>v.length?ws:(v=v.slice(A,A+b),h.C=A+b,v)))}ts.prototype.cancel=function(){this.K=!0,As(this)};function Di(h){h.T=Date.now()+h.H,Ts(h,h.H)}function Ts(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Sr(p(h.aa,h),v)}function Ss(h){h.D&&(u.clearTimeout(h.D),h.D=null)}ts.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Qd(this.i,this.B),this.M!=2&&(Tr(),St(17)),As(this),this.m=2,Pi(this)):Ts(this,this.T-h)};function Pi(h){h.j.I==0||h.K||Il(h.j,h)}function As(h){Ss(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,cn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function za(h,v){try{var b=h.j;if(b.I!=0&&(b.g==h||Ui(b.h,h))){if(!h.L&&Ui(b.h,h)&&b.I==3){try{var A=b.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<h.F)Qa(b),xs(b);else break e;Rl(b),St(18)}}else b.xa=$[1],0<b.xa-b.K&&$[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Sr(p(b.Va,b),6e3));qn(b.h)<=1&&b.ta&&(b.ta=void 0)}else Ws(b,11)}else if((h.L||b.g==h)&&Qa(b),!C(v))for($=b.Ba.g.parse(v),v=0;v<$.length;v++){let st=$[v];const Rt=st[0];if(!(Rt<=b.K))if(b.K=Rt,st=st[1],b.I==2)if(st[0]=="c"){b.M=st[1],b.ba=st[2];const Nn=st[3];Nn!=null&&(b.ka=Nn,b.j.info("VER="+b.ka));const Rs=st[4];Rs!=null&&(b.za=Rs,b.j.info("SVER="+b.za));const rs=st[5];rs!=null&&typeof rs=="number"&&rs>0&&(A=1.5*rs,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const is=h.g;if(is){const as=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(as){var Q=A.h;Q.g||as.indexOf("spdy")==-1&&as.indexOf("quic")==-1&&as.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ba(Q,Q.h),Q.h=null))}if(A.G){const kl=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(A.wa=kl,at(A.J,A.G,kl))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-h.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var ue=h;if(A.na=Su(A,A.L?A.ba:null,A.W),ue.L){Gs(A.h,ue);var Oe=ue,pt=A.O;pt&&(Oe.H=pt),Oe.D&&(Ss(Oe),Di(Oe)),A.g=ue}else bu(A);b.i.length>0&&Wi(b)}else st[0]!="stop"&&st[0]!="close"||Ws(b,7);else b.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Ws(b,7):Qi(b):st[0]!="noop"&&b.l&&b.l.qa(st),b.A=0)}}Tr(4)}catch{}}var Wd=class{constructor(h,v){this.g=h,this.map=v}};function Mi(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qn(h){return h.h?1:h.g?h.g.size:0}function Ui(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ba(h,v){h.g?h.g.add(v):h.h=v}function Gs(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Mi.prototype.cancel=function(){if(this.i=qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function qa(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.G);return v}return k(h.i)}var $a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xd(h,v){if(h){h=h.split("&");for(let b=0;b<h.length;b++){const A=h[b].indexOf("=");let $,Q=null;A>=0?($=h[b].substring(0,A),Q=h[b].substring(A+1)):$=h[b],v($,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ns(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ns?(this.l=h.l,Ir(this,h.j),this.o=h.o,this.g=h.g,Li(this,h.u),this.h=h.h,Nr(this,pu(h.i)),this.m=h.m):h&&(v=String(h).match($a))?(this.l=!1,Ir(this,v[1]||"",!0),this.o=zi(v[2]||""),this.g=zi(v[3]||"",!0),Li(this,v[4]),this.h=zi(v[5]||"",!0),Nr(this,v[6]||"",!0),this.m=zi(v[7]||"")):(this.l=!1,this.i=new $n(null,this.l))}ns.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Kt(v,bl,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Kt(v,bl,!0),"@"),h.push(ji(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&h.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Kt(b,b.charAt(0)=="/"?kr:wl,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Kt(b,mu)),h.join("")},ns.prototype.resolve=function(h){const v=vt(this);let b=!!h.j;b?Ir(v,h.j):b=!!h.o,b?v.o=h.o:b=!!h.g,b?v.g=h.g:b=h.u!=null;var A=h.h;if(b)Li(v,h.u);else if(b=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var $=v.h.lastIndexOf("/");$!=-1&&(A=v.h.slice(0,$+1)+A)}if($=A,$==".."||$==".")A="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){A=$.lastIndexOf("/",0)==0,$=$.split("/");const Q=[];for(let ue=0;ue<$.length;){const Oe=$[ue++];Oe=="."?A&&ue==$.length&&Q.push(""):Oe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),A&&ue==$.length&&Q.push("")):(Q.push(Oe),A=!0)}A=Q.join("/")}else A=$}return b?v.h=A:b=h.i.toString()!=="",b?Nr(v,pu(h.i)):b=!!h.m,b&&(v.m=h.m),v};function vt(h){return new ns(h)}function Ir(h,v,b){h.j=b?zi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Li(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Nr(h,v,b){v instanceof $n?(h.i=v,Sl(h.i,h.l)):(b||(v=Kt(v,fu)),h.i=new $n(v,h.l))}function at(h,v,b){h.i.set(v,b)}function Ks(h){return at(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function zi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Kt(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,vl),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function vl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var bl=/[#\/\?@]/g,wl=/[#\?:]/g,kr=/[#\?]/g,fu=/[#\?@]/g,mu=/#/g;function $n(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Qs(h){h.g||(h.g=new Map,h.h=0,h.i&&Xd(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}r=$n.prototype,r.add=function(h,v){Qs(this),this.i=null,h=ss(this,h);let b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function El(h,v){Qs(h),v=ss(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Tl(h,v){return Qs(h),v=ss(h,v),h.g.has(v)}r.forEach=function(h,v){Qs(this),this.g.forEach(function(b,A){b.forEach(function($){h.call(v,$,A,this)},this)},this)};function Ha(h,v){Qs(h);let b=[];if(typeof v=="string")Tl(h,v)&&(b=b.concat(h.g.get(ss(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)b=b.concat(h[v]);return b}r.set=function(h,v){return Qs(this),this.i=null,h=ss(this,h),Tl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},r.get=function(h,v){return h?(h=Ha(this,h),h.length>0?String(h[0]):v):v};function gu(h,v,b){El(h,v),b.length>0&&(h.i=null,h.g.set(ss(h,v),k(b)),h.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var b=v[A];const $=ji(b);b=Ha(this,b);for(let Q=0;Q<b.length;Q++){let ue=$;b[Q]!==""&&(ue+="="+ji(b[Q])),h.push(ue)}}return this.i=h.join("&")};function pu(h){const v=new $n;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function ss(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Sl(h,v){v&&!h.j&&(Qs(h),h.i=null,h.g.forEach(function(b,A){const $=A.toLowerCase();A!=$&&(El(this,A),gu(this,$,b))},h)),h.j=v}function Al(h,v){const b=new Ar;if(u.Image){const A=new Image;A.onload=_(_n,b,"TestLoadImage: loaded",!0,v,A),A.onerror=_(_n,b,"TestLoadImage: error",!1,v,A),A.onabort=_(_n,b,"TestLoadImage: abort",!1,v,A),A.ontimeout=_(_n,b,"TestLoadImage: timeout",!1,v,A),u.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function Or(h,v){const b=new Ar,A=new AbortController,$=setTimeout(()=>{A.abort(),_n(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(Q=>{clearTimeout($),Q.ok?_n(b,"TestPingServer: ok",!0,v):_n(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),_n(b,"TestPingServer: error",!1,v)})}function _n(h,v,b,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(b)}catch{}}function yu(){this.g=new Kd}function Bi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Bi,cu),Bi.prototype.g=function(){return new qi(this.i,this.h)};function qi(h,v){Lt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(qi,Lt),r=qi.prototype,r.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ys(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vn(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function jr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?vn(this):Ys(this),this.readyState==3&&jr(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,vn(this))},r.Na=function(h){this.g&&(this.response=h,vn(this))},r.ga=function(){this.g&&vn(this)};function vn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ys(h)}r.setRequestHeader=function(h,v){this.A.append(h,v)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function Ys(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dr(h){let v="";return F(h,function(b,A){v+=A,v+=":",v+=b,v+=`\r
`}),v}function Hn(h,v,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=Dr(b),typeof h=="string"?b!=null&&ji(b):at(h,v,b))}function dt(h){Lt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(dt,Lt);var Fa=/^https?$/i,_u=["POST","PUT"];r=dt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,v,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fs.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Q){$i(this,Q);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)b.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())b.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(_u,v,void 0)>=0)||A||$||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of b)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){$i(this,Q)}};function $i(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Hi(h),zt(h)}function Hi(h){h.A||(h.A=!0,Gt(h,"complete"),Gt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Gt(this,"complete"),Gt(this,"abort"),zt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?xl(this):this.Xa())},r.Xa=function(){xl(this)};function xl(h){if(h.h&&typeof l<"u"){if(h.v&&un(h)==4)setTimeout(h.Ca.bind(h),0);else if(Gt(h,"readystatechange"),un(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var A;if(A=Q===0){let ue=String(h.D).match($a)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),A=!Fa.test(ue?ue.toLowerCase():"")}b=A}if(b)Gt(h,"complete"),Gt(h,"success");else{h.o=6;try{var $=un(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Hi(h)}}finally{zt(h)}}}}function zt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const b=h.g;h.g=null,v||Gt(h,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function un(h){return h.g?h.g.readyState:0}r.ca=function(){try{return un(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),yn(v)}};function Fi(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(h){const v={};h=(h.g&&un(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(C(h[A]))continue;var b=Yd(h[A]);const $=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=v[$]||[];v[$]=Q,Q.push(b)}N(v,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ki(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function Ga(h){this.za=0,this.i=[],this.j=new Ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ki("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ki("baseRetryDelayMs",5e3,h),this.Za=Ki("retryDelaySeedMs",1e4,h),this.Ta=Ki("forwardChannelMaxRetries",2,h),this.va=Ki("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Mi(h&&h.concurrentRequestLimit),this.Ba=new yu,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ga.prototype,r.ka=8,r.I=1,r.connect=function(h,v,b,A){St(0),this.W=h,this.H=v||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=Su(this,null,this.W),Wi(this)};function Qi(h){if(Yi(h),h.I==3){var v=h.V++,b=vt(h.J);if(at(b,"SID",h.M),at(b,"RID",v),at(b,"TYPE","terminate"),Xi(h,b),v=new ts(h,h.j,v),v.M=2,v.A=Ks(vt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=v.A,b=!0),b||(v.g=Ya(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Di(v)}Tu(h)}function xs(h){h.g&&(Cl(h),h.g.cancel(),h.g=null)}function Yi(h){xs(h),h.v&&(u.clearTimeout(h.v),h.v=null),Qa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Wi(h){if(!Vi(h.h)&&!h.m){h.m=!0;var v=h.Ea;ce||x(),ae||(ce(),ae=!0),I.add(v,h),h.D=0}}function Jd(h,v){return qn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Sr(p(h.Ea,h,v),Eu(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new ts(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=X(Q),oe(Q,this.U)):Q=this.U),this.u!==null||this.R||($.J=Q,Q=null),this.S)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Ka(this,$,v),b=vt(this.J),at(b,"RID",h),at(b,"CVER",22),this.G&&at(b,"X-HTTP-Session-Id",this.G),Xi(this,b),Q&&(this.R?v="headers="+ji(Dr(Q))+"&"+v:this.u&&Hn(b,this.u,Q)),Ba(this.h,$),this.Ra&&at(b,"TYPE","init"),this.S?(at(b,"$req",v),at(b,"SID","null"),$.U=!0,Es($,b,null)):Es($,b,v),this.I=2}}else this.I==3&&(h?vu(this,h):this.i.length==0||Vi(this.h)||vu(this))};function vu(h,v){var b;v?b=v.l:b=h.V++;const A=vt(h.J);at(A,"SID",h.M),at(A,"RID",b),at(A,"AID",h.K),Xi(h,A),h.u&&h.o&&Hn(A,h.u,h.o),b=new ts(h,h.j,b,h.D+1),h.u===null&&(b.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Ka(h,b,1e3),b.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ba(h.h,b),Es(b,A,v)}function Xi(h,v){h.H&&F(h.H,function(b,A){at(v,A,b)}),h.l&&F({},function(b,A){at(v,A,b)})}function Ka(h,v,b){b=Math.min(h.i.length,b);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var $=h.i;let Oe=-1;for(;;){const pt=["count="+b];Oe==-1?b>0?(Oe=$[0].g,pt.push("ofs="+Oe)):Oe=0:pt.push("ofs="+Oe);let st=!0;for(let Rt=0;Rt<b;Rt++){var Q=$[Rt].g;const Nn=$[Rt].map;if(Q-=Oe,Q<0)Oe=Math.max(0,$[Rt].g-100),st=!1;else try{Q="req"+Q+"_"||"";try{var ue=Nn instanceof Map?Nn:Object.entries(Nn);for(const[Rs,rs]of ue){let is=rs;f(rs)&&(is=zn(rs)),pt.push(Q+Rs+"="+encodeURIComponent(is))}}catch(Rs){throw pt.push(Q+"type="+encodeURIComponent("_badmap")),Rs}}catch{A&&A(Nn)}}if(st){ue=pt.join("&");break e}}ue=void 0}return h=h.i.splice(0,b),v.G=h,ue}function bu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ce||x(),ae||(ce(),ae=!0),I.add(v,h),h.A=0}}function Rl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Sr(p(h.Da,h),Eu(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Sr(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),xs(this),wu(this))};function Cl(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function wu(h){h.g=new ts(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=vt(h.na);at(v,"RID","rpc"),at(v,"SID",h.M),at(v,"AID",h.K),at(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&at(v,"TO",h.ia),at(v,"TYPE","xmlhttp"),Xi(h,v),h.u&&h.o&&Hn(v,h.u,h.o),h.O&&(h.g.H=h.O);var b=h.g;h=h.ba,b.M=1,b.A=Ks(vt(v)),b.u=null,b.R=!0,Rr(b,h)}r.Va=function(){this.C!=null&&(this.C=null,xs(this),Rl(this),St(19))};function Qa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Il(h,v){var b=null;if(h.g==v){Qa(h),Cl(h),h.g=null;var A=2}else if(Ui(h.h,v))b=v.G,Gs(h.h,v),A=1;else return;if(h.I!=0){if(v.o)if(A==1){b=v.u?v.u.length:0,v=Date.now()-v.F;var $=h.D;A=Va(),Gt(A,new hu(A,b)),Wi(h)}else bu(h);else if($=v.m,$==3||$==0&&v.X>0||!(A==1&&Jd(h,v)||A==2&&Rl(h)))switch(b&&b.length>0&&(v=h.h,v.i=v.i.concat(b)),$){case 1:Ws(h,5);break;case 4:Ws(h,10);break;case 3:Ws(h,6);break;default:Ws(h,2)}}}function Eu(h,v){let b=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(b*=2),b*v}function Ws(h,v){if(h.j.info("Error code "+v),v==2){var b=p(h.bb,h),A=h.Ua;const $=!A;A=new ns(A||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ir(A,"https"),Ks(A),$?Al(A.toString(),b):Or(A.toString(),b)}else St(2);h.I=0,h.l&&h.l.pa(v),Tu(h),Yi(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Tu(h){if(h.I=0,h.ja=[],h.l){const v=qa(h.h);(v.length!=0||h.i.length!=0)&&(U(h.ja,v),U(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function Su(h,v,b){var A=b instanceof ns?vt(b):new ns(b);if(A.g!="")v&&(A.g=v+"."+A.g),Li(A,A.u);else{var $=u.location;A=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;const Q=new ns(null);A&&Ir(Q,A),v&&(Q.g=v),$&&Li(Q,$),b&&(Q.h=b),A=Q}return b=h.G,v=h.wa,b&&v&&at(A,b,v),at(A,"VER",h.ka),Xi(h,A),A}function Ya(h,v,b){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new dt(new Bi({ab:b})):new dt(h.ma),v.Fa(h.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}r=Au.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Wa(){}Wa.prototype.g=function(h,v){return new bn(h,v)};function bn(h,v){Lt.call(this),this.g=new Ga(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!C(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!C(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Pr(this)}E(bn,Lt),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Qi(this.g)},bn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.v&&(b={},b.__data__=zn(h),h=b);v.i.push(new Wd(v.Ya++,h)),v.I==3&&Wi(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,Qi(this.g),delete this.g,bn.Z.N.call(this)};function Nl(h){wr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(Nl,wr);function xu(){es.call(this),this.status=1}E(xu,es);function Pr(h){this.g=h}E(Pr,Au),Pr.prototype.ra=function(){Gt(this.g,"a")},Pr.prototype.qa=function(h){Gt(this.g,new Nl(h))},Pr.prototype.pa=function(h){Gt(this.g,new xu)},Pr.prototype.oa=function(){Gt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,uT=function(){return new Wa},cT=function(){return Va()},lT=Bn,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,Fh=At,en.COMPLETE="complete",oT=en,uu.EventType=vs,vs.OPEN="a",vs.CLOSE="b",vs.ERROR="c",vs.MESSAGE="d",Lt.prototype.listen=Lt.prototype.J,Sc=uu,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,aT=dt}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const Tb="@firebase/firestore",Sb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new mp("@firebase/firestore");function Uo(){return Ca.logLevel}function me(r,...e){if(Ca.logLevel<=Ge.DEBUG){const t=e.map(Sp);Ca.debug(`Firestore (${cl}): ${r}`,...t)}}function yr(r,...e){if(Ca.logLevel<=Ge.ERROR){const t=e.map(Sp);Ca.error(`Firestore (${cl}): ${r}`,...t)}}function Xo(r,...e){if(Ca.logLevel<=Ge.WARN){const t=e.map(Sp);Ca.warn(`Firestore (${cl}): ${r}`,...t)}}function Sp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,hT(r,s,t)}function hT(r,e,t){let s=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw yr(s),new Error(s)}function nt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||hT(e,a,s)}function De(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends vr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class _N{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vN{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},f=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new dT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class bN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new bN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ab(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ab(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=TN(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ke(r,e){return r<e?-1:r>e?1:0}function Vg(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return ug(a)===ug(l)?Ke(a,l):ug(a)?1:-1}return Ke(r.length,e.length)}const SN=55296,AN=57343;function ug(r){const e=r.charCodeAt(0);return e>=SN&&e<=AN}function Jo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__name__";class Ds{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ds.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ds?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Ds.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ke(e.length,t.length)}static compareSegments(e,t){const s=Ds.isNumericId(e),a=Ds.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ds.extractNumericId(e).compare(Ds.extractNumericId(t)):Vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class gt extends Ds{construct(e,t,s){return new gt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const xN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Ds{construct(e,t,s){return new an(e,t,s)}static isValidIdentifier(e){return xN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xb}static keyField(){return new an([xb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(s+=f,a++):(l(),a++)}if(l(),u)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(gt.fromString(e))}static fromName(e){return new ve(gt.fromString(e).popFirst(5))}static empty(){return new ve(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(r,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function RN(r,e,t,s){if(e===!0&&s===!0)throw new fe(Z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Rb(r){if(!ve.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Cb(r){if(ve.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function mT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Rd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function ms(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(r);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r,e){const t={typeString:r};return e&&(t.value=e),t}function Zc(r,e){if(!mT(r))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new fe(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=-62135596800,Nb=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Nb);return new yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ib)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nb}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Ut("string",yt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new yt(0,0))}static max(){return new ke(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=-1;function CN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=ke.fromTimestamp(s===1e9?new yt(t+1,0):new yt(t,s));return new wi(a,ve.empty(),e)}function IN(r){return new wi(r.readTime,r.key,zc)}class wi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new wi(ke.min(),ve.empty(),zc)}static max(){return new wi(ke.max(),ve.empty(),zc)}}function NN(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(r.documentKey,e.documentKey),t!==0?t:Ke(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ON{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==kN)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,s)=>{t(e)})}static reject(e){return new se((t,s)=>{s(e)})}static waitFor(e){return new se((t,s)=>{let a=0,l=0,u=!1;e.forEach(f=>{++a,f.next(()=>{++l,u&&l===a&&t()},m=>s(m))}),u=!0,l===a&&t()})}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next(a=>a?se.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new se((s,a)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{u[p]=_,++f,f===l&&s(u)},_=>a(_))}})}static doWhile(e,t){return new se((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function jN(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=-1;function Id(r){return r==null}function ad(r){return r===0&&1/r==-1/0}function DN(r){return typeof r=="number"&&Number.isInteger(r)&&!ad(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="";function PN(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=kb(e)),e=MN(r.get(t),e);return kb(e)}function MN(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case gT:t+="";break;default:t+=l}}return t}function kb(r){return r+gT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ri(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function pT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??rn.RED,this.left=a??rn.EMPTY,this.right=l??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new rn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return rn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jb(this.data.getIterator())}getIteratorFrom(e){return new jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Ft(an.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new yT("Invalid base64 string: "+l):l}}(e);return new on(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const VN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const t=VN.exec(r);if(nt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Nt(r.seconds),nanos:Nt(r.nanos)}}function Nt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ti(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="server_timestamp",vT="__type__",bT="__previous_value__",wT="__local_write_time__";function Rp(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[vT])==null?void 0:s.stringValue)===_T}function Nd(r){const e=r.mapValue.fields[bT];return Rp(e)?Nd(e):e}function Bc(r){const e=Ei(r.mapValue.fields[wT].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,s,a,l,u,f,m,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=_}}const od="(default)";class qc{constructor(e,t){this.projectId=e,this.database=t||od}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===od}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="__type__",LN="__max__",jh={mapValue:{}},TT="__vector__",ld="value";function Si(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rp(r)?4:BN(r)?9007199254740991:zN(r)?10:11:Ae(28295,{value:r})}function qs(r,e){if(r===e)return!0;const t=Si(r);if(t!==Si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Bc(r).isEqual(Bc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ei(a.timestampValue),f=Ei(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,l){return Ti(a.bytesValue).isEqual(Ti(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,l){return Nt(a.geoPointValue.latitude)===Nt(l.geoPointValue.latitude)&&Nt(a.geoPointValue.longitude)===Nt(l.geoPointValue.longitude)}(r,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return Nt(a.integerValue)===Nt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Nt(a.doubleValue),f=Nt(l.doubleValue);return u===f?ad(u)===ad(f):isNaN(u)&&isNaN(f)}return!1}(r,e);case 9:return Jo(r.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Ob(u)!==Ob(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!qs(u[m],f[m])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function $c(r,e){return(r.values||[]).find(t=>qs(t,e))!==void 0}function Zo(r,e){if(r===e)return 0;const t=Si(r),s=Si(e);if(t!==s)return Ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(r.booleanValue,e.booleanValue);case 2:return function(l,u){const f=Nt(l.integerValue||l.doubleValue),m=Nt(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(r,e);case 3:return Db(r.timestampValue,e.timestampValue);case 4:return Db(Bc(r),Bc(e));case 5:return Vg(r.stringValue,e.stringValue);case 6:return function(l,u){const f=Ti(l),m=Ti(u);return f.compareTo(m)}(r.bytesValue,e.bytesValue);case 7:return function(l,u){const f=l.split("/"),m=u.split("/");for(let p=0;p<f.length&&p<m.length;p++){const _=Ke(f[p],m[p]);if(_!==0)return _}return Ke(f.length,m.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,u){const f=Ke(Nt(l.latitude),Nt(u.latitude));return f!==0?f:Ke(Nt(l.longitude),Nt(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Pb(r.arrayValue,e.arrayValue);case 10:return function(l,u){var S,k,U,B;const f=l.fields||{},m=u.fields||{},p=(S=f[ld])==null?void 0:S.arrayValue,_=(k=m[ld])==null?void 0:k.arrayValue,E=Ke(((U=p==null?void 0:p.values)==null?void 0:U.length)||0,((B=_==null?void 0:_.values)==null?void 0:B.length)||0);return E!==0?E:Pb(p,_)}(r.mapValue,e.mapValue);case 11:return function(l,u){if(l===jh.mapValue&&u===jh.mapValue)return 0;if(l===jh.mapValue)return 1;if(u===jh.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=u.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const S=Vg(m[E],_[E]);if(S!==0)return S;const k=Zo(f[m[E]],p[_[E]]);if(k!==0)return k}return Ke(m.length,_.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Db(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ke(r,e);const t=Ei(r),s=Ei(e),a=Ke(t.seconds,s.seconds);return a!==0?a:Ke(t.nanos,s.nanos)}function Pb(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Zo(t[a],s[a]);if(l)return l}return Ke(t.length,s.length)}function el(r){return Ug(r)}function Ug(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ti(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ve.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Ug(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Ug(t.fields[u])}`;return a+"}"}(r.mapValue):Ae(61005,{value:r})}function Gh(r){switch(Si(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nd(r);return e?16+Gh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ti(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+Gh(l),0)}(r.arrayValue);case 10:case 11:return function(s){let a=0;return Ri(s.fields,(l,u)=>{a+=l.length+Gh(u)}),a}(r.mapValue);default:throw Ae(13486,{value:r})}}function Mb(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lg(r){return!!r&&"integerValue"in r}function Cp(r){return!!r&&"arrayValue"in r}function Vb(r){return!!r&&"nullValue"in r}function Ub(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Kh(r){return!!r&&"mapValue"in r}function zN(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[ET])==null?void 0:s.stringValue)===TT}function kc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ri(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=kc(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(r.arrayValue.values[t]);return e}return{...r}}function BN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===LN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=an.emptyPath(),s={},a=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=f.popLast()}u?s[f.lastSegment()]=kc(u):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Kh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ri(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new In(kc(this.value))}}function ST(r){const e=[];return Ri(r.fields,(t,s)=>{const a=new an([t]);if(Kh(s)){const l=ST(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,s,a,l,u,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new gn(e,0,ke.min(),ke.min(),ke.min(),In.empty(),0)}static newFoundDocument(e,t,s,a){return new gn(e,1,t,ke.min(),s,a,0)}static newNoDocument(e,t){return new gn(e,2,t,ke.min(),ke.min(),In.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,ke.min(),ke.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.position=e,this.inclusive=t}}function Lb(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?s=ve.comparator(ve.fromName(u.referenceValue),t.key):s=Zo(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function zb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!qs(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function qN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{}class Vt extends AT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new HN(e,t,s):t==="array-contains"?new KN(e,s):t==="in"?new QN(e,s):t==="not-in"?new YN(e,s):t==="array-contains-any"?new WN(e,s):new Vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new FN(e,s):new GN(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&Si(this.value)===Si(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ps extends AT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ps(e,t)}matches(e){return xT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xT(r){return r.op==="and"}function RT(r){return $N(r)&&xT(r)}function $N(r){for(const e of r.filters)if(e instanceof ps)return!1;return!0}function zg(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+el(r.value);if(RT(r))return r.filters.map(e=>zg(e)).join(",");{const e=r.filters.map(t=>zg(t)).join(",");return`${r.op}(${e})`}}function CT(r,e){return r instanceof Vt?function(s,a){return a instanceof Vt&&s.op===a.op&&s.field.isEqual(a.field)&&qs(s.value,a.value)}(r,e):r instanceof ps?function(s,a){return a instanceof ps&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,u,f)=>l&&CT(u,a.filters[f]),!0):!1}(r,e):void Ae(19439)}function IT(r){return r instanceof Vt?function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`}(r):r instanceof ps?function(t){return t.op.toString()+" {"+t.getFilters().map(IT).join(" ,")+"}"}(r):"Filter"}class HN extends Vt{constructor(e,t,s){super(e,t,s),this.key=ve.fromName(s.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class FN extends Vt{constructor(e,t){super(e,"in",t),this.keys=NT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GN extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=NT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function NT(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(s=>ve.fromName(s.referenceValue))}class KN extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cp(t)&&$c(t.arrayValue,this.value)}}class QN extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$c(this.value.arrayValue,t)}}class YN extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$c(this.value.arrayValue,t)}}class WN extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>$c(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t=null,s=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function Bb(r,e=null,t=[],s=[],a=null,l=null,u=null){return new XN(r,e,t,s,a,l,u)}function Ip(r){const e=De(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>zg(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>el(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>el(s)).join(",")),e.Te=t}return e.Te}function Np(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!qN(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!CT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zb(r.startAt,e.startAt)&&zb(r.endAt,e.endAt)}function Bg(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t=null,s=[],a=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JN(r,e,t,s,a,l,u,f){return new eu(r,e,t,s,a,l,u,f)}function kp(r){return new eu(r)}function qb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function kT(r){return r.collectionGroup!==null}function Oc(r){const e=De(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Ft(an.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(f=f.add(p.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ud(l,s))}),t.has(an.keyField().canonicalString())||e.Ie.push(new ud(an.keyField(),s))}return e.Ie}function Us(r){const e=De(r);return e.Ee||(e.Ee=ZN(e,Oc(r))),e.Ee}function ZN(r,e){if(r.limitType==="F")return Bb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ud(a.field,l)});const t=r.endAt?new cd(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new cd(r.startAt.position,r.startAt.inclusive):null;return Bb(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function qg(r,e){const t=r.filters.concat([e]);return new eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function $g(r,e,t){return new eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function kd(r,e){return Np(Us(r),Us(e))&&r.limitType===e.limitType}function OT(r){return`${Ip(Us(r))}|lt:${r.limitType}`}function Lo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>IT(a)).join(", ")}]`),Id(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>el(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>el(a)).join(",")),`Target(${s})`}(Us(r))}; limitType=${r.limitType})`}function Od(r,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ve.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,a){for(const l of Oc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(r,e)&&function(s,a){return!(s.startAt&&!function(u,f,m){const p=Lb(u,f,m);return u.inclusive?p<=0:p<0}(s.startAt,Oc(s),a)||s.endAt&&!function(u,f,m){const p=Lb(u,f,m);return u.inclusive?p>=0:p>0}(s.endAt,Oc(s),a))}(r,e)}function ek(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function jT(r){return(e,t)=>{let s=!1;for(const a of Oc(r)){const l=tk(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function tk(r,e,t){const s=r.field.isKeyField()?ve.comparator(e.key,t.key):function(l,u,f){const m=u.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Zo(m,p):Ae(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return pT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new wt(ve.comparator);function _r(){return nk}const DT=new wt(ve.comparator);function Ac(...r){let e=DT;for(const t of r)e=e.insert(t.key,t);return e}function PT(r){let e=DT;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function wa(){return jc()}function MT(){return jc()}function jc(){return new Oa(r=>r.toString(),(r,e)=>r.isEqual(e))}const sk=new wt(ve.comparator),rk=new Ft(ve.comparator);function Qe(...r){let e=rk;for(const t of r)e=e.add(t);return e}const ik=new Ft(Ke);function ak(){return ik}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function VT(r){return{integerValue:""+r}}function ok(r,e){return DN(e)?VT(e):Op(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(){this._=void 0}}function lk(r,e,t){return r instanceof hd?function(a,l){const u={fields:{[vT]:{stringValue:_T},[wT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Rp(l)&&(l=Nd(l)),l&&(u.fields[bT]=l),{mapValue:u}}(t,e):r instanceof Hc?LT(r,e):r instanceof Fc?zT(r,e):function(a,l){const u=UT(a,l),f=$b(u)+$b(a.Ae);return Lg(u)&&Lg(a.Ae)?VT(f):Op(a.serializer,f)}(r,e)}function ck(r,e,t){return r instanceof Hc?LT(r,e):r instanceof Fc?zT(r,e):t}function UT(r,e){return r instanceof dd?function(s){return Lg(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class hd extends jd{}class Hc extends jd{constructor(e){super(),this.elements=e}}function LT(r,e){const t=BT(e);for(const s of r.elements)t.some(a=>qs(a,s))||t.push(s);return{arrayValue:{values:t}}}class Fc extends jd{constructor(e){super(),this.elements=e}}function zT(r,e){let t=BT(e);for(const s of r.elements)t=t.filter(a=>!qs(a,s));return{arrayValue:{values:t}}}class dd extends jd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $b(r){return Nt(r.integerValue||r.doubleValue)}function BT(r){return Cp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function uk(r,e){return r.field.isEqual(e.field)&&function(s,a){return s instanceof Hc&&a instanceof Hc||s instanceof Fc&&a instanceof Fc?Jo(s.elements,a.elements,qs):s instanceof dd&&a instanceof dd?qs(s.Ae,a.Ae):s instanceof hd&&a instanceof hd}(r.transform,e.transform)}class hk{constructor(e,t){this.version=e,this.transformResults=t}}class gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Dd{}function qT(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new jp(r.key,gs.none()):new tu(r.key,r.data,gs.none());{const t=r.data,s=In.empty();let a=new Ft(an.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new Ci(r.key,s,new Ln(a.toArray()),gs.none())}}function dk(r,e,t){r instanceof tu?function(a,l,u){const f=a.value.clone(),m=Fb(a.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(r,e,t):r instanceof Ci?function(a,l,u){if(!Qh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Fb(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll($T(a)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(r,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Dc(r,e,t,s){return r instanceof tu?function(l,u,f,m){if(!Qh(l.precondition,u))return f;const p=l.value.clone(),_=Gb(l.fieldTransforms,m,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ci?function(l,u,f,m){if(!Qh(l.precondition,u))return f;const p=Gb(l.fieldTransforms,m,u),_=u.data;return _.setAll($T(l)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(r,e,t,s):function(l,u,f){return Qh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(r,e,t)}function fk(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=UT(s.transform,a||null);l!=null&&(t===null&&(t=In.empty()),t.set(s.field,l))}return t||null}function Hb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Jo(s,a,(l,u)=>uk(l,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class tu extends Dd{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ci extends Dd{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $T(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Fb(r,e,t){const s=new Map;nt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,f=e.data.field(l.field);s.set(l.field,ck(u,f,t[a]))}return s}function Gb(r,e,t){const s=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);s.set(a.field,lk(l,u,e))}return s}class jp extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mk extends Dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&dk(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Dc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Dc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=MT();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const m=qT(u,f);m!==null&&s.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(ke.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,s)=>Hb(t,s))&&Jo(this.baseMutations,e.baseMutations,(t,s)=>Hb(t,s))}}class Dp{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return sk}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new Dp(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Xe;function _k(r){switch(r){case Z.OK:return Ae(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function HT(r){if(r===void 0)return yr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case Dt.OK:return Z.OK;case Dt.CANCELLED:return Z.CANCELLED;case Dt.UNKNOWN:return Z.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Z.INTERNAL;case Dt.UNAVAILABLE:return Z.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Z.NOT_FOUND;case Dt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Dt.ABORTED:return Z.ABORTED;case Dt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Dt.DATA_LOSS:return Z.DATA_LOSS;default:return Ae(39323,{code:r})}}(Xe=Dt||(Dt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new yi([4294967295,4294967295],0);function Kb(r){const e=vk().encode(r),t=new iT;return t.update(e),new Uint8Array(t.digest())}function Qb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new yi([t,s],0),new yi([a,l],0)]}class Pp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new xc(`Invalid padding: ${t}`);if(s<0)throw new xc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new xc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new xc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=yi.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(yi.fromNumber(s)));return a.compare(bk)===1&&(a=new yi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Kb(e),[s,a]=Qb(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Pp(l,a,t);return s.forEach(f=>u.insert(f)),u}insert(e){if(this.ge===0)return;const t=Kb(e),[s,a]=Qb(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Pd(ke.min(),a,new wt(Ke),_r(),Qe())}}class nu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nu(s,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class FT{constructor(e,t){this.targetId=e,this.Ce=t}}class GT{constructor(e,t,s=on.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Yb{constructor(){this.ve=0,this.Fe=Wb(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),s=Qe();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ae(38017,{changeType:l})}}),new nu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Wb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wk{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=Dh(),this.He=Dh(),this.Ye=new wt(Ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Bg(l))if(s===0){const u=new ve(l.path);this.et(t,u,gn.newNoDocument(u,ke.min()))}else nt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=Ti(s).toUint8Array()}catch(m){if(m instanceof yT)return Xo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Pp(u,a,l)}catch(m){return Xo(m instanceof xc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Bg(f.target)){const m=new ve(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,gn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}});let s=Qe();this.He.forEach((l,u)=>{let f=!0;u.forEachWhile(m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.je.forEach((l,u)=>u.setReadTime(e));const a=new Pd(e,t,this.Ye,this.je,s);return this.je=_r(),this.Je=Dh(),this.He=Dh(),this.Ye=new wt(Ke),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(Ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(Ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yb),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dh(){return new wt(ve.comparator)}function Wb(){return new wt(ve.comparator)}const Ek={asc:"ASCENDING",desc:"DESCENDING"},Tk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sk={and:"AND",or:"OR"};class Ak{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(r,e){return r.useProto3Json||Id(e)?e:{value:e}}function fd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function xk(r,e){return fd(r,e.toTimestamp())}function Ls(r){return nt(!!r,49232),ke.fromTimestamp(function(t){const s=Ei(t);return new yt(s.seconds,s.nanos)}(r))}function Mp(r,e){return Fg(r,e).canonicalString()}function Fg(r,e){const t=function(a){return new gt(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function QT(r){const e=gt.fromString(r);return nt(ZT(e),10190,{key:e.toString()}),e}function Gg(r,e){return Mp(r.databaseId,e.path)}function hg(r,e){const t=QT(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ve(WT(t))}function YT(r,e){return Mp(r.databaseId,e)}function Rk(r){const e=QT(r);return e.length===4?gt.emptyPath():WT(e)}function Kg(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function WT(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Xb(r,e,t){return{name:Gg(r,e),fields:t.value.mapValue.fields}}function Ck(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(nt(_===void 0||typeof _=="string",58123),on.fromBase64String(_||"")):(nt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),on.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(p){const _=p.code===void 0?Z.UNKNOWN:HT(p.code);return new fe(_,p.message||"")}(u);t=new GT(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=hg(r,s.document.name),l=Ls(s.document.updateTime),u=s.document.createTime?Ls(s.document.createTime):ke.min(),f=new In({mapValue:{fields:s.document.fields}}),m=gn.newFoundDocument(a,l,u,f),p=s.targetIds||[],_=s.removedTargetIds||[];t=new Yh(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=hg(r,s.document),l=s.readTime?Ls(s.readTime):ke.min(),u=gn.newNoDocument(a,l),f=s.removedTargetIds||[];t=new Yh([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=hg(r,s.document),l=s.removedTargetIds||[];t=new Yh([],l,a,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new yk(a,l),f=s.targetId;t=new FT(f,u)}}return t}function Ik(r,e){let t;if(e instanceof tu)t={update:Xb(r,e.key,e.value)};else if(e instanceof jp)t={delete:Gg(r,e.key)};else if(e instanceof Ci)t={update:Xb(r,e.key,e.data),updateMask:Uk(e.fieldMask)};else{if(!(e instanceof mk))return Ae(16599,{Vt:e.type});t={verify:Gg(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,u){const f=u.transform;if(f instanceof hd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Hc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Fc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof dd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ae(20930,{transform:u.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:xk(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)}(r,e.precondition)),t}function Nk(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map(t=>function(a,l){let u=a.updateTime?Ls(a.updateTime):Ls(l);return u.isEqual(ke.min())&&(u=Ls(l)),new hk(u,a.transformResults||[])}(t,e))):[]}function kk(r,e){return{documents:[YT(r,e.path)]}}function Ok(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=YT(r,a);const l=function(p){if(p.length!==0)return JT(ps.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(_=>function(S){return{field:zo(S.field),direction:Pk(S.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Hg(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:t,parent:a}}function jk(r){let e=Rk(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){nt(s===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(E){const S=XT(E);return S instanceof ps&&RT(S)?S.getFilters():[S]}(t.where));let u=[];t.orderBy&&(u=function(E){return E.map(S=>function(U){return new ud(Bo(U.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(S))}(t.orderBy));let f=null;t.limit&&(f=function(E){let S;return S=typeof E=="object"?E.value:E,Id(S)?null:S}(t.limit));let m=null;t.startAt&&(m=function(E){const S=!!E.before,k=E.values||[];return new cd(k,S)}(t.startAt));let p=null;return t.endAt&&(p=function(E){const S=!E.before,k=E.values||[];return new cd(k,S)}(t.endAt)),JN(e,a,u,l,f,"F",m,p)}function Dk(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Bo(t.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Bo(t.unaryFilter.field);return Vt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bo(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Bo(t.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(t){return Vt.create(Bo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ps.create(t.compositeFilter.filters.map(s=>XT(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(r):Ae(30097,{filter:r})}function Pk(r){return Ek[r]}function Mk(r){return Tk[r]}function Vk(r){return Sk[r]}function zo(r){return{fieldPath:r.canonicalString()}}function Bo(r){return an.fromServerFormat(r.fieldPath)}function JT(r){return r instanceof Vt?function(t){if(t.op==="=="){if(Ub(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(Vb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ub(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(Vb(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:Mk(t.op),value:t.value}}}(r):r instanceof ps?function(t){const s=t.getFilters().map(a=>JT(a));return s.length===1?s[0]:{compositeFilter:{op:Vk(t.op),filters:s}}}(r):Ae(54877,{filter:r})}function Uk(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,s,a,l=ke.min(),u=ke.min(),f=on.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.yt=e}}function zk(r){const e=jk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?$g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this.Cn=new qk}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(wi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(wi.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class qk{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Ft(gt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Ft(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eS=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(eS,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="LruGarbageCollector",$k=1048576;function ew([r,e],[t,s]){const a=Ke(r,t);return a===0?Ke(e,s):a}class Hk{constructor(e){this.Ir=e,this.buffer=new Ft(ew),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ew(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fk{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Zb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hl(t)?me(Zb,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Vr(3e5)})}}class Gk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Cd.ce);const s=new Hk(t);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Jb)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jb):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,f,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a))).next(E=>(s=E,f=Date.now(),this.removeTargets(e,s,t))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(E=>(p=Date.now(),Uo()<=Ge.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E})))}}function Kk(r,e){return new Gk(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&Dc(s.mutation,a,Ln.empty(),yt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Qe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Qe()){const a=wa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let u=Ac();return l.forEach((f,m)=>{u=u.insert(f,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const s=wa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Qe()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,s,a){let l=_r();const u=jc(),f=function(){return jc()}();return t.forEach((m,p)=>{const _=s.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof Ci)?l=l.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Dc(_.mutation,p,_.mutation.getFieldMask(),yt.now())):u.set(p.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>u.set(p,_)),t.forEach((p,_)=>f.set(p,new Yk(_,u.get(p)??null))),f))}recalculateAndSaveOverlays(e,t){const s=jc();let a=new wt((u,f)=>u-f),l=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=s.get(m)||Ln.empty();_=f.applyToLocalView(p,_),s.set(m,_);const E=(a.get(f.batchId)||Qe()).add(m);a=a.insert(f.batchId,E)})}).next(()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,_=m.value,E=MT();_.forEach(S=>{if(!l.has(S)){const k=qT(t.get(S),s.get(S));k!==null&&E.set(S,k),l=l.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return se.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(u){return ve.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):se.resolve(wa());let f=zc,m=l;return u.next(p=>se.forEach(p,(_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next(S=>{m=m.insert(_,S)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Qe())).next(_=>({batchId:f,changes:PT(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(s=>{let a=Ac();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Ac();return this.indexManager.getCollectionParents(e,l).next(f=>se.forEach(f,m=>{const p=function(E,S){return new eu(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next(_=>{_.forEach((E,S)=>{u=u.insert(E,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(u=>{l.forEach((m,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,gn.newInvalidDocument(_)))});let f=Ac();return u.forEach((m,p)=>{const _=l.get(m);_!==void 0&&Dc(_.mutation,p,Ln.empty(),yt.now()),Od(t,p)&&(f=f.insert(m,p))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Ls(a.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:zk(a.bundledQuery),readTime:Ls(a.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.overlays=new wt(ve.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=wa();return se.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.St(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=wa(),l=t.length+1,u=new ve(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new wt((p,_)=>p-_);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let _=l.get(p.largestBatchId);_===null&&(_=wa(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=wa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>f.set(p,_)),!(f.size()>=a)););return se.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new pk(t,s));let l=this.qr.get(t);l===void 0&&(l=Qe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this.Qr=new Ft(Jt.$r),this.Ur=new Ft(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Jt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new Jt(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new ve(new gt([])),s=new Jt(t,e),a=new Jt(t,e+1),l=[];return this.Ur.forEachInRange([s,a],u=>{this.Gr(u),l.push(u.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ve(new gt([])),s=new Jt(t,e),a=new Jt(t,e+1);let l=Qe();return this.Ur.forEachInRange([s,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Jt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Jt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ve.comparator(e.key,t.key)||Ke(e.Yr,t.Yr)}static Kr(e,t){return Ke(e.Yr,t.Yr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Jt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new gk(l,t,s,a);this.mutationQueue.push(u);for(const f of a)this.Zr=this.Zr.add(new Jt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?xp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Jt(t,0),a=new Jt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],u=>{const f=this.Xr(u.Yr);l.push(f)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ft(Ke);return t.forEach(a=>{const l=new Jt(a,0),u=new Jt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],f=>{s=s.add(f.Yr)})}),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ve.isDocumentKey(l)||(l=l.child(""));const u=new Jt(new ve(l),0);let f=new Ft(Ke);return this.Zr.forEachWhile(m=>{const p=m.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Yr)),!0)},u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(t.mutations,a=>{const l=new Jt(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new Jt(t,0),a=this.Zr.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.ri=e,this.docs=function(){return new wt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let s=_r();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():gn.newInvalidDocument(a))}),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=_r();const u=t.path,f=new ve(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||NN(IN(_),s)<=0||(a.has(_.key)||Od(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ae(9500)}ii(e,t){return se.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new nO(this)}getSize(e){return se.resolve(this.size)}}class nO extends Qk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.persistence=e,this.si=new Oa(t=>Ip(t),Np),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new Vp,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach((s,a)=>t(a)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach((u,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),se.waitFor(l).next(()=>a)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cd(0),this.li=!1,this.li=!0,this.hi=new Zk,this.referenceDelegate=e(this),this.Pi=new sO(this),this.indexManager=new Bk,this.remoteDocumentCache=function(a){return new tO(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Lk(t),this.Ii=new Xk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new eO(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const a=new rO(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return se.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class rO extends ON{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new Vp,this.Vi=null}static mi(e){return new Up(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,s=>{const a=ve.fromPath(s);return this.gi(e,a).next(l=>{l||t.removeEntry(a,ke.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class md{constructor(e,t){this.persistence=e,this.pi=new Oa(s=>PN(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=Kk(this,t)}static mi(e,t){return new md(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return se.forEach(this.pi,(s,a)=>this.br(e,s,a).next(l=>l?se.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,u=>this.br(e,u,t).next(f=>{f||(s++,l.removeEntry(u,ke.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gh(e.data.value)),t}br(e,t,s){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return se.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Qe(),a=Qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Lp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WR()?8:jN(pn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ws(e,t,a,s).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new iO;return this.Ss(e,t,u).next(f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)})}).next(()=>l.result)}bs(e,t,s,a){return s.documentReadCount<this.fs?(Uo()<=Ge.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Uo()<=Ge.DEBUG&&me("QueryEngine","Query:",Lo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Uo()<=Ge.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(t))):se.resolve())}ys(e,t){if(qb(t))return se.resolve(null);let s=Us(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=$g(t,null,"F"),s=Us(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const u=Qe(...l);return this.ps.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,s).next(m=>{const p=this.Ds(t,f);return this.Cs(t,p,u,m.readTime)?this.ys(e,$g(t,null,"F")):this.vs(e,p,t,m)}))})))}ws(e,t,s,a){return qb(t)||a.isEqual(ke.min())?se.resolve(null):this.ps.getDocuments(e,s).next(l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?se.resolve(null):(Uo()<=Ge.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lo(t)),this.vs(e,u,t,CN(a,zc)).next(f=>f))})}Ds(e,t){let s=new Ft(jT(e));return t.forEach((a,l)=>{Od(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Uo()<=Ge.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ps.getDocumentsMatchingQuery(e,t,wi.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="LocalStore",oO=3e8;class lO{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new wt(Ke),this.xs=new Oa(l=>Ip(l),Np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function cO(r,e,t,s){return new lO(r,e,t,s)}async function nS(r,e){const t=De(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const u=[],f=[];let m=Qe();for(const p of a){u.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){f.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(s,m).next(p=>({Ls:p,removedBatchIds:u,addedBatchIds:f}))})})}function uO(r,e){const t=De(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(f,m,p,_){const E=p.batch,S=E.keys();let k=se.resolve();return S.forEach(U=>{k=k.next(()=>_.getEntry(m,U)).next(B=>{const L=p.docVersions.get(U);nt(L!==null,48541),B.version.compareTo(L)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),_.addEntry(B)))})}),k.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let m=Qe();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function sS(r){const e=De(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function hO(r,e){const t=De(r),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach((_,E)=>{const S=a.get(E);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(l,_.addedDocuments,E)));let k=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?k=k.withResumeToken(on.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,s)),a=a.insert(E,k),function(B,L,re){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=oO?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(S,k,_)&&f.push(t.Pi.updateTargetData(l,k))});let m=_r(),p=Qe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),f.push(dO(l,u,e.documentUpdates).next(_=>{m=_.ks,p=_.qs})),!s.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next(E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(_)}return se.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Ms=a,l))}function dO(r,e,t){let s=Qe(),a=Qe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let u=_r();return t.forEach((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(ke.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):me(zp,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)}),{ks:u,qs:a}})}function fO(r,e){const t=De(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=xp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function mO(r,e){const t=De(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Pi.getTargetData(s,e).next(l=>l?(a=l,se.resolve(a)):t.Pi.allocateTargetId(s).next(u=>(a=new di(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function Qg(r,e,t){const s=De(r),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,u=>s.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!hl(u))throw u;me(zp,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function tw(r,e,t){const s=De(r);let a=ke.min(),l=Qe();return s.persistence.runTransaction("Execute query","readwrite",u=>function(m,p,_){const E=De(m),S=E.xs.get(_);return S!==void 0?se.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,_)}(s,u,Us(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,f.targetId).next(m=>{l=m})}).next(()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:ke.min(),t?l:Qe())).next(f=>(gO(s,ek(e),f),{documents:f,Qs:l})))}function gO(r,e,t){let s=r.Os.get(e)||ke.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Os.set(e,s)}class nw{constructor(){this.activeTargetIds=ak()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pO{constructor(){this.Mo=new nw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="ConnectivityMonitor";class rw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(sw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(sw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function Yg(){return Ph===null?Ph=function(){return 268435456+Math.round(2147483648*Math.random())}():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",_O={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===od?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=Yg(),f=this.zo(e,t.toUriEncodedString());me(dg,`Sending RPC '${e}' ${u}:`,f,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(f),_=al(p);return this.Jo(e,f,m,s,_).then(E=>(me(dg,`Received RPC '${e}' ${u}: `,E),E),E=>{throw Xo(dg,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",s),E})}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const s=_O[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class wO extends vO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=Yg();return new Promise((f,m)=>{const p=new aT;p.setWithCredentials(!0),p.listenOnce(oT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Fh.NO_ERROR:const E=p.getResponseJson();me(fn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Fh.TIMEOUT:me(fn,`RPC '${e}' ${u} timed out`),m(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const S=p.getStatus();if(me(fn,`RPC '${e}' ${u} failed with status:`,S,"response text:",p.getResponseText()),S>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k==null?void 0:k.error;if(U&&U.status&&U.message){const B=function(re){const te=re.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(te)>=0?te:Z.UNKNOWN}(U.status);m(new fe(B,U.message))}else m(new fe(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{me(fn,`RPC '${e}' ${u} completed.`)}});const _=JSON.stringify(a);me(fn,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",_,s,15)})}T_(e,t,s){const a=Yg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=uT(),f=cT(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const _=l.join("");me(fn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const E=u.createWebChannel(_,m);this.I_(E);let S=!1,k=!1;const U=new bO({Yo:L=>{k?me(fn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(S||(me(fn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),S=!0),me(fn,`RPC '${e}' stream ${a} sending:`,L),E.send(L))},Zo:()=>E.close()}),B=(L,re,te)=>{L.listen(re,Y=>{try{te(Y)}catch(le){setTimeout(()=>{throw le},0)}})};return B(E,Sc.EventType.OPEN,()=>{k||(me(fn,`RPC '${e}' stream ${a} transport opened.`),U.o_())}),B(E,Sc.EventType.CLOSE,()=>{k||(k=!0,me(fn,`RPC '${e}' stream ${a} transport closed`),U.a_(),this.E_(E))}),B(E,Sc.EventType.ERROR,L=>{k||(k=!0,Xo(fn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),U.a_(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),B(E,Sc.EventType.MESSAGE,L=>{var re;if(!k){const te=L.data[0];nt(!!te,16349);const Y=te,le=(Y==null?void 0:Y.error)||((re=Y[0])==null?void 0:re.error);if(le){me(fn,`RPC '${e}' stream ${a} received error:`,le);const ce=le.status;let ae=function(R){const D=Dt[R];if(D!==void 0)return HT(D)}(ce),I=le.message;ae===void 0&&(ae=Z.INTERNAL,I="Unknown error status: "+ce+" with message "+le.message),k=!0,U.a_(new fe(ae,I)),E.close()}else me(fn,`RPC '${e}' stream ${a} received:`,te),U.u_(te)}}),B(f,lT.STAT_EVENT,L=>{L.stat===Mg.PROXY?me(fn,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===Mg.NOPROXY&&me(fn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{U.__()},0),U}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function fg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(r){return new Ak(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="PersistentStream";class iS{constructor(e,t,s,a,l,u,f,m){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(yr(t.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===t&&this.G_(s,a)},s=>{e(()=>{const a=new fe(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(me(iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EO extends iS{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Ck(this.serializer,e),s=function(l){if(!("targetChange"in l))return ke.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?ke.min():u.readTime?Ls(u.readTime):ke.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Kg(this.serializer),t.addTarget=function(l,u){let f;const m=u.target;if(f=Bg(m)?{documents:kk(l,m)}:{query:Ok(l,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=KT(l,u.resumeToken);const p=Hg(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(ke.min())>0){f.readTime=fd(l,u.snapshotVersion.toTimestamp());const p=Hg(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f}(this.serializer,e);const s=Dk(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Kg(this.serializer),t.removeTarget=e,this.q_(t)}}class TO extends iS{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Nk(e.writeResults,e.commitTime),s=Ls(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Kg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ik(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{}class AO extends SO{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Go(e,Fg(t,s),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Z.UNKNOWN,l.toString())})}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Ho(e,Fg(t,s),a,u,f,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(Z.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yr(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="RemoteStore";class RO{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(u=>{s.enqueueAndForget(async()=>{ja(this)&&(me(Ia,"Restarting streams for network reachability change."),await async function(m){const p=De(m);p.Ea.add(4),await su(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Vd(p)}(this))})}),this.Ra=new xO(s,a)}}async function Vd(r){if(ja(r))for(const e of r.da)await e(!0)}async function su(r){for(const e of r.da)await e(!1)}function aS(r,e){const t=De(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hp(t)?$p(t):dl(t).O_()&&qp(t,e))}function Bp(r,e){const t=De(r),s=dl(t);t.Ia.delete(e),s.O_()&&oS(t,e),t.Ia.size===0&&(s.O_()?s.L_():ja(t)&&t.Ra.set("Unknown"))}function qp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(r).Y_(e)}function oS(r,e){r.Va.Ue(e),dl(r).Z_(e)}function $p(r){r.Va=new wk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),dl(r).start(),r.Ra.ua()}function Hp(r){return ja(r)&&!dl(r).x_()&&r.Ia.size>0}function ja(r){return De(r).Ea.size===0}function lS(r){r.Va=void 0}async function CO(r){r.Ra.set("Online")}async function IO(r){r.Ia.forEach((e,t)=>{qp(r,e)})}async function NO(r,e){lS(r),Hp(r)?(r.Ra.ha(e),$p(r)):r.Ra.set("Unknown")}async function kO(r,e,t){if(r.Ra.set("Online"),e instanceof GT&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.Va.removeTarget(f))}(r,e)}catch(s){me(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await gd(r,s)}else if(e instanceof Yh?r.Va.Ze(e):e instanceof FT?r.Va.st(e):r.Va.tt(e),!t.isEqual(ke.min()))try{const s=await sS(r.localStore);t.compareTo(s)>=0&&await function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(m.resumeToken,u))}}),f.targetMismatches.forEach((m,p)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(on.EMPTY_BYTE_STRING,_.snapshotVersion)),oS(l,m);const E=new di(_.target,m,p,_.sequenceNumber);qp(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){me(Ia,"Failed to raise snapshot:",s),await gd(r,s)}}async function gd(r,e,t){if(!hl(e))throw e;r.Ea.add(1),await su(r),r.Ra.set("Offline"),t||(t=()=>sS(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{me(Ia,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Vd(r)})}function cS(r,e){return e().catch(t=>gd(r,t,e))}async function Ud(r){const e=De(r),t=Ai(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;OO(e);)try{const a=await fO(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,jO(e,a)}catch(a){await gd(e,a)}uS(e)&&hS(e)}function OO(r){return ja(r)&&r.Ta.length<10}function jO(r,e){r.Ta.push(e);const t=Ai(r);t.O_()&&t.X_&&t.ea(e.mutations)}function uS(r){return ja(r)&&!Ai(r).x_()&&r.Ta.length>0}function hS(r){Ai(r).start()}async function DO(r){Ai(r).ra()}async function PO(r){const e=Ai(r);for(const t of r.Ta)e.ea(t.mutations)}async function MO(r,e,t){const s=r.Ta.shift(),a=Dp.from(s,e,t);await cS(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await Ud(r)}async function VO(r,e){e&&Ai(r).X_&&await async function(s,a){if(function(u){return _k(u)&&u!==Z.ABORTED}(a.code)){const l=s.Ta.shift();Ai(s).B_(),await cS(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Ud(s)}}(r,e),uS(r)&&hS(r)}async function aw(r,e){const t=De(r);t.asyncQueue.verifyOperationInProgress(),me(Ia,"RemoteStore received new credentials");const s=ja(t);t.Ea.add(3),await su(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vd(t)}async function UO(r,e){const t=De(r);e?(t.Ea.delete(2),await Vd(t)):e||(t.Ea.add(2),await su(t),t.Ra.set("Unknown"))}function dl(r){return r.ma||(r.ma=function(t,s,a){const l=De(t);return l.sa(),new EO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Xo:CO.bind(null,r),t_:IO.bind(null,r),r_:NO.bind(null,r),H_:kO.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),Hp(r)?$p(r):r.Ra.set("Unknown")):(await r.ma.stop(),lS(r))})),r.ma}function Ai(r){return r.fa||(r.fa=function(t,s,a){const l=De(t);return l.sa(),new TO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:DO.bind(null,r),r_:VO.bind(null,r),ta:PO.bind(null,r),na:MO.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await Ud(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Ia,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,f=new Fp(e,t,u,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(r,e){if(yr("AsyncQueue",`${e}: ${r}`),hl(r))return new fe(Z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ve.comparator(t.key,s.key):(t,s)=>ve.comparator(t.key,s.key),this.keyedMap=Ac(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.ga=new wt(ve.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class nl{constructor(e,t,s,a,l,u,f,m,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new nl(e,t,Qo.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zO{constructor(){this.queries=lw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=De(t),l=a.queries;a.queries=lw(),l.forEach((u,f)=>{for(const m of f.Sa)m.onError(s)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function lw(){return new Oa(r=>OT(r),kd)}async function dS(r,e){const t=De(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new LO,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=Gp(u,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Kp(t)}async function fS(r,e){const t=De(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function BO(r,e){const t=De(r);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(a)&&(s=!0);u.wa=a}}s&&Kp(t)}function qO(r,e,t){const s=De(r),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Kp(r){r.Ca.forEach(e=>{e.next()})}var Wg,cw;(cw=Wg||(Wg={})).Ma="default",cw.Cache="cache";class mS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new nl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class pS{constructor(e){this.key=e}}class $O{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=jT(e),this.tu=new Qo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new ow,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,E)=>{const S=a.get(_),k=Od(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let L=!1;S&&k?S.data.isEqual(k.data)?U!==B&&(s.track({type:3,doc:k}),L=!0):this.su(S,k)||(s.track({type:2,doc:k}),L=!0,(m&&this.eu(k,m)>0||p&&this.eu(k,p)<0)&&(f=!0)):!S&&k?(s.track({type:0,doc:k}),L=!0):S&&!k&&(s.track({type:1,doc:S}),L=!0,(m||p)&&(f=!0)),L&&(k?(u=u.add(k),l=B?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:u,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((_,E)=>function(k,U){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:L})}};return B(k)-B(U)}(_.type,E.type)||this.eu(_.doc,E.doc)),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,u.length!==0||p?{snapshot:new nl(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ow,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new pS(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new gS(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qp="SyncEngine";class HO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class FO{constructor(e){this.key=e,this.hu=!1}}class GO{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Oa(f=>OT(f),kd),this.Iu=new Map,this.Eu=new Set,this.du=new wt(ve.comparator),this.Au=new Map,this.Ru=new Vp,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function KO(r,e,t=!0){const s=ES(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await yS(s,e,t,!0),a}async function QO(r,e){const t=ES(r);await yS(t,e,!0,!1)}async function yS(r,e,t,s){const a=await mO(r.localStore,Us(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await YO(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&aS(r.remoteStore,a),f}async function YO(r,e,t,s,a){r.pu=(E,S,k)=>async function(B,L,re,te){let Y=L.view.ru(re);Y.Cs&&(Y=await tw(B.localStore,L.query,!1).then(({documents:I})=>L.view.ru(I,Y)));const le=te&&te.targetChanges.get(L.targetId),ce=te&&te.targetMismatches.get(L.targetId)!=null,ae=L.view.applyChanges(Y,B.isPrimaryClient,le,ce);return hw(B,L.targetId,ae.au),ae.snapshot}(r,E,S,k);const l=await tw(r.localStore,e,!0),u=new $O(e,l.Qs),f=u.ru(l.documents),m=nu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),p=u.applyChanges(f,r.isPrimaryClient,m);hw(r,t,p.au);const _=new HO(e,t,u);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function WO(r,e,t){const s=De(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter(u=>!kd(u,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Qg(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Bp(s.remoteStore,a.targetId),Xg(s,a.targetId)}).catch(ul)):(Xg(s,a.targetId),await Qg(s.localStore,a.targetId,!0))}async function XO(r,e){const t=De(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bp(t.remoteStore,s.targetId))}async function JO(r,e,t){const s=ij(r);try{const a=await function(u,f){const m=De(u),p=yt.now(),_=f.reduce((k,U)=>k.add(U.key),Qe());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=_r(),B=Qe();return m.Ns.getEntries(k,_).next(L=>{U=L,U.forEach((re,te)=>{te.isValidDocument()||(B=B.add(re))})}).next(()=>m.localDocuments.getOverlayedDocuments(k,U)).next(L=>{E=L;const re=[];for(const te of f){const Y=fk(te,E.get(te.key).overlayedDocument);Y!=null&&re.push(new Ci(te.key,Y,ST(Y.value.mapValue),gs.exists(!0)))}return m.mutationQueue.addMutationBatch(k,p,re,f)}).next(L=>{S=L;const re=L.applyToLocalDocumentSet(E,B);return m.documentOverlayCache.saveOverlays(k,L.batchId,re)})}).then(()=>({batchId:S.batchId,changes:PT(E)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(u,f,m){let p=u.Vu[u.currentUser.toKey()];p||(p=new wt(Ke)),p=p.insert(f,m),u.Vu[u.currentUser.toKey()]=p}(s,a.batchId,t),await ru(s,a.changes),await Ud(s.remoteStore)}catch(a){const l=Gp(a,"Failed to persist write");t.reject(l)}}async function _S(r,e){const t=De(r);try{const s=await hO(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Au.get(l);u&&(nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?nt(u.hu,14607):a.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))}),await ru(t,s,e)}catch(s){await ul(s)}}function uw(r,e,t){const s=De(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)}),function(u,f){const m=De(u);m.onlineState=f;let p=!1;m.queries.forEach((_,E)=>{for(const S of E.Sa)S.va(f)&&(p=!0)}),p&&Kp(m)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ZO(r,e,t){const s=De(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new wt(ve.comparator);u=u.insert(l,gn.newNoDocument(l,ke.min()));const f=Qe().add(l),m=new Pd(ke.min(),new Map,new wt(Ke),u,f);await _S(s,m),s.du=s.du.remove(l),s.Au.delete(e),Yp(s)}else await Qg(s.localStore,e,!1).then(()=>Xg(s,e,t)).catch(ul)}async function ej(r,e){const t=De(r),s=e.batch.batchId;try{const a=await uO(t.localStore,e);bS(t,s,null),vS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ru(t,a)}catch(a){await ul(a)}}async function tj(r,e,t){const s=De(r);try{const a=await function(u,f){const m=De(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,f).next(E=>(nt(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(p,E))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(s.localStore,e);bS(s,e,t),vS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ru(s,a)}catch(a){await ul(a)}}function vS(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function bS(r,e,t){const s=De(r);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Xg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(s=>{r.Ru.containsKey(s)||wS(r,s)})}function wS(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Bp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Yp(r))}function hw(r,e,t){for(const s of t)s instanceof gS?(r.Ru.addReference(s.key,e),nj(r,s)):s instanceof pS?(me(Qp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||wS(r,s.key)):Ae(19791,{wu:s})}function nj(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(me(Qp,"New document in limbo: "+t),r.Eu.add(s),Yp(r))}function Yp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ve(gt.fromString(e)),s=r.fu.next();r.Au.set(s,new FO(t)),r.du=r.du.insert(t,s),aS(r.remoteStore,new di(Us(kp(t.path)),s,"TargetPurposeLimboResolution",Cd.ce))}}async function ru(r,e,t){const s=De(r),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach((f,m)=>{u.push(s.pu(m,e,t).then(p=>{var _;if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(p){a.push(p);const E=Lp.As(m.targetId,p);l.push(E)}}))}),await Promise.all(u),s.Pu.H_(a),await async function(m,p){const _=De(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>se.forEach(p,S=>se.forEach(S.Es,k=>_.persistence.referenceDelegate.addReference(E,S.targetId,k)).next(()=>se.forEach(S.ds,k=>_.persistence.referenceDelegate.removeReference(E,S.targetId,k)))))}catch(E){if(!hl(E))throw E;me(zp,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const k=_.Ms.get(S),U=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(U);_.Ms=_.Ms.insert(S,B)}}}(s.localStore,l))}async function sj(r,e){const t=De(r);if(!t.currentUser.isEqual(e)){me(Qp,"User change. New user:",e.toKey());const s=await nS(t.localStore,e);t.currentUser=e,function(l,u){l.mu.forEach(f=>{f.forEach(m=>{m.reject(new fe(Z.CANCELLED,u))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ru(t,s.Ls)}}function rj(r,e){const t=De(r),s=t.Au.get(e);if(s&&s.hu)return Qe().add(s.key);{let a=Qe();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function ES(r){const e=De(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZO.bind(null,e),e.Pu.H_=BO.bind(null,e.eventManager),e.Pu.yu=qO.bind(null,e.eventManager),e}function ij(r){const e=De(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ej.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tj.bind(null,e),e}class pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return cO(this.persistence,new aO,e.initialUser,this.serializer)}Cu(e){return new tS(Up.mi,this.serializer)}Du(e){return new pO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pd.provider={build:()=>new pd};class aj extends pd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof md,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Fk(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new tS(s=>md.mi(s,t),this.serializer)}}class Jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>uw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=sj.bind(null,this.syncEngine),await UO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zO}()}createDatastore(e){const t=Md(e.databaseInfo.databaseId),s=function(l){return new wO(l)}(e.databaseInfo);return function(l,u,f,m){return new AO(l,u,f,m)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,u,f){return new RO(s,a,l,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>uw(this.syncEngine,t,0),function(){return rw.v()?new rw:new yO}())}createSyncEngine(e,t){return function(a,l,u,f,m,p,_){const E=new GO(a,l,u,f,m,p);return _&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=De(a);me(Ia,"RemoteStore shutting down."),l.Ea.add(5),await su(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Jg.provider={build:()=>new Jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="FirestoreClient";class oj{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=Ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async u=>{me(xi,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(me(xi,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Gp(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function mg(r,e){r.asyncQueue.verifyOperationInProgress(),me(xi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async a=>{s.isEqual(a)||(await nS(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function dw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await lj(r);me(xi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>aw(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,a)=>aw(e.remoteStore,a)),r._onlineComponents=e}async function lj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(xi,"Using user provided OfflineComponentProvider");try{await mg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Z.FAILED_PRECONDITION||a.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Xo("Error using user provided cache. Falling back to memory cache: "+t),await mg(r,new pd)}}else me(xi,"Using default OfflineComponentProvider"),await mg(r,new aj(void 0));return r._offlineComponents}async function SS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(xi,"Using user provided OnlineComponentProvider"),await dw(r,r._uninitializedComponentsProvider._online)):(me(xi,"Using default OnlineComponentProvider"),await dw(r,new Jg))),r._onlineComponents}function cj(r){return SS(r).then(e=>e.syncEngine)}async function Zg(r){const e=await SS(r),t=e.eventManager;return t.onListen=KO.bind(null,e.syncEngine),t.onUnlisten=WO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XO.bind(null,e.syncEngine),t}function uj(r,e,t={}){const s=new _i;return r.asyncQueue.enqueueAndForget(async()=>function(l,u,f,m,p){const _=new TS({next:S=>{_.Nu(),u.enqueueAndForget(()=>fS(l,E)),S.fromCache&&m.source==="server"?p.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new mS(f,_,{includeMetadataChanges:!0,qa:!0});return dS(l,E)}(await Zg(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firestore.googleapis.com",mw=!0;class gw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xS,this.ssl=mw}else this.host=e.host,this.ssl=e.ssl??mw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$k)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AS(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ld{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new yN;switch(s.type){case"firstParty":return new wN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=fw.get(t);s&&(me("ComponentProvider","Removing Datastore"),fw.delete(t),s.terminate())}(this),Promise.resolve()}}function hj(r,e,t,s={}){var p;r=ms(r,Ld);const a=al(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;a&&(vE(`https://${f}`),bE("Firestore",!0)),l.host!==xS&&l.host!==f&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:s};if(!Aa(m,u)&&(r._setSettings(m),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=mn.MOCK_USER;else{_=BR(s.mockUserToken,(p=r._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new mn(S)}r._authCredentials=new _N(new dT(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class kt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Zc(t,kt._jsonSchema))return new kt(e,s||null,new ve(gt.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:Ut("string",kt._jsonSchemaVersion),referencePath:Ut("string")};class vi extends Da{constructor(e,t,s){super(e,t,kp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ve(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function pw(r,e,...t){if(r=Zt(r),fT("collection","path",e),r instanceof Ld){const s=gt.fromString(e,...t);return Cb(s),new vi(r,null,s)}{if(!(r instanceof kt||r instanceof vi))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return Cb(s),new vi(r.firestore,null,s)}}function gg(r,e,...t){if(r=Zt(r),arguments.length===1&&(e=Ap.newId()),fT("doc","path",e),r instanceof Ld){const s=gt.fromString(e,...t);return Rb(s),new kt(r,null,new ve(s))}{if(!(r instanceof kt||r instanceof vi))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return Rb(s),new kt(r.firestore,r instanceof vi?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="AsyncQueue";class _w{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rS(this,"async_queue_retry"),this._c=()=>{const s=fg();s&&me(yw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=fg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new _i;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hl(e))throw e;me(yw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,yr("INTERNAL UNHANDLED ERROR: ",vw(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Fp.createAndSchedule(this,e,t,s,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&Ae(47125,{Pc:vw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Na extends Ld{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new _w,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function dj(r,e){const t=typeof r=="object"?r:SE(),s=typeof r=="string"?r:od,a=pp(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=LR("firestore");l&&hj(a,...l)}return a}function Wp(r){if(r._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||fj(r),r._firestoreClient}function fj(r){var s,a,l;const e=r._freezeSettings(),t=function(f,m,p,_){return new UN(f,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,AS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new oj(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(on.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jn(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Ut("string",Jn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,zs._jsonSchema))return new zs(e.latitude,e.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Ut("string",zs._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Bs(e.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:Ut("string",Bs._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=/^__.*__$/;class gj{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new tu(e,this.data,t,this.fieldTransforms)}}class RS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ci(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class Jp{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CS(this.Ac)&&mj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pj{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Md(e)}Cc(e,t,s,a=!1){return new Jp({Ac:e,methodName:t,Dc:s,path:an.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zp(r){const e=r._freezeSettings(),t=Md(r._databaseId);return new pj(r._databaseId,!!e.ignoreUndefinedProperties,t)}function yj(r,e,t,s,a,l={}){const u=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);ey("Data must be an object, but it was:",u,s);const f=IS(s,u);let m,p;if(l.merge)m=new Ln(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=ep(e,E,t);if(!u.contains(S))throw new fe(Z.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);kS(_,S)||_.push(S)}m=new Ln(_),p=u.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,p=u.fieldTransforms;return new gj(new In(f),m,p)}class Bd extends Xp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bd}}function _j(r,e,t,s){const a=r.Cc(1,e,t);ey("Data must be an object, but it was:",a,s);const l=[],u=In.empty();Ri(s,(m,p)=>{const _=ty(e,m,t);p=Zt(p);const E=a.yc(_);if(p instanceof Bd)l.push(_);else{const S=iu(p,E);S!=null&&(l.push(_),u.set(_,S))}});const f=new Ln(l);return new RS(u,f,a.fieldTransforms)}function vj(r,e,t,s,a,l){const u=r.Cc(1,e,t),f=[ep(e,s,t)],m=[a];if(l.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(ep(e,l[S])),m.push(l[S+1]);const p=[],_=In.empty();for(let S=f.length-1;S>=0;--S)if(!kS(p,f[S])){const k=f[S];let U=m[S];U=Zt(U);const B=u.yc(k);if(U instanceof Bd)p.push(k);else{const L=iu(U,B);L!=null&&(p.push(k),_.set(k,L))}}const E=new Ln(p);return new RS(_,E,u.fieldTransforms)}function bj(r,e,t,s=!1){return iu(t,r.Cc(s?4:3,e))}function iu(r,e){if(NS(r=Zt(r)))return ey("Unsupported field value:",e,r),IS(r,e);if(r instanceof Xp)return function(s,a){if(!CS(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const l=[];let u=0;for(const f of s){let m=iu(f,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}}(r,e)}return function(s,a){if((s=Zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ok(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:fd(a.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fd(a.serializer,l)}}if(s instanceof zs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Jn)return{bytesValue:KT(a.serializer,s._byteString)};if(s instanceof kt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Mp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Bs)return function(u,f){return{mapValue:{fields:{[ET]:{stringValue:TT},[ld]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return Op(f.serializer,p)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${Rd(s)}`)}(r,e)}function IS(r,e){const t={};return pT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(r,(s,a)=>{const l=iu(a,e.mc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function NS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof zs||r instanceof Jn||r instanceof kt||r instanceof Xp||r instanceof Bs)}function ey(r,e,t){if(!NS(t)||!mT(t)){const s=Rd(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function ep(r,e,t){if((e=Zt(e))instanceof zd)return e._internalPath;if(typeof e=="string")return ty(r,e);throw yd("Field path arguments must be of type string or ",r,!1,void 0,t)}const wj=new RegExp("[~\\*/\\[\\]]");function ty(r,e,t){if(e.search(wj)>=0)throw yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function yd(r,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${s}`),u&&(m+=` in document ${a}`),m+=")"),new fe(Z.INVALID_ARGUMENT,f+r+m)}function kS(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ej(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ny("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ej extends OS{data(){return super.data()}}function ny(r,e){return typeof e=="string"?ty(r,e):e instanceof zd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sy{}class Tj extends sy{}function Sj(r,e,...t){let s=[];e instanceof sy&&s.push(e),s=s.concat(t),function(l){const u=l.filter(m=>m instanceof ry).length,f=l.filter(m=>m instanceof qd).length;if(u>1||u>0&&f>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class qd extends Tj{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new qd(e,t,s)}_apply(e){const t=this._parse(e);return DS(e._query,t),new Da(e.firestore,e.converter,qg(e._query,t))}_parse(e){const t=Zp(e.firestore);return function(l,u,f,m,p,_,E){let S;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ew(E,_);const U=[];for(const B of E)U.push(ww(m,l,B));S={arrayValue:{values:U}}}else S=ww(m,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ew(E,_),S=bj(f,u,E,_==="in"||_==="not-in");return Vt.create(p,_,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Aj(r,e,t){const s=e,a=ny("where",r);return qd._create(a,s,t)}class ry extends sy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ry(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:ps.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const f=l.getFlattenedFilters();for(const m of f)DS(u,m),u=qg(u,m)}(e._query,t),new Da(e.firestore,e.converter,qg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ww(r,e,t){if(typeof(t=Zt(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kT(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(gt.fromString(t));if(!ve.isDocumentKey(s))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Mb(r,new ve(s))}if(t instanceof kt)return Mb(r,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function Ew(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DS(r,e){const t=function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xj{convertValue(e,t="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ri(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[ld].arrayValue)==null?void 0:a.values)==null?void 0:l.map(u=>Nt(u.doubleValue));return new Bs(t)}convertGeoPoint(e){return new zs(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Nd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=gt.fromString(e);nt(ZT(s),9688,{name:e});const a=new qc(s.get(1),s.get(3)),l=new ve(s.popFirst(5));return a.isEqual(t)||yr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ta extends OS{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ny("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ta._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ta._jsonSchema={type:Ut("string",Ta._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Wh extends Ta{data(e={}){return super.data(e)}}class Sa{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Rc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Wh(this._firestore,this._userDataWriter,s.key,s,new Rc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(f=>{const m=new Wh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Rc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Wh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Rc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:Cj(f.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Cj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:Ut("string",Sa._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class iy extends xj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function Ij(r){r=ms(r,Da);const e=ms(r.firestore,Na),t=Wp(e),s=new iy(e);return jS(r._query),uj(t,r._query).then(a=>new Sa(e,s,r,a))}function Nj(r,e,t){r=ms(r,kt);const s=ms(r.firestore,Na),a=Rj(r.converter,e,t);return ay(s,[yj(Zp(s),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,gs.none())])}function kj(r,e,t,...s){r=ms(r,kt);const a=ms(r.firestore,Na),l=Zp(a);let u;return u=typeof(e=Zt(e))=="string"||e instanceof zd?vj(l,"updateDoc",r._key,e,t,s):_j(l,"updateDoc",r._key,e),ay(a,[u.toMutation(r._key,gs.exists(!0))])}function Oj(r){return ay(ms(r.firestore,Na),[new jp(r._key,gs.none())])}function jj(r,...e){var m,p,_;r=Zt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||bw(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(bw(e[s])){const E=e[s];e[s]=(m=E.next)==null?void 0:m.bind(E),e[s+1]=(p=E.error)==null?void 0:p.bind(E),e[s+2]=(_=E.complete)==null?void 0:_.bind(E)}let l,u,f;if(r instanceof kt)u=ms(r.firestore,Na),f=kp(r._key.path),l={next:E=>{e[s]&&e[s](Dj(u,r,E))},error:e[s+1],complete:e[s+2]};else{const E=ms(r,Da);u=ms(E.firestore,Na),f=E._query;const S=new iy(u);l={next:k=>{e[s]&&e[s](new Sa(u,S,E,k))},error:e[s+1],complete:e[s+2]},jS(r._query)}return function(S,k,U,B){const L=new TS(B),re=new mS(k,L,U);return S.asyncQueue.enqueueAndForget(async()=>dS(await Zg(S),re)),()=>{L.Nu(),S.asyncQueue.enqueueAndForget(async()=>fS(await Zg(S),re))}}(Wp(u),f,a,l)}function ay(r,e){return function(s,a){const l=new _i;return s.asyncQueue.enqueueAndForget(async()=>JO(await cj(s),a,l)),l.promise}(Wp(r),e)}function Dj(r,e,t){const s=t.docs.get(e._key),a=new iy(r);return new Ta(r,a,e._key,s,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){cl=a})(ol),Wo(new xa("firestore",(s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),f=new Na(new vN(s.getProvider("auth-internal")),new EN(u,s.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(p.options.projectId,_)}(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),gi(Tb,Sb,e),gi(Tb,Sb,"esm2020")})();const Pj="modulepreload",Mj=function(r){return"/"+r},Tw={},au=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(_=>Promise.resolve(_).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=u(t.map(p=>{if(p=Mj(p),p in Tw)return;Tw[p]=!0;const _=p.endsWith(".css"),E=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const S=document.createElement("link");if(S.rel=_?"stylesheet":Pj,_||(S.as="script"),S.crossOrigin="",S.href=p,m&&S.setAttribute("nonce",m),document.head.appendChild(S),_)return new Promise((k,U)=>{S.addEventListener("load",k),S.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},Vj=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class oy extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Sw extends oy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Aw extends oy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class xw extends oy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tp;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(tp||(tp={}));var Uj=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};class Lj{constructor(e,{headers:t={},customFetch:s,region:a=tp.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=Vj(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Uj(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:l,method:u,body:f,signal:m}=s;let p={},{region:_}=s;_||(_=this.region);const E=new URL(`${this.url}/${t}`);_&&_!=="any"&&(p["x-region"]=_,E.searchParams.set("forceFunctionRegion",_));let S;f&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",S=f):typeof f=="string"?(p["Content-Type"]="text/plain",S=f):typeof FormData<"u"&&f instanceof FormData?S=f:(p["Content-Type"]="application/json",S=JSON.stringify(f)));const k=yield this.fetch(E.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:S,signal:m}).catch(re=>{throw re.name==="AbortError"?re:new Sw(re)}),U=k.headers.get("x-relay-error");if(U&&U==="true")throw new Aw(k);if(!k.ok)throw new xw(k);let B=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),L;return B==="application/json"?L=yield k.json():B==="application/octet-stream"?L=yield k.blob():B==="text/event-stream"?L=k:B==="multipart/form-data"?L=yield k.formData():L=yield k.text(),{data:L,error:null,response:k}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new Sw(l)}:{data:null,error:l,response:l instanceof xw||l instanceof Aw?l.context:void 0}}})}}var Xt={},Ro={},Co={},Io={},No={},ko={},zj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},sl=zj();const Bj=sl.fetch,PS=sl.fetch.bind(sl),MS=sl.Headers,qj=sl.Request,$j=sl.Response,fl=Object.freeze(Object.defineProperty({__proto__:null,Headers:MS,Request:qj,Response:$j,default:PS,fetch:Bj},Symbol.toStringTag,{value:"Module"})),Hj=Ix(fl);var Mh={},Rw;function VS(){if(Rw)return Mh;Rw=1,Object.defineProperty(Mh,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Mh.default=r,Mh}var Cw;function US(){if(Cw)return ko;Cw=1;var r=ko&&ko.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ko,"__esModule",{value:!0});const e=r(Hj),t=r(VS());class s{constructor(l){var u,f;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(f=l.isMaybeSingle)!==null&&f!==void 0?f:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const f=this.fetch;let m=f(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var _,E,S,k;let U=null,B=null,L=null,re=p.status,te=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ae=await p.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((_=this.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?B=ae:B=JSON.parse(ae))}const le=(E=this.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),ce=(S=p.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");le&&ce&&ce.length>1&&(L=parseInt(ce[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(B)&&(B.length>1?(U={code:"PGRST116",details:`Results contain ${B.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},B=null,L=null,re=406,te="Not Acceptable"):B.length===1?B=B[0]:B=null)}else{const le=await p.text();try{U=JSON.parse(le),Array.isArray(U)&&p.status===404&&(B=[],U=null,re=200,te="OK")}catch{p.status===404&&le===""?(re=204,te="No Content"):U={message:le}}if(U&&this.isMaybeSingle&&(!((k=U==null?void 0:U.details)===null||k===void 0)&&k.includes("0 rows"))&&(U=null,re=200,te="OK"),U&&this.shouldThrowOnError)throw new t.default(U)}return{error:U,data:B,count:L,status:re,statusText:te}});return this.shouldThrowOnError||(m=m.catch(p=>{var _,E,S;return{error:{message:`${(_=p==null?void 0:p.name)!==null&&_!==void 0?_:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(E=p==null?void 0:p.stack)!==null&&E!==void 0?E:""}`,hint:"",code:`${(S=p==null?void 0:p.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),m.then(l,u)}returns(){return this}overrideTypes(){return this}}return ko.default=s,ko}var Iw;function LS(){if(Iw)return No;Iw=1;var r=No&&No.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(No,"__esModule",{value:!0});const e=r(US());class t extends e.default{select(a){let l=!1;const u=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:f,referencedTable:m=f}={}){const p=m?`${m}.order`:"order",_=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${_?`${_},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:f=u}={}){const m=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(m,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:f=!1,wal:m=!1,format:p="text"}={}){var _;const E=[a?"analyze":null,l?"verbose":null,u?"settings":null,f?"buffers":null,m?"wal":null].filter(Boolean).join("|"),S=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return No.default=t,No}var Nw;function ly(){if(Nw)return Io;Nw=1;var r=Io&&Io.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Io,"__esModule",{value:!0});const e=r(LS());class t extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const u=Array.from(new Set(l)).map(f=>typeof f=="string"&&new RegExp("[,()]").test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:u,type:f}={}){let m="";f==="plain"?m="pl":f==="phrase"?m="ph":f==="websearch"&&(m="w");const p=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${m}fts${p}.${l}`),this}match(a){return Object.entries(a).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(a,l,u){return this.url.searchParams.append(a,`not.${l}.${u}`),this}or(a,{foreignTable:l,referencedTable:u=l}={}){const f=u?`${u}.or`:"or";return this.url.searchParams.append(f,`(${a})`),this}filter(a,l,u){return this.url.searchParams.append(a,`${l}.${u}`),this}}return Io.default=t,Io}var kw;function zS(){if(kw)return Co;kw=1;var r=Co&&Co.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Co,"__esModule",{value:!0});const e=r(ly());class t{constructor(a,{headers:l={},schema:u,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=u,this.fetch=f}select(a,l){const{head:u=!1,count:f}=l??{},m=u?"HEAD":"GET";let p=!1;const _=(a??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",_),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:u=!0}={}){var f;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(p.length>0){const _=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:f,defaultToNull:m=!0}={}){var p;const _="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((S,k)=>S.concat(Object.keys(k)),[]);if(E.length>0){const S=[...new Set(E)].map(k=>`"${k}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var u;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var l;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Co.default=t,Co}var Ow;function Fj(){if(Ow)return Ro;Ow=1;var r=Ro&&Ro.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ro,"__esModule",{value:!0});const e=r(zS()),t=r(ly());class s{constructor(l,{headers:u={},schema:f,fetch:m}={}){this.url=l,this.headers=new Headers(u),this.schemaName=f,this.fetch=m}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:f=!1,get:m=!1,count:p}={}){var _;let E;const S=new URL(`${this.url}/rpc/${l}`);let k;f||m?(E=f?"HEAD":"GET",Object.entries(u).filter(([B,L])=>L!==void 0).map(([B,L])=>[B,Array.isArray(L)?`{${L.join(",")}}`:`${L}`]).forEach(([B,L])=>{S.searchParams.append(B,L)})):(E="POST",k=u);const U=new Headers(this.headers);return p&&U.set("Prefer",`count=${p}`),new t.default({method:E,url:S,headers:U,schema:this.schemaName,body:k,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}}return Ro.default=s,Ro}var jw;function Gj(){if(jw)return Xt;jw=1;var r=Xt&&Xt.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.PostgrestError=Xt.PostgrestBuilder=Xt.PostgrestTransformBuilder=Xt.PostgrestFilterBuilder=Xt.PostgrestQueryBuilder=Xt.PostgrestClient=void 0;const e=r(Fj());Xt.PostgrestClient=e.default;const t=r(zS());Xt.PostgrestQueryBuilder=t.default;const s=r(ly());Xt.PostgrestFilterBuilder=s.default;const a=r(LS());Xt.PostgrestTransformBuilder=a.default;const l=r(US());Xt.PostgrestBuilder=l.default;const u=r(VS());return Xt.PostgrestError=u.default,Xt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},Xt}var Kj=Gj();const Qj=Cx(Kj),{PostgrestClient:Yj,PostgrestQueryBuilder:dP,PostgrestFilterBuilder:fP,PostgrestTransformBuilder:mP,PostgrestBuilder:gP,PostgrestError:pP}=Qj;class Wj{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Xj="2.75.0",Jj=`realtime-js/${Xj}`,Zj="1.0.0",np=1e4,eD=1e3,tD=100;var Pc;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Pc||(Pc={}));var Ht;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ht||(Ht={}));var hs;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(hs||(hs={}));var sp;(function(r){r.websocket="websocket"})(sp||(sp={}));var _a;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(_a||(_a={}));class nD{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const f=s.decode(e.slice(u,u+a));u=u+a;const m=s.decode(e.slice(u,u+l));u=u+l;const p=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:f,event:m,payload:p}}}class BS{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(mt||(mt={}));const Dw=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=sD(u,r,e,a),l),{}):{}},sD=(r,e,t,s)=>{const a=e.find(f=>f.name===r),l=a==null?void 0:a.type,u=t[r];return l&&!s.includes(l)?qS(l,u):rp(u)},qS=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return oD(e,t)}switch(r){case mt.bool:return rD(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return iD(e);case mt.json:case mt.jsonb:return aD(e);case mt.timestamp:return lD(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return rp(e);default:return rp(e)}},rp=r=>r,rD=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},iD=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},aD=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},oD=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let l;const u=r.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(f=>qS(e,f))}return r},lD=r=>typeof r=="string"?r.replace(" ","T"):r,$S=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class pg{constructor(e,t,s={},a=np){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Pw;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Pw||(Pw={}));class Mc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mc.syncState(this.state,a,l,u),this.pendingDiffs.forEach(m=>{this.state=Mc.syncDiff(this.state,m,l,u)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Mc.syncDiff(this.state,a,l,u),f())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const l=this.cloneDeep(e),u=this.transformState(t),f={},m={};return this.map(l,(p,_)=>{u[p]||(m[p]=_)}),this.map(u,(p,_)=>{const E=l[p];if(E){const S=_.map(L=>L.presence_ref),k=E.map(L=>L.presence_ref),U=_.filter(L=>k.indexOf(L.presence_ref)<0),B=E.filter(L=>S.indexOf(L.presence_ref)<0);U.length>0&&(f[p]=U),B.length>0&&(m[p]=B)}else f[p]=_}),this.syncDiff(l,{joins:f,leaves:m},s,a)}static syncDiff(e,t,s,a){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(f,m)=>{var p;const _=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(m),_.length>0){const E=e[f].map(k=>k.presence_ref),S=_.filter(k=>E.indexOf(k.presence_ref)<0);e[f].unshift(...S)}s(f,_,m)}),this.map(u,(f,m)=>{let p=e[f];if(!p)return;const _=m.map(E=>E.presence_ref);p=p.filter(E=>_.indexOf(E.presence_ref)<0),e[f]=p,a(f,p,m),p.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mw;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Mw||(Mw={}));var Vc;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Vc||(Vc={}));var hr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(hr||(hr={}));class cy{constructor(e,t={config:{}},s){var a,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ht.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new pg(this,hs.join,this.params,this.timeout),this.rejoinTimer=new BS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ht.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ht.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ht.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hs.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new Mc(this),this.broadcastEndpointURL=$S(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ht.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(k=>k.filter))!==null&&a!==void 0?a:[],_=!!this.bindings[Vc.PRESENCE]&&this.bindings[Vc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},S={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:_}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(k=>e==null?void 0:e(hr.CHANNEL_ERROR,k)),this._onClose(()=>e==null?void 0:e(hr.CLOSED)),this.updateJoinPayload(Object.assign({config:S},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:k})=>{var U;if(this.socket.setAuth(),k===void 0){e==null||e(hr.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,L=(U=B==null?void 0:B.length)!==null&&U!==void 0?U:0,re=[];for(let te=0;te<L;te++){const Y=B[te],{filter:{event:le,schema:ce,table:ae,filter:I}}=Y,x=k&&k[te];if(x&&x.event===le&&x.schema===ce&&x.table===ae&&x.filter===I)re.push(Object.assign(Object.assign({},Y),{id:x.id}));else{this.unsubscribe(),this.state=Ht.errored,e==null||e(hr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=re,e&&e(hr.SUBSCRIBED);return}}).receive("error",k=>{this.state=Ht.errored,e==null||e(hr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Ht.joined&&e===Vc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,f,m;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ht.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new pg(this,hs.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ht.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new pg(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tD){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,l;const u=e.toLocaleLowerCase(),{close:f,error:m,leave:p,join:_}=hs;if(s&&[f,m,p,_].indexOf(u)>=0&&s!==this._joinRef())return;let S=this._onMessage(u,t,s);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(k=>{var U,B,L;return((U=k.filter)===null||U===void 0?void 0:U.event)==="*"||((L=(B=k.filter)===null||B===void 0?void 0:B.event)===null||L===void 0?void 0:L.toLocaleLowerCase())===u}).map(k=>k.callback(S,s)):(l=this.bindings[u])===null||l===void 0||l.filter(k=>{var U,B,L,re,te,Y;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in k){const le=k.id,ce=(U=k.filter)===null||U===void 0?void 0:U.event;return le&&((B=t.ids)===null||B===void 0?void 0:B.includes(le))&&(ce==="*"||(ce==null?void 0:ce.toLocaleLowerCase())===((L=t.data)===null||L===void 0?void 0:L.type.toLocaleLowerCase()))}else{const le=(te=(re=k==null?void 0:k.filter)===null||re===void 0?void 0:re.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return le==="*"||le===((Y=t==null?void 0:t.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===u}).map(k=>{if(typeof S=="object"&&"ids"in S){const U=S.data,{schema:B,table:L,commit_timestamp:re,type:te,errors:Y}=U;S=Object.assign(Object.assign({},{schema:B,table:L,commit_timestamp:re,eventType:te,new:{},old:{},errors:Y}),this._getPayloadRecords(U))}k.callback(S,s)})}_isClosed(){return this.state===Ht.closed}_isJoined(){return this.state===Ht.joined}_isJoining(){return this.state===Ht.joining}_isLeaving(){return this.state===Ht.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&cy.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(hs.close,{},e)}_onError(e){this._on(hs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ht.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Dw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Dw(e.columns,e.old_record)),t}}const yg=()=>{},Vh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cD=[1e3,2e3,5e3,1e4],uD=1e4,hD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dD{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=np,this.transport=null,this.heartbeatIntervalMs=Vh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yg,this.ref=0,this.reconnectTimer=null,this.logger=yg,this.conn=null,this.sendBuffer=[],this.serializer=new nD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>au(async()=>{const{default:f}=await Promise.resolve().then(()=>fl);return{default:f}},void 0).then(({default:f})=>f(...u)).catch(f=>{throw new Error(`Failed to load @supabase/node-fetch: ${f.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${sp.websocket}`,this.httpEndpoint=$S(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Wj.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Zj}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pc.connecting:return _a.Connecting;case Pc.open:return _a.Open;case Pc.closing:return _a.Closing;default:return _a.Closed}}isConnected(){return this.connectionState()===_a.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new cy(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:a,ref:l}=e,u=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${t} ${s} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(eD,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Vh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:u}=t,f=u?`(${u})`:"",m=l.status||"";this.log("receive",`${m} ${s} ${a} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(hs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([hD],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:Jj};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(hs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new BS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,l,u,f,m,p,_;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:np,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Vh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:yg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:E=>cD[E-1]||uD,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(E,S)=>S(JSON.stringify(E)),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class uy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class fD extends uy{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ip extends uy{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var mD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};const HS=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},gD=()=>mD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield au(()=>Promise.resolve().then(()=>fl),void 0)).Response:Response}),ap=r=>{if(Array.isArray(r))return r.map(t=>ap(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=ap(s)}),e},pD=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Pa=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};const _g=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),yD=(r,e,t)=>Pa(void 0,void 0,void 0,function*(){const s=yield gD();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(a=>{const l=r.status||500,u=(a==null?void 0:a.statusCode)||l+"";e(new fD(_g(a),l,u))}).catch(a=>{e(new ip(_g(a),a))}):e(new ip(_g(r),r))}),_D=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(pD(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function ou(r,e,t,s,a,l){return Pa(this,void 0,void 0,function*(){return new Promise((u,f)=>{r(t,_D(e,s,a,l)).then(m=>{if(!m.ok)throw m;return s!=null&&s.noResolveJson?m:m.json()}).then(m=>u(m)).catch(m=>yD(m,f,s))})})}function _d(r,e,t,s){return Pa(this,void 0,void 0,function*(){return ou(r,"GET",e,t,s)})}function js(r,e,t,s,a){return Pa(this,void 0,void 0,function*(){return ou(r,"POST",e,s,a,t)})}function op(r,e,t,s,a){return Pa(this,void 0,void 0,function*(){return ou(r,"PUT",e,s,a,t)})}function vD(r,e,t,s){return Pa(this,void 0,void 0,function*(){return ou(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function FS(r,e,t,s,a){return Pa(this,void 0,void 0,function*(){return ou(r,"DELETE",e,s,a,t)})}var bD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};class wD{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return bD(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mt(e))return{data:null,error:e};throw e}})}}var ED=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};class TD{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new wD(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return ED(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mt(e))return{data:null,error:e};throw e}})}}var xn=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};const SD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AD{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=HS(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return xn(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Vw),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=s,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const p=this._removeEmptyFolders(t),_=this._getFinalPath(p),E=yield(e=="PUT"?op:js)(this.fetch,`${this.url}/object/${_}`,l,Object.assign({headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mt(l))return{data:null,error:l};throw l}})}upload(e,t,s){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return xn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${u}`);f.searchParams.set("token",t);try{let m;const p=Object.assign({upsert:Vw.upsert},a),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",p.cacheControl)):(m=s,_["cache-control"]=`max-age=${p.cacheControl}`,_["content-type"]=p.contentType);const E=yield op(this.fetch,f.toString(),m,{headers:_});return{data:{path:l,fullPath:E.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(Mt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,t){return xn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield js(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+l.url),f=u.searchParams.get("token");if(!f)throw new uy("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}update(e,t,s){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return xn(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return xn(this,void 0,void 0,function*(){try{return{data:{path:(yield js(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return xn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield js(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return xn(this,void 0,void 0,function*(){try{const a=yield js(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"",f=this._getFinalPath(e),m=()=>_d(this.fetch,`${this.url}/${a}/${f}${u}`,{headers:this.headers,noResolveJson:!0});return new TD(m,this.shouldThrowOnError)}info(e){return xn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield _d(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ap(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}exists(e){return xn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield vD(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s)&&s instanceof ip){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});m!==""&&a.push(m);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(e){return xn(this,void 0,void 0,function*(){try{return{data:yield FS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}list(e,t,s){return xn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},SD),t),{prefix:e||""});return{data:yield js(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}listV2(e,t){return xn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield js(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const xD="2.75.0",RD={"X-Client-Info":`storage-js/${xD}`};var Oo=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};class CD{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},RD),t),this.fetch=HS(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Oo(this,void 0,void 0,function*(){try{return{data:yield _d(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Mt(e))return{data:null,error:e};throw e}})}getBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield _d(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}createBucket(e){return Oo(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield js(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return Oo(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield FS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mt(t))return{data:null,error:t};throw t}})}}class ID extends CD{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new AD(this.url,this.headers,e,this.fetch)}}const ND="2.75.0";let Cc="";typeof Deno<"u"?Cc="deno":typeof document<"u"?Cc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cc="react-native":Cc="node";const kD={"X-Client-Info":`supabase-js-${Cc}/${ND}`},OD={headers:kD},jD={schema:"public"},DD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},PD={};var MD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};const VD=r=>{let e;return r?e=r:typeof fetch>"u"?e=PS:e=fetch,(...t)=>e(...t)},UD=()=>typeof Headers>"u"?MS:Headers,LD=(r,e,t)=>{const s=VD(t),a=UD();return(l,u)=>MD(void 0,void 0,void 0,function*(){var f;const m=(f=yield e())!==null&&f!==void 0?f:r;let p=new a(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),s(l,Object.assign(Object.assign({},u),{headers:p}))})};var zD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};function BD(r){return r.endsWith("/")?r:r+"/"}function qD(r,e){var t,s;const{db:a,auth:l,realtime:u,global:f}=r,{db:m,auth:p,realtime:_,global:E}=e,S={db:Object.assign(Object.assign({},m),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},_),u),storage:{},global:Object.assign(Object.assign(Object.assign({},E),f),{headers:Object.assign(Object.assign({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>zD(this,void 0,void 0,function*(){return""})};return r.accessToken?S.accessToken=r.accessToken:delete S.accessToken,S}function $D(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const GS="2.75.0",qo=30*1e3,lp=3,vg=lp*qo,HD="http://localhost:9999",FD="supabase.auth.token",GD={"X-Client-Info":`gotrue-js/${GS}`},cp="X-Supabase-Api-Version",KS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},KD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,QD=10*60*1e3;class Gc extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function be(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class YD extends Gc{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function WD(r){return be(r)&&r.name==="AuthApiError"}class va extends Gc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ii extends Gc{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class ai extends Ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function XD(r){return be(r)&&r.name==="AuthSessionMissingError"}class jo extends Ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uh extends Ii{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Lh extends Ii{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JD(r){return be(r)&&r.name==="AuthImplicitGrantRedirectError"}class Uw extends Ii{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class up extends Ii{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function bg(r){return be(r)&&r.name==="AuthRetryableFetchError"}class Lw extends Ii{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class hp extends Ii{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zw=` 	
\r=`.split(""),ZD=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<zw.length;e+=1)r[zw[e].charCodeAt(0)]=-2;for(let e=0;e<vd.length;e+=1)r[vd[e].charCodeAt(0)]=e;return r})();function Bw(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(vd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(vd[s]),e.queuedBits-=6}}function QS(r,e,t){const s=ZD[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function qw(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{n4(u,s,t)};for(let u=0;u<r.length;u+=1)QS(r.charCodeAt(u),a,l);return e.join("")}function e4(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function t4(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}e4(s,e)}}function n4(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Yo(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)QS(r.charCodeAt(a),t,s);return new Uint8Array(e)}function s4(r){const e=[];return t4(r,t=>e.push(t)),new Uint8Array(e)}function Ea(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>Bw(a,t,s)),Bw(null,t,s),e.join("")}function r4(r){return Math.round(Date.now()/1e3)+r}function i4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Un=()=>typeof window<"u"&&typeof document<"u",ma={tested:!1,writable:!1},YS=()=>{if(!Un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ma.tested)return ma.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ma.tested=!0,ma.writable=!0}catch{ma.tested=!0,ma.writable=!1}return ma.writable};function a4(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const WS=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>fl);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},o4=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",$o=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},ga=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ii=async(r,e)=>{await r.removeItem(e)};class $d{constructor(){this.promise=new $d.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}$d.promiseConstructor=Promise;function wg(r){const e=r.split(".");if(e.length!==3)throw new hp("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!KD.test(e[s]))throw new hp("JWT not in base64url format");return{header:JSON.parse(qw(e[0])),payload:JSON.parse(qw(e[1])),signature:Yo(e[2]),raw:{header:e[0],payload:e[1]}}}async function l4(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function c4(r,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await r(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function u4(r){return("0"+r.toString(16)).substr(-2)}function h4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,u4).join("")}async function d4(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function f4(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await d4(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Do(r,e,t=!1){const s=h4();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await $o(r,`${e}-code-verifier`,a);const l=await f4(s);return[l,s===l?"plain":"s256"]}const m4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function g4(r){const e=r.headers.get(cp);if(!e||!e.match(m4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function p4(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function y4(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Po(r){if(!_4.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eg(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $w(r){return JSON.parse(JSON.stringify(r))}var v4=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};const ya=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),b4=[502,503,504];async function Hw(r){var e;if(!o4(r))throw new up(ya(r),0);if(b4.includes(r.status))throw new up(ya(r),r.status);let t;try{t=await r.json()}catch(l){throw new va(ya(l),l)}let s;const a=g4(r);if(a&&a.getTime()>=KS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Lw(ya(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new ai}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Lw(ya(t),r.status,t.weak_password.reasons);throw new YD(ya(t),r.status||500,s)}const w4=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function je(r,e,t,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[cp]||(l[cp]=KS["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await E4(r,e,t+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(m):{data:Object.assign({},m),error:null}}async function E4(r,e,t,s,a,l){const u=w4(e,s,a,l);let f;try{f=await r(t,Object.assign({},u))}catch(m){throw console.error(m),new up(ya(m),0)}if(f.ok||await Hw(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(m){await Hw(m)}}function us(r){var e;let t=null;A4(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=r4(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Fw(r){const e=us(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function hi(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function T4(r){return{data:r,error:null}}function S4(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l}=r,u=v4(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function Gw(r){return r}function A4(r){return r.access_token&&r.refresh_token&&r.expires_in}const Tg=["global","local","others"];var x4=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};class R4{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=WS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Tg[0]){if(Tg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tg.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:hi})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=x4(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:S4,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hi})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},_=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Gw});if(_.error)throw _.error;const E=await _.json(),S=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(m=(f=_.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return k.length>0&&(k.forEach(U=>{const B=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(U.split(";")[1].split("=")[1]);p[`${L}Page`]=B}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(be(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Po(e);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hi})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Po(e);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:hi})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Po(e);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:hi})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Po(e.userId);try{const{data:t,error:s}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Po(e.userId),Po(e.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,l,u,f,m;try{const p={nextPage:null,lastPage:0,total:0},_=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Gw});if(_.error)throw _.error;const E=await _.json(),S=(u=_.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(m=(f=_.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return k.length>0&&(k.forEach(U=>{const B=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),L=JSON.parse(U.split(";")[1].split("=")[1]);p[`${L}Page`]=B}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(be(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}}function Kw(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Mo={debug:!!(globalThis&&YS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class C4 extends XS{}async function I4(r,e,t){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new C4(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Mo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function N4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function JS(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function k4(r){return parseInt(r,16)}function O4(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function j4(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:f,requestId:m,resources:p,scheme:_,uri:E,version:S}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const k=JS(r.address),U=_?`${_}://${s}`:s,B=r.statement?`${r.statement}
`:"",L=`${U} wants you to sign in with your Ethereum account:
${k}

${B}`;let re=`URI: ${E}
Version: ${S}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(re+=`
Expiration Time: ${a.toISOString()}`),f&&(re+=`
Not Before: ${f.toISOString()}`),m&&(re+=`
Request ID: ${m}`),p){let te=`
Resources:`;for(const Y of p){if(!Y||typeof Y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Y}`);te+=`
- ${Y}`}re+=te}return`${L}
${re}`}class Pt extends Error{constructor({message:e,code:t,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class bd extends Pt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function D4({error:r,options:e}){var t,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Pt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(eA(u)){if(l.rp.id!==u)return new Pt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function P4({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Pt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(eA(s)){if(t.rpId!==s)return new Pt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}var ZS=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};class M4{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const V4=new M4;function U4(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=ZS(r,["challenge","user","excludeCredentials"]),l=Yo(e).buffer,u=Object.assign(Object.assign({},t),{id:Yo(t.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:u});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let m=0;m<s.length;m++){const p=s[m];f.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:Yo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function L4(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=ZS(r,["challenge","allowCredentials"]),a=Yo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const f=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},f),{id:Yo(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function z4(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:Ea(new Uint8Array(r.response.attestationObject)),clientDataJSON:Ea(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function B4(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Ea(new Uint8Array(a.authenticatorData)),clientDataJSON:Ea(new Uint8Array(a.clientDataJSON)),signature:Ea(new Uint8Array(a.signature)),userHandle:a.userHandle?Ea(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eA(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Qw(){var r,e;return!!(Un()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function q4(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bd("Browser returned unexpected credential type",e)}:{data:null,error:new bd("Empty credential response",e)}}catch(e){return{data:null,error:D4({error:e,options:r})}}}async function $4(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new bd("Browser returned unexpected credential type",e)}:{data:null,error:new bd("Empty credential response",e)}}catch(e){return{data:null,error:P4({error:e,options:r})}}}const H4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},F4={userVerification:"preferred",hints:["security-key"]};function wd(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const l in a){const u=a[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(t(u))s[l]=u;else if(e(u)){const f=s[l];e(f)?s[l]=wd(f,u):s[l]=wd(u)}else s[l]=u}return s}function G4(r,e){return wd(H4,r,e||{})}function K4(r,e){return wd(F4,r,e||{})}class Q4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},l){try{const{data:u,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:f};const m=a??V4.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=G4(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:_,error:E}=await q4({publicKey:p,signal:m});return _?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}case"request":{const p=K4(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:_,error:E}=await $4(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:m}));return _?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new va("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!t)return{data:null,error:new Gc("rpId is required for WebAuthn authentication")};try{if(!Qw())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:l});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:t,rpOrigins:s,credential_response:m.credential_response}})}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new va("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!t)return{data:null,error:new Gc("rpId is required for WebAuthn registration")};try{if(!Qw())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(_=>{var E;return(E=_.data)===null||E===void 0?void 0:E.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_==null?void 0:_.id}):void 0),{data:null,error:f};const{data:m,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:l});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:t,rpOrigins:s,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(u){return be(u)?{data:null,error:u}:{data:null,error:new va("Unexpected error in register",u)}}}}N4();const Y4={url:HD,storageKey:FD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yw(r,e,t){return await t()}const Vo={};class Kc{get jwks(){var e,t;return(t=(e=Vo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Vo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Vo[this.storageKey]=Object.assign(Object.assign({},Vo[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kc.nextInstanceID,Kc.nextInstanceID+=1,this.instanceID>0&&Un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Y4),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new R4({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=WS(a.fetch),this.lock=a.lock||Yw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Un()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=I4:this.lock=Yw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Q4(this)},this.persistSession?(a.storage?this.storage=a.storage:YS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Kw(this.memoryStorage)),Un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${GS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=a4(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Un()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),JD(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return be(t)?{error:t}:{error:new va("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const l=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:us}),{data:u,error:f}=l;if(f||!u)return{data:{user:null,session:null},error:f};const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(l){if(be(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,s,a;try{let l;if("email"in e){const{email:_,password:E,options:S}=e;let k=null,U=null;this.flowType==="pkce"&&([k,U]=await Do(this.storage,this.storageKey)),l=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:_,password:E,data:(t=S==null?void 0:S.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:k,code_challenge_method:U},xform:us})}else if("phone"in e){const{phone:_,password:E,options:S}=e;l=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:E,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:us})}else throw new Uh("You must provide either an email or phone number and a password");const{data:u,error:f}=l;if(f||!u)return{data:{user:null,session:null},error:f};const m=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(l){if(be(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:f}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Fw})}else if("phone"in e){const{phone:l,password:u,options:f}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Fw})}else throw new Uh("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new jo}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,l,u,f,m,p,_,E,S;let k,U;if("message"in e)k=e.message,U=e.signature;else{const{chain:B,wallet:L,statement:re,options:te}=e;let Y;if(Un())if(typeof L=="object")Y=L;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")Y=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(te!=null&&te.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=L}const le=new URL((t=te==null?void 0:te.url)!==null&&t!==void 0?t:window.location.href),ce=await Y.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ce||ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ae=JS(ce[0]);let I=(s=te==null?void 0:te.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!I){const R=await Y.request({method:"eth_chainId"});I=k4(R)}const x={domain:le.host,address:ae,statement:re,uri:le.href,version:"1",chainId:I,nonce:(a=te==null?void 0:te.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=te==null?void 0:te.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=te==null?void 0:te.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=te==null?void 0:te.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=te==null?void 0:te.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(_=te==null?void 0:te.signInWithEthereum)===null||_===void 0?void 0:_.resources};k=j4(x),U=await Y.request({method:"personal_sign",params:[O4(k),ae]})}try{const{data:B,error:L}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:U},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:us});if(L)throw L;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new jo}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:L})}catch(B){if(be(B))return{data:{user:null,session:null},error:B};throw B}}async signInWithSolana(e){var t,s,a,l,u,f,m,p,_,E,S,k;let U,B;if("message"in e)U=e.message,B=e.signature;else{const{chain:L,wallet:re,statement:te,options:Y}=e;let le;if(Un())if(typeof re=="object")le=re;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))le=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof re!="object"||!(Y!=null&&Y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=re}const ce=new URL((t=Y==null?void 0:Y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in le&&le.signIn){const ae=await le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Y==null?void 0:Y.signInWithSolana),{version:"1",domain:ce.host,uri:ce.href}),te?{statement:te}:null));let I;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")I=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)I=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)U=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),B=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in le)||typeof le.signMessage!="function"||!("publicKey"in le)||typeof le!="object"||!le.publicKey||!("toBase58"in le.publicKey)||typeof le.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${ce.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${ce.href}`,`Issued At: ${(a=(s=Y==null?void 0:Y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=Y==null?void 0:Y.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${Y.signInWithSolana.notBefore}`]:[],...!((u=Y==null?void 0:Y.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${Y.signInWithSolana.expirationTime}`]:[],...!((f=Y==null?void 0:Y.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${Y.signInWithSolana.chainId}`]:[],...!((m=Y==null?void 0:Y.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${Y.signInWithSolana.nonce}`]:[],...!((p=Y==null?void 0:Y.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${Y.signInWithSolana.requestId}`]:[],...!((E=(_=Y==null?void 0:Y.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||E===void 0)&&E.length?["Resources",...Y.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const ae=await le.signMessage(new TextEncoder().encode(U),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=ae}}try{const{data:L,error:re}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:Ea(B)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:us});if(re)throw re;return!L||!L.session||!L.user?{data:{user:null,session:null},error:new jo}:(L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),{data:Object.assign({},L),error:re})}catch(L){if(be(L))return{data:{user:null,session:null},error:L};throw L}}async _exchangeCodeForSession(e){const t=await ga(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:l,error:u}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:us});if(await ii(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new jo}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(be(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:l,nonce:u}=e,f=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:us}),{data:m,error:p}=f;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new jo}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:p})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,l,u;try{if("email"in e){const{email:f,options:m}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await Do(this.storage,this.storageKey));const{error:E}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},create_user:(s=m==null?void 0:m.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:_},redirectTo:m==null?void 0:m.emailRedirectTo});return{data:{user:null,session:null},error:E}}if("phone"in e){const{phone:f,options:m}=e,{data:p,error:_}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},create_user:(l=m==null?void 0:m.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:_}}throw new Uh("You must provide either an email or phone number.")}catch(f){if(be(f))return{data:{user:null,session:null},error:f};throw f}}async verifyOtp(e){var t,s;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:f}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:us});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,p=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(a){if(be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Do(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:T4})}catch(l){if(be(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ai;const{error:a}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:u}=await je(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:u,error:f}=await je(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Uh("You must provide either an email or phone number and a type")}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ga(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<vg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await ga(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Eg()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,p,_)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,p,_))})}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hi}):await this._useSession(async t=>{var s,a,l;const{data:u,error:f}=t;if(f)throw f;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ai}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:hi})})}catch(t){if(be(t))return XD(t)&&(await this._removeSession(),await ii(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new ai;const u=a.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await Do(this.storage,this.storageKey));const{data:p,error:_}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:hi});if(_)throw _;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(be(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ai;const t=Date.now()/1e3;let s=t,a=!0,l=null;const{payload:u}=wg(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:f}=t;if(f)throw f;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ai;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Un())throw new Lh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Lh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Uw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Uw("No code detected.");const{data:te,error:Y}=await this._exchangeCodeForSession(e.code);if(Y)throw Y;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:f,expires_at:m,token_type:p}=e;if(!l||!f||!u||!p)throw new Lh("No session defined in URL");const _=Math.round(Date.now()/1e3),E=parseInt(f);let S=_+E;m&&(S=parseInt(m));const k=S-_;k*1e3<=qo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${E}s`);const U=S-E;_-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,S,_):_-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,S,_);const{data:B,error:L}=await this._getUser(l);if(L)throw L;const re={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:S,refresh_token:u,token_type:p,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:re,redirectType:e.type},error:null}}catch(s){if(be(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ga(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{error:l};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(WD(f)&&(f.status===404||f.status===401||f.status===403)))return{error:f}}return e!=="others"&&(await this._removeSession(),await ii(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=i4(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:l},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Do(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(be(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async l=>{var u,f,m,p,_;const{data:E,error:S}=l;if(S)throw S;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",k,{headers:this.headers,jwt:(_=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&_!==void 0?_:void 0})});if(a)throw a;return Un()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(be(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:u,provider:f,token:m,access_token:p,nonce:_}=e,E=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:m,access_token:p,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:us}),{data:S,error:k}=E;return k?{data:{user:null,session:null},error:k}:!S||!S.session||!S.user?{data:{user:null,session:null},error:new jo}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),{data:S,error:k})}catch(a){if(be(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:u}=t;if(u)throw u;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await c4(async a=>(a>0&&await l4(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:us})),(a,l)=>{const u=200*Math.pow(2,a);return l&&bg(l)&&Date.now()+u-s<qo})}catch(s){if(this._debug(t,"error",s),be(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Un()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ga(this.storage,this.storageKey);if(a&&this.userStorage){let u=await ga(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await $o(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Eg()}else if(a&&!a.user&&!a.user){const u=await ga(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await ii(this.storage,this.storageKey+"-user"),await $o(this.storage,this.storageKey,a)):a.user=Eg()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<vg;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${vg}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),bg(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(a.access_token);!f&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new $d;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new ai;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),be(l)){const u={data:null,error:l};return bg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(m){l.push(m)}});if(await Promise.all(u),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await $o(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=$w(a);await $o(this.storage,this.storageKey,l)}else{const a=$w(t);await $o(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ii(this.storage,this.storageKey),await ii(this.storage,this.storageKey+"-code-verifier"),await ii(this.storage,this.storageKey+"-user"),this.userStorage&&await ii(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/qo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${qo}ms, refresh threshold is ${lp} ticks`),a<=lp&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof XS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Do(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;return l?{data:null,error:l}:await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:u}=t;if(u)return{data:null,error:u};const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await je(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&m.type==="totp"&&(!((a=m==null?void 0:m.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?z4(e.webauthn.credential_response):B4(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return m?{data:null,error:m}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:m})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:U4(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:L4(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=wg(a.access_token);let f=null;u.aal&&(f=u.aal);let m=f;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(E=>E.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(m="aal2");const _=u.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:_},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(f=>f.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+QD>a)return s;const{data:l,error:u}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:k,error:U}=await this.getSession();if(U||!k.session)return{data:null,error:U};s=k.session.access_token}const{header:a,payload:l,signature:u,raw:{header:f,payload:m}}=wg(s);t!=null&&t.allowExpired||p4(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:k}=await this.getUser(s);if(k)throw k;return{data:{claims:l,header:a,signature:u},error:null}}const _=y4(a.alg),E=await crypto.subtle.importKey("jwk",p,_,!0,["verify"]);if(!await crypto.subtle.verify(_,E,u,s4(`${f}.${m}`)))throw new hp("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(s){if(be(s))return{data:null,error:s};throw s}}}Kc.nextInstanceID=0;const W4=Kc;class X4 extends W4{constructor(e){super(e)}}var J4=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{p(s.next(_))}catch(E){u(E)}}function m(_){try{p(s.throw(_))}catch(E){u(E)}}function p(_){_.done?l(_.value):a(_.value).then(f,m)}p((s=s.apply(r,e||[])).next())})};class Z4{constructor(e,t,s){var a,l,u;this.supabaseUrl=e,this.supabaseKey=t;const f=$D(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const m=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:jD,realtime:PD,auth:Object.assign(Object.assign({},DD),{storageKey:m}),global:OD},_=qD(s??{},p);this.storageKey=(a=_.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=_.global.headers)!==null&&l!==void 0?l:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(E,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=_.auth)!==null&&u!==void 0?u:{},this.headers,_.global.fetch),this.fetch=LD(t,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new Yj(new URL("rest/v1",f).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),this.storage=new ID(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),_.accessToken||this._listenForAuthEvents()}get functions(){return new Lj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return J4(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:u,flowType:f,lock:m,debug:p},_,E){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new X4({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),_),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,flowType:f,lock:m,debug:p,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new dD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eP=(r,e,t)=>new Z4(r,e,t);function tP(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}tP()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ut=(r,e,t,s={})=>({code:r,message:e,provider:t,context:s,timestamp:new Date().toISOString()});class nP{constructor(e){this.config=e,this.app=null,this.auth=null,this.db=null}async connect(){try{this.app=TE(this.config),this.auth=gN(this.app),this.db=dj(this.app),await new Promise(e=>{const t=s2(this.auth,s=>{t(),e(s)})}),console.log("✅ Firebase connected successfully")}catch(e){throw ut("FIREBASE_CONNECT_ERROR",`Failed to connect to Firebase: ${e.message}`,"firebase",{originalError:e})}}async signIn(){try{const e=await XI(this.auth);return sessionStorage.setItem("firebase_token",await e.user.getIdToken()),{user:e.user,token:await e.user.getIdToken()}}catch(e){throw ut("FIREBASE_AUTH_ERROR",`Firebase authentication failed: ${e.message}`,"firebase",{originalError:e})}}async signOut(){try{await r2(this.auth),sessionStorage.removeItem("firebase_token")}catch(e){throw ut("FIREBASE_SIGNOUT_ERROR",`Firebase sign out failed: ${e.message}`,"firebase",{originalError:e})}}currentUser(){return this.auth.currentUser}async read(e,t={}){try{let a=pw(this.db,e);if(t.where){const[u,f,m]=t.where;a=Sj(a,Aj(u,f,m))}return(await Ij(a)).docs.map(u=>({id:u.id,...u.data()}))}catch(s){throw ut("FIREBASE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"firebase",{collectionPath:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const a=gg(this.db,e,t);return await Nj(a,{...s,updatedAt:new Date().toISOString()},{merge:!0}),{id:t,...s}}catch(a){throw ut("FIREBASE_WRITE_ERROR",`Failed to write to ${e}/${t}: ${a.message}`,"firebase",{collectionPath:e,docId:t,originalError:a})}}async update(e,t,s){try{const a=gg(this.db,e,t);return await kj(a,{...s,updatedAt:new Date().toISOString()}),{id:t,...s}}catch(a){throw ut("FIREBASE_UPDATE_ERROR",`Failed to update ${e}/${t}: ${a.message}`,"firebase",{collectionPath:e,docId:t,originalError:a})}}async delete(e,t){try{const s=gg(this.db,e,t);return await Oj(s),{id:t,deleted:!0}}catch(s){throw ut("FIREBASE_DELETE_ERROR",`Failed to delete ${e}/${t}: ${s.message}`,"firebase",{collectionPath:e,docId:t,originalError:s})}}onSnapshot(e,t){try{const s=pw(this.db,e);return jj(s,a=>{const l=a.docs.map(u=>({id:u.id,...u.data()}));t(l,null)},a=>{t(null,ut("FIREBASE_SNAPSHOT_ERROR",`Snapshot error on ${e}: ${a.message}`,"firebase",{collectionPath:e,originalError:a}))})}catch(s){throw ut("FIREBASE_SNAPSHOT_SETUP_ERROR",`Failed to setup snapshot for ${e}: ${s.message}`,"firebase",{collectionPath:e,originalError:s})}}}class sP{constructor(e){this.config=e,this.client=null}async connect(){try{this.client=eP(this.config.url,this.config.anonKey),console.log("✅ Supabase connected successfully")}catch(e){throw ut("SUPABASE_CONNECT_ERROR",`Failed to connect to Supabase: ${e.message}`,"supabase",{originalError:e})}}async signIn(){try{const{data:e,error:t}=await this.client.auth.signInAnonymously();if(t)throw t;return sessionStorage.setItem("supabase_token",e.session.access_token),{user:e.user,token:e.session.access_token}}catch(e){throw ut("SUPABASE_AUTH_ERROR",`Supabase authentication failed: ${e.message}`,"supabase",{originalError:e})}}async signOut(){try{await this.client.auth.signOut(),sessionStorage.removeItem("supabase_token")}catch(e){throw ut("SUPABASE_SIGNOUT_ERROR",`Supabase sign out failed: ${e.message}`,"supabase",{originalError:e})}}async currentUser(){const{data:{user:e}}=await this.client.auth.getUser();return e}async read(e,t={}){try{let s=this.client.from(e).select("*");if(t.where){const[u,f,m]=t.where;switch(f){case"==":s=s.eq(u,m);break;case">":s=s.gt(u,m);break;case"<":s=s.lt(u,m);break;case">=":s=s.gte(u,m);break;case"<=":s=s.lte(u,m);break}}const{data:a,error:l}=await s;if(l)throw l;return a}catch(s){throw ut("SUPABASE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"supabase",{tableName:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const{data:a,error:l}=await this.client.from(e).upsert({id:t,...s,updated_at:new Date().toISOString()});if(l)throw l;return a}catch(a){throw ut("SUPABASE_WRITE_ERROR",`Failed to write to ${e}: ${a.message}`,"supabase",{tableName:e,docId:t,originalError:a})}}async update(e,t,s){try{const{data:a,error:l}=await this.client.from(e).update({...s,updated_at:new Date().toISOString()}).eq("id",t);if(l)throw l;return a}catch(a){throw ut("SUPABASE_UPDATE_ERROR",`Failed to update ${e}: ${a.message}`,"supabase",{tableName:e,docId:t,originalError:a})}}async delete(e,t){try{const{error:s}=await this.client.from(e).delete().eq("id",t);if(s)throw s;return{id:t,deleted:!0}}catch(s){throw ut("SUPABASE_DELETE_ERROR",`Failed to delete from ${e}: ${s.message}`,"supabase",{tableName:e,docId:t,originalError:s})}}onSnapshot(e,t){try{const s=this.client.channel(`${e}_changes`).on("postgres_changes",{event:"*",schema:"public",table:e},a=>{this.read(e).then(l=>t(l,null)).catch(l=>t(null,l))}).subscribe();return()=>{this.client.removeChannel(s)}}catch(s){throw ut("SUPABASE_SNAPSHOT_ERROR",`Failed to setup snapshot for ${e}: ${s.message}`,"supabase",{tableName:e,originalError:s})}}}class rP{constructor(e){this.config=e,this.endpoint=e.endpoint,this.key=e.key,this.databaseId=e.databaseId||"FineGuardDB",this.authenticated=!1}async connect(){try{const e=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls`,{method:"GET",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"}});if(!e.ok)throw new Error(`Azure connection failed: ${e.statusText}`);this.authenticated=!0,console.log("✅ Azure Cosmos DB connected successfully")}catch(e){throw ut("AZURE_CONNECT_ERROR",`Failed to connect to Azure Cosmos DB: ${e.message}`,"azure",{originalError:e})}}async signIn(){try{return sessionStorage.setItem("azure_token",this.key),{user:{id:"azure-user"},token:this.key}}catch(e){throw ut("AZURE_AUTH_ERROR",`Azure authentication failed: ${e.message}`,"azure",{originalError:e})}}async signOut(){sessionStorage.removeItem("azure_token"),this.authenticated=!1}currentUser(){return this.authenticated?{id:"azure-user"}:null}async read(e,t={}){try{let s="SELECT * FROM c";if(t.where){const[u,f,m]=t.where,p=f==="=="?"=":f,_=typeof m=="string"?`"${m}"`:m;s+=` WHERE c.${u} ${p} ${_}`}const a=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs`,{method:"POST",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/query+json","x-ms-documentdb-isquery":"true"},body:JSON.stringify({query:s})});if(!a.ok)throw new Error(`Read failed: ${a.statusText}`);return(await a.json()).Documents||[]}catch(s){throw ut("AZURE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"azure",{containerName:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const a=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs`,{method:"POST",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"},body:JSON.stringify({id:t,...s,_updatedAt:new Date().toISOString()})});if(!a.ok)throw new Error(`Write failed: ${a.statusText}`);return await a.json()}catch(a){throw ut("AZURE_WRITE_ERROR",`Failed to write to ${e}: ${a.message}`,"azure",{containerName:e,docId:t,originalError:a})}}async update(e,t,s){try{const a=await this.read(e,{where:["id","==",t]});if(!a||a.length===0)throw new Error("Document not found");const l=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs/${t}`,{method:"PUT",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"},body:JSON.stringify({...a[0],...s,_updatedAt:new Date().toISOString()})});if(!l.ok)throw new Error(`Update failed: ${l.statusText}`);return await l.json()}catch(a){throw ut("AZURE_UPDATE_ERROR",`Failed to update ${e}: ${a.message}`,"azure",{containerName:e,docId:t,originalError:a})}}async delete(e,t){try{const s=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs/${t}`,{method:"DELETE",headers:{Authorization:this.key,"x-ms-version":"2018-12-31"}});if(!s.ok)throw new Error(`Delete failed: ${s.statusText}`);return{id:t,deleted:!0}}catch(s){throw ut("AZURE_DELETE_ERROR",`Failed to delete from ${e}: ${s.message}`,"azure",{containerName:e,docId:t,originalError:s})}}onSnapshot(e,t){const s=setInterval(async()=>{try{const a=await this.read(e);t(a,null)}catch(a){t(null,a)}},5e3);return()=>clearInterval(s)}}const iP=r=>{let e;if(!r||!r.provider)throw ut("INVALID_CONFIG","Configuration must include a provider field","connector",{config:r});switch(r.provider){case"firebase":if(!r.firebaseConfig)throw ut("INVALID_CONFIG","Firebase provider requires firebaseConfig","connector",{config:r});e=new nP(r.firebaseConfig);break;case"supabase":if(!r.supabaseConfig)throw ut("INVALID_CONFIG","Supabase provider requires supabaseConfig","connector",{config:r});e=new sP(r.supabaseConfig);break;case"azure":if(!r.azureConfig)throw ut("INVALID_CONFIG","Azure provider requires azureConfig","connector",{config:r});e=new rP(r.azureConfig);break;default:throw ut("UNSUPPORTED_PROVIDER",`Provider "${r.provider}" is not supported`,"connector",{config:r})}return{async connect(){return await e.connect(),{auth:{signIn:()=>e.signIn(),signOut:()=>e.signOut(),currentUser:()=>e.currentUser()},db:{read:(t,s)=>e.read(t,s),write:(t,s,a)=>e.write(t,s,a),update:(t,s,a)=>e.update(t,s,a),delete:(t,s)=>e.delete(t,s),onSnapshot:(t,s)=>e.onSnapshot(t,s)}}},getProvider(){return r.provider}}},aP=()=>{const[r,e]=we.useState("firebase"),[t,s]=we.useState(null),[a,l]=we.useState(!1),[u,f]=we.useState(!1),[m,p]=we.useState(null),[_,E]=we.useState([]),[S,k]=we.useState([]),[U,B]=we.useState("companies"),[L,re]=we.useState(!1),[te,Y]=we.useState(!1),[le,ce]=we.useState(null),[ae,I]=we.useState({}),x={firebase:{provider:"firebase",firebaseConfig:{apiKey:"demo-api-key",authDomain:"fineguard-demo.firebaseapp.com",projectId:"fineguard-demo",storageBucket:"fineguard-demo.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"}},supabase:{provider:"supabase",supabaseConfig:{url:"https://your-project.supabase.co",anonKey:"your-anon-key-here"}},azure:{provider:"azure",azureConfig:{endpoint:"https://your-account.documents.azure.com:443/",key:"your-azure-key-here",databaseId:"FineGuardDB"}}},R=async()=>{f(!0),p(null);try{const M=x[r],ie=iP(M),{auth:ne,db:F}=await ie.connect();await ne.signIn(),s({auth:ne,db:F}),l(!0),await D(F)}catch(M){p(M.message||"Failed to connect to database"),console.error("Connection error:",M)}finally{f(!1)}},D=async M=>{try{const ie=await M.read("companies"),ne=await M.read("obligations");E(ie||[]),k(ne||[])}catch(ie){console.error("Error loading data:",ie),p("Failed to load data from database")}},j=async()=>{if(t)try{await t.auth.signOut(),s(null),l(!1),E([]),k([])}catch(M){console.error("Disconnect error:",M)}},P=()=>{I(U==="companies"?{name:"",companyNumber:"",address:"",riskLevel:"low",complianceScore:100}:{companyId:"",title:"",description:"",dueDate:"",status:"pending",penalty:0}),ce("new")},C=async()=>{if(t){f(!0);try{const M=U==="companies"?"companies":"obligations",ie=le==="new"?`${Date.now()}`:le;await t.db.write(M,ie,ae),await D(t.db),ce(null),I({})}catch(M){p(`Failed to save: ${M.message}`)}finally{f(!1)}}},Ye=async M=>{if(!(!t||!confirm("Are you sure you want to delete this item?"))){f(!0);try{const ie=U==="companies"?"companies":"obligations";await t.db.delete(ie,M),await D(t.db)}catch(ie){p(`Failed to delete: ${ie.message}`)}finally{f(!1)}}},Le=M=>{ce(M.id),I(M)};return y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Panel"}),y.jsx("p",{className:"text-muted-foreground",children:"Manage database connections and data"})]}),y.jsx(Cn,{variant:a?"default":"secondary",className:"text-lg px-4 py-2",children:a?y.jsxs(y.Fragment,{children:[y.jsx(ba,{className:"h-4 w-4 mr-2"})," Connected"]}):y.jsxs(y.Fragment,{children:[y.jsx(K1,{className:"h-4 w-4 mr-2"})," Disconnected"]})})]}),y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsxs(Me,{className:"flex items-center gap-2",children:[y.jsx(Xh,{className:"h-6 w-6"}),"Database Connection"]}),y.jsx(Ps,{children:"Choose your database provider and connect"})]}),y.jsxs(Ne,{className:"space-y-4",children:[y.jsxs("div",{className:"flex gap-4 items-center",children:[y.jsx("label",{className:"font-medium",children:"Provider:"}),y.jsxs("select",{value:r,onChange:M=>e(M.target.value),disabled:a,className:"px-4 py-2 border rounded-lg bg-background",children:[y.jsx("option",{value:"firebase",children:"Firebase"}),y.jsx("option",{value:"supabase",children:"Supabase"}),y.jsx("option",{value:"azure",children:"Azure Cosmos DB"})]}),a?y.jsx(Ce,{onClick:j,variant:"destructive",children:"Disconnect"}):y.jsxs(Ce,{onClick:R,disabled:u,className:"bg-gradient-to-r from-cyan-400 to-blue-500",children:[u?y.jsx($0,{className:"h-4 w-4 mr-2 animate-spin"}):y.jsx(Xh,{className:"h-4 w-4 mr-2"}),"Connect"]})]}),m&&y.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[y.jsx(dE,{className:"h-5 w-5 text-red-600"}),y.jsx("p",{className:"text-red-600 dark:text-red-400",children:m})]}),a&&y.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:[y.jsx(ba,{className:"h-5 w-5 text-green-600"}),y.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["Connected to ",r.charAt(0).toUpperCase()+r.slice(1)]})]})]})]}),a&&y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs(Me,{className:"flex items-center gap-2",children:[y.jsx(hE,{className:"h-6 w-6"}),"Data Management"]}),y.jsx(Ps,{children:"View and manage your compliance data"})]}),y.jsxs(Ce,{onClick:P,className:"bg-gradient-to-r from-cyan-400 to-blue-500",children:[y.jsx(fR,{className:"h-4 w-4 mr-2"}),"Add New"]})]})}),y.jsxs(Ne,{children:[y.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[y.jsxs("button",{onClick:()=>B("companies"),className:`px-6 py-3 font-medium transition-colors ${U==="companies"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:["Companies (",_.length,")"]}),y.jsxs("button",{onClick:()=>B("obligations"),className:`px-6 py-3 font-medium transition-colors ${U==="obligations"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:["Obligations (",S.length,")"]}),y.jsx("button",{onClick:()=>B("ai-crm"),className:`px-6 py-3 font-medium transition-colors ${U==="ai-crm"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:"AI CRM 🤖"}),y.jsx("button",{onClick:()=>B("marketing"),className:`px-6 py-3 font-medium transition-colors ${U==="marketing"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:"Marketing 📧"})]}),y.jsx("div",{className:"space-y-4",children:U==="ai-crm"?y.jsx("div",{className:"space-y-6",children:y.jsxs("div",{className:"p-6 bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-950 dark:to-blue-950 rounded-lg border-2 border-cyan-200 dark:border-cyan-800",children:[y.jsx("h3",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:"🤖 AI CRM Module"}),y.jsx("p",{className:"text-muted-foreground mb-6",children:"Intelligent customer relationship management powered by AI. Automatically score leads, predict churn, and recommend next best actions."}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"AI Lead Scoring"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically score and prioritize leads based on engagement, company data, and compliance history."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable AI Scoring"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Churn Prediction"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Predict which clients are at risk of leaving and receive proactive retention recommendations."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable Churn Detection"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Next Best Action"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI-powered recommendations for the best next step with each client based on their compliance status."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable NBA Engine"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Smart Segmentation"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically segment clients by risk level, industry, compliance score, and engagement."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Configure Segments"})]})]})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg border",children:[y.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),y.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI CRM features require a FineGuard Premium license.",y.jsx("a",{href:"/pricing",className:"text-cyan-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})}):U==="marketing"?y.jsx("div",{className:"space-y-6",children:y.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 rounded-lg border-2 border-purple-200 dark:border-purple-800",children:[y.jsx("h3",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:"📧 Marketing Admin Module"}),y.jsx("p",{className:"text-muted-foreground mb-6",children:"Automated marketing campaigns, email sequences, and client communications powered by AI copywriting."}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Email Campaigns"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create and send automated email campaigns to clients based on compliance deadlines and risk levels."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Campaign"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"AI Copywriting"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate professional email content automatically using AI, tailored to each client's situation."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Enable AI Writer"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"SMS & WhatsApp"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send urgent compliance alerts via SMS and WhatsApp for critical deadlines."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Configure Messaging"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Drip Sequences"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set up automated email sequences for onboarding, reminders, and follow-ups."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Sequence"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Analytics Dashboard"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track email open rates, click-through rates, and campaign performance."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"View Analytics"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Template Library"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Access pre-built email templates for common compliance scenarios."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Browse Templates"})]})]})]}),y.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg border",children:[y.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),y.jsxs("p",{className:"text-sm text-muted-foreground",children:["Marketing features require a FineGuard Premium license.",y.jsx("a",{href:"/pricing",className:"text-purple-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})}):U==="companies"?_.length>0?_.map(M=>y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-semibold text-lg",children:M.name}),y.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",M.companyNumber]}),y.jsxs("div",{className:"flex gap-2 mt-2",children:[y.jsx(Cn,{variant:M.riskLevel==="critical"?"destructive":"default",children:M.riskLevel}),y.jsxs(Cn,{variant:"outline",children:[M.complianceScore,"% Compliance"]})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>Le(M),children:y.jsx(H0,{className:"h-4 w-4"})}),y.jsx(Ce,{size:"sm",variant:"destructive",onClick:()=>Ye(M.id),children:y.jsx(G0,{className:"h-4 w-4"})})]})]},M.id)):y.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No companies found"}):S.length>0?S.map(M=>y.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-semibold text-lg",children:M.title}),y.jsx("p",{className:"text-sm text-muted-foreground",children:M.companyName}),y.jsxs("div",{className:"flex gap-2 mt-2",children:[y.jsx(Cn,{variant:M.status==="overdue"?"destructive":"default",children:M.status}),y.jsxs(Cn,{variant:"outline",children:["Due: ",M.dueDate]}),M.penalty>0&&y.jsxs(Cn,{variant:"destructive",children:["£",M.penalty," penalty"]})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx(Ce,{size:"sm",variant:"outline",onClick:()=>Le(M),children:y.jsx(H0,{className:"h-4 w-4"})}),y.jsx(Ce,{size:"sm",variant:"destructive",onClick:()=>Ye(M.id),children:y.jsx(G0,{className:"h-4 w-4"})})]})]},M.id)):y.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No obligations found"})})]})]}),le&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>ce(null),children:y.jsxs(Ie,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:M=>M.stopPropagation(),children:[y.jsx(Pe,{children:y.jsxs(Me,{children:[le==="new"?"Add New":"Edit"," ",U==="companies"?"Company":"Obligation"]})}),y.jsxs(Ne,{className:"space-y-4",children:[U==="companies"?y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Name"}),y.jsx("input",{type:"text",value:ae.name||"",onChange:M=>I({...ae,name:M.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Number"}),y.jsx("input",{type:"text",value:ae.companyNumber||"",onChange:M=>I({...ae,companyNumber:M.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),y.jsx("input",{type:"text",value:ae.address||"",onChange:M=>I({...ae,address:M.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Risk Level"}),y.jsxs("select",{value:ae.riskLevel||"low",onChange:M=>I({...ae,riskLevel:M.target.value}),className:"w-full p-2 border rounded-lg bg-background",children:[y.jsx("option",{value:"low",children:"Low"}),y.jsx("option",{value:"medium",children:"Medium"}),y.jsx("option",{value:"high",children:"High"}),y.jsx("option",{value:"critical",children:"Critical"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Compliance Score"}),y.jsx("input",{type:"number",value:ae.complianceScore||100,onChange:M=>I({...ae,complianceScore:parseInt(M.target.value)}),className:"w-full p-2 border rounded-lg bg-background",min:"0",max:"100"})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),y.jsx("input",{type:"text",value:ae.title||"",onChange:M=>I({...ae,title:M.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),y.jsx("textarea",{value:ae.description||"",onChange:M=>I({...ae,description:M.target.value}),className:"w-full p-2 border rounded-lg bg-background",rows:3})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date"}),y.jsx("input",{type:"date",value:ae.dueDate||"",onChange:M=>I({...ae,dueDate:M.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),y.jsxs("select",{value:ae.status||"pending",onChange:M=>I({...ae,status:M.target.value}),className:"w-full p-2 border rounded-lg bg-background",children:[y.jsx("option",{value:"pending",children:"Pending"}),y.jsx("option",{value:"overdue",children:"Overdue"}),y.jsx("option",{value:"completed",children:"Completed"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Penalty (£)"}),y.jsx("input",{type:"number",value:ae.penalty||0,onChange:M=>I({...ae,penalty:parseInt(M.target.value)}),className:"w-full p-2 border rounded-lg bg-background",min:"0"})]})]}),y.jsxs("div",{className:"flex gap-2 pt-4",children:[y.jsxs(Ce,{onClick:C,className:"flex-1 bg-gradient-to-r from-cyan-400 to-blue-500",children:[u?y.jsx($0,{className:"h-4 w-4 mr-2 animate-spin"}):y.jsx(ba,{className:"h-4 w-4 mr-2"}),"Save"]}),y.jsx(Ce,{onClick:()=>ce(null),variant:"outline",className:"flex-1",children:"Cancel"})]})]})]})}),y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsx(Me,{className:"flex items-center gap-2",children:"🤖 AI CRM Module"}),y.jsx(Ps,{children:"Intelligent customer relationship management powered by AI"})]}),y.jsxs(Ne,{children:[y.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"AI Lead Scoring"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically score and prioritize leads based on engagement, company data, and compliance history."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable AI Scoring"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Churn Prediction"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Predict which clients are at risk of leaving and receive proactive retention recommendations."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable Churn Detection"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Next Best Action"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI-powered recommendations for the best next step with each client based on their compliance status."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable NBA Engine"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Smart Segmentation"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically segment clients by risk level, industry, compliance score, and engagement."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Configure Segments"})]})]})]}),y.jsxs("div",{className:"mt-6 bg-muted p-4 rounded-lg border",children:[y.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),y.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI CRM features require a FineGuard Premium license.",y.jsx("a",{href:"/pricing",className:"text-cyan-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})]}),y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsx(Me,{className:"flex items-center gap-2",children:"📧 Marketing Admin Module"}),y.jsx(Ps,{children:"Automated marketing campaigns and client communications"})]}),y.jsxs(Ne,{children:[y.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Email Campaigns"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create and send automated email campaigns to clients based on compliance deadlines and risk levels."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Campaign"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"AI Copywriting"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate professional email content automatically using AI, tailored to each client's situation."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Enable AI Writer"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"SMS & WhatsApp"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send urgent compliance alerts via SMS and WhatsApp for critical deadlines."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Configure Messaging"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Drip Sequences"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set up automated email sequences for onboarding, reminders, and follow-ups."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Sequence"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Analytics Dashboard"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track email open rates, click-through rates, and campaign performance."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"View Analytics"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{className:"text-lg",children:"Template Library"})}),y.jsxs(Ne,{children:[y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Access pre-built email templates for common compliance scenarios."}),y.jsx(Ce,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Browse Templates"})]})]})]}),y.jsxs("div",{className:"mt-6 bg-muted p-4 rounded-lg border",children:[y.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),y.jsxs("p",{className:"text-sm text-muted-foreground",children:["Marketing features require a FineGuard Premium license.",y.jsx("a",{href:"/pricing",className:"text-purple-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})]})]})},Tc="2024-10-11",Sg="https://api.company-information.service.gov.uk";function oP(){const[r,e]=we.useState(()=>sessionStorage.getItem("ch_api_key")||""),[t,s]=we.useState(!1),[a,l]=we.useState("Idle"),[u,f]=we.useState([]),[m,p]=we.useState({current:0,total:0}),_=we.useRef(!1),[E,S]=we.useState([]),[k,U]=we.useState(!1),[B,L]=we.useState(null),re=R=>{f(D=>[`[${new Date().toLocaleTimeString()}] ${R}`,...D.slice(0,199)])},te=R=>{e(R),sessionStorage.setItem("ch_api_key",R)},Y=async(R,D=0)=>{const j=await fetch(`${Sg}/search/companies?incorporated_from=${R}&incorporated_to=${R}&start_index=${D}`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});if(!j.ok)throw new Error(`API error: ${j.status} ${j.statusText}`);return await j.json()},le=async R=>{const D=await fetch(`${Sg}/company/${R}`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});if(!D.ok)throw new Error(`Company profile error: ${D.status}`);return await D.json()},ce=async R=>{try{const D=await fetch(`${Sg}/company/${R}/registered-office-address`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});return D.ok?await D.json():null}catch{return null}},ae=async R=>{var D,j;try{const[P,C]=await Promise.all([le(R.company_number),ce(R.company_number)]),Ye=C?[C.address_line_1,C.address_line_2,C.locality,C.region,C.postal_code].filter(Boolean).join(", "):"Address not available";return{company_name:R.title,company_number:R.company_number,company_status:R.company_status,company_type:P==null?void 0:P.type,incorporation_date:R.date_of_creation,registered_address:Ye,accounts_due_date:((D=P==null?void 0:P.accounts)==null?void 0:D.next_due)||"Not available",cs_due_date:((j=P==null?void 0:P.confirmation_statement)==null?void 0:j.next_due)||"Not available",sic_codes:(P==null?void 0:P.sic_codes)||[],jurisdiction:(P==null?void 0:P.jurisdiction)||"england-wales",last_updated:new Date().toISOString()}}catch(P){return re(`Error processing company ${R.company_number}: ${P.message}`),null}},I=async()=>{if(!r){re("Companies House API Key is required to start.");return}s(!0),_.current=!1,f([]),p({current:0,total:0}),S([]);try{re(`Starting real data collection for companies incorporated on: ${Tc}`),l("Searching Companies House...");let R=0;const D=100;let j=0,P=0;const C=[];if(j=(await Y(Tc,0)).total_results,p({current:0,total:j}),re(`Found ${j} companies incorporated on ${Tc}`),j===0){re("No companies found for the specified date."),s(!1),l("Idle");return}for(;R<j&&!_.current;){l(`Fetching companies ${R+1}-${Math.min(R+D,j)}...`);const M=await Y(Tc,R);C.push(...M.items),R+=D,await new Promise(ie=>setTimeout(ie,200))}if(_.current){re("Agent paused by user."),l("Paused");return}l("Enriching company data...");const Le=[];for(const M of C){if(_.current){re("Agent paused by user."),l("Paused");return}try{const ie=await ae(M);ie&&(Le.push(ie),S([...Le])),P++,p({current:P,total:j}),P%10===0&&re(`Processed ${P}/${j} companies`),await new Promise(ne=>setTimeout(ne,100))}catch(ie){re(`Failed to process company ${M.company_number}: ${ie.message}`);continue}}re(`Successfully processed ${P} real companies from Companies House`),l("Finished")}catch(R){re(`Agent failed: ${R.message}`),l("Error")}finally{s(!1)}},x=()=>{_.current=!0};return y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:y.jsxs("div",{className:"container mx-auto px-4 py-8",children:[y.jsxs("div",{className:"mb-8",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx(zh,{className:"w-10 h-10 text-blue-600"}),y.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"Live Companies House Data"})]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fetch and analyze real-time company data directly from Companies House API"})]}),y.jsxs(Ie,{className:"mb-8",children:[y.jsxs(Pe,{children:[y.jsxs(Me,{className:"flex items-center gap-2",children:[y.jsx(Xh,{className:"w-6 h-6 text-blue-600"}),"Real Companies House Data Collector"]}),y.jsxs(Ps,{children:["This agent will fetch real company data from the Companies House API for companies incorporated on ",Tc,"."]})]}),y.jsxs(Ne,{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2 mb-2",children:[y.jsx(sR,{className:"w-4 h-4"}),"Companies House API Key"]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:"password",value:r,onChange:R=>te(R.target.value),placeholder:"Enter your Companies House API key",className:"w-full p-3 border rounded-lg bg-background pr-10"}),r.length>0&&y.jsx(z1,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Get your API key from: ",y.jsx("a",{href:"https://developer.company-information.service.gov.uk/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Companies House Developer Portal"})]})]}),y.jsx("div",{className:"flex items-center gap-4",children:t?y.jsxs(Ce,{onClick:x,className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",children:[y.jsx($1,{className:"w-5 h-5 mr-2"})," Pause Collection"]}):y.jsxs(Ce,{onClick:I,disabled:!r,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",children:[y.jsx(F1,{className:"w-5 h-5 mr-2"})," Start Live Data Collection"]})}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold mb-2",children:[y.jsxs("span",{children:["Status: ",y.jsx(Cn,{variant:"outline",children:a})]}),y.jsxs("span",{className:"text-gray-500",children:[m.current," / ",m.total]})]}),y.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:y.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-3 rounded-full transition-all duration-500",style:{width:m.total>0?`${m.current/m.total*100}%`:"0%"}})})]}),y.jsx("div",{className:"bg-gray-900 text-green-400 font-mono text-xs rounded-lg p-4 h-48 overflow-y-auto",children:u.length>0?u.map((R,D)=>y.jsx("p",{className:"whitespace-pre-wrap",children:R},D)):y.jsx("p",{className:"text-gray-500",children:"Agent log will appear here..."})})]})]}),y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsxs(Me,{className:"flex items-center gap-2",children:[y.jsx(hE,{className:"w-6 h-6 text-blue-600"}),"Live Company Database"]}),y.jsx(Ps,{children:"Real-time company data from Companies House"})]}),y.jsx(Ne,{children:k?y.jsxs("div",{className:"text-center p-8",children:[y.jsx(iR,{className:"w-8 h-8 animate-spin mx-auto text-blue-500"}),y.jsx("p",{className:"text-gray-500 mt-2",children:"Loading company data..."})]}):B?y.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-center",children:B}):E.length===0?y.jsxs("div",{className:"text-center text-gray-500 p-8",children:[y.jsx(Xh,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),y.jsx("p",{children:"No data yet. Start the agent to collect real company data."})]}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full text-sm",children:[y.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-xs uppercase",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 text-left",children:"Company Name & Number"}),y.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),y.jsx("th",{className:"px-4 py-3 text-left",children:"Registered Address"}),y.jsx("th",{className:"px-4 py-3 text-left",children:"Accounts Due"}),y.jsx("th",{className:"px-4 py-3 text-left",children:"CS Due"})]})}),y.jsx("tbody",{children:E.map((R,D)=>y.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[y.jsxs("td",{className:"px-4 py-3",children:[y.jsx("div",{className:"font-medium",children:R.company_name}),y.jsx("div",{className:"font-mono text-xs text-gray-500",children:R.company_number})]}),y.jsx("td",{className:"px-4 py-3",children:y.jsx(Cn,{variant:R.company_status==="active"?"default":R.company_status==="dissolved"?"destructive":"secondary",children:R.company_status})}),y.jsx("td",{className:"px-4 py-3 text-xs max-w-xs truncate",title:R.registered_address,children:R.registered_address}),y.jsx("td",{className:"px-4 py-3 font-mono text-red-600 dark:text-red-400 font-bold text-xs",children:R.accounts_due_date}),y.jsx("td",{className:"px-4 py-3 font-mono text-blue-600 dark:text-blue-400 font-bold text-xs",children:R.cs_due_date})]},D))})]})})})]})]})})}const lP={companies:[{id:1,name:"Tech Innovations Ltd",companyNumber:"12345678",address:"123 Business Park, London, SW1A 1AA",riskLevel:"high",complianceScore:65,overdueCount:2,obligationCount:8},{id:2,name:"Global Solutions Ltd",companyNumber:"87654321",address:"456 Enterprise Road, Manchester, M1 1AB",riskLevel:"medium",complianceScore:78,overdueCount:0,obligationCount:6},{id:3,name:"Startup Ventures Ltd",companyNumber:"11223344",address:"789 Innovation Street, Bristol, BS1 1CD",riskLevel:"critical",complianceScore:45,overdueCount:3,obligationCount:5}],obligations:[{id:1,companyId:1,companyName:"Tech Innovations Ltd",title:"Annual Accounts Filing",description:"Submit annual financial statements to Companies House",dueDate:"2024-03-15",status:"overdue",penalty:1500,daysOverdue:45,phoneNumber:"+447912345678"},{id:2,companyId:1,companyName:"Tech Innovations Ltd",title:"Confirmation Statement",description:"Annual confirmation of company details",dueDate:"2024-04-20",status:"pending",penalty:0,daysOverdue:0,phoneNumber:"+447912345678"},{id:3,companyId:2,companyName:"Global Solutions Ltd",title:"VAT Return",description:"Quarterly VAT submission to HMRC",dueDate:"2024-05-10",status:"pending",penalty:0,daysOverdue:0,phoneNumber:"+447987654321"},{id:4,companyId:3,companyName:"Startup Ventures Ltd",title:"Corporation Tax",description:"Corporation tax payment and filing",dueDate:"2024-02-28",status:"overdue",penalty:2500,daysOverdue:62,phoneNumber:"+447445566778"},{id:5,companyId:3,companyName:"Startup Ventures Ltd",title:"Annual Accounts Filing",description:"Submit annual financial statements",dueDate:"2024-01-31",status:"overdue",penalty:1800,daysOverdue:90,phoneNumber:"+447445566778"}]};function cP(){const[r,e]=we.useState(!1),[t,s]=we.useState("home"),[a,l]=we.useState(!1),[u,f]=we.useState(lP),[m,p]=we.useState(null),[_,E]=we.useState(null),[S,k]=we.useState(!1),[U,B]=we.useState({title:"",content:"",loading:!1});we.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const L=F=>{const N={day:"numeric",month:"short",year:"numeric"};return new Date(F).toLocaleDateString("en-GB",N)},re=F=>{const N=new Date,he=new Date(F)-N;return Math.ceil(he/(1e3*60*60*24))},te=F=>{switch(F){case"low":return"bg-green-500";case"medium":return"bg-blue-500";case"high":return"bg-orange-500";case"critical":return"bg-red-600";default:return"bg-gray-500"}},Y=F=>{switch(F){case"completed":return"bg-green-500";case"overdue":return"bg-red-600";case"pending":return"bg-blue-500";default:return"bg-gray-500"}},le={overdueCount:u.obligations.filter(F=>F.status==="overdue").length,totalCompanies:u.companies.length,avgScore:(u.companies.reduce((F,N)=>F+N.complianceScore,0)/u.companies.length).toFixed(1),penaltyRisk:u.obligations.filter(F=>F.status==="overdue").reduce((F,N)=>F+N.penalty,0)},ce=F=>{f(N=>({...N,obligations:N.obligations.map(X=>X.id===F?{...X,status:"completed",penalty:0}:X),companies:N.companies.map(X=>{const he=N.obligations.find(oe=>oe.id===F);return X.id===(he==null?void 0:he.companyId)?{...X,complianceScore:Math.min(100,X.complianceScore+5)}:X})})),E(null)},ae=F=>{k(!0),B({title:`AI Mitigation Plan for ${F.name}`,content:"",loading:!0}),setTimeout(()=>{B({title:`AI Mitigation Plan for ${F.name}`,loading:!1,content:`
**Current Risk Level:** ${F.riskLevel.toUpperCase()}
**Generated:** ${new Date().toLocaleDateString()}

### Immediate Actions Required:
1. **Review Overdue Filings** - Address all overdue obligations within 7 days
2. **Engage Compliance Officer** - Assign dedicated resource for monitoring
3. **Implement Early Warning System** - Set up 30-day advance reminders

### Strategic Recommendations:
- Conduct comprehensive compliance audit
- Implement automated tracking system
- Schedule quarterly compliance reviews
- Establish escalation procedures for high-risk items

### Priority Timeline:
- **Week 1:** Clear all critical overdue items
- **Month 1:** Implement monitoring system
- **Quarter 1:** Achieve 85%+ compliance score
        `})},2e3)},I=F=>{k(!0),B({title:`AI Compliance Checklist: ${F.title}`,content:"",loading:!0}),setTimeout(()=>{B({title:`AI Compliance Checklist: ${F.title}`,loading:!1,content:`
### Pre-Submission Requirements:
- Verify company details are up to date
- Gather all required financial documents
- Review previous year's filing for consistency
- Confirm director approvals obtained

### Submission Steps:
1. **Document Preparation** - Ensure all statements are signed
2. **Online Portal Login** - Use Companies House WebFiling service
3. **Data Entry** - Input financial figures accurately
4. **Document Upload** - Attach signed PDF copies
5. **Final Review** - Verify all information before submission
6. **Confirmation** - Save submission reference number

### Post-Submission Actions:
- File confirmation email in company records
- Update internal compliance tracking system
- Schedule reminder for next filing period
- Notify relevant stakeholders of completion
        `})},1500)},x=[...u.obligations].sort((F,N)=>F.status==="overdue"&&N.status!=="overdue"?-1:N.status==="overdue"&&F.status!=="overdue"?1:new Date(F.dueDate)-new Date(N.dueDate)),R=[{id:"home",label:"Home",icon:eR},{id:"about",label:"About",icon:q0},{id:"how-it-works",label:"How It Works",icon:B0},{id:"features",label:"Features",icon:F0},{id:"pricing",label:"Pricing",icon:X1},{id:"testimonials",label:"Testimonials",icon:eg},{id:"contact",label:"Contact",icon:tg},{id:"dashboard",label:"Dashboard",icon:Ec},{id:"admin",label:"Admin",icon:B0},{id:"live-data",label:"Live Data",icon:zh}],D=()=>{switch(t){case"home":return y.jsx(j,{});case"about":return y.jsx(P,{});case"how-it-works":return y.jsx(C,{});case"features":return y.jsx(Ye,{});case"pricing":return y.jsx(Le,{});case"testimonials":return y.jsx(M,{});case"contact":return y.jsx(ie,{});case"dashboard":return y.jsx(ne,{});case"admin":return y.jsx(aP,{});case"live-data":return y.jsx(oP,{});default:return y.jsx(j,{})}},j=()=>y.jsxs("div",{className:"space-y-16",children:[y.jsxs("section",{className:"relative min-h-[600px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:K0,alt:"FineGuard Workshop",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/40 to-purple-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4 max-w-4xl",children:[y.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 animate-fade-in",children:"Welcome to FineGuard"}),y.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Where paperwork has personality and compliance is effortless"}),y.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[y.jsx(Ce,{size:"lg",className:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 rounded-full px-10 py-6 text-lg font-semibold hover:shadow-2xl hover:shadow-cyan-400/40 transition-all hover:scale-105",onClick:()=>s("dashboard"),children:"Get Started"}),y.jsx(Ce,{size:"lg",className:"border-2 border-cyan-400/50 bg-white/10 backdrop-blur-md text-white hover:bg-white/20 rounded-full px-10 py-6 text-lg font-semibold transition-all hover:scale-105",onClick:()=>s("how-it-works"),children:"Learn More"})]})]})]}),y.jsxs("section",{className:"container mx-auto px-4",children:[y.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Why Choose FineGuard?"}),y.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[y.jsxs(Ie,{className:"hover:shadow-xl transition-shadow",children:[y.jsxs(Pe,{children:[y.jsx(Ec,{className:"h-12 w-12 text-blue-600 mb-4"}),y.jsx(Me,{children:"AI-Powered Protection"})]}),y.jsx(Ne,{children:y.jsx("p",{className:"text-muted-foreground",children:"Ultra, your AI guardian, monitors deadlines 24/7 so you never miss a filing."})})]}),y.jsxs(Ie,{className:"hover:shadow-xl transition-shadow",children:[y.jsxs(Pe,{children:[y.jsx(Jm,{className:"h-12 w-12 text-orange-600 mb-4"}),y.jsx(Me,{children:"Smart Reminders"})]}),y.jsx(Ne,{children:y.jsx("p",{className:"text-muted-foreground",children:"Get timely notifications before deadlines with actionable compliance checklists."})})]}),y.jsxs(Ie,{className:"hover:shadow-xl transition-shadow",children:[y.jsxs(Pe,{children:[y.jsx(ng,{className:"h-12 w-12 text-green-600 mb-4"}),y.jsx(Me,{children:"Peace of Mind"})]}),y.jsx(Ne,{children:y.jsx("p",{className:"text-muted-foreground",children:"Focus on growing your business while we handle compliance automatically."})})]})]})]}),y.jsx("section",{className:"container mx-auto px-4",children:y.jsxs("div",{className:"max-w-4xl mx-auto",children:[y.jsx("h2",{className:"text-4xl font-bold text-center mb-4",children:"See FineGuard in Action"}),y.jsx("p",{className:"text-center text-muted-foreground mb-8 text-lg",children:"Watch how Ultra protects your business from compliance penalties"}),y.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl border-4 border-cyan-400/30",children:y.jsxs("video",{controls:!0,className:"w-full",poster:K0,children:[y.jsx("source",{src:"/demo-video.mov",type:"video/quicktime"}),y.jsx("source",{src:"/demo-video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})}),y.jsx("section",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16 rounded-2xl mx-4",children:y.jsxs("div",{className:"container mx-auto px-4 text-center",children:[y.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to protect your business?"}),y.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of UK businesses using FineGuard"}),y.jsx(Ce,{size:"lg",className:"bg-white/90 backdrop-blur-md text-blue-900 hover:bg-white rounded-full px-10 py-6 text-lg font-semibold hover:shadow-2xl hover:scale-105 transition-all",onClick:()=>s("pricing"),children:"View Pricing Plans"})]})})]}),P=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:AR,alt:"Ultra Guardian",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-purple-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"The Story of Protection"}),y.jsx("p",{className:"text-xl opacity-90",children:"Giving peace of mind to UK founders"})]})]}),y.jsx("section",{className:"container mx-auto px-4 max-w-4xl",children:y.jsx(Ie,{children:y.jsxs(Ne,{className:"p-8 space-y-6",children:[y.jsx("h2",{className:"text-3xl font-bold",children:"Our Mission"}),y.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"FineGuard was born from a simple truth: small business owners shouldn't lose sleep over compliance deadlines. Every day, brilliant entrepreneurs face the burden of paperwork, filings, and regulations that distract from what they do best—building amazing businesses."}),y.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"That's where Ultra comes in. Our AI guardian watches over your compliance obligations 24/7, ensuring you never miss a deadline, never face unnecessary penalties, and always stay protected. From Companies House filings to HMRC submissions, we've got you covered."}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-8",children:[y.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:"10,000+"}),y.jsx("p",{className:"text-muted-foreground",children:"Businesses Protected"})]}),y.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[y.jsx("h3",{className:"text-xl font-bold mb-2",children:"£2.5M+"}),y.jsx("p",{className:"text-muted-foreground",children:"Penalties Prevented"})]})]})]})})})]}),C=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:xR,alt:"Engine Room",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-teal-900/30 to-blue-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Inside the System"}),y.jsx("p",{className:"text-xl opacity-90",children:"How FineGuard keeps you compliant"})]})]}),y.jsx("section",{className:"container mx-auto px-4 max-w-5xl",children:y.jsx("div",{className:"space-y-8",children:[{step:1,title:"Connect Your Business",description:"Simply add your company number and we'll sync with Companies House and HMRC to identify all your obligations."},{step:2,title:"Ultra Monitors Everything",description:"Our AI guardian tracks every deadline, regulation change, and filing requirement specific to your business."},{step:3,title:"Smart Reminders",description:"Get timely notifications via email, SMS, and dashboard alerts with AI-generated compliance checklists."},{step:4,title:"Stay Protected",description:"Never miss a deadline again. Focus on growth while we handle the compliance burden automatically."}].map(F=>y.jsx(Ie,{className:"hover:shadow-lg transition-shadow",children:y.jsxs(Ne,{className:"p-8 flex gap-6 items-start",children:[y.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center text-2xl font-bold",children:F.step}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-bold mb-2",children:F.title}),y.jsx("p",{className:"text-lg text-muted-foreground",children:F.description})]})]})},F.step))})})]}),Ye=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:RR,alt:"Features",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-indigo-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Never Miss a Deadline"}),y.jsx("p",{className:"text-xl opacity-90",children:"Powerful features for complete peace of mind"})]})]}),y.jsx("section",{className:"container mx-auto px-4",children:y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:Ec,title:"AI Guardian",desc:"Ultra monitors your obligations 24/7"},{icon:Jm,title:"Smart Alerts",desc:"Multi-channel notifications (email, SMS, dashboard)"},{icon:zh,title:"Deadline Tracking",desc:"Never miss Companies House or HMRC filings"},{icon:Ih,title:"AI Checklists",desc:"Step-by-step compliance guidance"},{icon:ng,title:"Risk Scoring",desc:"Real-time compliance health monitoring"},{icon:ba,title:"Auto-Sync",desc:"Automatic updates from official sources"}].map((F,N)=>y.jsxs(Ie,{className:"hover:shadow-xl transition-all hover:-translate-y-1",children:[y.jsxs(Pe,{children:[y.jsx(F.icon,{className:"h-12 w-12 text-blue-600 mb-4"}),y.jsx(Me,{children:F.title})]}),y.jsx(Ne,{children:y.jsx("p",{className:"text-muted-foreground",children:F.desc})})]},N))})})]}),Le=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:CR,alt:"Pricing",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/30 to-blue-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Protection for Every Dream"}),y.jsx("p",{className:"text-xl opacity-90",children:"Transparent pricing, no hidden fees"})]})]}),y.jsx("section",{className:"container mx-auto px-4",children:y.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{name:"Starter",price:"£1",period:"/month",features:["1 company","Basic deadline tracking","Email notifications","Compliance dashboard","Monthly reports"]},{name:"Pro",price:"£15",period:"/month",popular:!0,features:["Up to 5 companies","AI-powered insights","Email alerts","Priority support","AI compliance checklists","Risk scoring"]},{name:"Ultimate",price:"£99",period:"/month",features:["Unlimited companies","Dedicated account manager","White-label option","API access","Custom integrations","24/7 phone support"]}].map(F=>y.jsxs(Ie,{className:`hover:shadow-2xl transition-all ${F.popular?"border-blue-600 border-2 scale-105":""}`,children:[F.popular&&y.jsx("div",{className:"bg-blue-600 text-white text-center py-2 rounded-t-lg font-semibold",children:"Most Popular"}),y.jsxs(Pe,{className:"text-center",children:[y.jsx(Me,{className:"text-2xl",children:F.name}),y.jsxs("div",{className:"mt-4",children:[y.jsx("span",{className:"text-5xl font-bold",children:F.price}),y.jsx("span",{className:"text-muted-foreground",children:F.period})]})]}),y.jsxs(Ne,{children:[y.jsx("ul",{className:"space-y-3",children:F.features.map((N,X)=>y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx(ba,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),y.jsx("span",{children:N})]},X))}),y.jsx(Ce,{className:"w-full mt-6",variant:F.popular?"default":"outline",children:"Get Started"})]})]},F.name))})})]}),M=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:IR,alt:"Testimonials",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-900/30 to-blue-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Voices of Relief"}),y.jsx("p",{className:"text-xl opacity-90",children:"Trusted by UK businesses nationwide"})]})]}),y.jsx("section",{className:"container mx-auto px-4",children:y.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[{name:"Sarah Mitchell",role:"Bakery Owner, London",quote:"FineGuard saved me from a £1,500 penalty. Ultra reminded me about my accounts filing just in time!"},{name:"James Chen",role:"Tech Startup Founder",quote:"As a first-time founder, compliance was overwhelming. FineGuard made it effortless."},{name:"Emma Thompson",role:"Design Studio Director",quote:"The AI checklists are brilliant. I know exactly what to do for each filing."},{name:"David Patel",role:"Coffee Shop Chain Owner",quote:"Managing 3 companies was a nightmare. Now Ultra handles everything automatically."}].map((F,N)=>y.jsx(Ie,{className:"hover:shadow-xl transition-shadow",children:y.jsxs(Ne,{className:"p-8",children:[y.jsx("div",{className:"flex items-center gap-2 mb-4 text-yellow-500",children:[...Array(5)].map((X,he)=>y.jsx(F0,{className:"h-5 w-5 fill-current"},he))}),y.jsxs("p",{className:"text-lg mb-4 italic",children:['"',F.quote,'"']}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:F.name}),y.jsx("p",{className:"text-sm text-muted-foreground",children:F.role})]})]})},N))})})]}),ie=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[y.jsx("img",{src:NR,alt:"Contact",className:"absolute inset-0 w-full h-full object-cover"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-indigo-900/30"}),y.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Reach Out Anytime"}),y.jsx("p",{className:"text-xl opacity-90",children:"We're here to help"})]})]}),y.jsx("section",{className:"container mx-auto px-4 max-w-4xl",children:y.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsx(Me,{children:"Get in Touch"}),y.jsx(Ps,{children:"Fill out the form and we'll respond within 24 hours"})]}),y.jsxs(Ne,{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),y.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",placeholder:"Your name"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),y.jsx("input",{type:"email",className:"w-full p-2 border rounded-lg",placeholder:"your@email.com"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),y.jsx("textarea",{className:"w-full p-2 border rounded-lg",rows:4,placeholder:"How can we help?"})]}),y.jsx(Ce,{className:"w-full",children:"Send Message"})]})]}),y.jsxs(Ie,{children:[y.jsx(Pe,{children:y.jsx(Me,{children:"Contact Information"})}),y.jsxs(Ne,{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(tg,{className:"h-5 w-5 text-blue-600 mt-1"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Phone"}),y.jsx("p",{className:"text-muted-foreground",children:"+44 20 1234 5678"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(eg,{className:"h-5 w-5 text-blue-600 mt-1"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Email"}),y.jsx("p",{className:"text-muted-foreground",children:"hello@fineguard.co.uk"})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(Zm,{className:"h-5 w-5 text-blue-600 mt-1"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Address"}),y.jsxs("p",{className:"text-muted-foreground",children:["123 Compliance Street",y.jsx("br",{}),"London, SW1A 1AA"]})]})]})]})]})]})})]}),ne=()=>y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[y.jsxs(Ie,{className:"hover:shadow-lg transition-shadow",children:[y.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[y.jsx(Me,{className:"text-sm font-medium",children:"Overdue Items"}),y.jsx(dE,{className:"h-4 w-4 text-red-600"})]}),y.jsxs(Ne,{children:[y.jsx("div",{className:"text-3xl font-bold text-red-600",children:le.overdueCount}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires immediate attention"})]})]}),y.jsxs(Ie,{className:"hover:shadow-lg transition-shadow",children:[y.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[y.jsx(Me,{className:"text-sm font-medium",children:"Total Companies"}),y.jsx(Zm,{className:"h-4 w-4 text-blue-600"})]}),y.jsxs(Ne,{children:[y.jsx("div",{className:"text-3xl font-bold",children:le.totalCompanies}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active monitoring"})]})]}),y.jsxs(Ie,{className:"hover:shadow-lg transition-shadow",children:[y.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[y.jsx(Me,{className:"text-sm font-medium",children:"Avg Compliance"}),y.jsx(ng,{className:"h-4 w-4 text-green-600"})]}),y.jsxs(Ne,{children:[y.jsxs("div",{className:"text-3xl font-bold",children:[le.avgScore,"%"]}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overall health score"})]})]}),y.jsxs(Ie,{className:"hover:shadow-lg transition-shadow",children:[y.jsxs(Pe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[y.jsx(Me,{className:"text-sm font-medium",children:"Penalty Risk"}),y.jsx(Jm,{className:"h-4 w-4 text-orange-600"})]}),y.jsxs(Ne,{children:[y.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["£",le.penaltyRisk.toLocaleString()]}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Potential exposure"})]})]})]}),y.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsxs(Me,{className:"flex items-center gap-2",children:[y.jsx(Zm,{className:"h-5 w-5"}),"Companies"]}),y.jsx(Ps,{children:"Manage your registered companies"})]}),y.jsx(Ne,{className:"space-y-3",children:u.companies.map(F=>y.jsxs("div",{onClick:()=>p(F),className:"p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer bg-card",children:[y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[y.jsx("h3",{className:"font-semibold text-lg",children:F.name}),y.jsx(Cn,{className:`${te(F.riskLevel)} text-white`,children:F.riskLevel.toUpperCase()})]}),y.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[y.jsxs("div",{children:["#",F.companyNumber]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{children:["Compliance: ",F.complianceScore,"%"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("i",{className:"fas fa-tasks text-xs"}),F.obligationCount," obligations"]})]}),F.overdueCount>0&&y.jsxs(Cn,{variant:"destructive",className:"mt-2",children:[F.overdueCount," overdue"]})]})]},F.id))})]}),y.jsxs(Ie,{children:[y.jsxs(Pe,{children:[y.jsxs(Me,{className:"flex items-center gap-2",children:[y.jsx(zh,{className:"h-5 w-5"}),"Obligations"]}),y.jsx(Ps,{children:"Track compliance deadlines"})]}),y.jsx(Ne,{className:"space-y-3",children:x.map(F=>{const N=re(F.dueDate);return y.jsxs("div",{onClick:()=>E(F),className:`p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer ${F.status==="overdue"?"border-red-500 bg-red-50 dark:bg-red-950/20":F.status==="completed"?"border-green-500 bg-green-50 dark:bg-green-950/20":"bg-card"}`,children:[y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"font-semibold",children:F.title}),y.jsx("p",{className:"text-sm text-muted-foreground",children:F.companyName})]}),y.jsx(Cn,{className:`${Y(F.status)} text-white text-xs`,children:F.status==="overdue"?`${F.daysOverdue}d overdue`:F.status.toUpperCase()})]}),y.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("i",{className:"fas fa-calendar-alt text-xs"}),L(F.dueDate),F.status==="pending"&&` (in ${N} days)`]}),F.penalty>0&&F.status!=="completed"&&y.jsxs("span",{className:"font-semibold text-red-600",children:[y.jsx("i",{className:"fas fa-bell text-xs"})," £",F.penalty.toLocaleString()]})]})]},F.id)})})]})]})]});return y.jsxs("div",{className:"min-h-screen bg-background",children:[y.jsxs("header",{className:"sticky top-0 z-50 w-full",children:[y.jsx("div",{className:"mx-4 mt-4 rounded-full border border-cyan-400/30 bg-background/40 backdrop-blur-xl shadow-lg shadow-cyan-500/20",children:y.jsxs("div",{className:"container flex h-20 items-center justify-between px-6",children:[y.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>s("home"),children:[y.jsxs("div",{className:"relative",children:[y.jsx(Ec,{className:"h-10 w-10 text-cyan-400"}),y.jsx("div",{className:"absolute inset-0 blur-lg bg-cyan-400/30"})]}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"by UltraTech AI"})]})]}),y.jsx("nav",{className:"hidden md:flex items-center gap-3",children:R.map(F=>y.jsx("button",{onClick:()=>s(F.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${t===F.id?"bg-cyan-400/20 text-cyan-400 shadow-lg shadow-cyan-400/20 border border-cyan-400/30":"text-foreground/70 hover:text-foreground hover:bg-white/10"}`,children:F.label},F.id))}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs(Ce,{size:"sm",className:"hidden md:flex bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 rounded-full px-6 hover:shadow-lg hover:shadow-cyan-400/30 transition-all",onClick:()=>s("pricing"),children:[y.jsx(ba,{className:"h-4 w-4 mr-2"}),"Sign Up"]}),y.jsx(Ce,{variant:"ghost",size:"icon",onClick:()=>e(!r),className:"rounded-full hover:bg-white/10",children:r?y.jsx(vR,{className:"h-5 w-5"}):y.jsx(uR,{className:"h-5 w-5"})}),y.jsx(Ce,{variant:"ghost",size:"icon",className:"md:hidden rounded-full hover:bg-white/10",onClick:()=>l(!a),children:a?y.jsx(SR,{className:"h-5 w-5"}):y.jsx(oR,{className:"h-5 w-5"})})]})]})}),a&&y.jsx("div",{className:"md:hidden border-t bg-background",children:y.jsx("nav",{className:"container px-4 py-4 space-y-2",children:R.map(F=>y.jsxs("button",{onClick:()=>{s(F.id),l(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${t===F.id?"bg-blue-100 dark:bg-blue-950 text-blue-600":"hover:bg-muted"}`,children:[y.jsx(F.icon,{className:"h-4 w-4"}),y.jsx("span",{className:"text-sm font-medium",children:F.label})]},F.id))})})]}),y.jsx("main",{className:"container mx-auto p-4 md:p-6",children:D()}),m&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>p(null),children:y.jsxs(Ie,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[y.jsx(Pe,{children:y.jsxs(Me,{className:"flex items-center justify-between",children:[y.jsx("span",{children:m.name}),y.jsx(Ce,{variant:"ghost",size:"icon",onClick:()=>p(null),children:y.jsx("i",{className:"fas fa-times"})})]})}),y.jsxs(Ne,{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Company Number"}),y.jsx("p",{className:"font-semibold",children:m.companyNumber})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Risk Level"}),y.jsx(Cn,{className:`${te(m.riskLevel)} text-white`,children:m.riskLevel.toUpperCase()})]}),y.jsxs("div",{className:"col-span-2",children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Address"}),y.jsx("p",{children:m.address})]})]}),(m.riskLevel==="critical"||m.riskLevel==="high")&&y.jsxs(Ce,{className:"w-full",onClick:()=>ae(m),children:[y.jsx(Ih,{className:"mr-2 h-4 w-4"}),"AI Mitigation Plan"]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Obligations"}),y.jsx("div",{className:"space-y-2",children:u.obligations.filter(F=>F.companyId===m.id).map(F=>y.jsxs("div",{className:"p-3 border rounded-lg text-sm",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"font-medium",children:F.title}),y.jsx(Cn,{className:`${Y(F.status)} text-white text-xs`,children:F.status})]}),y.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:["Due: ",L(F.dueDate)]})]},F.id))})]})]})]})}),_&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>E(null),children:y.jsxs(Ie,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[y.jsxs(Pe,{children:[y.jsxs(Me,{className:"flex items-center justify-between",children:[y.jsx("span",{children:_.title}),y.jsx(Ce,{variant:"ghost",size:"icon",onClick:()=>E(null),children:y.jsx("i",{className:"fas fa-times"})})]}),y.jsx(Ps,{children:_.companyName})]}),y.jsxs(Ne,{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),y.jsx(Cn,{className:`${Y(_.status)} text-white mt-1`,children:_.status.toUpperCase()})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),y.jsx("p",{className:"font-semibold",children:L(_.dueDate)})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-muted-foreground",children:"Potential Penalty"}),y.jsxs("p",{className:`font-semibold ${_.penalty>0&&_.status!=="completed"?"text-red-600":"text-green-600"}`,children:["£",_.penalty.toLocaleString()]})]}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm text-muted-foreground",children:["Days ",_.status==="overdue"?"Overdue":"Until Due"]}),y.jsx("p",{className:"font-semibold",children:_.status==="overdue"?_.daysOverdue:re(_.dueDate)})]})]}),y.jsxs(Ce,{className:"w-full",onClick:()=>I(_),children:[y.jsx(Ih,{className:"mr-2 h-4 w-4"}),"AI Compliance Checklist"]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:_.description})]}),y.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[y.jsx(Ce,{variant:"outline",onClick:()=>E(null),className:"flex-1",children:"Close"}),_.status!=="completed"&&y.jsxs(Ce,{onClick:()=>ce(_.id),className:"flex-1 bg-green-600 hover:bg-green-700",children:[y.jsx(ba,{className:"mr-2 h-4 w-4"}),"Mark Complete"]})]})]})]})}),S&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>k(!1),children:y.jsxs(Ie,{className:"max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:F=>F.stopPropagation(),children:[y.jsx(Pe,{children:y.jsxs(Me,{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"flex items-center gap-2",children:[y.jsx(Ih,{className:"h-5 w-5 text-purple-600"}),U.title]}),y.jsx(Ce,{variant:"ghost",size:"icon",onClick:()=>k(!1),children:y.jsx("i",{className:"fas fa-times"})})]})}),y.jsx(Ne,{children:U.loading?y.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),y.jsx("p",{className:"text-muted-foreground",children:"Analyzing compliance data..."})]}):y.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:U.content.split(`
`).map((F,N)=>F.startsWith("###")?y.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2",children:F.replace("###","").trim()},N):F.startsWith("**")?y.jsx("p",{className:"font-semibold my-2",children:F.replace(/\*\*/g,"")},N):F.startsWith("-")?y.jsx("li",{className:"ml-4",children:F.replace("-","").trim()},N):F.match(/^\d+\./)?y.jsx("p",{className:"my-1",children:F},N):F.trim()?y.jsx("p",{className:"my-2",children:F},N):null)})})]})}),y.jsx("footer",{className:"mt-16 mb-4",children:y.jsx("div",{className:"mx-4 rounded-3xl border border-cyan-400/30 bg-background/40 backdrop-blur-xl shadow-lg shadow-cyan-500/20 p-8",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("div",{className:"relative",children:[y.jsx(Ec,{className:"h-12 w-12 text-cyan-400"}),y.jsx("div",{className:"absolute inset-0 blur-lg bg-cyan-400/30"})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"by UltraTech AI"})]})]}),y.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm",children:[y.jsx("button",{onClick:()=>s("home"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Home"}),y.jsx("button",{onClick:()=>s("about"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"About"}),y.jsx("button",{onClick:()=>s("pricing"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Pricing"}),y.jsx("button",{onClick:()=>s("contact"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Contact"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:y.jsx(eg,{className:"h-5 w-5"})}),y.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:y.jsx(tg,{className:"h-5 w-5"})}),y.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:y.jsx(q0,{className:"h-5 w-5"})})]})]}),y.jsx("div",{className:"mt-6 pt-6 border-t border-cyan-400/20 text-center",children:y.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2024 UltraTech AI. All rights reserved."})})]})})})]})}Lx.createRoot(document.getElementById("root")).render(y.jsx(we.StrictMode,{children:y.jsx(cP,{})}));
