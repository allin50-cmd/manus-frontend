(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function BS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function qS(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),t}var Gm={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function $S(){if(j0)return bc;j0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:l}}return bc.Fragment=e,bc.jsx=t,bc.jsxs=t,bc}var O0;function HS(){return O0||(O0=1,Gm.exports=$S()),Gm.exports}var h=HS(),Km={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0;function FS(){if(D0)return Le;D0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function E(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,B={};function j(M,re,he){this.props=M,this.context=re,this.refs=B,this.updater=he||k}j.prototype.isReactComponent={},j.prototype.setState=function(M,re){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,re,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function J(){}J.prototype=j.prototype;function $(M,re,he){this.props=M,this.context=re,this.refs=B,this.updater=he||k}var W=$.prototype=new J;W.constructor=$,z(W,j.prototype),W.isPureReactComponent=!0;var le=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function C(M,re,he,P,ae,Te){return he=Te.ref,{$$typeof:r,type:M,key:re,ref:he!==void 0?he:null,props:Te}}function A(M,re){return C(M.type,re,void 0,void 0,void 0,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function D(M){var re={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(he){return re[he]})}var O=/\/+/g;function V(M,re){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):re.toString(36)}function R(){}function We(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(R,R):(M.status="pending",M.then(function(re){M.status==="pending"&&(M.status="fulfilled",M.value=re)},function(re){M.status==="pending"&&(M.status="rejected",M.reason=re)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Ue(M,re,he,P,ae){var Te=typeof M;(Te==="undefined"||Te==="boolean")&&(M=null);var ve=!1;if(M===null)ve=!0;else switch(Te){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(M.$$typeof){case r:case e:ve=!0;break;case v:return ve=M._init,Ue(ve(M._payload),re,he,P,ae)}}if(ve)return ae=ae(M),ve=P===""?"."+V(M,0):P,le(ae)?(he="",ve!=null&&(he=ve.replace(O,"$&/")+"/"),Ue(ae,re,he,"",function(un){return un})):ae!=null&&(N(ae)&&(ae=A(ae,he+(ae.key==null||M&&M.key===ae.key?"":(""+ae.key).replace(O,"$&/")+"/")+ve)),re.push(ae)),1;ve=0;var $e=P===""?".":P+":";if(le(M))for(var et=0;et<M.length;et++)P=M[et],Te=$e+V(P,et),ve+=Ue(P,re,he,Te,ae);else if(et=E(M),typeof et=="function")for(M=et.call(M),et=0;!(P=M.next()).done;)P=P.value,Te=$e+V(P,et++),ve+=Ue(P,re,he,Te,ae);else if(Te==="object"){if(typeof M.then=="function")return Ue(We(M),re,he,P,ae);throw re=String(M),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ve}function U(M,re,he){if(M==null)return M;var P=[],ae=0;return Ue(M,P,"","",function(Te){return re.call(he,Te,ae++)}),P}function ie(M){if(M._status===-1){var re=M._result;re=re(),re.then(function(he){(M._status===0||M._status===-1)&&(M._status=1,M._result=he)},function(he){(M._status===0||M._status===-1)&&(M._status=2,M._result=he)}),M._status===-1&&(M._status=0,M._result=re)}if(M._status===1)return M._result.default;throw M._result}var ne=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function ze(){}return Le.Children={map:U,forEach:function(M,re,he){U(M,function(){re.apply(this,arguments)},he)},count:function(M){var re=0;return U(M,function(){re++}),re},toArray:function(M){return U(M,function(re){return re})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Le.Component=j,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=$,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Le.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ce.H.useMemoCache(M)}},Le.cache=function(M){return function(){return M.apply(null,arguments)}},Le.cloneElement=function(M,re,he){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var P=z({},M.props),ae=M.key,Te=void 0;if(re!=null)for(ve in re.ref!==void 0&&(Te=void 0),re.key!==void 0&&(ae=""+re.key),re)!oe.call(re,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&re.ref===void 0||(P[ve]=re[ve]);var ve=arguments.length-2;if(ve===1)P.children=he;else if(1<ve){for(var $e=Array(ve),et=0;et<ve;et++)$e[et]=arguments[et+2];P.children=$e}return C(M.type,ae,void 0,void 0,Te,P)},Le.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Le.createElement=function(M,re,he){var P,ae={},Te=null;if(re!=null)for(P in re.key!==void 0&&(Te=""+re.key),re)oe.call(re,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(ae[P]=re[P]);var ve=arguments.length-2;if(ve===1)ae.children=he;else if(1<ve){for(var $e=Array(ve),et=0;et<ve;et++)$e[et]=arguments[et+2];ae.children=$e}if(M&&M.defaultProps)for(P in ve=M.defaultProps,ve)ae[P]===void 0&&(ae[P]=ve[P]);return C(M,Te,void 0,void 0,null,ae)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:m,render:M}},Le.isValidElement=N,Le.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:ie}},Le.memo=function(M,re){return{$$typeof:y,type:M,compare:re===void 0?null:re}},Le.startTransition=function(M){var re=ce.T,he={};ce.T=he;try{var P=M(),ae=ce.S;ae!==null&&ae(he,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(ze,ne)}catch(Te){ne(Te)}finally{ce.T=re}},Le.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Le.use=function(M){return ce.H.use(M)},Le.useActionState=function(M,re,he){return ce.H.useActionState(M,re,he)},Le.useCallback=function(M,re){return ce.H.useCallback(M,re)},Le.useContext=function(M){return ce.H.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M,re){return ce.H.useDeferredValue(M,re)},Le.useEffect=function(M,re,he){var P=ce.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(M,re)},Le.useId=function(){return ce.H.useId()},Le.useImperativeHandle=function(M,re,he){return ce.H.useImperativeHandle(M,re,he)},Le.useInsertionEffect=function(M,re){return ce.H.useInsertionEffect(M,re)},Le.useLayoutEffect=function(M,re){return ce.H.useLayoutEffect(M,re)},Le.useMemo=function(M,re){return ce.H.useMemo(M,re)},Le.useOptimistic=function(M,re){return ce.H.useOptimistic(M,re)},Le.useReducer=function(M,re,he){return ce.H.useReducer(M,re,he)},Le.useRef=function(M){return ce.H.useRef(M)},Le.useState=function(M){return ce.H.useState(M)},Le.useSyncExternalStore=function(M,re,he){return ce.H.useSyncExternalStore(M,re,he)},Le.useTransition=function(){return ce.H.useTransition()},Le.version="19.1.0",Le}var P0;function bp(){return P0||(P0=1,Km.exports=FS()),Km.exports}var de=bp(),Qm={exports:{}},wc={},Ym={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function GS(){return M0||(M0=1,function(r){function e(U,ie){var ne=U.length;U.push(ie);e:for(;0<ne;){var ze=ne-1>>>1,M=U[ze];if(0<a(M,ie))U[ze]=ie,U[ne]=M,ne=ze;else break e}}function t(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var ie=U[0],ne=U.pop();if(ne!==ie){U[0]=ne;e:for(var ze=0,M=U.length,re=M>>>1;ze<re;){var he=2*(ze+1)-1,P=U[he],ae=he+1,Te=U[ae];if(0>a(P,ne))ae<M&&0>a(Te,P)?(U[ze]=Te,U[ae]=ne,ze=ae):(U[ze]=P,U[he]=ne,ze=he);else if(ae<M&&0>a(Te,ne))U[ze]=Te,U[ae]=ne,ze=ae;else break e}}return ie}function a(U,ie){var ne=U.sortIndex-ie.sortIndex;return ne!==0?ne:U.id-ie.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,m=u.now();r.unstable_now=function(){return u.now()-m}}var g=[],y=[],v=1,x=null,E=3,k=!1,z=!1,B=!1,j=!1,J=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function le(U){for(var ie=t(y);ie!==null;){if(ie.callback===null)s(y);else if(ie.startTime<=U)s(y),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(y)}}function ce(U){if(B=!1,le(U),!z)if(t(g)!==null)z=!0,oe||(oe=!0,V());else{var ie=t(y);ie!==null&&Ue(ce,ie.startTime-U)}}var oe=!1,C=-1,A=5,N=-1;function D(){return j?!0:!(r.unstable_now()-N<A)}function O(){if(j=!1,oe){var U=r.unstable_now();N=U;var ie=!0;try{e:{z=!1,B&&(B=!1,$(C),C=-1),k=!0;var ne=E;try{t:{for(le(U),x=t(g);x!==null&&!(x.expirationTime>U&&D());){var ze=x.callback;if(typeof ze=="function"){x.callback=null,E=x.priorityLevel;var M=ze(x.expirationTime<=U);if(U=r.unstable_now(),typeof M=="function"){x.callback=M,le(U),ie=!0;break t}x===t(g)&&s(g),le(U)}else s(g);x=t(g)}if(x!==null)ie=!0;else{var re=t(y);re!==null&&Ue(ce,re.startTime-U),ie=!1}}break e}finally{x=null,E=ne,k=!1}ie=void 0}}finally{ie?V():oe=!1}}}var V;if(typeof W=="function")V=function(){W(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,We=R.port2;R.port1.onmessage=O,V=function(){We.postMessage(null)}}else V=function(){J(O,0)};function Ue(U,ie){C=J(function(){U(r.unstable_now())},ie)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(U){switch(E){case 1:case 2:case 3:var ie=3;break;default:ie=E}var ne=E;E=ie;try{return U()}finally{E=ne}},r.unstable_requestPaint=function(){j=!0},r.unstable_runWithPriority=function(U,ie){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ne=E;E=U;try{return ie()}finally{E=ne}},r.unstable_scheduleCallback=function(U,ie,ne){var ze=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ze+ne:ze):ne=ze,U){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ne+M,U={id:v++,callback:ie,priorityLevel:U,startTime:ne,expirationTime:M,sortIndex:-1},ne>ze?(U.sortIndex=ne,e(y,U),t(g)===null&&U===t(y)&&(B?($(C),C=-1):B=!0,Ue(ce,ne-ze))):(U.sortIndex=M,e(g,U),z||k||(z=!0,oe||(oe=!0,V()))),U},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(U){var ie=E;return function(){var ne=E;E=ie;try{return U.apply(this,arguments)}finally{E=ne}}}}(Wm)),Wm}var V0;function KS(){return V0||(V0=1,Ym.exports=GS()),Ym.exports}var Xm={exports:{}},mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0;function QS(){if(U0)return mn;U0=1;var r=bp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:g,containerInfo:y,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,mn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},mn.flushSync=function(g){var y=u.T,v=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=y,s.p=v,s.d.f()}},mn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},mn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},mn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,x=m(v,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:k}):v==="script"&&s.d.X(g,{crossOrigin:x,integrity:E,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},mn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},mn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,x=m(v,y.crossOrigin);s.d.L(g,v,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},mn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},mn.requestFormReset=function(g){s.d.r(g)},mn.unstable_batchedUpdates=function(g,y){return g(y)},mn.useFormState=function(g,y,v){return u.H.useFormState(g,y,v)},mn.useFormStatus=function(){return u.H.useHostTransitionStatus()},mn.version="19.1.0",mn}var L0;function YS(){if(L0)return Xm.exports;L0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xm.exports=QS(),Xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0;function WS(){if(z0)return wc;z0=1;var r=KS(),e=bp(),t=YS();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(s(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),n;if(p===c)return m(f),i;p=p.sibling}throw Error(s(188))}if(o.return!==c.return)o=f,c=p;else{for(var w=!1,T=f.child;T;){if(T===o){w=!0,o=f,c=p;break}if(T===c){w=!0,c=f,o=p;break}T=T.sibling}if(!w){for(T=p.child;T;){if(T===o){w=!0,o=p,c=f;break}if(T===c){w=!0,c=p,o=f;break}T=T.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),W=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function We(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case j:return"Profiler";case B:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case W:return(n.displayName||"Context")+".Provider";case $:return(n._context.displayName||"Context")+".Consumer";case le:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:We(n.type)||"Memo";case A:i=n._payload,n=n._init;try{return We(n(i))}catch{}}return null}var Ue=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ze=[],M=-1;function re(n){return{current:n}}function he(n){0>M||(n.current=ze[M],ze[M]=null,M--)}function P(n,i){M++,ze[M]=n.current,n.current=i}var ae=re(null),Te=re(null),ve=re(null),$e=re(null);function et(n,i){switch(P(ve,i),P(Te,n),P(ae,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?a0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=a0(i),n=o0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}he(ae),P(ae,n)}function un(){he(ae),he(Te),he(ve)}function _s(n){n.memoizedState!==null&&P($e,n);var i=ae.current,o=o0(i,n.type);i!==o&&(P(Te,n),P(ae,o))}function bs(n){Te.current===n&&(he(ae),he(Te)),$e.current===n&&(he($e),gc._currentValue=ne)}var ts=Object.prototype.hasOwnProperty,Ii=r.unstable_scheduleCallback,Va=r.unstable_cancelCallback,Gd=r.unstable_shouldYield,gl=r.unstable_requestPaint,Tn=r.unstable_now,lu=r.unstable_getCurrentPriorityLevel,zt=r.unstable_ImmediatePriority,Kt=r.unstable_UserBlockingPriority,Hs=r.unstable_NormalPriority,Kd=r.unstable_LowPriority,pl=r.unstable_IdlePriority,Qd=r.log,ji=r.unstable_setDisableYieldValue,wr=null,hn=null;function qn(n){if(typeof Qd=="function"&&ji(n),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(wr,n)}catch{}}var _n=Math.clz32?Math.clz32:uu,Yd=Math.log,cu=Math.LN2;function uu(n){return n>>>=0,n===0?32:31-(Yd(n)/cu|0)|0}var ws=256,xr=4194304;function ns(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $n(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var T=c&134217727;return T!==0?(c=T&~p,c!==0?f=ns(c):(w&=T,w!==0?f=ns(w):o||(o=T&~n,o!==0&&(f=ns(o))))):(T=c&~p,T!==0?f=ns(T):w!==0?f=ns(w):o||(o=c&~n,o!==0&&(f=ns(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function Er(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ua(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yl(){var n=ws;return ws<<=1,(ws&4194048)===0&&(ws=256),n}function Tr(){var n=xr;return xr<<=1,(xr&62914560)===0&&(xr=4194304),n}function La(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function St(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function hu(n,i,o,c,f,p){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,I=n.expirationTimes,G=n.hiddenUpdates;for(o=w&~o;0<o;){var X=31-_n(o),te=1<<X;T[X]=0,I[X]=-1;var K=G[X];if(K!==null)for(G[X]=null,X=0;X<K.length;X++){var Q=K[X];Q!==null&&(Q.lane&=-536870913)}o&=~te}c!==0&&Sr(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(w&~i))}function Sr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-_n(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function Ar(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-_n(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function vl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function _l(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Fs(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:A0(n.type))}function Wd(n,i){var o=ie.p;try{return ie.p=n,i()}finally{ie.p=o}}var xs=Math.random().toString(36).slice(2),At="__reactFiber$"+xs,nn="__reactProps$"+xs,Gs="__reactContainer$"+xs,Oi="__reactEvents$"+xs,Di="__reactListeners$"+xs,Xd="__reactHandles$"+xs,ss="__reactResources$"+xs,Nr="__reactMarker$"+xs;function za(n){delete n[At],delete n[nn],delete n[Oi],delete n[Di],delete n[Xd]}function Es(n){var i=n[At];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Gs]||o[At]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=h0(n);n!==null;){if(o=n[At])return o;n=h0(n)}return i}n=o,o=n.parentNode}return null}function Ts(n){if(n=n[At]||n[Gs]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Rr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function kr(n){var i=n[ss];return i||(i=n[ss]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Nt(n){n[Nr]=!0}var du=new Set,Pi={};function Ss(n,i){As(n,i),As(n+"Capture",i)}function As(n,i){for(Pi[n]=i,n=0;n<i.length;n++)du.add(i[n])}var Mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},Ba={};function Jd(n){return ts.call(Ba,n)?!0:ts.call(Ns,n)?!1:Mi.test(n)?Ba[n]=!0:(Ns[n]=!0,!1)}function Vi(n,i,o){if(Jd(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Ui(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Hn(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}var Li,qa;function Ks(n){if(Li===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Li=i&&i[1]||"",qa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Li+n+qa}var $a=!1;function Ha(n,i){if(!n||$a)return"";$a=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(Q){var K=Q}Reflect.construct(n,[],te)}else{try{te.call()}catch(Q){K=Q}n.call(te.prototype)}}else{try{throw Error()}catch(Q){K=Q}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),w=p[0],T=p[1];if(w&&T){var I=w.split(`
`),G=T.split(`
`);for(f=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===I.length||f===G.length)for(c=I.length-1,f=G.length-1;1<=c&&0<=f&&I[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(I[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||I[c]!==G[f]){var X=`
`+I[c].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=c&&0<=f);break}}}finally{$a=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ks(o):""}function Zd(n){switch(n.tag){case 26:case 27:case 5:return Ks(n.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 15:return Ha(n.type,!1);case 11:return Ha(n.type.render,!1);case 1:return Ha(n.type,!0);case 31:return Ks("Activity");default:return""}}function rs(n){try{var i="";do i+=Zd(n),n=n.return;while(n);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function bt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zi(n){var i=Cr(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ir(n){n._valueTracker||(n._valueTracker=zi(n))}function at(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Cr(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function Qs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bi=/[\n"\\]/g;function Qt(n){return n.replace(Bi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function bl(n,i,o,c,f,p,w,T){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+bt(i)):n.value!==""+bt(i)&&(n.value=""+bt(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?xl(n,w,bt(i)):o!=null?xl(n,w,bt(o)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+bt(T):n.removeAttribute("name")}function wl(n,i,o,c,f,p,w,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;o=o!=null?""+bt(o):"",i=i!=null?""+bt(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=T?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w)}function xl(n,i,o){i==="number"&&Qs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function jr(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+bt(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function fu(n,i,o){if(i!=null&&(i=""+bt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+bt(o):""}function mu(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(Ue(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=bt(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function Fn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||Ys.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Tl(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&El(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&El(n,p,i[p])}function Fa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function is(n){return pu.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Sl=null;function Al(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Or=null,bn=null;function yu(n){var i=Ts(n);if(i&&(n=i.stateNode)){var o=n[nn]||null;e:switch(n=i.stateNode,i.type){case"input":if(bl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Qt(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[nn]||null;if(!f)throw Error(s(90));bl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&at(c)}break e;case"textarea":fu(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&jr(n,!!o.multiple,i,!1)}}}var qi=!1;function $i(n,i,o){if(qi)return n(i,o);qi=!0;try{var c=n(i);return c}finally{if(qi=!1,(Or!==null||bn!==null)&&(ah(),Or&&(i=Or,n=bn,bn=Or=null,yu(i),n)))for(i=0;i<n.length;i++)yu(n[i])}}function Dr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[nn]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ws=!1;if(wn)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Ws=!1}var Gn=null,dt=null,Ga=null;function vu(){if(Ga)return Ga;var n,i=dt,o=i.length,c,f="value"in Gn?Gn.value:Gn.textContent,p=f.length;for(n=0;n<o&&i[n]===f[n];n++);var w=o-n;for(c=1;c<=w&&i[o-c]===f[p-c];c++);return Ga=f.slice(n,1<c?1-c:void 0)}function Hi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Fi(){return!0}function Nl(){return!1}function Bt(n){function i(o,c,f,p,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Fi:Nl,this.isPropagationStopped=Nl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),i}var dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gi=Bt(dn),Ki=v({},dn,{view:0,detail:0}),Qi=Bt(Ki),Ka,Yi,Rs,Wi=v({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rs&&(Rs&&n.type==="mousemove"?(Ka=n.screenX-Rs.screenX,Yi=n.screenY-Rs.screenY):Yi=Ka=0,Rs=n),Ka)},movementY:function(n){return"movementY"in n?n.movementY:Yi}}),Xi=Bt(Wi),ef=v({},Wi,{dataTransfer:0}),_u=Bt(ef),Ji=v({},Ki,{relatedTarget:0}),Qa=Bt(Ji),bu=v({},dn,{animationName:0,elapsedTime:0,pseudoElement:0}),Rl=Bt(bu),kl=v({},dn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wu=Bt(kl),Ya=v({},dn,{data:0}),Cl=Bt(Ya),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Eu[n])?!!i[n]:!1}function Wa(){return Tu}var Su=v({},Ki,{key:function(n){if(n.key){var i=xu[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Hi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xs[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wa,charCode:function(n){return n.type==="keypress"?Hi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xa=Bt(Su),xn=v({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Bt(xn),Au=v({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wa}),Mr=Bt(Au),d=v({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_=Bt(d),b=v({},Wi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),S=Bt(b),F=v({},dn,{newState:0,oldState:0}),Y=Bt(F),ue=[9,13,27,32],Pe=wn&&"CompositionEvent"in window,pt=null;wn&&"documentMode"in document&&(pt=document.documentMode);var st=wn&&"TextEvent"in window&&!pt,Rt=wn&&(!Pe||pt&&8<pt&&11>=pt),jn=" ",ks=!1;function as(n,i){switch(n){case"keyup":return ue.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function os(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ls=!1;function jl(n,i){switch(n){case"compositionend":return os(i);case"keypress":return i.which!==32?null:(ks=!0,jn);case"textInput":return n=i.data,n===jn&&ks?null:n;default:return null}}function mT(n,i){if(ls)return n==="compositionend"||!Pe&&as(n,i)?(n=vu(),Ga=dt=Gn=null,ls=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Rt&&i.locale!=="ko"?null:i.data;default:return null}}var gT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function by(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!gT[n.type]:i==="textarea"}function wy(n,i,o,c){Or?bn?bn.push(c):bn=[c]:Or=c,i=dh(i,"onChange"),0<i.length&&(o=new Gi("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ol=null,Dl=null;function pT(n){t0(n,0)}function Nu(n){var i=Rr(n);if(at(i))return n}function xy(n,i){if(n==="change")return i}var Ey=!1;if(wn){var tf;if(wn){var nf="oninput"in document;if(!nf){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),nf=typeof Ty.oninput=="function"}tf=nf}else tf=!1;Ey=tf&&(!document.documentMode||9<document.documentMode)}function Sy(){Ol&&(Ol.detachEvent("onpropertychange",Ay),Dl=Ol=null)}function Ay(n){if(n.propertyName==="value"&&Nu(Dl)){var i=[];wy(i,Dl,n,Al(n)),$i(pT,i)}}function yT(n,i,o){n==="focusin"?(Sy(),Ol=i,Dl=o,Ol.attachEvent("onpropertychange",Ay)):n==="focusout"&&Sy()}function vT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nu(Dl)}function _T(n,i){if(n==="click")return Nu(i)}function bT(n,i){if(n==="input"||n==="change")return Nu(i)}function wT(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var On=typeof Object.is=="function"?Object.is:wT;function Pl(n,i){if(On(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ts.call(i,f)||!On(n[f],i[f]))return!1}return!0}function Ny(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ry(n,i){var o=Ny(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ny(o)}}function ky(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?ky(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Cy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Qs(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Qs(n.document)}return i}function sf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var xT=wn&&"documentMode"in document&&11>=document.documentMode,Ja=null,rf=null,Ml=null,af=!1;function Iy(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;af||Ja==null||Ja!==Qs(c)||(c=Ja,"selectionStart"in c&&sf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ml&&Pl(Ml,c)||(Ml=c,c=dh(rf,"onSelect"),0<c.length&&(i=new Gi("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Ja)))}function Zi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Za={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},of={},jy={};wn&&(jy=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function ea(n){if(of[n])return of[n];if(!Za[n])return n;var i=Za[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in jy)return of[n]=i[o];return n}var Oy=ea("animationend"),Dy=ea("animationiteration"),Py=ea("animationstart"),ET=ea("transitionrun"),TT=ea("transitionstart"),ST=ea("transitioncancel"),My=ea("transitionend"),Vy=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function cs(n,i){Vy.set(n,i),Ss(i,[n])}var Uy=new WeakMap;function Kn(n,i){if(typeof n=="object"&&n!==null){var o=Uy.get(n);return o!==void 0?o:(i={value:n,source:i,stack:rs(i)},Uy.set(n,i),i)}return{value:n,source:i,stack:rs(i)}}var Qn=[],eo=0,cf=0;function Ru(){for(var n=eo,i=cf=eo=0;i<n;){var o=Qn[i];Qn[i++]=null;var c=Qn[i];Qn[i++]=null;var f=Qn[i];Qn[i++]=null;var p=Qn[i];if(Qn[i++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}p!==0&&Ly(o,f,p)}}function ku(n,i,o,c){Qn[eo++]=n,Qn[eo++]=i,Qn[eo++]=o,Qn[eo++]=c,cf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function uf(n,i,o,c){return ku(n,i,o,c),Cu(n)}function to(n,i){return ku(n,null,null,i),Cu(n)}function Ly(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-_n(o),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),p):null}function Cu(n){if(50<oc)throw oc=0,pm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var no={};function AT(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(n,i,o,c){return new AT(n,i,o,c)}function hf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Js(n,i){var o=n.alternate;return o===null?(o=Dn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function zy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Iu(n,i,o,c,f,p){var w=0;if(c=n,typeof n=="function")hf(n)&&(w=1);else if(typeof n=="string")w=RS(n,o,ae.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Dn(31,o,i,f),n.elementType=N,n.lanes=p,n;case z:return ta(o.children,f,p,i);case B:w=8,f|=24;break;case j:return n=Dn(12,o,i,f|2),n.elementType=j,n.lanes=p,n;case ce:return n=Dn(13,o,i,f),n.elementType=ce,n.lanes=p,n;case oe:return n=Dn(19,o,i,f),n.elementType=oe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case J:case W:w=10;break e;case $:w=9;break e;case le:w=11;break e;case C:w=14;break e;case A:w=16,c=null;break e}w=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=Dn(w,o,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function ta(n,i,o,c){return n=Dn(7,n,c,i),n.lanes=o,n}function df(n,i,o){return n=Dn(6,n,null,i),n.lanes=o,n}function ff(n,i,o){return i=Dn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var so=[],ro=0,ju=null,Ou=0,Yn=[],Wn=0,na=null,Zs=1,er="";function sa(n,i){so[ro++]=Ou,so[ro++]=ju,ju=n,Ou=i}function By(n,i,o){Yn[Wn++]=Zs,Yn[Wn++]=er,Yn[Wn++]=na,na=n;var c=Zs;n=er;var f=32-_n(c)-1;c&=~(1<<f),o+=1;var p=32-_n(i)+f;if(30<p){var w=f-f%5;p=(c&(1<<w)-1).toString(32),c>>=w,f-=w,Zs=1<<32-_n(i)+f|o<<f|c,er=p+n}else Zs=1<<p|o<<f|c,er=n}function mf(n){n.return!==null&&(sa(n,1),By(n,1,0))}function gf(n){for(;n===ju;)ju=so[--ro],so[ro]=null,Ou=so[--ro],so[ro]=null;for(;n===na;)na=Yn[--Wn],Yn[Wn]=null,er=Yn[--Wn],Yn[Wn]=null,Zs=Yn[--Wn],Yn[Wn]=null}var En=null,Et=null,tt=!1,ra=null,Cs=!1,pf=Error(s(519));function ia(n){var i=Error(s(418,""));throw Ll(Kn(i,n)),pf}function qy(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[At]=n,i[nn]=c,o){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(o=0;o<cc.length;o++)Ge(cc[o],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ge("invalid",i),wl(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ir(i);break;case"select":Ge("invalid",i);break;case"textarea":Ge("invalid",i),mu(i,c.value,c.defaultValue,c.children),Ir(i)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||i0(i.textContent,o)?(c.popover!=null&&(Ge("beforetoggle",i),Ge("toggle",i)),c.onScroll!=null&&Ge("scroll",i),c.onScrollEnd!=null&&Ge("scrollend",i),c.onClick!=null&&(i.onclick=fh),i=!0):i=!1,i||ia(n)}function $y(n){for(En=n.return;En;)switch(En.tag){case 5:case 13:Cs=!1;return;case 27:case 3:Cs=!0;return;default:En=En.return}}function Vl(n){if(n!==En)return!1;if(!tt)return $y(n),tt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||jm(n.type,n.memoizedProps)),o=!o),o&&Et&&ia(n),$y(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(i===0){Et=hs(n.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;n=n.nextSibling}Et=null}}else i===27?(i=Et,Jr(n.type)?(n=Mm,Mm=null,Et=n):Et=i):Et=En?hs(n.stateNode.nextSibling):null;return!0}function Ul(){Et=En=null,tt=!1}function Hy(){var n=ra;return n!==null&&(Nn===null?Nn=n:Nn.push.apply(Nn,n),ra=null),n}function Ll(n){ra===null?ra=[n]:ra.push(n)}var yf=re(null),aa=null,tr=null;function Vr(n,i,o){P(yf,i._currentValue),i._currentValue=o}function nr(n){n._currentValue=yf.current,he(yf)}function vf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function _f(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var w=f.child;p=p.firstContext;e:for(;p!==null;){var T=p;p=f;for(var I=0;I<i.length;I++)if(T.context===i[I]){p.lanes|=o,T=p.alternate,T!==null&&(T.lanes|=o),vf(p.return,o,n),c||(w=null);break e}p=T.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(s(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),vf(w,o,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function zl(n,i,o,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var T=f.type;On(f.pendingProps.value,w.value)||(n!==null?n.push(T):n=[T])}}else if(f===$e.current){if(w=f.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(gc):n=[gc])}f=f.return}n!==null&&_f(i,n,o,c),i.flags|=262144}function Du(n){for(n=n.firstContext;n!==null;){if(!On(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function oa(n){aa=n,tr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function fn(n){return Fy(aa,n)}function Pu(n,i){return aa===null&&oa(n),Fy(n,i)}function Fy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},tr===null){if(n===null)throw Error(s(308));tr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else tr=tr.next=i;return o}var NT=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},RT=r.unstable_scheduleCallback,kT=r.unstable_NormalPriority,qt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new NT,data:new Map,refCount:0}}function Bl(n){n.refCount--,n.refCount===0&&RT(kT,function(){n.controller.abort()})}var ql=null,wf=0,io=0,ao=null;function CT(n,i){if(ql===null){var o=ql=[];wf=0,io=Em(),ao={status:"pending",value:void 0,then:function(c){o.push(c)}}}return wf++,i.then(Gy,Gy),i}function Gy(){if(--wf===0&&ql!==null){ao!==null&&(ao.status="fulfilled");var n=ql;ql=null,io=0,ao=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function IT(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Ky=U.S;U.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&CT(n,i),Ky!==null&&Ky(n,i)};var la=re(null);function xf(){var n=la.current;return n!==null?n:ft.pooledCache}function Mu(n,i){i===null?P(la,la.current):P(la,i.pool)}function Qy(){var n=xf();return n===null?null:{parent:qt._currentValue,pool:n}}var $l=Error(s(460)),Yy=Error(s(474)),Vu=Error(s(542)),Ef={then:function(){}};function Wy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Uu(){}function Xy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Uu,Uu),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Zy(n),n;default:if(typeof i.status=="string")i.then(Uu,Uu);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Zy(n),n}throw Hl=i,$l}}var Hl=null;function Jy(){if(Hl===null)throw Error(s(459));var n=Hl;return Hl=null,n}function Zy(n){if(n===$l||n===Vu)throw Error(s(483))}var Ur=!1;function Tf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Lr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function zr(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Cu(n),Ly(n,null,o),i}return ku(n,c,i,o),Cu(n)}function Fl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Ar(n,o)}}function Af(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Nf=!1;function Gl(){if(Nf){var n=ao;if(n!==null)throw n}}function Kl(n,i,o,c){Nf=!1;var f=n.updateQueue;Ur=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var I=T,G=I.next;I.next=null,w===null?p=G:w.next=G,w=I;var X=n.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==w&&(T===null?X.firstBaseUpdate=G:T.next=G,X.lastBaseUpdate=I))}if(p!==null){var te=f.baseState;w=0,X=G=I=null,T=p;do{var K=T.lane&-536870913,Q=K!==T.lane;if(Q?(Xe&K)===K:(c&K)===K){K!==0&&K===io&&(Nf=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ce=n,Ne=T;K=i;var ct=o;switch(Ne.tag){case 1:if(Ce=Ne.payload,typeof Ce=="function"){te=Ce.call(ct,te,K);break e}te=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ne.payload,K=typeof Ce=="function"?Ce.call(ct,te,K):Ce,K==null)break e;te=v({},te,K);break e;case 2:Ur=!0}}K=T.callback,K!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(G=X=Q,I=te):X=X.next=Q,w|=K;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);X===null&&(I=te),f.baseState=I,f.firstBaseUpdate=G,f.lastBaseUpdate=X,p===null&&(f.shared.lanes=0),Qr|=w,n.lanes=w,n.memoizedState=te}}function ev(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function tv(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)ev(o[n],i)}var oo=re(null),Lu=re(0);function nv(n,i){n=cr,P(Lu,n),P(oo,i),cr=n|i.baseLanes}function Rf(){P(Lu,cr),P(oo,oo.current)}function kf(){cr=Lu.current,he(oo),he(Lu)}var Br=0,Be=null,ot=null,Ot=null,zu=!1,lo=!1,ca=!1,Bu=0,Ql=0,co=null,jT=0;function kt(){throw Error(s(321))}function Cf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!On(n[o],i[o]))return!1;return!0}function If(n,i,o,c,f,p){return Br=p,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=n===null||n.memoizedState===null?Lv:zv,ca=!1,p=o(c,f),ca=!1,lo&&(p=rv(i,o,c,f)),sv(n),p}function sv(n){U.H=Ku;var i=ot!==null&&ot.next!==null;if(Br=0,Ot=ot=Be=null,zu=!1,Ql=0,co=null,i)throw Error(s(300));n===null||Yt||(n=n.dependencies,n!==null&&Du(n)&&(Yt=!0))}function rv(n,i,o,c){Be=n;var f=0;do{if(lo&&(co=null),Ql=0,lo=!1,25<=f)throw Error(s(301));if(f+=1,Ot=ot=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}U.H=LT,p=i(o,c)}while(lo);return p}function OT(){var n=U.H,i=n.useState()[0];return i=typeof i.then=="function"?Yl(i):i,n=n.useState()[0],(ot!==null?ot.memoizedState:null)!==n&&(Be.flags|=1024),i}function jf(){var n=Bu!==0;return Bu=0,n}function Of(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Df(n){if(zu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zu=!1}Br=0,Ot=ot=Be=null,lo=!1,Ql=Bu=0,co=null}function Sn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Be.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Dt(){if(ot===null){var n=Be.alternate;n=n!==null?n.memoizedState:null}else n=ot.next;var i=Ot===null?Be.memoizedState:Ot.next;if(i!==null)Ot=i,ot=n;else{if(n===null)throw Be.alternate===null?Error(s(467)):Error(s(310));ot=n,n={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Ot===null?Be.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function Pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(n){var i=Ql;return Ql+=1,co===null&&(co=[]),n=Xy(co,n,i),i=Be,(Ot===null?i.memoizedState:Ot.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?Lv:zv),n}function qu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Yl(n);if(n.$$typeof===W)return fn(n)}throw Error(s(438,String(n)))}function Mf(n){var i=null,o=Be.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=Be.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Pf(),Be.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=D;return i.index++,o}function sr(n,i){return typeof i=="function"?i(n):i}function $u(n){var i=Dt();return Vf(i,ot,n)}function Vf(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var T=w=null,I=null,G=i,X=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(Xe&te)===te:(Br&te)===te){var K=G.revertLane;if(K===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===io&&(X=!0);else if((Br&K)===K){G=G.next,K===io&&(X=!0);continue}else te={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(T=I=te,w=p):I=I.next=te,Be.lanes|=K,Qr|=K;te=G.action,ca&&o(p,te),p=G.hasEagerState?G.eagerState:o(p,te)}else K={lane:te,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(T=I=K,w=p):I=I.next=K,Be.lanes|=te,Qr|=te;G=G.next}while(G!==null&&G!==i);if(I===null?w=p:I.next=T,!On(p,n.memoizedState)&&(Yt=!0,X&&(o=ao,o!==null)))throw o;n.memoizedState=p,n.baseState=w,n.baseQueue=I,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Uf(n){var i=Dt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do p=n(p,w.action),w=w.next;while(w!==f);On(p,i.memoizedState)||(Yt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,c]}function iv(n,i,o){var c=Be,f=Dt(),p=tt;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!On((ot||f).memoizedState,o);w&&(f.memoizedState=o,Yt=!0),f=f.queue;var T=lv.bind(null,c,f,n);if(Wl(2048,8,T,[n]),f.getSnapshot!==i||w||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,uo(9,Hu(),ov.bind(null,c,f,o,i),null),ft===null)throw Error(s(349));p||(Br&124)!==0||av(c,i,o)}return o}function av(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Be.updateQueue,i===null?(i=Pf(),Be.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function ov(n,i,o,c){i.value=o,i.getSnapshot=c,cv(i)&&uv(n)}function lv(n,i,o){return o(function(){cv(i)&&uv(n)})}function cv(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!On(n,o)}catch{return!0}}function uv(n){var i=to(n,2);i!==null&&Ln(i,n,2)}function Lf(n){var i=Sn();if(typeof n=="function"){var o=n;if(n=o(),ca){qn(!0);try{o()}finally{qn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:n},i}function hv(n,i,o,c){return n.baseState=o,Vf(n,ot,typeof c=="function"?c:sr)}function DT(n,i,o,c,f){if(Gu(n))throw Error(s(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};U.T!==null?o(!0):p.isTransition=!1,c(p),o=i.pending,o===null?(p.next=i.pending=p,dv(i,p)):(p.next=o.next,i.pending=o.next=p)}}function dv(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=U.T,w={};U.T=w;try{var T=o(f,c),I=U.S;I!==null&&I(w,T),fv(n,i,T)}catch(G){zf(n,i,G)}finally{U.T=p}}else try{p=o(f,c),fv(n,i,p)}catch(G){zf(n,i,G)}}function fv(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){mv(n,i,c)},function(c){return zf(n,i,c)}):mv(n,i,o)}function mv(n,i,o){i.status="fulfilled",i.value=o,gv(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,dv(n,o)))}function zf(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,gv(i),i=i.next;while(i!==c)}n.action=null}function gv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function pv(n,i){return i}function yv(n,i){if(tt){var o=ft.formState;if(o!==null){e:{var c=Be;if(tt){if(Et){t:{for(var f=Et,p=Cs;f.nodeType!==8;){if(!p){f=null;break t}if(f=hs(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Et=hs(f.nextSibling),c=f.data==="F!";break e}}ia(c)}c=!1}c&&(i=o[0])}}return o=Sn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pv,lastRenderedState:i},o.queue=c,o=Mv.bind(null,Be,c),c.dispatch=o,c=Lf(!1),p=Ff.bind(null,Be,!1,c.queue),c=Sn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=DT.bind(null,Be,f,p,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function vv(n){var i=Dt();return _v(i,ot,n)}function _v(n,i,o){if(i=Vf(n,i,pv)[0],n=$u(sr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Yl(i)}catch(w){throw w===$l?Vu:w}else c=i;i=Dt();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(Be.flags|=2048,uo(9,Hu(),PT.bind(null,f,o),null)),[c,p,n]}function PT(n,i){n.action=i}function bv(n){var i=Dt(),o=ot;if(o!==null)return _v(i,o,n);Dt(),i=i.memoizedState,o=Dt();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function uo(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=Be.updateQueue,i===null&&(i=Pf(),Be.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function Hu(){return{destroy:void 0,resource:void 0}}function wv(){return Dt().memoizedState}function Fu(n,i,o,c){var f=Sn();c=c===void 0?null:c,Be.flags|=n,f.memoizedState=uo(1|i,Hu(),o,c)}function Wl(n,i,o,c){var f=Dt();c=c===void 0?null:c;var p=f.memoizedState.inst;ot!==null&&c!==null&&Cf(c,ot.memoizedState.deps)?f.memoizedState=uo(i,p,o,c):(Be.flags|=n,f.memoizedState=uo(1|i,p,o,c))}function xv(n,i){Fu(8390656,8,n,i)}function Ev(n,i){Wl(2048,8,n,i)}function Tv(n,i){return Wl(4,2,n,i)}function Sv(n,i){return Wl(4,4,n,i)}function Av(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Nv(n,i,o){o=o!=null?o.concat([n]):null,Wl(4,4,Av.bind(null,i,n),o)}function Bf(){}function Rv(n,i){var o=Dt();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Cf(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function kv(n,i){var o=Dt();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Cf(i,c[1]))return c[0];if(c=n(),ca){qn(!0);try{n()}finally{qn(!1)}}return o.memoizedState=[c,i],c}function qf(n,i,o){return o===void 0||(Br&1073741824)!==0?n.memoizedState=i:(n.memoizedState=o,n=j_(),Be.lanes|=n,Qr|=n,o)}function Cv(n,i,o,c){return On(o,i)?o:oo.current!==null?(n=qf(n,o,c),On(n,i)||(Yt=!0),n):(Br&42)===0?(Yt=!0,n.memoizedState=o):(n=j_(),Be.lanes|=n,Qr|=n,i)}function Iv(n,i,o,c,f){var p=ie.p;ie.p=p!==0&&8>p?p:8;var w=U.T,T={};U.T=T,Ff(n,!1,i,o);try{var I=f(),G=U.S;if(G!==null&&G(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var X=IT(I,c);Xl(n,i,X,Un(n))}else Xl(n,i,c,Un(n))}catch(te){Xl(n,i,{then:function(){},status:"rejected",reason:te},Un())}finally{ie.p=p,U.T=w}}function MT(){}function $f(n,i,o,c){if(n.tag!==5)throw Error(s(476));var f=jv(n).queue;Iv(n,f,i,ne,o===null?MT:function(){return Ov(n),o(c)})}function jv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:ne},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Ov(n){var i=jv(n).next.queue;Xl(n,i,{},Un())}function Hf(){return fn(gc)}function Dv(){return Dt().memoizedState}function Pv(){return Dt().memoizedState}function VT(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Un();n=Lr(o);var c=zr(i,n,o);c!==null&&(Ln(c,i,o),Fl(c,i,o)),i={cache:bf()},n.payload=i;return}i=i.return}}function UT(n,i,o){var c=Un();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Gu(n)?Vv(i,o):(o=uf(n,i,o,c),o!==null&&(Ln(o,n,c),Uv(o,i,c)))}function Mv(n,i,o){var c=Un();Xl(n,i,o,c)}function Xl(n,i,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Gu(n))Vv(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,T=p(w,o);if(f.hasEagerState=!0,f.eagerState=T,On(T,w))return ku(n,i,f,0),ft===null&&Ru(),!1}catch{}finally{}if(o=uf(n,i,f,c),o!==null)return Ln(o,n,c),Uv(o,i,c),!0}return!1}function Ff(n,i,o,c){if(c={lane:2,revertLane:Em(),action:c,hasEagerState:!1,eagerState:null,next:null},Gu(n)){if(i)throw Error(s(479))}else i=uf(n,o,c,2),i!==null&&Ln(i,n,2)}function Gu(n){var i=n.alternate;return n===Be||i!==null&&i===Be}function Vv(n,i){lo=zu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Uv(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,Ar(n,o)}}var Ku={readContext:fn,use:qu,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},Lv={readContext:fn,use:qu,useCallback:function(n,i){return Sn().memoizedState=[n,i===void 0?null:i],n},useContext:fn,useEffect:xv,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Fu(4194308,4,Av.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Fu(4194308,4,n,i)},useInsertionEffect:function(n,i){Fu(4,2,n,i)},useMemo:function(n,i){var o=Sn();i=i===void 0?null:i;var c=n();if(ca){qn(!0);try{n()}finally{qn(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Sn();if(o!==void 0){var f=o(i);if(ca){qn(!0);try{o(i)}finally{qn(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=UT.bind(null,Be,n),[c.memoizedState,n]},useRef:function(n){var i=Sn();return n={current:n},i.memoizedState=n},useState:function(n){n=Lf(n);var i=n.queue,o=Mv.bind(null,Be,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Sn();return qf(o,n,i)},useTransition:function(){var n=Lf(!1);return n=Iv.bind(null,Be,n.queue,!0,!1),Sn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=Be,f=Sn();if(tt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),ft===null)throw Error(s(349));(Xe&124)!==0||av(c,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,xv(lv.bind(null,c,p,n),[n]),c.flags|=2048,uo(9,Hu(),ov.bind(null,c,p,o,i),null),o},useId:function(){var n=Sn(),i=ft.identifierPrefix;if(tt){var o=er,c=Zs;o=(c&~(1<<32-_n(c)-1)).toString(32)+o,i="«"+i+"R"+o,o=Bu++,0<o&&(i+="H"+o.toString(32)),i+="»"}else o=jT++,i="«"+i+"r"+o.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Hf,useFormState:yv,useActionState:yv,useOptimistic:function(n){var i=Sn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Ff.bind(null,Be,!0,o),o.dispatch=i,[n,i]},useMemoCache:Mf,useCacheRefresh:function(){return Sn().memoizedState=VT.bind(null,Be)}},zv={readContext:fn,use:qu,useCallback:Rv,useContext:fn,useEffect:Ev,useImperativeHandle:Nv,useInsertionEffect:Tv,useLayoutEffect:Sv,useMemo:kv,useReducer:$u,useRef:wv,useState:function(){return $u(sr)},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Dt();return Cv(o,ot.memoizedState,n,i)},useTransition:function(){var n=$u(sr)[0],i=Dt().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:iv,useId:Dv,useHostTransitionStatus:Hf,useFormState:vv,useActionState:vv,useOptimistic:function(n,i){var o=Dt();return hv(o,ot,n,i)},useMemoCache:Mf,useCacheRefresh:Pv},LT={readContext:fn,use:qu,useCallback:Rv,useContext:fn,useEffect:Ev,useImperativeHandle:Nv,useInsertionEffect:Tv,useLayoutEffect:Sv,useMemo:kv,useReducer:Uf,useRef:wv,useState:function(){return Uf(sr)},useDebugValue:Bf,useDeferredValue:function(n,i){var o=Dt();return ot===null?qf(o,n,i):Cv(o,ot.memoizedState,n,i)},useTransition:function(){var n=Uf(sr)[0],i=Dt().memoizedState;return[typeof n=="boolean"?n:Yl(n),i]},useSyncExternalStore:iv,useId:Dv,useHostTransitionStatus:Hf,useFormState:bv,useActionState:bv,useOptimistic:function(n,i){var o=Dt();return ot!==null?hv(o,ot,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:Pv},ho=null,Jl=0;function Qu(n){var i=Jl;return Jl+=1,ho===null&&(ho=[]),Xy(ho,n,i)}function Zl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Yu(n,i){throw i.$$typeof===x?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Bv(n){var i=n._init;return i(n._payload)}function qv(n){function i(q,L){if(n){var H=q.deletions;H===null?(q.deletions=[L],q.flags|=16):H.push(L)}}function o(q,L){if(!n)return null;for(;L!==null;)i(q,L),L=L.sibling;return null}function c(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function f(q,L){return q=Js(q,L),q.index=0,q.sibling=null,q}function p(q,L,H){return q.index=H,n?(H=q.alternate,H!==null?(H=H.index,H<L?(q.flags|=67108866,L):H):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function w(q){return n&&q.alternate===null&&(q.flags|=67108866),q}function T(q,L,H,Z){return L===null||L.tag!==6?(L=df(H,q.mode,Z),L.return=q,L):(L=f(L,H),L.return=q,L)}function I(q,L,H,Z){var ge=H.type;return ge===z?X(q,L,H.props.children,Z,H.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===A&&Bv(ge)===L.type)?(L=f(L,H.props),Zl(L,H),L.return=q,L):(L=Iu(H.type,H.key,H.props,null,q.mode,Z),Zl(L,H),L.return=q,L)}function G(q,L,H,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=ff(H,q.mode,Z),L.return=q,L):(L=f(L,H.children||[]),L.return=q,L)}function X(q,L,H,Z,ge){return L===null||L.tag!==7?(L=ta(H,q.mode,Z,ge),L.return=q,L):(L=f(L,H),L.return=q,L)}function te(q,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=df(""+L,q.mode,H),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case E:return H=Iu(L.type,L.key,L.props,null,q.mode,H),Zl(H,L),H.return=q,H;case k:return L=ff(L,q.mode,H),L.return=q,L;case A:var Z=L._init;return L=Z(L._payload),te(q,L,H)}if(Ue(L)||V(L))return L=ta(L,q.mode,H,null),L.return=q,L;if(typeof L.then=="function")return te(q,Qu(L),H);if(L.$$typeof===W)return te(q,Pu(q,L),H);Yu(q,L)}return null}function K(q,L,H,Z){var ge=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:T(q,L,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return H.key===ge?I(q,L,H,Z):null;case k:return H.key===ge?G(q,L,H,Z):null;case A:return ge=H._init,H=ge(H._payload),K(q,L,H,Z)}if(Ue(H)||V(H))return ge!==null?null:X(q,L,H,Z,null);if(typeof H.then=="function")return K(q,L,Qu(H),Z);if(H.$$typeof===W)return K(q,L,Pu(q,H),Z);Yu(q,H)}return null}function Q(q,L,H,Z,ge){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return q=q.get(H)||null,T(L,q,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return q=q.get(Z.key===null?H:Z.key)||null,I(L,q,Z,ge);case k:return q=q.get(Z.key===null?H:Z.key)||null,G(L,q,Z,ge);case A:var He=Z._init;return Z=He(Z._payload),Q(q,L,H,Z,ge)}if(Ue(Z)||V(Z))return q=q.get(H)||null,X(L,q,Z,ge,null);if(typeof Z.then=="function")return Q(q,L,H,Qu(Z),ge);if(Z.$$typeof===W)return Q(q,L,H,Pu(L,Z),ge);Yu(L,Z)}return null}function Ce(q,L,H,Z){for(var ge=null,He=null,_e=L,Re=L=0,Xt=null;_e!==null&&Re<H.length;Re++){_e.index>Re?(Xt=_e,_e=null):Xt=_e.sibling;var Ze=K(q,_e,H[Re],Z);if(Ze===null){_e===null&&(_e=Xt);break}n&&_e&&Ze.alternate===null&&i(q,_e),L=p(Ze,L,Re),He===null?ge=Ze:He.sibling=Ze,He=Ze,_e=Xt}if(Re===H.length)return o(q,_e),tt&&sa(q,Re),ge;if(_e===null){for(;Re<H.length;Re++)_e=te(q,H[Re],Z),_e!==null&&(L=p(_e,L,Re),He===null?ge=_e:He.sibling=_e,He=_e);return tt&&sa(q,Re),ge}for(_e=c(_e);Re<H.length;Re++)Xt=Q(_e,q,Re,H[Re],Z),Xt!==null&&(n&&Xt.alternate!==null&&_e.delete(Xt.key===null?Re:Xt.key),L=p(Xt,L,Re),He===null?ge=Xt:He.sibling=Xt,He=Xt);return n&&_e.forEach(function(si){return i(q,si)}),tt&&sa(q,Re),ge}function Ne(q,L,H,Z){if(H==null)throw Error(s(151));for(var ge=null,He=null,_e=L,Re=L=0,Xt=null,Ze=H.next();_e!==null&&!Ze.done;Re++,Ze=H.next()){_e.index>Re?(Xt=_e,_e=null):Xt=_e.sibling;var si=K(q,_e,Ze.value,Z);if(si===null){_e===null&&(_e=Xt);break}n&&_e&&si.alternate===null&&i(q,_e),L=p(si,L,Re),He===null?ge=si:He.sibling=si,He=si,_e=Xt}if(Ze.done)return o(q,_e),tt&&sa(q,Re),ge;if(_e===null){for(;!Ze.done;Re++,Ze=H.next())Ze=te(q,Ze.value,Z),Ze!==null&&(L=p(Ze,L,Re),He===null?ge=Ze:He.sibling=Ze,He=Ze);return tt&&sa(q,Re),ge}for(_e=c(_e);!Ze.done;Re++,Ze=H.next())Ze=Q(_e,q,Re,Ze.value,Z),Ze!==null&&(n&&Ze.alternate!==null&&_e.delete(Ze.key===null?Re:Ze.key),L=p(Ze,L,Re),He===null?ge=Ze:He.sibling=Ze,He=Ze);return n&&_e.forEach(function(zS){return i(q,zS)}),tt&&sa(q,Re),ge}function ct(q,L,H,Z){if(typeof H=="object"&&H!==null&&H.type===z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case E:e:{for(var ge=H.key;L!==null;){if(L.key===ge){if(ge=H.type,ge===z){if(L.tag===7){o(q,L.sibling),Z=f(L,H.props.children),Z.return=q,q=Z;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===A&&Bv(ge)===L.type){o(q,L.sibling),Z=f(L,H.props),Zl(Z,H),Z.return=q,q=Z;break e}o(q,L);break}else i(q,L);L=L.sibling}H.type===z?(Z=ta(H.props.children,q.mode,Z,H.key),Z.return=q,q=Z):(Z=Iu(H.type,H.key,H.props,null,q.mode,Z),Zl(Z,H),Z.return=q,q=Z)}return w(q);case k:e:{for(ge=H.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(q,L.sibling),Z=f(L,H.children||[]),Z.return=q,q=Z;break e}else{o(q,L);break}else i(q,L);L=L.sibling}Z=ff(H,q.mode,Z),Z.return=q,q=Z}return w(q);case A:return ge=H._init,H=ge(H._payload),ct(q,L,H,Z)}if(Ue(H))return Ce(q,L,H,Z);if(V(H)){if(ge=V(H),typeof ge!="function")throw Error(s(150));return H=ge.call(H),Ne(q,L,H,Z)}if(typeof H.then=="function")return ct(q,L,Qu(H),Z);if(H.$$typeof===W)return ct(q,L,Pu(q,H),Z);Yu(q,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(q,L.sibling),Z=f(L,H),Z.return=q,q=Z):(o(q,L),Z=df(H,q.mode,Z),Z.return=q,q=Z),w(q)):o(q,L)}return function(q,L,H,Z){try{Jl=0;var ge=ct(q,L,H,Z);return ho=null,ge}catch(_e){if(_e===$l||_e===Vu)throw _e;var He=Dn(29,_e,null,q.mode);return He.lanes=Z,He.return=q,He}finally{}}}var fo=qv(!0),$v=qv(!1),Xn=re(null),Is=null;function qr(n){var i=n.alternate;P($t,$t.current&1),P(Xn,n),Is===null&&(i===null||oo.current!==null||i.memoizedState!==null)&&(Is=n)}function Hv(n){if(n.tag===22){if(P($t,$t.current),P(Xn,n),Is===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Is=n)}}else $r()}function $r(){P($t,$t.current),P(Xn,Xn.current)}function rr(n){he(Xn),Is===n&&(Is=null),he($t)}var $t=re(0);function Wu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Pm(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Gf(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:v({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Kf={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=Un(),f=Lr(c);f.payload=i,o!=null&&(f.callback=o),i=zr(n,f,c),i!==null&&(Ln(i,n,c),Fl(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=Un(),f=Lr(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=zr(n,f,c),i!==null&&(Ln(i,n,c),Fl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Un(),c=Lr(o);c.tag=2,i!=null&&(c.callback=i),i=zr(n,c,o),i!==null&&(Ln(i,n,o),Fl(i,n,o))}};function Fv(n,i,o,c,f,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Pl(o,c)||!Pl(f,p):!0}function Gv(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&Kf.enqueueReplaceState(i,i.state,null)}function ua(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=v({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Xu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Kv(n){Xu(n)}function Qv(n){console.error(n)}function Yv(n){Xu(n)}function Ju(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Wv(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qf(n,i,o){return o=Lr(o),o.tag=3,o.payload={element:null},o.callback=function(){Ju(n,i)},o}function Xv(n){return n=Lr(n),n.tag=3,n}function Jv(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){Wv(i,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Wv(i,o,c),typeof f!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function zT(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&zl(i,o,f,!0),o=Xn.current,o!==null){switch(o.tag){case 13:return Is===null?vm():o.alternate===null&&Tt===0&&(Tt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Ef?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),bm(n,c,f)),!1;case 22:return o.flags|=65536,c===Ef?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),bm(n,c,f)),!1}throw Error(s(435,o.tag))}return bm(n,c,f),vm(),!1}if(tt)return i=Xn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==pf&&(n=Error(s(422),{cause:c}),Ll(Kn(n,o)))):(c!==pf&&(i=Error(s(423),{cause:c}),Ll(Kn(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Kn(c,o),f=Qf(n.stateNode,c,f),Af(n,f),Tt!==4&&(Tt=2)),!1;var p=Error(s(520),{cause:c});if(p=Kn(p,o),ac===null?ac=[p]:ac.push(p),Tt!==4&&(Tt=2),i===null)return!0;c=Kn(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Qf(o.stateNode,c,n),Af(o,n),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Yr===null||!Yr.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Xv(f),Jv(f,n,o,c),Af(o,f),!1}o=o.return}while(o!==null);return!1}var Zv=Error(s(461)),Yt=!1;function sn(n,i,o,c){i.child=n===null?$v(i,null,o,c):fo(i,n.child,o,c)}function e_(n,i,o,c,f){o=o.render;var p=i.ref;if("ref"in c){var w={};for(var T in c)T!=="ref"&&(w[T]=c[T])}else w=c;return oa(i),c=If(n,i,o,w,p,f),T=jf(),n!==null&&!Yt?(Of(n,i,f),ir(n,i,f)):(tt&&T&&mf(i),i.flags|=1,sn(n,i,c,f),i.child)}function t_(n,i,o,c,f){if(n===null){var p=o.type;return typeof p=="function"&&!hf(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,n_(n,i,p,c,f)):(n=Iu(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!nm(n,f)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:Pl,o(w,c)&&n.ref===i.ref)return ir(n,i,f)}return i.flags|=1,n=Js(p,c),n.ref=i.ref,n.return=i,i.child=n}function n_(n,i,o,c,f){if(n!==null){var p=n.memoizedProps;if(Pl(p,c)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=c=p,nm(n,f))(n.flags&131072)!==0&&(Yt=!0);else return i.lanes=n.lanes,ir(n,i,f)}return Yf(n,i,o,c,f)}function s_(n,i,o){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=p!==null?p.baseLanes|o:o,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~c}else i.childLanes=0,i.child=null;return r_(n,i,c,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(i,p!==null?p.cachePool:null),p!==null?nv(i,p):Rf(),Hv(i);else return i.lanes=i.childLanes=536870912,r_(n,i,p!==null?p.baseLanes|o:o,o)}else p!==null?(Mu(i,p.cachePool),nv(i,p),$r(),i.memoizedState=null):(n!==null&&Mu(i,null),Rf(),$r());return sn(n,i,f,o),i.child}function r_(n,i,o,c){var f=xf();return f=f===null?null:{parent:qt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&Mu(i,null),Rf(),Hv(i),n!==null&&zl(n,i,c,!0),null}function Zu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Yf(n,i,o,c,f){return oa(i),o=If(n,i,o,c,void 0,f),c=jf(),n!==null&&!Yt?(Of(n,i,f),ir(n,i,f)):(tt&&c&&mf(i),i.flags|=1,sn(n,i,o,f),i.child)}function i_(n,i,o,c,f,p){return oa(i),i.updateQueue=null,o=rv(i,c,o,f),sv(n),c=jf(),n!==null&&!Yt?(Of(n,i,p),ir(n,i,p)):(tt&&c&&mf(i),i.flags|=1,sn(n,i,o,p),i.child)}function a_(n,i,o,c,f){if(oa(i),i.stateNode===null){var p=no,w=o.contextType;typeof w=="object"&&w!==null&&(p=fn(w)),p=new o(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Kf,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Tf(i),w=o.contextType,p.context=typeof w=="object"&&w!==null?fn(w):no,p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Gf(i,o,w,c),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&Kf.enqueueReplaceState(p,p.state,null),Kl(i,c,p,f),Gl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var T=i.memoizedProps,I=ua(o,T);p.props=I;var G=p.context,X=o.contextType;w=no,typeof X=="object"&&X!==null&&(w=fn(X));var te=o.getDerivedStateFromProps;X=typeof te=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||G!==w)&&Gv(i,p,c,w),Ur=!1;var K=i.memoizedState;p.state=K,Kl(i,c,p,f),Gl(),G=i.memoizedState,T||K!==G||Ur?(typeof te=="function"&&(Gf(i,o,te,c),G=i.memoizedState),(I=Ur||Fv(i,o,I,c,K,G,w))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=G),p.props=c,p.state=G,p.context=w,c=I):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Sf(n,i),w=i.memoizedProps,X=ua(o,w),p.props=X,te=i.pendingProps,K=p.context,G=o.contextType,I=no,typeof G=="object"&&G!==null&&(I=fn(G)),T=o.getDerivedStateFromProps,(G=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==te||K!==I)&&Gv(i,p,c,I),Ur=!1,K=i.memoizedState,p.state=K,Kl(i,c,p,f),Gl();var Q=i.memoizedState;w!==te||K!==Q||Ur||n!==null&&n.dependencies!==null&&Du(n.dependencies)?(typeof T=="function"&&(Gf(i,o,T,c),Q=i.memoizedState),(X=Ur||Fv(i,o,X,c,K,Q,I)||n!==null&&n.dependencies!==null&&Du(n.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Q,I),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Q,I)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Q),p.props=c,p.state=Q,p.context=I,c=X):(typeof p.componentDidUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&K===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,Zu(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=fo(i,n.child,null,f),i.child=fo(i,null,o,f)):sn(n,i,o,f),i.memoizedState=p.state,n=i.child):n=ir(n,i,f),n}function o_(n,i,o,c){return Ul(),i.flags|=256,sn(n,i,o,c),i.child}var Wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(n){return{baseLanes:n,cachePool:Qy()}}function Jf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Jn),n}function l_(n,i,o){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=n!==null&&n.memoizedState===null?!1:($t.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(tt){if(f?qr(i):$r(),tt){var T=Et,I;if(I=T){e:{for(I=T,T=Cs;I.nodeType!==8;){if(!T){T=null;break e}if(I=hs(I.nextSibling),I===null){T=null;break e}}T=I}T!==null?(i.memoizedState={dehydrated:T,treeContext:na!==null?{id:Zs,overflow:er}:null,retryLane:536870912,hydrationErrors:null},I=Dn(18,null,null,0),I.stateNode=T,I.return=i,i.child=I,En=i,Et=null,I=!0):I=!1}I||ia(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Pm(T)?i.lanes=32:i.lanes=536870912,null;rr(i)}return T=c.children,c=c.fallback,f?($r(),f=i.mode,T=eh({mode:"hidden",children:T},f),c=ta(c,f,o,null),T.return=i,c.return=i,T.sibling=c,i.child=T,f=i.child,f.memoizedState=Xf(o),f.childLanes=Jf(n,w,o),i.memoizedState=Wf,c):(qr(i),Zf(i,T))}if(I=n.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(p)i.flags&256?(qr(i),i.flags&=-257,i=em(n,i,o)):i.memoizedState!==null?($r(),i.child=n.child,i.flags|=128,i=null):($r(),f=c.fallback,T=i.mode,c=eh({mode:"visible",children:c.children},T),f=ta(f,T,o,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,fo(i,n.child,null,o),c=i.child,c.memoizedState=Xf(o),c.childLanes=Jf(n,w,o),i.memoizedState=Wf,i=f);else if(qr(i),Pm(T)){if(w=T.nextSibling&&T.nextSibling.dataset,w)var G=w.dgst;w=G,c=Error(s(419)),c.stack="",c.digest=w,Ll({value:c,source:null,stack:null}),i=em(n,i,o)}else if(Yt||zl(n,i,o,!1),w=(o&n.childLanes)!==0,Yt||w){if(w=ft,w!==null&&(c=o&-o,c=(c&42)!==0?1:vl(c),c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,to(n,c),Ln(w,n,c),Zv;T.data==="$?"||vm(),i=em(n,i,o)}else T.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=I.treeContext,Et=hs(T.nextSibling),En=i,tt=!0,ra=null,Cs=!1,n!==null&&(Yn[Wn++]=Zs,Yn[Wn++]=er,Yn[Wn++]=na,Zs=n.id,er=n.overflow,na=i),i=Zf(i,c.children),i.flags|=4096);return i}return f?($r(),f=c.fallback,T=i.mode,I=n.child,G=I.sibling,c=Js(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,G!==null?f=Js(G,f):(f=ta(f,T,o,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,T=n.child.memoizedState,T===null?T=Xf(o):(I=T.cachePool,I!==null?(G=qt._currentValue,I=I.parent!==G?{parent:G,pool:G}:I):I=Qy(),T={baseLanes:T.baseLanes|o,cachePool:I}),f.memoizedState=T,f.childLanes=Jf(n,w,o),i.memoizedState=Wf,c):(qr(i),o=n.child,n=o.sibling,o=Js(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=o,i.memoizedState=null,o)}function Zf(n,i){return i=eh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function eh(n,i){return n=Dn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function em(n,i,o){return fo(i,n.child,null,o),n=Zf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function c_(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),vf(n.return,i,o)}function tm(n,i,o,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=o,p.tailMode=f)}function u_(n,i,o){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(sn(n,i,c.children,o),c=$t.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&c_(n,o,i);else if(n.tag===19)c_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(P($t,c),f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Wu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),tm(i,!1,f,o,p);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Wu(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}tm(i,!0,o,null,p);break;case"together":tm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ir(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Qr|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(zl(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=Js(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Js(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function nm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Du(n)))}function BT(n,i,o){switch(i.tag){case 3:et(i,i.stateNode.containerInfo),Vr(i,qt,n.memoizedState.cache),Ul();break;case 27:case 5:_s(i);break;case 4:et(i,i.stateNode.containerInfo);break;case 10:Vr(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(qr(i),i.flags|=128,null):(o&i.child.childLanes)!==0?l_(n,i,o):(qr(i),n=ir(n,i,o),n!==null?n.sibling:null);qr(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(zl(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return u_(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),P($t,$t.current),c)break;return null;case 22:case 23:return i.lanes=0,s_(n,i,o);case 24:Vr(i,qt,n.memoizedState.cache)}return ir(n,i,o)}function h_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Yt=!0;else{if(!nm(n,o)&&(i.flags&128)===0)return Yt=!1,BT(n,i,o);Yt=(n.flags&131072)!==0}else Yt=!1,tt&&(i.flags&1048576)!==0&&By(i,Ou,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")hf(c)?(n=ua(c,n),i.tag=1,i=a_(null,i,c,n,o)):(i.tag=0,i=Yf(null,i,c,n,o));else{if(c!=null){if(f=c.$$typeof,f===le){i.tag=11,i=e_(null,i,c,n,o);break e}else if(f===C){i.tag=14,i=t_(null,i,c,n,o);break e}}throw i=We(c)||c,Error(s(306,i,""))}}return i;case 0:return Yf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=ua(c,i.pendingProps),a_(n,i,c,f,o);case 3:e:{if(et(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Sf(n,i),Kl(i,c,null,o);var w=i.memoizedState;if(c=w.cache,Vr(i,qt,c),c!==p.cache&&_f(i,[qt],o,!0),Gl(),c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=o_(n,i,c,o);break e}else if(c!==f){f=Kn(Error(s(424)),i),Ll(f),i=o_(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Et=hs(n.firstChild),En=i,tt=!0,ra=null,Cs=!0,o=$v(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ul(),c===f){i=ir(n,i,o);break e}sn(n,i,c,o)}i=i.child}return i;case 26:return Zu(n,i),n===null?(o=g0(i.type,null,i.pendingProps,null))?i.memoizedState=o:tt||(o=i.type,n=i.pendingProps,c=mh(ve.current).createElement(o),c[At]=i,c[nn]=n,an(c,o,n),Nt(c),i.stateNode=c):i.memoizedState=g0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return _s(i),n===null&&tt&&(c=i.stateNode=d0(i.type,i.pendingProps,ve.current),En=i,Cs=!0,f=Et,Jr(i.type)?(Mm=f,Et=hs(c.firstChild)):Et=f),sn(n,i,i.pendingProps.children,o),Zu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&tt&&((f=c=Et)&&(c=gS(c,i.type,i.pendingProps,Cs),c!==null?(i.stateNode=c,En=i,Et=hs(c.firstChild),Cs=!1,f=!0):f=!1),f||ia(i)),_s(i),f=i.type,p=i.pendingProps,w=n!==null?n.memoizedProps:null,c=p.children,jm(f,p)?c=null:w!==null&&jm(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=If(n,i,OT,null,null,o),gc._currentValue=f),Zu(n,i),sn(n,i,c,o),i.child;case 6:return n===null&&tt&&((n=o=Et)&&(o=pS(o,i.pendingProps,Cs),o!==null?(i.stateNode=o,En=i,Et=null,n=!0):n=!1),n||ia(i)),null;case 13:return l_(n,i,o);case 4:return et(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=fo(i,null,c,o):sn(n,i,c,o),i.child;case 11:return e_(n,i,i.type,i.pendingProps,o);case 7:return sn(n,i,i.pendingProps,o),i.child;case 8:return sn(n,i,i.pendingProps.children,o),i.child;case 12:return sn(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Vr(i,i.type,c.value),sn(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,oa(i),f=fn(f),c=c(f),i.flags|=1,sn(n,i,c,o),i.child;case 14:return t_(n,i,i.type,i.pendingProps,o);case 15:return n_(n,i,i.type,i.pendingProps,o);case 19:return u_(n,i,o);case 31:return c=i.pendingProps,o=i.mode,c={mode:c.mode,children:c.children},n===null?(o=eh(c,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=Js(n.child,c),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return s_(n,i,o);case 24:return oa(i),c=fn(qt),n===null?(f=xf(),f===null&&(f=ft,p=bf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:c,cache:f},Tf(i),Vr(i,qt,f)):((n.lanes&o)!==0&&(Sf(n,i),Kl(i,null,null,o),Gl()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Vr(i,qt,c)):(c=p.cache,Vr(i,qt,c),c!==f.cache&&_f(i,[qt],o,!0))),sn(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ar(n){n.flags|=4}function d_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!b0(i)){if(i=Xn.current,i!==null&&((Xe&4194048)===Xe?Is!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||i!==Is))throw Hl=Ef,Yy;n.flags|=8192}}function th(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Tr():536870912,n.lanes|=i,yo|=i)}function ec(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function wt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function qT(n,i,o){var c=i.pendingProps;switch(gf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(i),null;case 1:return wt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),nr(qt),un(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Vl(i)?ar(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hy())),wt(i),null;case 26:return o=i.memoizedState,n===null?(ar(i),o!==null?(wt(i),d_(i,o)):(wt(i),i.flags&=-16777217)):o?o!==n.memoizedState?(ar(i),wt(i),d_(i,o)):(wt(i),i.flags&=-16777217):(n.memoizedProps!==c&&ar(i),wt(i),i.flags&=-16777217),null;case 27:bs(i),o=ve.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ar(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return wt(i),null}n=ae.current,Vl(i)?qy(i):(n=d0(f,c,o),i.stateNode=n,ar(i))}return wt(i),null;case 5:if(bs(i),o=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ar(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return wt(i),null}if(n=ae.current,Vl(i))qy(i);else{switch(f=mh(ve.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}n[At]=i,n[nn]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(an(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ar(i)}}return wt(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ar(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=ve.current,Vl(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=En,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[At]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||i0(n.nodeValue,o)),n||ia(i)}else n=mh(n).createTextNode(c),n[At]=i,i.stateNode=n}return wt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Vl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[At]=i}else Ul(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),f=!1}else f=Hy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(rr(i),i):(rr(i),null)}if(rr(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return o!==n&&o&&(i.child.flags|=8192),th(i,i.updateQueue),wt(i),null;case 4:return un(),n===null&&Nm(i.stateNode.containerInfo),wt(i),null;case 10:return nr(i.type),wt(i),null;case 19:if(he($t),f=i.memoizedState,f===null)return wt(i),null;if(c=(i.flags&128)!==0,p=f.rendering,p===null)if(c)ec(f,!1);else{if(Tt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Wu(n),p!==null){for(i.flags|=128,ec(f,!1),n=p.updateQueue,i.updateQueue=n,th(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)zy(o,n),o=o.sibling;return P($t,$t.current&1|2),i.child}n=n.sibling}f.tail!==null&&Tn()>rh&&(i.flags|=128,c=!0,ec(f,!1),i.lanes=4194304)}else{if(!c)if(n=Wu(p),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,th(i,n),ec(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!tt)return wt(i),null}else 2*Tn()-f.renderingStartTime>rh&&o!==536870912&&(i.flags|=128,c=!0,ec(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Tn(),i.sibling=null,n=$t.current,P($t,c?n&1|2:n&1),i):(wt(i),null);case 22:case 23:return rr(i),kf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(wt(i),i.subtreeFlags&6&&(i.flags|=8192)):wt(i),o=i.updateQueue,o!==null&&th(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&he(la),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),nr(qt),wt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function $T(n,i){switch(gf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return nr(qt),un(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return bs(i),null;case 13:if(rr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ul()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he($t),null;case 4:return un(),null;case 10:return nr(i.type),null;case 22:case 23:return rr(i),kf(),n!==null&&he(la),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return nr(qt),null;case 25:return null;default:return null}}function f_(n,i){switch(gf(i),i.tag){case 3:nr(qt),un();break;case 26:case 27:case 5:bs(i);break;case 4:un();break;case 13:rr(i);break;case 19:he($t);break;case 10:nr(i.type);break;case 22:case 23:rr(i),kf(),n!==null&&he(la);break;case 24:nr(qt)}}function tc(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var p=o.create,w=o.inst;c=p(),w.destroy=c}o=o.next}while(o!==f)}}catch(T){ht(i,i.return,T)}}function Hr(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var w=c.inst,T=w.destroy;if(T!==void 0){w.destroy=void 0,f=i;var I=o,G=T;try{G()}catch(X){ht(f,I,X)}}}c=c.next}while(c!==p)}}catch(X){ht(i,i.return,X)}}function m_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{tv(i,o)}catch(c){ht(n,n.return,c)}}}function g_(n,i,o){o.props=ua(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ht(n,i,c)}}function nc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){ht(n,i,f)}}function js(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){ht(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ht(n,i,f)}else o.current=null}function p_(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){ht(n,n.return,f)}}function sm(n,i,o){try{var c=n.stateNode;uS(c,n.type,o,i),c[nn]=i}catch(f){ht(n,n.return,f)}}function y_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Jr(n.type)||n.tag===4}function rm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Jr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function im(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=fh));else if(c!==4&&(c===27&&Jr(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(im(n,i,o),n=n.sibling;n!==null;)im(n,i,o),n=n.sibling}function nh(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&Jr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(nh(n,i,o),n=n.sibling;n!==null;)nh(n,i,o),n=n.sibling}function v_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);an(i,c,o),i[At]=n,i[nn]=o}catch(p){ht(n,n.return,p)}}var or=!1,Ct=!1,am=!1,__=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function HT(n,i){if(n=n.containerInfo,Cm=bh,n=Cy(n),sf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,T=-1,I=-1,G=0,X=0,te=n,K=null;t:for(;;){for(var Q;te!==o||f!==0&&te.nodeType!==3||(T=w+f),te!==p||c!==0&&te.nodeType!==3||(I=w+c),te.nodeType===3&&(w+=te.nodeValue.length),(Q=te.firstChild)!==null;)K=te,te=Q;for(;;){if(te===n)break t;if(K===o&&++G===f&&(T=w),K===p&&++X===c&&(I=w),(Q=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=Q}o=T===-1||I===-1?null:{start:T,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(Im={focusedElem:n,selectionRange:o},bh=!1,Wt=i;Wt!==null;)if(i=Wt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Wt=n;else for(;Wt!==null;){switch(i=Wt,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var Ce=ua(o.type,f,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(Ce,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ne){ht(o,o.return,Ne)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Dm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Wt=n;break}Wt=i.return}}function b_(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Fr(n,o),c&4&&tc(5,o);break;case 1:if(Fr(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(w){ht(o,o.return,w)}else{var f=ua(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){ht(o,o.return,w)}}c&64&&m_(o),c&512&&nc(o,o.return);break;case 3:if(Fr(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{tv(n,i)}catch(w){ht(o,o.return,w)}}break;case 27:i===null&&c&4&&v_(o);case 26:case 5:Fr(n,o),i===null&&c&4&&p_(o),c&512&&nc(o,o.return);break;case 12:Fr(n,o);break;case 13:Fr(n,o),c&4&&E_(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=ZT.bind(null,o),yS(n,o))));break;case 22:if(c=o.memoizedState!==null||or,!c){i=i!==null&&i.memoizedState!==null||Ct,f=or;var p=Ct;or=c,(Ct=i)&&!p?Gr(n,o,(o.subtreeFlags&8772)!==0):Fr(n,o),or=f,Ct=p}break;case 30:break;default:Fr(n,o)}}function w_(n){var i=n.alternate;i!==null&&(n.alternate=null,w_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&za(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vt=null,An=!1;function lr(n,i,o){for(o=o.child;o!==null;)x_(n,i,o),o=o.sibling}function x_(n,i,o){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(wr,o)}catch{}switch(o.tag){case 26:Ct||js(o,i),lr(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ct||js(o,i);var c=vt,f=An;Jr(o.type)&&(vt=o.stateNode,An=!1),lr(n,i,o),hc(o.stateNode),vt=c,An=f;break;case 5:Ct||js(o,i);case 6:if(c=vt,f=An,vt=null,lr(n,i,o),vt=c,An=f,vt!==null)if(An)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(p){ht(o,i,p)}else try{vt.removeChild(o.stateNode)}catch(p){ht(o,i,p)}break;case 18:vt!==null&&(An?(n=vt,u0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),_c(n)):u0(vt,o.stateNode));break;case 4:c=vt,f=An,vt=o.stateNode.containerInfo,An=!0,lr(n,i,o),vt=c,An=f;break;case 0:case 11:case 14:case 15:Ct||Hr(2,o,i),Ct||Hr(4,o,i),lr(n,i,o);break;case 1:Ct||(js(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&g_(o,i,c)),lr(n,i,o);break;case 21:lr(n,i,o);break;case 22:Ct=(c=Ct)||o.memoizedState!==null,lr(n,i,o),Ct=c;break;default:lr(n,i,o)}}function E_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_c(n)}catch(o){ht(i,i.return,o)}}function FT(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new __),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new __),i;default:throw Error(s(435,n.tag))}}function om(n,i){var o=FT(n);i.forEach(function(c){var f=eS.bind(null,n,c);o.has(c)||(o.add(c),c.then(f,f))})}function Pn(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],p=n,w=i,T=w;e:for(;T!==null;){switch(T.tag){case 27:if(Jr(T.type)){vt=T.stateNode,An=!1;break e}break;case 5:vt=T.stateNode,An=!1;break e;case 3:case 4:vt=T.stateNode.containerInfo,An=!0;break e}T=T.return}if(vt===null)throw Error(s(160));x_(p,w,f),vt=null,An=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)T_(i,n),i=i.sibling}var us=null;function T_(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pn(i,n),Mn(n),c&4&&(Hr(3,n,n.return),tc(3,n),Hr(5,n,n.return));break;case 1:Pn(i,n),Mn(n),c&512&&(Ct||o===null||js(o,o.return)),c&64&&or&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=us;if(Pn(i,n),Mn(n),c&512&&(Ct||o===null||js(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Nr]||p[At]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),an(p,c,o),p[At]=n,Nt(p),c=p;break e;case"link":var w=v0("link","href",f).get(c+(o.href||""));if(w){for(var T=0;T<w.length;T++)if(p=w[T],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(T,1);break t}}p=f.createElement(c),an(p,c,o),f.head.appendChild(p);break;case"meta":if(w=v0("meta","content",f).get(c+(o.content||""))){for(T=0;T<w.length;T++)if(p=w[T],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(T,1);break t}}p=f.createElement(c),an(p,c,o),f.head.appendChild(p);break;default:throw Error(s(468,c))}p[At]=n,Nt(p),c=p}n.stateNode=c}else _0(f,n.type,n.stateNode);else n.stateNode=y0(f,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?_0(f,n.type,n.stateNode):y0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&sm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Pn(i,n),Mn(n),c&512&&(Ct||o===null||js(o,o.return)),o!==null&&c&4&&sm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Pn(i,n),Mn(n),c&512&&(Ct||o===null||js(o,o.return)),n.flags&32){f=n.stateNode;try{Fn(f,"")}catch(Q){ht(n,n.return,Q)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,sm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(am=!0);break;case 6:if(Pn(i,n),Mn(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Q){ht(n,n.return,Q)}}break;case 3:if(yh=null,f=us,us=gh(i.containerInfo),Pn(i,n),us=f,Mn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{_c(i.containerInfo)}catch(Q){ht(n,n.return,Q)}am&&(am=!1,S_(n));break;case 4:c=us,us=gh(n.stateNode.containerInfo),Pn(i,n),Mn(n),us=c;break;case 12:Pn(i,n),Mn(n);break;case 13:Pn(i,n),Mn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(fm=Tn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,om(n,c)));break;case 22:f=n.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,G=or,X=Ct;if(or=G||f,Ct=X||I,Pn(i,n),Ct=X,or=G,Mn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||I||or||Ct||ha(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){I=o=i;try{if(p=I.stateNode,f)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{T=I.stateNode;var te=I.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){ht(I,I.return,Q)}}}else if(i.tag===6){if(o===null){I=i;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(Q){ht(I,I.return,Q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,om(n,o))));break;case 19:Pn(i,n),Mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,om(n,c)));break;case 30:break;case 21:break;default:Pn(i,n),Mn(n)}}function Mn(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(y_(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,p=rm(n);nh(n,p,f);break;case 5:var w=o.stateNode;o.flags&32&&(Fn(w,""),o.flags&=-33);var T=rm(n);nh(n,T,w);break;case 3:case 4:var I=o.stateNode.containerInfo,G=rm(n);im(n,G,I);break;default:throw Error(s(161))}}catch(X){ht(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function S_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;S_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Fr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)b_(n,i.alternate,i),i=i.sibling}function ha(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Hr(4,i,i.return),ha(i);break;case 1:js(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&g_(i,i.return,o),ha(i);break;case 27:hc(i.stateNode);case 26:case 5:js(i,i.return),ha(i);break;case 22:i.memoizedState===null&&ha(i);break;case 30:ha(i);break;default:ha(i)}n=n.sibling}}function Gr(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:Gr(f,p,o),tc(4,p);break;case 1:if(Gr(f,p,o),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){ht(c,c.return,G)}if(c=p,f=c.updateQueue,f!==null){var T=c.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)ev(I[f],T)}catch(G){ht(c,c.return,G)}}o&&w&64&&m_(p),nc(p,p.return);break;case 27:v_(p);case 26:case 5:Gr(f,p,o),o&&c===null&&w&4&&p_(p),nc(p,p.return);break;case 12:Gr(f,p,o);break;case 13:Gr(f,p,o),o&&w&4&&E_(f,p);break;case 22:p.memoizedState===null&&Gr(f,p,o),nc(p,p.return);break;case 30:break;default:Gr(f,p,o)}i=i.sibling}}function lm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Bl(o))}function cm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Bl(n))}function Os(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)A_(n,i,o,c),i=i.sibling}function A_(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Os(n,i,o,c),f&2048&&tc(9,i);break;case 1:Os(n,i,o,c);break;case 3:Os(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Bl(n)));break;case 12:if(f&2048){Os(n,i,o,c),n=i.stateNode;try{var p=i.memoizedProps,w=p.id,T=p.onPostCommit;typeof T=="function"&&T(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){ht(i,i.return,I)}}else Os(n,i,o,c);break;case 13:Os(n,i,o,c);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?Os(n,i,o,c):sc(n,i):p._visibility&2?Os(n,i,o,c):(p._visibility|=2,mo(n,i,o,c,(i.subtreeFlags&10256)!==0)),f&2048&&lm(w,i);break;case 24:Os(n,i,o,c),f&2048&&cm(i.alternate,i);break;default:Os(n,i,o,c)}}function mo(n,i,o,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,w=i,T=o,I=c,G=w.flags;switch(w.tag){case 0:case 11:case 15:mo(p,w,T,I,f),tc(8,w);break;case 23:break;case 22:var X=w.stateNode;w.memoizedState!==null?X._visibility&2?mo(p,w,T,I,f):sc(p,w):(X._visibility|=2,mo(p,w,T,I,f)),f&&G&2048&&lm(w.alternate,w);break;case 24:mo(p,w,T,I,f),f&&G&2048&&cm(w.alternate,w);break;default:mo(p,w,T,I,f)}i=i.sibling}}function sc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:sc(o,c),f&2048&&lm(c.alternate,c);break;case 24:sc(o,c),f&2048&&cm(c.alternate,c);break;default:sc(o,c)}i=i.sibling}}var rc=8192;function go(n){if(n.subtreeFlags&rc)for(n=n.child;n!==null;)N_(n),n=n.sibling}function N_(n){switch(n.tag){case 26:go(n),n.flags&rc&&n.memoizedState!==null&&CS(us,n.memoizedState,n.memoizedProps);break;case 5:go(n);break;case 3:case 4:var i=us;us=gh(n.stateNode.containerInfo),go(n),us=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=rc,rc=16777216,go(n),rc=i):go(n));break;default:go(n)}}function R_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ic(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Wt=c,C_(c,n)}R_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)k_(n),n=n.sibling}function k_(n){switch(n.tag){case 0:case 11:case 15:ic(n),n.flags&2048&&Hr(9,n,n.return);break;case 3:ic(n);break;case 12:ic(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,sh(n)):ic(n);break;default:ic(n)}}function sh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];Wt=c,C_(c,n)}R_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Hr(8,i,i.return),sh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,sh(i));break;default:sh(i)}n=n.sibling}}function C_(n,i){for(;Wt!==null;){var o=Wt;switch(o.tag){case 0:case 11:case 15:Hr(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Bl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Wt=c;else e:for(o=n;Wt!==null;){c=Wt;var f=c.sibling,p=c.return;if(w_(c),c===o){Wt=null;break e}if(f!==null){f.return=p,Wt=f;break e}Wt=p}}}var GT={getCacheForType:function(n){var i=fn(qt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o}},KT=typeof WeakMap=="function"?WeakMap:Map,rt=0,ft=null,Fe=null,Xe=0,it=0,Vn=null,Kr=!1,po=!1,um=!1,cr=0,Tt=0,Qr=0,da=0,hm=0,Jn=0,yo=0,ac=null,Nn=null,dm=!1,fm=0,rh=1/0,ih=null,Yr=null,rn=0,Wr=null,vo=null,_o=0,mm=0,gm=null,I_=null,oc=0,pm=null;function Un(){if((rt&2)!==0&&Xe!==0)return Xe&-Xe;if(U.T!==null){var n=io;return n!==0?n:Em()}return Fs()}function j_(){Jn===0&&(Jn=(Xe&536870912)===0||tt?yl():536870912);var n=Xn.current;return n!==null&&(n.flags|=32),Jn}function Ln(n,i,o){(n===ft&&(it===2||it===9)||n.cancelPendingCommit!==null)&&(bo(n,0),Xr(n,Xe,Jn,!1)),St(n,o),((rt&2)===0||n!==ft)&&(n===ft&&((rt&2)===0&&(da|=o),Tt===4&&Xr(n,Xe,Jn,!1)),Ds(n))}function O_(n,i,o){if((rt&6)!==0)throw Error(s(327));var c=!o&&(i&124)===0&&(i&n.expiredLanes)===0||Er(n,i),f=c?WT(n,i):_m(n,i,!0),p=c;do{if(f===0){po&&!c&&Xr(n,i,0,!1);break}else{if(o=n.current.alternate,p&&!QT(o)){f=_m(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var T=n;f=ac;var I=T.current.memoizedState.isDehydrated;if(I&&(bo(T,w).flags|=256),w=_m(T,w,!1),w!==2){if(um&&!I){T.errorRecoveryDisabledLanes|=p,da|=p,f=4;break e}p=Nn,Nn=f,p!==null&&(Nn===null?Nn=p:Nn.push.apply(Nn,p))}f=w}if(p=!1,f!==2)continue}}if(f===1){bo(n,0),Xr(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Xr(c,i,Jn,!Kr);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=fm+300-Tn(),10<f)){if(Xr(c,i,Jn,!Kr),$n(c,0,!0)!==0)break e;c.timeoutHandle=l0(D_.bind(null,c,o,Nn,ih,dm,i,Jn,da,yo,Kr,p,2,-0,0),f);break e}D_(c,o,Nn,ih,dm,i,Jn,da,yo,Kr,p,0,-0,0)}}break}while(!0);Ds(n)}function D_(n,i,o,c,f,p,w,T,I,G,X,te,K,Q){if(n.timeoutHandle=-1,te=i.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(mc={stylesheets:null,count:0,unsuspend:kS},N_(i),te=IS(),te!==null)){n.cancelPendingCommit=te(B_.bind(null,n,i,p,o,c,f,w,T,I,X,1,K,Q)),Xr(n,p,w,!G);return}B_(n,i,p,o,c,f,w,T,I)}function QT(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],p=f.getSnapshot;f=f.value;try{if(!On(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xr(n,i,o,c){i&=~hm,i&=~da,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-_n(f),w=1<<p;c[p]=-1,f&=~w}o!==0&&Sr(n,o,i)}function ah(){return(rt&6)===0?(lc(0),!1):!0}function ym(){if(Fe!==null){if(it===0)var n=Fe.return;else n=Fe,tr=aa=null,Df(n),ho=null,Jl=0,n=Fe;for(;n!==null;)f_(n.alternate,n),n=n.return;Fe=null}}function bo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,dS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ym(),ft=n,Fe=o=Js(n.current,null),Xe=i,it=0,Vn=null,Kr=!1,po=Er(n,i),um=!1,yo=Jn=hm=da=Qr=Tt=0,Nn=ac=null,dm=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-_n(c),p=1<<f;i|=n[f],c&=~p}return cr=i,Ru(),o}function P_(n,i){Be=null,U.H=Ku,i===$l||i===Vu?(i=Jy(),it=3):i===Yy?(i=Jy(),it=4):it=i===Zv?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Fe===null&&(Tt=1,Ju(n,Kn(i,n.current)))}function M_(){var n=U.H;return U.H=Ku,n===null?Ku:n}function V_(){var n=U.A;return U.A=GT,n}function vm(){Tt=4,Kr||(Xe&4194048)!==Xe&&Xn.current!==null||(po=!0),(Qr&134217727)===0&&(da&134217727)===0||ft===null||Xr(ft,Xe,Jn,!1)}function _m(n,i,o){var c=rt;rt|=2;var f=M_(),p=V_();(ft!==n||Xe!==i)&&(ih=null,bo(n,i)),i=!1;var w=Tt;e:do try{if(it!==0&&Fe!==null){var T=Fe,I=Vn;switch(it){case 8:ym(),w=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(i=!0);var G=it;if(it=0,Vn=null,wo(n,T,I,G),o&&po){w=0;break e}break;default:G=it,it=0,Vn=null,wo(n,T,I,G)}}YT(),w=Tt;break}catch(X){P_(n,X)}while(!0);return i&&n.shellSuspendCounter++,tr=aa=null,rt=c,U.H=f,U.A=p,Fe===null&&(ft=null,Xe=0,Ru()),w}function YT(){for(;Fe!==null;)U_(Fe)}function WT(n,i){var o=rt;rt|=2;var c=M_(),f=V_();ft!==n||Xe!==i?(ih=null,rh=Tn()+500,bo(n,i)):po=Er(n,i);e:do try{if(it!==0&&Fe!==null){i=Fe;var p=Vn;t:switch(it){case 1:it=0,Vn=null,wo(n,i,p,1);break;case 2:case 9:if(Wy(p)){it=0,Vn=null,L_(i);break}i=function(){it!==2&&it!==9||ft!==n||(it=7),Ds(n)},p.then(i,i);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Wy(p)?(it=0,Vn=null,L_(i)):(it=0,Vn=null,wo(n,i,p,7));break;case 5:var w=null;switch(Fe.tag){case 26:w=Fe.memoizedState;case 5:case 27:var T=Fe;if(!w||b0(w)){it=0,Vn=null;var I=T.sibling;if(I!==null)Fe=I;else{var G=T.return;G!==null?(Fe=G,oh(G)):Fe=null}break t}}it=0,Vn=null,wo(n,i,p,5);break;case 6:it=0,Vn=null,wo(n,i,p,6);break;case 8:ym(),Tt=6;break e;default:throw Error(s(462))}}XT();break}catch(X){P_(n,X)}while(!0);return tr=aa=null,U.H=c,U.A=f,rt=o,Fe!==null?0:(ft=null,Xe=0,Ru(),Tt)}function XT(){for(;Fe!==null&&!Gd();)U_(Fe)}function U_(n){var i=h_(n.alternate,n,cr);n.memoizedProps=n.pendingProps,i===null?oh(n):Fe=i}function L_(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=i_(o,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=i_(o,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:Df(i);default:f_(o,i),i=Fe=zy(i,cr),i=h_(o,i,cr)}n.memoizedProps=n.pendingProps,i===null?oh(n):Fe=i}function wo(n,i,o,c){tr=aa=null,Df(i),ho=null,Jl=0;var f=i.return;try{if(zT(n,f,i,o,Xe)){Tt=1,Ju(n,Kn(o,n.current)),Fe=null;return}}catch(p){if(f!==null)throw Fe=f,p;Tt=1,Ju(n,Kn(o,n.current)),Fe=null;return}i.flags&32768?(tt||c===1?n=!0:po||(Xe&536870912)!==0?n=!1:(Kr=n=!0,(c===2||c===9||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),z_(i,n)):oh(i)}function oh(n){var i=n;do{if((i.flags&32768)!==0){z_(i,Kr);return}n=i.return;var o=qT(i.alternate,i,cr);if(o!==null){Fe=o;return}if(i=i.sibling,i!==null){Fe=i;return}Fe=i=n}while(i!==null);Tt===0&&(Tt=5)}function z_(n,i){do{var o=$T(n.alternate,n);if(o!==null){o.flags&=32767,Fe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Fe=n;return}Fe=n=o}while(n!==null);Tt=6,Fe=null}function B_(n,i,o,c,f,p,w,T,I){n.cancelPendingCommit=null;do lh();while(rn!==0);if((rt&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=cf,hu(n,o,p,w,T,I),n===ft&&(Fe=ft=null,Xe=0),vo=i,Wr=n,_o=o,mm=p,gm=f,I_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,tS(Hs,function(){return G_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=U.T,U.T=null,f=ie.p,ie.p=2,w=rt,rt|=4;try{HT(n,i,o)}finally{rt=w,ie.p=f,U.T=c}}rn=1,q_(),$_(),H_()}}function q_(){if(rn===1){rn=0;var n=Wr,i=vo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=U.T,U.T=null;var c=ie.p;ie.p=2;var f=rt;rt|=4;try{T_(i,n);var p=Im,w=Cy(n.containerInfo),T=p.focusedElem,I=p.selectionRange;if(w!==T&&T&&T.ownerDocument&&ky(T.ownerDocument.documentElement,T)){if(I!==null&&sf(T)){var G=I.start,X=I.end;if(X===void 0&&(X=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(X,T.value.length);else{var te=T.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Ce=T.textContent.length,Ne=Math.min(I.start,Ce),ct=I.end===void 0?Ne:Math.min(I.end,Ce);!Q.extend&&Ne>ct&&(w=ct,ct=Ne,Ne=w);var q=Ry(T,Ne),L=Ry(T,ct);if(q&&L&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var H=te.createRange();H.setStart(q.node,q.offset),Q.removeAllRanges(),Ne>ct?(Q.addRange(H),Q.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Q.addRange(H))}}}}for(te=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&te.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var Z=te[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}bh=!!Cm,Im=Cm=null}finally{rt=f,ie.p=c,U.T=o}}n.current=i,rn=2}}function $_(){if(rn===2){rn=0;var n=Wr,i=vo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=U.T,U.T=null;var c=ie.p;ie.p=2;var f=rt;rt|=4;try{b_(n,i.alternate,i)}finally{rt=f,ie.p=c,U.T=o}}rn=3}}function H_(){if(rn===4||rn===3){rn=0,gl();var n=Wr,i=vo,o=_o,c=I_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?rn=5:(rn=0,vo=Wr=null,F_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Yr=null),_l(o),i=i.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(wr,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=U.T,f=ie.p,ie.p=2,U.T=null;try{for(var p=n.onRecoverableError,w=0;w<c.length;w++){var T=c[w];p(T.value,{componentStack:T.stack})}}finally{U.T=i,ie.p=f}}(_o&3)!==0&&lh(),Ds(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===pm?oc++:(oc=0,pm=n):oc=0,lc(0)}}function F_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Bl(i)))}function lh(n){return q_(),$_(),H_(),G_()}function G_(){if(rn!==5)return!1;var n=Wr,i=mm;mm=0;var o=_l(_o),c=U.T,f=ie.p;try{ie.p=32>o?32:o,U.T=null,o=gm,gm=null;var p=Wr,w=_o;if(rn=0,vo=Wr=null,_o=0,(rt&6)!==0)throw Error(s(331));var T=rt;if(rt|=4,k_(p.current),A_(p,p.current,w,o),rt=T,lc(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(wr,p)}catch{}return!0}finally{ie.p=f,U.T=c,F_(n,i)}}function K_(n,i,o){i=Kn(o,i),i=Qf(n.stateNode,i,2),n=zr(n,i,2),n!==null&&(St(n,2),Ds(n))}function ht(n,i,o){if(n.tag===3)K_(n,n,o);else for(;i!==null;){if(i.tag===3){K_(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yr===null||!Yr.has(c))){n=Kn(o,n),o=Xv(2),c=zr(i,o,2),c!==null&&(Jv(o,c,i,n),St(c,2),Ds(c));break}}i=i.return}}function bm(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new KT;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(um=!0,f.add(o),n=JT.bind(null,n,i,o),i.then(n,n))}function JT(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ft===n&&(Xe&o)===o&&(Tt===4||Tt===3&&(Xe&62914560)===Xe&&300>Tn()-fm?(rt&2)===0&&bo(n,0):hm|=o,yo===Xe&&(yo=0)),Ds(n)}function Q_(n,i){i===0&&(i=Tr()),n=to(n,i),n!==null&&(St(n,i),Ds(n))}function ZT(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Q_(n,o)}function eS(n,i){var o=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Q_(n,o)}function tS(n,i){return Ii(n,i)}var ch=null,xo=null,wm=!1,uh=!1,xm=!1,fa=0;function Ds(n){n!==xo&&n.next===null&&(xo===null?ch=xo=n:xo=xo.next=n),uh=!0,wm||(wm=!0,sS())}function lc(n,i){if(!xm&&uh){xm=!0;do for(var o=!1,c=ch;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var w=c.suspendedLanes,T=c.pingedLanes;p=(1<<31-_n(42|n)+1)-1,p&=f&~(w&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,J_(c,p))}else p=Xe,p=$n(c,c===ft?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Er(c,p)||(o=!0,J_(c,p));c=c.next}while(o);xm=!1}}function nS(){Y_()}function Y_(){uh=wm=!1;var n=0;fa!==0&&(hS()&&(n=fa),fa=0);for(var i=Tn(),o=null,c=ch;c!==null;){var f=c.next,p=W_(c,i);p===0?(c.next=null,o===null?ch=f:o.next=f,f===null&&(xo=o)):(o=c,(n!==0||(p&3)!==0)&&(uh=!0)),c=f}lc(n)}function W_(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var w=31-_n(p),T=1<<w,I=f[w];I===-1?((T&o)===0||(T&c)!==0)&&(f[w]=Ua(T,i)):I<=i&&(n.expiredLanes|=T),p&=~T}if(i=ft,o=Xe,o=$n(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(it===2||it===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Va(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Er(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Va(c),_l(o)){case 2:case 8:o=Kt;break;case 32:o=Hs;break;case 268435456:o=pl;break;default:o=Hs}return c=X_.bind(null,n),o=Ii(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Va(c),n.callbackPriority=2,n.callbackNode=null,2}function X_(n,i){if(rn!==0&&rn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(lh()&&n.callbackNode!==o)return null;var c=Xe;return c=$n(n,n===ft?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(O_(n,c,i),W_(n,Tn()),n.callbackNode!=null&&n.callbackNode===o?X_.bind(null,n):null)}function J_(n,i){if(lh())return null;O_(n,i,!0)}function sS(){fS(function(){(rt&6)!==0?Ii(zt,nS):Y_()})}function Em(){return fa===0&&(fa=yl()),fa}function Z_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:is(""+n)}function e0(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function rS(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var p=Z_((f[nn]||null).action),w=c.submitter;w&&(i=(i=w[nn]||null)?Z_(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var T=new Gi("action","action",null,c,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fa!==0){var I=w?e0(f,w):new FormData(f);$f(o,{pending:!0,data:I,method:f.method,action:p},null,I)}}else typeof p=="function"&&(T.preventDefault(),I=w?e0(f,w):new FormData(f),$f(o,{pending:!0,data:I,method:f.method,action:p},p,I))},currentTarget:f}]})}}for(var Tm=0;Tm<lf.length;Tm++){var Sm=lf[Tm],iS=Sm.toLowerCase(),aS=Sm[0].toUpperCase()+Sm.slice(1);cs(iS,"on"+aS)}cs(Oy,"onAnimationEnd"),cs(Dy,"onAnimationIteration"),cs(Py,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(ET,"onTransitionRun"),cs(TT,"onTransitionStart"),cs(ST,"onTransitionCancel"),cs(My,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function t0(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var T=c[w],I=T.instance,G=T.currentTarget;if(T=T.listener,I!==p&&f.isPropagationStopped())break e;p=T,f.currentTarget=G;try{p(f)}catch(X){Xu(X)}f.currentTarget=null,p=I}else for(w=0;w<c.length;w++){if(T=c[w],I=T.instance,G=T.currentTarget,T=T.listener,I!==p&&f.isPropagationStopped())break e;p=T,f.currentTarget=G;try{p(f)}catch(X){Xu(X)}f.currentTarget=null,p=I}}}}function Ge(n,i){var o=i[Oi];o===void 0&&(o=i[Oi]=new Set);var c=n+"__bubble";o.has(c)||(n0(i,n,2,!1),o.add(c))}function Am(n,i,o){var c=0;i&&(c|=4),n0(o,n,c,i)}var hh="_reactListening"+Math.random().toString(36).slice(2);function Nm(n){if(!n[hh]){n[hh]=!0,du.forEach(function(o){o!=="selectionchange"&&(oS.has(o)||Am(o,!1,n),Am(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[hh]||(i[hh]=!0,Am("selectionchange",!1,i))}}function n0(n,i,o,c){switch(A0(i)){case 2:var f=DS;break;case 8:f=PS;break;default:f=Bm}o=f.bind(null,i,o,n),f=void 0,!Ws||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Rm(n,i,o,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var T=c.stateNode.containerInfo;if(T===f)break;if(w===4)for(w=c.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;T!==null;){if(w=Es(T),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){c=p=w;continue e}T=T.parentNode}}c=c.return}$i(function(){var G=p,X=Al(o),te=[];e:{var K=Vy.get(n);if(K!==void 0){var Q=Gi,Ce=n;switch(n){case"keypress":if(Hi(o)===0)break e;case"keydown":case"keyup":Q=Xa;break;case"focusin":Ce="focus",Q=Qa;break;case"focusout":Ce="blur",Q=Qa;break;case"beforeblur":case"afterblur":Q=Qa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Xi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Mr;break;case Oy:case Dy:case Py:Q=Rl;break;case My:Q=_;break;case"scroll":case"scrollend":Q=Qi;break;case"wheel":Q=S;break;case"copy":case"cut":case"paste":Q=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Il;break;case"toggle":case"beforetoggle":Q=Y}var Ne=(i&4)!==0,ct=!Ne&&(n==="scroll"||n==="scrollend"),q=Ne?K!==null?K+"Capture":null:K;Ne=[];for(var L=G,H;L!==null;){var Z=L;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||q===null||(Z=Dr(L,q),Z!=null&&Ne.push(uc(L,Z,H))),ct)break;L=L.return}0<Ne.length&&(K=new Q(K,Ce,null,o,X),te.push({event:K,listeners:Ne}))}}if((i&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",K&&o!==Sl&&(Ce=o.relatedTarget||o.fromElement)&&(Es(Ce)||Ce[Gs]))break e;if((Q||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Ce=o.relatedTarget||o.toElement,Q=G,Ce=Ce?Es(Ce):null,Ce!==null&&(ct=l(Ce),Ne=Ce.tag,Ce!==ct||Ne!==5&&Ne!==27&&Ne!==6)&&(Ce=null)):(Q=null,Ce=G),Q!==Ce)){if(Ne=Xi,Z="onMouseLeave",q="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ne=Il,Z="onPointerLeave",q="onPointerEnter",L="pointer"),ct=Q==null?K:Rr(Q),H=Ce==null?K:Rr(Ce),K=new Ne(Z,L+"leave",Q,o,X),K.target=ct,K.relatedTarget=H,Z=null,Es(X)===G&&(Ne=new Ne(q,L+"enter",Ce,o,X),Ne.target=H,Ne.relatedTarget=ct,Z=Ne),ct=Z,Q&&Ce)t:{for(Ne=Q,q=Ce,L=0,H=Ne;H;H=Eo(H))L++;for(H=0,Z=q;Z;Z=Eo(Z))H++;for(;0<L-H;)Ne=Eo(Ne),L--;for(;0<H-L;)q=Eo(q),H--;for(;L--;){if(Ne===q||q!==null&&Ne===q.alternate)break t;Ne=Eo(Ne),q=Eo(q)}Ne=null}else Ne=null;Q!==null&&s0(te,K,Q,Ne,!1),Ce!==null&&ct!==null&&s0(te,ct,Ce,Ne,!0)}}e:{if(K=G?Rr(G):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var ge=xy;else if(by(K))if(Ey)ge=bT;else{ge=vT;var He=yT}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Fa(G.elementType)&&(ge=xy):ge=_T;if(ge&&(ge=ge(n,G))){wy(te,ge,o,X);break e}He&&He(n,K,G),n==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&xl(K,"number",K.value)}switch(He=G?Rr(G):window,n){case"focusin":(by(He)||He.contentEditable==="true")&&(Ja=He,rf=G,Ml=null);break;case"focusout":Ml=rf=Ja=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,Iy(te,o,X);break;case"selectionchange":if(xT)break;case"keydown":case"keyup":Iy(te,o,X)}var _e;if(Pe)e:{switch(n){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ls?as(n,o)&&(Re="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(Rt&&o.locale!=="ko"&&(ls||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ls&&(_e=vu()):(Gn=X,dt="value"in Gn?Gn.value:Gn.textContent,ls=!0)),He=dh(G,Re),0<He.length&&(Re=new Cl(Re,n,null,o,X),te.push({event:Re,listeners:He}),_e?Re.data=_e:(_e=os(o),_e!==null&&(Re.data=_e)))),(_e=st?jl(n,o):mT(n,o))&&(Re=dh(G,"onBeforeInput"),0<Re.length&&(He=new Cl("onBeforeInput","beforeinput",null,o,X),te.push({event:He,listeners:Re}),He.data=_e)),rS(te,n,G,o,X)}t0(te,i)})}function uc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function dh(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Dr(n,o),f!=null&&c.unshift(uc(n,f,p)),f=Dr(n,i),f!=null&&c.push(uc(n,f,p))),n.tag===3)return c;n=n.return}return[]}function Eo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function s0(n,i,o,c,f){for(var p=i._reactName,w=[];o!==null&&o!==c;){var T=o,I=T.alternate,G=T.stateNode;if(T=T.tag,I!==null&&I===c)break;T!==5&&T!==26&&T!==27||G===null||(I=G,f?(G=Dr(o,p),G!=null&&w.unshift(uc(o,G,I))):f||(G=Dr(o,p),G!=null&&w.push(uc(o,G,I)))),o=o.return}w.length!==0&&n.push({event:i,listeners:w})}var lS=/\r\n?/g,cS=/\u0000|\uFFFD/g;function r0(n){return(typeof n=="string"?n:""+n).replace(lS,`
`).replace(cS,"")}function i0(n,i){return i=r0(i),r0(n)===i}function fh(){}function lt(n,i,o,c,f,p){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Fn(n,""+c);break;case"className":Ui(n,"class",c);break;case"tabIndex":Ui(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ui(n,o,c);break;case"style":Tl(n,c,p);break;case"data":if(i!=="object"){Ui(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=is(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&lt(n,i,"name",f.name,f,null),lt(n,i,"formEncType",f.formEncType,f,null),lt(n,i,"formMethod",f.formMethod,f,null),lt(n,i,"formTarget",f.formTarget,f,null)):(lt(n,i,"encType",f.encType,f,null),lt(n,i,"method",f.method,f,null),lt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=is(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=fh);break;case"onScroll":c!=null&&Ge("scroll",n);break;case"onScrollEnd":c!=null&&Ge("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=is(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ge("beforetoggle",n),Ge("toggle",n),Vi(n,"popover",c);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vi(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gu.get(o)||o,Vi(n,o,c))}}function km(n,i,o,c,f,p){switch(o){case"style":Tl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&Fn(n,""+c);break;case"onScroll":c!=null&&Ge("scroll",n);break;case"onScrollEnd":c!=null&&Ge("scrollend",n);break;case"onClick":c!=null&&(n.onclick=fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=n[nn]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Vi(n,o,c)}}}function an(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",n),Ge("load",n);var c=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(n,i,p,w,o,null)}}f&&lt(n,i,"srcSet",o.srcSet,o,null),c&&lt(n,i,"src",o.src,o,null);return;case"input":Ge("invalid",n);var T=p=w=f=null,I=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var X=o[c];if(X!=null)switch(c){case"name":f=X;break;case"type":w=X;break;case"checked":I=X;break;case"defaultChecked":G=X;break;case"value":p=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:lt(n,i,c,X,o,null)}}wl(n,p,T,I,G,w,f,!1),Ir(n);return;case"select":Ge("invalid",n),c=w=p=null;for(f in o)if(o.hasOwnProperty(f)&&(T=o[f],T!=null))switch(f){case"value":p=T;break;case"defaultValue":w=T;break;case"multiple":c=T;default:lt(n,i,f,T,o,null)}i=p,o=w,n.multiple=!!c,i!=null?jr(n,!!c,i,!1):o!=null&&jr(n,!!c,o,!0);return;case"textarea":Ge("invalid",n),p=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(T=o[w],T!=null))switch(w){case"value":c=T;break;case"defaultValue":f=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:lt(n,i,w,T,o,null)}mu(n,c,f,p),Ir(n);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(c=o[I],c!=null))switch(I){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(n,i,I,c,o,null)}return;case"dialog":Ge("beforetoggle",n),Ge("toggle",n),Ge("cancel",n),Ge("close",n);break;case"iframe":case"object":Ge("load",n);break;case"video":case"audio":for(c=0;c<cc.length;c++)Ge(cc[c],n);break;case"image":Ge("error",n),Ge("load",n);break;case"details":Ge("toggle",n);break;case"embed":case"source":case"link":Ge("error",n),Ge("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:lt(n,i,G,c,o,null)}return;default:if(Fa(i)){for(X in o)o.hasOwnProperty(X)&&(c=o[X],c!==void 0&&km(n,i,X,c,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(c=o[T],c!=null&&lt(n,i,T,c,o,null))}function uS(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,w=null,T=null,I=null,G=null,X=null;for(Q in o){var te=o[Q];if(o.hasOwnProperty(Q)&&te!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":I=te;default:c.hasOwnProperty(Q)||lt(n,i,Q,null,c,te)}}for(var K in c){var Q=c[K];if(te=o[K],c.hasOwnProperty(K)&&(Q!=null||te!=null))switch(K){case"type":p=Q;break;case"name":f=Q;break;case"checked":G=Q;break;case"defaultChecked":X=Q;break;case"value":w=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==te&&lt(n,i,K,Q,c,te)}}bl(n,w,T,I,G,X,p,f);return;case"select":Q=w=T=K=null;for(p in o)if(I=o[p],o.hasOwnProperty(p)&&I!=null)switch(p){case"value":break;case"multiple":Q=I;default:c.hasOwnProperty(p)||lt(n,i,p,null,c,I)}for(f in c)if(p=c[f],I=o[f],c.hasOwnProperty(f)&&(p!=null||I!=null))switch(f){case"value":K=p;break;case"defaultValue":T=p;break;case"multiple":w=p;default:p!==I&&lt(n,i,f,p,c,I)}i=T,o=w,c=Q,K!=null?jr(n,!!o,K,!1):!!c!=!!o&&(i!=null?jr(n,!!o,i,!0):jr(n,!!o,o?[]:"",!1));return;case"textarea":Q=K=null;for(T in o)if(f=o[T],o.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:lt(n,i,T,null,c,f)}for(w in c)if(f=c[w],p=o[w],c.hasOwnProperty(w)&&(f!=null||p!=null))switch(w){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&lt(n,i,w,f,c,p)}fu(n,K,Q);return;case"option":for(var Ce in o)if(K=o[Ce],o.hasOwnProperty(Ce)&&K!=null&&!c.hasOwnProperty(Ce))switch(Ce){case"selected":n.selected=!1;break;default:lt(n,i,Ce,null,c,K)}for(I in c)if(K=c[I],Q=o[I],c.hasOwnProperty(I)&&K!==Q&&(K!=null||Q!=null))switch(I){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:lt(n,i,I,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in o)K=o[Ne],o.hasOwnProperty(Ne)&&K!=null&&!c.hasOwnProperty(Ne)&&lt(n,i,Ne,null,c,K);for(G in c)if(K=c[G],Q=o[G],c.hasOwnProperty(G)&&K!==Q&&(K!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:lt(n,i,G,K,c,Q)}return;default:if(Fa(i)){for(var ct in o)K=o[ct],o.hasOwnProperty(ct)&&K!==void 0&&!c.hasOwnProperty(ct)&&km(n,i,ct,void 0,c,K);for(X in c)K=c[X],Q=o[X],!c.hasOwnProperty(X)||K===Q||K===void 0&&Q===void 0||km(n,i,X,K,c,Q);return}}for(var q in o)K=o[q],o.hasOwnProperty(q)&&K!=null&&!c.hasOwnProperty(q)&&lt(n,i,q,null,c,K);for(te in c)K=c[te],Q=o[te],!c.hasOwnProperty(te)||K===Q||K==null&&Q==null||lt(n,i,te,K,c,Q)}var Cm=null,Im=null;function mh(n){return n.nodeType===9?n:n.ownerDocument}function a0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function jm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Om=null;function hS(){var n=window.event;return n&&n.type==="popstate"?n===Om?!1:(Om=n,!0):(Om=null,!1)}var l0=typeof setTimeout=="function"?setTimeout:void 0,dS=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(n){return c0.resolve(null).then(n).catch(mS)}:l0;function mS(n){setTimeout(function(){throw n})}function Jr(n){return n==="head"}function u0(n,i){var o=i,c=0,f=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<c&&8>c){o=c;var w=n.ownerDocument;if(o&1&&hc(w.documentElement),o&2&&hc(w.body),o&4)for(o=w.head,hc(o),w=o.firstChild;w;){var T=w.nextSibling,I=w.nodeName;w[Nr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=T}}if(f===0){n.removeChild(p),_c(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:c=o.charCodeAt(0)-48;else c=0;o=p}while(o);_c(i)}function Dm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dm(o),za(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function gS(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Nr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=hs(n.nextSibling),n===null)break}return null}function pS(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=hs(n.nextSibling),n===null))return null;return n}function Pm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function yS(n,i){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function hs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Mm=null;function h0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return n;i--}else o==="/$"&&i++}n=n.previousSibling}return null}function d0(n,i,o){switch(i=mh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function hc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);za(n)}var Zn=new Map,f0=new Set;function gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ur=ie.d;ie.d={f:vS,r:_S,D:bS,C:wS,L:xS,m:ES,X:SS,S:TS,M:AS};function vS(){var n=ur.f(),i=ah();return n||i}function _S(n){var i=Ts(n);i!==null&&i.tag===5&&i.type==="form"?Ov(i):ur.r(n)}var To=typeof document>"u"?null:document;function m0(n,i,o){var c=To;if(c&&typeof i=="string"&&i){var f=Qt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),f0.has(f)||(f0.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),an(i,"link",n),Nt(i),c.head.appendChild(i)))}}function bS(n){ur.D(n),m0("dns-prefetch",n,null)}function wS(n,i){ur.C(n,i),m0("preconnect",n,i)}function xS(n,i,o){ur.L(n,i,o);var c=To;if(c&&n&&i){var f='link[rel="preload"][as="'+Qt(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Qt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Qt(o.imageSizes)+'"]')):f+='[href="'+Qt(n)+'"]';var p=f;switch(i){case"style":p=So(n);break;case"script":p=Ao(n)}Zn.has(p)||(n=v({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Zn.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(dc(p))||i==="script"&&c.querySelector(fc(p))||(i=c.createElement("link"),an(i,"link",n),Nt(i),c.head.appendChild(i)))}}function ES(n,i){ur.m(n,i);var o=To;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Qt(c)+'"][href="'+Qt(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ao(n)}if(!Zn.has(p)&&(n=v({rel:"modulepreload",href:n},i),Zn.set(p,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(fc(p)))return}c=o.createElement("link"),an(c,"link",n),Nt(c),o.head.appendChild(c)}}}function TS(n,i,o){ur.S(n,i,o);var c=To;if(c&&n){var f=kr(c).hoistableStyles,p=So(n);i=i||"default";var w=f.get(p);if(!w){var T={loading:0,preload:null};if(w=c.querySelector(dc(p)))T.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Zn.get(p))&&Vm(n,o);var I=w=c.createElement("link");Nt(I),an(I,"link",n),I._p=new Promise(function(G,X){I.onload=G,I.onerror=X}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ph(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:T},f.set(p,w)}}}function SS(n,i){ur.X(n,i);var o=To;if(o&&n){var c=kr(o).hoistableScripts,f=Ao(n),p=c.get(f);p||(p=o.querySelector(fc(f)),p||(n=v({src:n,async:!0},i),(i=Zn.get(f))&&Um(n,i),p=o.createElement("script"),Nt(p),an(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function AS(n,i){ur.M(n,i);var o=To;if(o&&n){var c=kr(o).hoistableScripts,f=Ao(n),p=c.get(f);p||(p=o.querySelector(fc(f)),p||(n=v({src:n,async:!0,type:"module"},i),(i=Zn.get(f))&&Um(n,i),p=o.createElement("script"),Nt(p),an(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function g0(n,i,o,c){var f=(f=ve.current)?gh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=So(o.href),o=kr(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=So(o.href);var p=kr(f).hoistableStyles,w=p.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,w),(p=f.querySelector(dc(n)))&&!p._p&&(w.instance=p,w.state.loading=5),Zn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zn.set(n,o),p||NS(f,n,o,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ao(o),o=kr(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function So(n){return'href="'+Qt(n)+'"'}function dc(n){return'link[rel="stylesheet"]['+n+"]"}function p0(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function NS(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),an(i,"link",o),Nt(i),n.head.appendChild(i))}function Ao(n){return'[src="'+Qt(n)+'"]'}function fc(n){return"script[async]"+n}function y0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Qt(o.href)+'"]');if(c)return i.instance=c,Nt(c),c;var f=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Nt(c),an(c,"style",f),ph(c,o.precedence,n),i.instance=c;case"stylesheet":f=So(o.href);var p=n.querySelector(dc(f));if(p)return i.state.loading|=4,i.instance=p,Nt(p),p;c=p0(o),(f=Zn.get(f))&&Vm(c,f),p=(n.ownerDocument||n).createElement("link"),Nt(p);var w=p;return w._p=new Promise(function(T,I){w.onload=T,w.onerror=I}),an(p,"link",c),i.state.loading|=4,ph(p,o.precedence,n),i.instance=p;case"script":return p=Ao(o.src),(f=n.querySelector(fc(p)))?(i.instance=f,Nt(f),f):(c=o,(f=Zn.get(p))&&(c=v({},o),Um(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Nt(f),an(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,ph(c,o.precedence,n));return i.instance}function ph(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,w=0;w<c.length;w++){var T=c[w];if(T.dataset.precedence===i)p=T;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Vm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Um(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var yh=null;function v0(n,i,o){if(yh===null){var c=new Map,f=yh=new Map;f.set(o,c)}else f=yh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var p=o[f];if(!(p[Nr]||p[At]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=n+w;var T=c.get(w);T?T.push(p):c.set(w,[p])}}return c}function _0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function RS(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function b0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var mc=null;function kS(){}function CS(n,i,o){if(mc===null)throw Error(s(475));var c=mc;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=So(o.href),p=n.querySelector(dc(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=vh.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=p,Nt(p);return}p=n.ownerDocument||n,o=p0(o),(f=Zn.get(f))&&Vm(o,f),p=p.createElement("link"),Nt(p);var w=p;w._p=new Promise(function(T,I){w.onload=T,w.onerror=I}),an(p,"link",o),i.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=vh.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function IS(){if(mc===null)throw Error(s(475));var n=mc;return n.stylesheets&&n.count===0&&Lm(n,n.stylesheets),0<n.count?function(i){var o=setTimeout(function(){if(n.stylesheets&&Lm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(o)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)Lm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function Lm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,i.forEach(jS,n),_h=null,vh.call(n))}function jS(n,i){if(!(i.state.loading&4)){var o=_h.get(n);if(o)var c=o.get(null);else{o=new Map,_h.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var w=f[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=i.instance,w=f.getAttribute("data-precedence"),p=o.get(w)||c,p===c&&o.set(null,f),o.set(w,f),this.count++,c=vh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var gc={$$typeof:W,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function OS(n,i,o,c,f,p,w,T){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=La(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=La(0),this.hiddenUpdates=La(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function w0(n,i,o,c,f,p,w,T,I,G,X,te){return n=new OS(n,i,o,w,T,I,G,te),i=1,p===!0&&(i|=24),p=Dn(3,null,null,i),n.current=p,p.stateNode=n,i=bf(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:i},Tf(p),n}function x0(n){return n?(n=no,n):no}function E0(n,i,o,c,f,p){f=x0(f),c.context===null?c.context=f:c.pendingContext=f,c=Lr(i),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=zr(n,c,i),o!==null&&(Ln(o,n,i),Fl(o,n,i))}function T0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function zm(n,i){T0(n,i),(n=n.alternate)&&T0(n,i)}function S0(n){if(n.tag===13){var i=to(n,67108864);i!==null&&Ln(i,n,67108864),zm(n,67108864)}}var bh=!0;function DS(n,i,o,c){var f=U.T;U.T=null;var p=ie.p;try{ie.p=2,Bm(n,i,o,c)}finally{ie.p=p,U.T=f}}function PS(n,i,o,c){var f=U.T;U.T=null;var p=ie.p;try{ie.p=8,Bm(n,i,o,c)}finally{ie.p=p,U.T=f}}function Bm(n,i,o,c){if(bh){var f=qm(c);if(f===null)Rm(n,i,c,wh,o),N0(n,c);else if(VS(f,n,i,o,c))c.stopPropagation();else if(N0(n,c),i&4&&-1<MS.indexOf(n)){for(;f!==null;){var p=Ts(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=ns(p.pendingLanes);if(w!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;w;){var I=1<<31-_n(w);T.entanglements[1]|=I,w&=~I}Ds(p),(rt&6)===0&&(rh=Tn()+500,lc(0))}}break;case 13:T=to(p,2),T!==null&&Ln(T,p,2),ah(),zm(p,2)}if(p=qm(c),p===null&&Rm(n,i,c,wh,o),p===f)break;f=p}f!==null&&c.stopPropagation()}else Rm(n,i,c,null,o)}}function qm(n){return n=Al(n),$m(n)}var wh=null;function $m(n){if(wh=null,n=Es(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return wh=n,null}function A0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lu()){case zt:return 2;case Kt:return 8;case Hs:case Kd:return 32;case pl:return 268435456;default:return 32}default:return 32}}var Hm=!1,Zr=null,ei=null,ti=null,pc=new Map,yc=new Map,ni=[],MS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N0(n,i){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":pc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(i.pointerId)}}function vc(n,i,o,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Ts(i),i!==null&&S0(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function VS(n,i,o,c,f){switch(i){case"focusin":return Zr=vc(Zr,n,i,o,c,f),!0;case"dragenter":return ei=vc(ei,n,i,o,c,f),!0;case"mouseover":return ti=vc(ti,n,i,o,c,f),!0;case"pointerover":var p=f.pointerId;return pc.set(p,vc(pc.get(p)||null,n,i,o,c,f)),!0;case"gotpointercapture":return p=f.pointerId,yc.set(p,vc(yc.get(p)||null,n,i,o,c,f)),!0}return!1}function R0(n){var i=Es(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Wd(n.priority,function(){if(o.tag===13){var c=Un();c=vl(c);var f=to(o,c);f!==null&&Ln(f,o,c),zm(o,c)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=qm(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Sl=c,o.target.dispatchEvent(c),Sl=null}else return i=Ts(o),i!==null&&S0(i),n.blockedOn=o,!1;i.shift()}return!0}function k0(n,i,o){xh(n)&&o.delete(i)}function US(){Hm=!1,Zr!==null&&xh(Zr)&&(Zr=null),ei!==null&&xh(ei)&&(ei=null),ti!==null&&xh(ti)&&(ti=null),pc.forEach(k0),yc.forEach(k0)}function Eh(n,i){n.blockedOn===i&&(n.blockedOn=null,Hm||(Hm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,US)))}var Th=null;function C0(n){Th!==n&&(Th=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Th===n&&(Th=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if($m(c||o)===null)continue;break}var p=Ts(o);p!==null&&(n.splice(i,3),i-=3,$f(p,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function _c(n){function i(I){return Eh(I,n)}Zr!==null&&Eh(Zr,n),ei!==null&&Eh(ei,n),ti!==null&&Eh(ti,n),pc.forEach(i),yc.forEach(i);for(var o=0;o<ni.length;o++){var c=ni[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ni.length&&(o=ni[0],o.blockedOn===null);)R0(o),o.blockedOn===null&&ni.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],p=o[c+1],w=f[nn]||null;if(typeof p=="function")w||C0(o);else if(w){var T=null;if(p&&p.hasAttribute("formAction")){if(f=p,w=p[nn]||null)T=w.formAction;else if($m(f)!==null)continue}else T=w.action;typeof T=="function"?o[c+1]=T:(o.splice(c,3),c-=3),C0(o)}}}function Fm(n){this._internalRoot=n}Sh.prototype.render=Fm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=Un();E0(o,c,n,i,null,null)},Sh.prototype.unmount=Fm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;E0(n.current,2,null,n,null,null),ah(),i[Gs]=null}};function Sh(n){this._internalRoot=n}Sh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Fs();n={blockedOn:null,target:n,priority:i};for(var o=0;o<ni.length&&i!==0&&i<ni[o].priority;o++);ni.splice(o,0,n),o===0&&R0(n)}};var I0=e.version;if(I0!=="19.1.0")throw Error(s(527,I0,"19.1.0"));ie.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=g(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var LS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{wr=Ah.inject(LS),hn=Ah}catch{}}return wc.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,c="",f=Kv,p=Qv,w=Yv,T=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=w0(n,1,!1,null,null,o,c,f,p,w,T,null),n[Gs]=i.current,Nm(n),new Fm(i)},wc.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var c=!1,f="",p=Kv,w=Qv,T=Yv,I=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),i=w0(n,1,!0,i,o??null,c,f,p,w,T,I,G),i.context=x0(null),o=i.current,c=Un(),c=vl(c),f=Lr(c),f.callback=null,zr(o,f,c),o=c,i.current.lanes=o,St(i,o),Ds(i),n[Gs]=i.current,Nm(n),new Sh(i)},wc.version="19.1.0",wc}var B0;function XS(){if(B0)return Qm.exports;B0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Qm.exports=WS(),Qm.exports}var JS=XS();function q0(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function ZS(...r){return e=>{let t=!1;const s=r.map(a=>{const l=q0(a,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():q0(r[a],null)}}}}function eA(...r){return de.useCallback(ZS(...r),r)}function tA(r){const e=nA(r),t=de.forwardRef((s,a)=>{const{children:l,...u}=s,m=de.Children.toArray(l),g=m.find(rA);if(g){const y=g.props.children,v=m.map(x=>x===g?de.Children.count(y)>1?de.Children.only(null):de.isValidElement(y)?y.props.children:null:x);return h.jsx(e,{...u,ref:a,children:de.isValidElement(y)?de.cloneElement(y,void 0,v):null})}return h.jsx(e,{...u,ref:a,children:l})});return t.displayName=`${r}.Slot`,t}var ax=tA("Slot");function nA(r){const e=de.forwardRef((t,s)=>{const{children:a,...l}=t,u=de.isValidElement(a)?aA(a):void 0,m=eA(u,s);if(de.isValidElement(a)){const g=iA(l,a.props);return a.type!==de.Fragment&&(g.ref=m),de.cloneElement(a,g)}return de.Children.count(a)>1?de.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var sA=Symbol("radix.slottable");function rA(r){return de.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===sA}function iA(r,e){const t={...e};for(const s in e){const a=r[s],l=e[s];/^on[A-Z]/.test(s)?a&&l?t[s]=(...m)=>{const g=l(...m);return a(...m),g}:a&&(t[s]=a):s==="style"?t[s]={...a,...l}:s==="className"&&(t[s]=[a,l].filter(Boolean).join(" "))}return{...r,...t}}function aA(r){var s,a;let e=(s=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=(a=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}function ox(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=ox(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function lx(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=ox(r))&&(s&&(s+=" "),s+=e);return s}const $0=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,H0=lx,cx=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return H0(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:l}=e,u=Object.keys(a).map(y=>{const v=t==null?void 0:t[y],x=l==null?void 0:l[y];if(v===null)return null;const E=$0(v)||$0(x);return a[y][E]}),m=t&&Object.entries(t).reduce((y,v)=>{let[x,E]=v;return E===void 0||(y[x]=E),y},{}),g=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((y,v)=>{let{class:x,className:E,...k}=v;return Object.entries(k).every(z=>{let[B,j]=z;return Array.isArray(j)?j.includes({...l,...m}[B]):{...l,...m}[B]===j})?[...y,x,E]:y},[]);return H0(r,u,g,t==null?void 0:t.class,t==null?void 0:t.className)},wp="-",oA=r=>{const e=cA(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:u=>{const m=u.split(wp);return m[0]===""&&m.length!==1&&m.shift(),ux(m,e)||lA(u)},getConflictingClassGroupIds:(u,m)=>{const g=t[u]||[];return m&&s[u]?[...g,...s[u]]:g}}},ux=(r,e)=>{var u;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),a=s?ux(r.slice(1),s):void 0;if(a)return a;if(e.validators.length===0)return;const l=r.join(wp);return(u=e.validators.find(({validator:m})=>m(l)))==null?void 0:u.classGroupId},F0=/^\[(.+)\]$/,lA=r=>{if(F0.test(r)){const e=F0.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},cA=r=>{const{theme:e,classGroups:t}=r,s={nextPart:new Map,validators:[]};for(const a in t)kg(t[a],s,a,e);return s},kg=(r,e,t,s)=>{r.forEach(a=>{if(typeof a=="string"){const l=a===""?e:G0(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(uA(a)){kg(a(s),e,t,s);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,u])=>{kg(u,G0(e,l),t,s)})})},G0=(r,e)=>{let t=r;return e.split(wp).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},uA=r=>r.isThemeGetter,hA=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const a=(l,u)=>{t.set(l,u),e++,e>r&&(e=0,s=t,t=new Map)};return{get(l){let u=t.get(l);if(u!==void 0)return u;if((u=s.get(l))!==void 0)return a(l,u),u},set(l,u){t.has(l)?t.set(l,u):a(l,u)}}},Cg="!",Ig=":",dA=Ig.length,fA=r=>{const{prefix:e,experimentalParseClassName:t}=r;let s=a=>{const l=[];let u=0,m=0,g=0,y;for(let z=0;z<a.length;z++){let B=a[z];if(u===0&&m===0){if(B===Ig){l.push(a.slice(g,z)),g=z+dA;continue}if(B==="/"){y=z;continue}}B==="["?u++:B==="]"?u--:B==="("?m++:B===")"&&m--}const v=l.length===0?a:a.substring(g),x=mA(v),E=x!==v,k=y&&y>g?y-g:void 0;return{modifiers:l,hasImportantModifier:E,baseClassName:x,maybePostfixModifierPosition:k}};if(e){const a=e+Ig,l=s;s=u=>u.startsWith(a)?l(u.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:u,maybePostfixModifierPosition:void 0}}if(t){const a=s;s=l=>t({className:l,parseClassName:a})}return s},mA=r=>r.endsWith(Cg)?r.substring(0,r.length-1):r.startsWith(Cg)?r.substring(1):r,gA=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let l=[];return s.forEach(u=>{u[0]==="["||e[u]?(a.push(...l.sort(),u),l=[]):l.push(u)}),a.push(...l.sort()),a}},pA=r=>({cache:hA(r.cacheSize),parseClassName:fA(r),sortModifiers:gA(r),...oA(r)}),yA=/\s+/,vA=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:l}=e,u=[],m=r.trim().split(yA);let g="";for(let y=m.length-1;y>=0;y-=1){const v=m[y],{isExternal:x,modifiers:E,hasImportantModifier:k,baseClassName:z,maybePostfixModifierPosition:B}=t(v);if(x){g=v+(g.length>0?" "+g:g);continue}let j=!!B,J=s(j?z.substring(0,B):z);if(!J){if(!j){g=v+(g.length>0?" "+g:g);continue}if(J=s(z),!J){g=v+(g.length>0?" "+g:g);continue}j=!1}const $=l(E).join(":"),W=k?$+Cg:$,le=W+J;if(u.includes(le))continue;u.push(le);const ce=a(J,j);for(let oe=0;oe<ce.length;++oe){const C=ce[oe];u.push(W+C)}g=v+(g.length>0?" "+g:g)}return g};function _A(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=hx(e))&&(s&&(s+=" "),s+=t);return s}const hx=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=hx(r[s]))&&(t&&(t+=" "),t+=e);return t};function bA(r,...e){let t,s,a,l=u;function u(g){const y=e.reduce((v,x)=>x(v),r());return t=pA(y),s=t.cache.get,a=t.cache.set,l=m,m(g)}function m(g){const y=s(g);if(y)return y;const v=vA(g,t);return a(g,v),v}return function(){return l(_A.apply(null,arguments))}}const Ht=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},dx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wA=/^\d+\/\d+$/,xA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,EA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,No=r=>wA.test(r),qe=r=>!!r&&!Number.isNaN(Number(r)),ri=r=>!!r&&Number.isInteger(Number(r)),Jm=r=>r.endsWith("%")&&qe(r.slice(0,-1)),hr=r=>xA.test(r),NA=()=>!0,RA=r=>EA.test(r)&&!TA.test(r),mx=()=>!1,kA=r=>SA.test(r),CA=r=>AA.test(r),IA=r=>!pe(r)&&!ye(r),jA=r=>il(r,yx,mx),pe=r=>dx.test(r),ma=r=>il(r,vx,RA),Zm=r=>il(r,VA,qe),K0=r=>il(r,gx,mx),OA=r=>il(r,px,CA),Nh=r=>il(r,_x,kA),ye=r=>fx.test(r),xc=r=>al(r,vx),DA=r=>al(r,UA),Q0=r=>al(r,gx),PA=r=>al(r,yx),MA=r=>al(r,px),Rh=r=>al(r,_x,!0),il=(r,e,t)=>{const s=dx.exec(r);return s?s[1]?e(s[1]):t(s[2]):!1},al=(r,e,t=!1)=>{const s=fx.exec(r);return s?s[1]?e(s[1]):t:!1},gx=r=>r==="position"||r==="percentage",px=r=>r==="image"||r==="url",yx=r=>r==="length"||r==="size"||r==="bg-size",vx=r=>r==="length",VA=r=>r==="number",UA=r=>r==="family-name",_x=r=>r==="shadow",LA=()=>{const r=Ht("color"),e=Ht("font"),t=Ht("text"),s=Ht("font-weight"),a=Ht("tracking"),l=Ht("leading"),u=Ht("breakpoint"),m=Ht("container"),g=Ht("spacing"),y=Ht("radius"),v=Ht("shadow"),x=Ht("inset-shadow"),E=Ht("text-shadow"),k=Ht("drop-shadow"),z=Ht("blur"),B=Ht("perspective"),j=Ht("aspect"),J=Ht("ease"),$=Ht("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ce=()=>[...le(),ye,pe],oe=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],A=()=>[ye,pe,g],N=()=>[No,"full","auto",...A()],D=()=>[ri,"none","subgrid",ye,pe],O=()=>["auto",{span:["full",ri,ye,pe]},ri,ye,pe],V=()=>[ri,"auto",ye,pe],R=()=>["auto","min","max","fr",ye,pe],We=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ue=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...A()],ie=()=>[No,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],ne=()=>[r,ye,pe],ze=()=>[...le(),Q0,K0,{position:[ye,pe]}],M=()=>["no-repeat",{repeat:["","x","y","space","round"]}],re=()=>["auto","cover","contain",PA,jA,{size:[ye,pe]}],he=()=>[Jm,xc,ma],P=()=>["","none","full",y,ye,pe],ae=()=>["",qe,xc,ma],Te=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$e=()=>[qe,Jm,Q0,K0],et=()=>["","none",z,ye,pe],un=()=>["none",qe,ye,pe],_s=()=>["none",qe,ye,pe],bs=()=>[qe,ye,pe],ts=()=>[No,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[hr],breakpoint:[hr],color:[NA],container:[hr],"drop-shadow":[hr],ease:["in","out","in-out"],font:[IA],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[hr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[hr],shadow:[hr],spacing:["px",qe],text:[hr],"text-shadow":[hr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",No,pe,ye,j]}],container:["container"],columns:[{columns:[qe,pe,ye,m]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ce()}],overflow:[{overflow:oe()}],"overflow-x":[{"overflow-x":oe()}],"overflow-y":[{"overflow-y":oe()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[ri,"auto",ye,pe]}],basis:[{basis:[No,"full","auto",m,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,No,"auto","initial","none",pe]}],grow:[{grow:["",qe,ye,pe]}],shrink:[{shrink:["",qe,ye,pe]}],order:[{order:[ri,"first","last","none",ye,pe]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":R()}],"auto-rows":[{"auto-rows":R()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...We(),"normal"]}],"justify-items":[{"justify-items":[...Ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ue()]}],"align-content":[{content:["normal",...We()]}],"align-items":[{items:[...Ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":We()}],"place-items":[{"place-items":[...Ue(),"baseline"]}],"place-self":[{"place-self":["auto",...Ue()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[m,"screen",...ie()]}],"min-w":[{"min-w":[m,"screen","none",...ie()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[u]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",t,xc,ma]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ye,Zm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jm,pe]}],"font-family":[{font:[DA,pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ye,pe]}],"line-clamp":[{"line-clamp":[qe,"none",ye,Zm]}],leading:[{leading:[l,...A()]}],"list-image":[{"list-image":["none",ye,pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ye,pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",ye,ma]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[qe,"auto",ye,pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye,pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye,pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ze()}],"bg-repeat":[{bg:M()}],"bg-size":[{bg:re()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ri,ye,pe],radial:["",ye,pe],conic:[ri,ye,pe]},MA,OA]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:P()}],"rounded-s":[{"rounded-s":P()}],"rounded-e":[{"rounded-e":P()}],"rounded-t":[{"rounded-t":P()}],"rounded-r":[{"rounded-r":P()}],"rounded-b":[{"rounded-b":P()}],"rounded-l":[{"rounded-l":P()}],"rounded-ss":[{"rounded-ss":P()}],"rounded-se":[{"rounded-se":P()}],"rounded-ee":[{"rounded-ee":P()}],"rounded-es":[{"rounded-es":P()}],"rounded-tl":[{"rounded-tl":P()}],"rounded-tr":[{"rounded-tr":P()}],"rounded-br":[{"rounded-br":P()}],"rounded-bl":[{"rounded-bl":P()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,ye,pe]}],"outline-w":[{outline:["",qe,xc,ma]}],"outline-color":[{outline:ne()}],shadow:[{shadow:["","none",v,Rh,Nh]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",x,Rh,Nh]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[qe,ma]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":ne()}],"text-shadow":[{"text-shadow":["none",E,Rh,Nh]}],"text-shadow-color":[{"text-shadow":ne()}],opacity:[{opacity:[qe,ye,pe]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":$e()}],"mask-image-linear-to-pos":[{"mask-linear-to":$e()}],"mask-image-linear-from-color":[{"mask-linear-from":ne()}],"mask-image-linear-to-color":[{"mask-linear-to":ne()}],"mask-image-t-from-pos":[{"mask-t-from":$e()}],"mask-image-t-to-pos":[{"mask-t-to":$e()}],"mask-image-t-from-color":[{"mask-t-from":ne()}],"mask-image-t-to-color":[{"mask-t-to":ne()}],"mask-image-r-from-pos":[{"mask-r-from":$e()}],"mask-image-r-to-pos":[{"mask-r-to":$e()}],"mask-image-r-from-color":[{"mask-r-from":ne()}],"mask-image-r-to-color":[{"mask-r-to":ne()}],"mask-image-b-from-pos":[{"mask-b-from":$e()}],"mask-image-b-to-pos":[{"mask-b-to":$e()}],"mask-image-b-from-color":[{"mask-b-from":ne()}],"mask-image-b-to-color":[{"mask-b-to":ne()}],"mask-image-l-from-pos":[{"mask-l-from":$e()}],"mask-image-l-to-pos":[{"mask-l-to":$e()}],"mask-image-l-from-color":[{"mask-l-from":ne()}],"mask-image-l-to-color":[{"mask-l-to":ne()}],"mask-image-x-from-pos":[{"mask-x-from":$e()}],"mask-image-x-to-pos":[{"mask-x-to":$e()}],"mask-image-x-from-color":[{"mask-x-from":ne()}],"mask-image-x-to-color":[{"mask-x-to":ne()}],"mask-image-y-from-pos":[{"mask-y-from":$e()}],"mask-image-y-to-pos":[{"mask-y-to":$e()}],"mask-image-y-from-color":[{"mask-y-from":ne()}],"mask-image-y-to-color":[{"mask-y-to":ne()}],"mask-image-radial":[{"mask-radial":[ye,pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":$e()}],"mask-image-radial-to-pos":[{"mask-radial-to":$e()}],"mask-image-radial-from-color":[{"mask-radial-from":ne()}],"mask-image-radial-to-color":[{"mask-radial-to":ne()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":$e()}],"mask-image-conic-to-pos":[{"mask-conic-to":$e()}],"mask-image-conic-from-color":[{"mask-conic-from":ne()}],"mask-image-conic-to-color":[{"mask-conic-to":ne()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ze()}],"mask-repeat":[{mask:M()}],"mask-size":[{mask:re()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ye,pe]}],filter:[{filter:["","none",ye,pe]}],blur:[{blur:et()}],brightness:[{brightness:[qe,ye,pe]}],contrast:[{contrast:[qe,ye,pe]}],"drop-shadow":[{"drop-shadow":["","none",k,Rh,Nh]}],"drop-shadow-color":[{"drop-shadow":ne()}],grayscale:[{grayscale:["",qe,ye,pe]}],"hue-rotate":[{"hue-rotate":[qe,ye,pe]}],invert:[{invert:["",qe,ye,pe]}],saturate:[{saturate:[qe,ye,pe]}],sepia:[{sepia:["",qe,ye,pe]}],"backdrop-filter":[{"backdrop-filter":["","none",ye,pe]}],"backdrop-blur":[{"backdrop-blur":et()}],"backdrop-brightness":[{"backdrop-brightness":[qe,ye,pe]}],"backdrop-contrast":[{"backdrop-contrast":[qe,ye,pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,ye,pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,ye,pe]}],"backdrop-invert":[{"backdrop-invert":["",qe,ye,pe]}],"backdrop-opacity":[{"backdrop-opacity":[qe,ye,pe]}],"backdrop-saturate":[{"backdrop-saturate":[qe,ye,pe]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,ye,pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ye,pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",ye,pe]}],ease:[{ease:["linear","initial",J,ye,pe]}],delay:[{delay:[qe,ye,pe]}],animate:[{animate:["none",$,ye,pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[B,ye,pe]}],"perspective-origin":[{"perspective-origin":ce()}],rotate:[{rotate:un()}],"rotate-x":[{"rotate-x":un()}],"rotate-y":[{"rotate-y":un()}],"rotate-z":[{"rotate-z":un()}],scale:[{scale:_s()}],"scale-x":[{"scale-x":_s()}],"scale-y":[{"scale-y":_s()}],"scale-z":[{"scale-z":_s()}],"scale-3d":["scale-3d"],skew:[{skew:bs()}],"skew-x":[{"skew-x":bs()}],"skew-y":[{"skew-y":bs()}],transform:[{transform:[ye,pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:ce()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ts()}],"translate-x":[{"translate-x":ts()}],"translate-y":[{"translate-y":ts()}],"translate-z":[{"translate-z":ts()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye,pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye,pe]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[qe,xc,ma,Zm]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zA=bA(LA);function ja(...r){return zA(lx(r))}const BA=cx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ae({className:r,variant:e,size:t,asChild:s=!1,...a}){const l=s?ax:"button";return h.jsx(l,{"data-slot":"button",className:ja(BA({variant:e,size:t,className:r})),...a})}function be({className:r,...e}){return h.jsx("div",{"data-slot":"card",className:ja("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...e})}function Ie({className:r,...e}){return h.jsx("div",{"data-slot":"card-header",className:ja("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...e})}function je({className:r,...e}){return h.jsx("div",{"data-slot":"card-title",className:ja("leading-none font-semibold",r),...e})}function In({className:r,...e}){return h.jsx("div",{"data-slot":"card-description",className:ja("text-muted-foreground text-sm",r),...e})}function we({className:r,...e}){return h.jsx("div",{"data-slot":"card-content",className:ja("px-6",r),...e})}const qA=cx("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function en({className:r,variant:e,asChild:t=!1,...s}){const a=t?ax:"span";return h.jsx(a,{"data-slot":"badge",className:ja(qA({variant:e}),r),...s})}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HA=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Y0=r=>{const e=HA(r);return e.charAt(0).toUpperCase()+e.slice(1)},bx=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),FA=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=de.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:u,...m},g)=>de.createElement("svg",{ref:g,...GA,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:bx("lucide",a),...!l&&!FA(m)&&{"aria-hidden":"true"},...m},[...u.map(([y,v])=>de.createElement(y,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(r,e)=>{const t=de.forwardRef(({className:s,...a},l)=>de.createElement(KA,{ref:l,iconNode:e,className:bx(`lucide-${$A(Y0(r))}`,`lucide-${r}`,s),...a}));return t.displayName=Y0(r),t};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],kh=Ee("activity",QA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],WA=Ee("arrow-right",YA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],eg=Ee("bell",XA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ZA=Ee("bot",JA);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Ch=Ee("brain",e2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],tg=Ee("building-2",t2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],qh=Ee("calendar",n2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],r2=Ee("chart-column",s2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],a2=Ee("check",i2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wx=Ee("circle-alert",o2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W0=Ee("circle-check-big",l2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_t=Ee("circle-check",c2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],h2=Ee("circle-pause",u2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],f2=Ee("circle-play",d2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],g2=Ee("circle-x",m2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],jg=Ee("clock",p2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ng=Ee("cloud",y2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],X0=Ee("cog",v2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],b2=Ee("copy",_2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],x2=Ee("credit-card",w2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],J0=Ee("crown",E2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Zh=Ee("database",T2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],A2=Ee("dollar-sign",S2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],R2=Ee("eye-off",N2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],C2=Ee("eye",k2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xx=Ee("file-text",I2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],O2=Ee("house",j2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Z0=Ee("info",D2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],M2=Ee("key-round",P2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],U2=Ee("key",V2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],z2=Ee("loader",L2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eb=Ee("lock",B2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],$2=Ee("log-out",q2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],F2=Ee("mail",H2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],K2=Ee("menu",G2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],sg=Ee("message-square",Q2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],W2=Ee("moon",Y2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],rg=Ee("pause",X2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ig=Ee("phone",J2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],eN=Ee("play",Z2);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ex=Ee("plus",tN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Og=Ee("refresh-cw",nN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dg=Ee("settings",sN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ya=Ee("shield",rN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tb=Ee("square-pen",iN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],nb=Ee("star",aN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],lN=Ee("sun",oN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uN=Ee("target",cN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Pg=Ee("trash-2",hN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ag=Ee("trending-up",dN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tx=Ee("triangle-alert",fN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xp=Ee("user",mN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pN=Ee("users",gN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Sx=Ee("x",yN);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ih=Ee("zap",vN),sb="/assets/IMG_3575(1)-B07akN18.jpeg",_N="/assets/IMG_3557(1)-Bf6w_X7O.jpeg",bN="/assets/IMG_3554(1)-CshQ5I98.jpeg",wN="/assets/IMG_3556(1)-CjDxWsQq.jpeg",xN="/assets/IMG_3561(1)-DXa8U5hT.jpeg",EN="/assets/IMG_3564(1)-C6wgy6i9.jpeg",TN="/assets/IMG_3551(1)-uvQF3SkX.jpeg";/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=()=>{};var rb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},AN=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],m=r[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],u=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Nx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,m=u?r[a+1]:0,g=a+2<r.length,y=g?r[a+2]:0,v=l>>2,x=(l&3)<<4|m>>4;let E=(m&15)<<2|y>>6,k=y&63;g||(k=64,u||(E=64)),s.push(t[v],t[x],t[E],t[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Ax(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):AN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],m=a<r.length?t[r.charAt(a)]:0;++a;const y=a<r.length?t[r.charAt(a)]:64;++a;const x=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||m==null||y==null||x==null)throw new NN;const E=l<<2|m>>4;if(s.push(E),y!==64){const k=m<<4&240|y>>2;if(s.push(k),x!==64){const z=y<<6&192|x;s.push(z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class NN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RN=function(r){const e=Ax(r);return Nx.encodeByteArray(e,!0)},ed=function(r){return RN(r).replace(/\./g,"")},Rx=function(r){try{return Nx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=()=>kN().__FIREBASE_DEFAULTS__,IN=()=>{if(typeof process>"u"||typeof rb>"u")return;const r=rb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},jN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Rx(r[1]);return e&&JSON.parse(e)},Td=()=>{try{return SN()||CN()||IN()||jN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},kx=r=>{var e,t;return(t=(e=Td())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},ON=r=>{const e=kx(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Cx=()=>{var r;return(r=Td())==null?void 0:r.config},Ix=r=>{var e;return(e=Td())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DN=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jx(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ed(JSON.stringify(t)),ed(JSON.stringify(u)),""].join(".")}const kc={};function MN(){const r={prod:[],emulator:[]};for(const e of Object.keys(kc))kc[e]?r.emulator.push(e):r.prod.push(e);return r}function VN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let ib=!1;function Ox(r,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||kc[r]===e||kc[r]||ib)return;kc[r]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=MN().prod.length>0;function u(){const E=document.getElementById(s);E&&E.remove()}function m(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,k){E.setAttribute("width","24"),E.setAttribute("id",k),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ib=!0,u()},E}function v(E,k){E.setAttribute("id",k),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=VN(s),k=t("text"),z=document.getElementById(k)||document.createElement("span"),B=t("learnmore"),j=document.getElementById(B)||document.createElement("a"),J=t("preprendIcon"),$=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const W=E.element;m(W),v(j,B);const le=y();g($,J),W.append($,z,j,le),document.body.appendChild(W)}l?(z.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function LN(){var e;const r=(e=Td())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function qN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $N(){const r=vn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function HN(){return!LN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FN(){try{return typeof indexedDB=="object"}catch{return!1}}function GN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="FirebaseError";class br extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=KN,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?QN(l,s):"Error",m=`${this.serviceName}: ${u} (${a}).`;return new br(a,m,s)}}function QN(r,e){return r.replace(YN,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const YN=/\{\$([^}]+)}/g;function WN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Aa(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],u=e[a];if(ab(l)&&ab(u)){if(!Aa(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function ab(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function XN(r,e){const t=new JN(r,e);return t.subscribe.bind(t)}class JN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ZN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=og),a.error===void 0&&(a.error=og),a.complete===void 0&&(a.complete=og);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(r){return r&&r._delegate?r._delegate:r}class Na{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new DN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nR(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:tR(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tR(r){return r===va?void 0:r}function nR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const rR={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},iR=Ke.INFO,aR={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},oR=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=aR[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=iR,this._logHandler=oR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const lR=(r,e)=>e.some(t=>r instanceof t);let ob,lb;function cR(){return ob||(ob=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uR(){return lb||(lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dx=new WeakMap,Mg=new WeakMap,Px=new WeakMap,lg=new WeakMap,Tp=new WeakMap;function hR(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(mi(r.result)),a()},u=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Dx.set(t,r)}).catch(()=>{}),Tp.set(e,r),e}function dR(r){if(Mg.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Mg.set(r,e)}let Vg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Mg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Px.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function fR(r){Vg=r(Vg)}function mR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(cg(this),e,...t);return Px.set(s,e.sort?e.sort():[e]),mi(s)}:uR().includes(r)?function(...e){return r.apply(cg(this),e),mi(Dx.get(this))}:function(...e){return mi(r.apply(cg(this),e))}}function gR(r){return typeof r=="function"?mR(r):(r instanceof IDBTransaction&&dR(r),lR(r,cR())?new Proxy(r,Vg):r)}function mi(r){if(r instanceof IDBRequest)return hR(r);if(lg.has(r))return lg.get(r);const e=gR(r);return e!==r&&(lg.set(r,e),Tp.set(e,r)),e}const cg=r=>Tp.get(r);function pR(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),m=mi(u);return s&&u.addEventListener("upgradeneeded",g=>{s(mi(u.result),g.oldVersion,g.newVersion,mi(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const yR=["get","getKey","getAll","getAllKeys","count"],vR=["put","add","delete","clear"],ug=new Map;function cb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=vR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||yR.includes(t)))return;const l=async function(u,...m){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),a&&g.done]))[0]};return ug.set(e,l),l}fR(r=>({...r,get:(e,t,s)=>cb(e,t)||r.get(e,t,s),has:(e,t)=>!!cb(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function bR(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ug="@firebase/app",ub="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new Ep("@firebase/app"),wR="@firebase/app-compat",xR="@firebase/analytics-compat",ER="@firebase/analytics",TR="@firebase/app-check-compat",SR="@firebase/app-check",AR="@firebase/auth",NR="@firebase/auth-compat",RR="@firebase/database",kR="@firebase/data-connect",CR="@firebase/database-compat",IR="@firebase/functions",jR="@firebase/functions-compat",OR="@firebase/installations",DR="@firebase/installations-compat",PR="@firebase/messaging",MR="@firebase/messaging-compat",VR="@firebase/performance",UR="@firebase/performance-compat",LR="@firebase/remote-config",zR="@firebase/remote-config-compat",BR="@firebase/storage",qR="@firebase/storage-compat",$R="@firebase/firestore",HR="@firebase/ai",FR="@firebase/firestore-compat",GR="firebase",KR="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="[DEFAULT]",QR={[Ug]:"fire-core",[wR]:"fire-core-compat",[ER]:"fire-analytics",[xR]:"fire-analytics-compat",[SR]:"fire-app-check",[TR]:"fire-app-check-compat",[AR]:"fire-auth",[NR]:"fire-auth-compat",[RR]:"fire-rtdb",[kR]:"fire-data-connect",[CR]:"fire-rtdb-compat",[IR]:"fire-fn",[jR]:"fire-fn-compat",[OR]:"fire-iid",[DR]:"fire-iid-compat",[PR]:"fire-fcm",[MR]:"fire-fcm-compat",[VR]:"fire-perf",[UR]:"fire-perf-compat",[LR]:"fire-rc",[zR]:"fire-rc-compat",[BR]:"fire-gcs",[qR]:"fire-gcs-compat",[$R]:"fire-fst",[FR]:"fire-fst-compat",[HR]:"fire-vertex","fire-js":"fire-js",[GR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Map,YR=new Map,zg=new Map;function hb(r,e){try{r.container.addComponent(e)}catch(t){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Xo(r){const e=r.name;if(zg.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;zg.set(e,r);for(const t of td.values())hb(t,r);for(const t of YR.values())hb(t,r);return!0}function Sp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ms(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Qc("app","Firebase",WR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=KR;function Mx(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Lg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw gi.create("bad-app-name",{appName:String(a)});if(t||(t=Cx()),!t)throw gi.create("no-options");const l=td.get(a);if(l){if(Aa(t,l.options)&&Aa(s,l.config))return l;throw gi.create("duplicate-app",{appName:a})}const u=new sR(a);for(const g of zg.values())u.addComponent(g);const m=new XR(t,s,u);return td.set(a,m),m}function Vx(r=Lg){const e=td.get(r);if(!e&&r===Lg&&Cx())return Mx();if(!e)throw gi.create("no-app",{appName:r});return e}function pi(r,e,t){let s=QR[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(u.join(" "));return}Xo(new Na(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR="firebase-heartbeat-database",ZR=1,Uc="firebase-heartbeat-store";let hg=null;function Ux(){return hg||(hg=pR(JR,ZR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Uc)}catch(t){console.warn(t)}}}}).catch(r=>{throw gi.create("idb-open",{originalErrorMessage:r.message})})),hg}async function ek(r){try{const t=(await Ux()).transaction(Uc),s=await t.objectStore(Uc).get(Lx(r));return await t.done,s}catch(e){if(e instanceof br)gr.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gr.warn(t.message)}}}async function db(r,e){try{const s=(await Ux()).transaction(Uc,"readwrite");await s.objectStore(Uc).put(e,Lx(r)),await s.done}catch(t){if(t instanceof br)gr.warn(t.message);else{const s=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gr.warn(s.message)}}}function Lx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1024,nk=30;class sk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ik(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=fb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>nk){const u=ak(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){gr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fb(),{heartbeatsToSend:s,unsentEntries:a}=rk(this._heartbeatsCache.heartbeats),l=ed(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return gr.warn(t),""}}}function fb(){return new Date().toISOString().substring(0,10)}function rk(r,e=tk){const t=[];let s=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),mb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),mb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class ik{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FN()?GN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ek(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function mb(r){return ed(JSON.stringify({version:2,heartbeats:r})).length}function ak(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(r){Xo(new Na("platform-logger",e=>new _R(e),"PRIVATE")),Xo(new Na("heartbeat",e=>new sk(e),"PRIVATE")),pi(Ug,ub,r),pi(Ug,ub,"esm2020"),pi("fire-js","")}ok("");var lk="firebase",ck="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(lk,ck,"app");function zx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uk=zx,Bx=new Qc("auth","Firebase",zx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Ep("@firebase/auth");function hk(r,...e){nd.logLevel<=Ke.WARN&&nd.warn(`Auth (${ll}): ${r}`,...e)}function $h(r,...e){nd.logLevel<=Ke.ERROR&&nd.error(`Auth (${ll}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(r,...e){throw Ap(r,...e)}function Vs(r,...e){return Ap(r,...e)}function qx(r,e,t){const s={...uk(),[e]:t};return new Qc("auth","Firebase",s).create(e,{appName:r.name})}function yi(r){return qx(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ap(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Bx.create(r,...e)}function Oe(r,e,...t){if(!r)throw Ap(e,...t)}function fr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $h(e),new Error(e)}function yr(r,e){r||fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function dk(){return gb()==="http:"||gb()==="https:"}function gb(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dk()||BN()||"connection"in navigator)?navigator.onLine:!0}function mk(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=UN()||qN()}get(){return fk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(r,e){yr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yk=new Wc(3e4,6e4);function Sd(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function cl(r,e,t,s,a={}){return Hx(r,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const m=Yc({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return zN()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&ol(r.emulatorConfig.host)&&(y.credentials="include"),$x.fetch()(await Gx(r,r.config.apiHost,t,m),y)})}async function Hx(r,e,t){r._canInitEmulator=!1;const s={...gk,...e};try{const a=new vk(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw jh(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const m=l.ok?u.errorMessage:u.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw jh(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw jh(r,"user-disabled",u);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw qx(r,v,y);pr(r,v)}}catch(a){if(a instanceof br)throw a;pr(r,"network-request-failed",{message:String(a)})}}async function Fx(r,e,t,s,a={}){const l=await cl(r,e,t,s,a);return"mfaPendingCredential"in l&&pr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Gx(r,e,t,s){const a=`${e}${t}?${s}`,l=r,u=l.config.emulator?Np(r.config,a):`${r.config.apiScheme}://${a}`;return pk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Vs(this.auth,"network-request-failed")),yk.get())})}}function jh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Vs(r,e,s);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(r,e){return cl(r,"POST","/v1/accounts:delete",e)}async function sd(r,e){return cl(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bk(r,e=!1){const t=tn(r),s=await t.getIdToken(e),a=Rp(s);Oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Cc(dg(a.auth_time)),issuedAtTime:Cc(dg(a.iat)),expirationTime:Cc(dg(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function dg(r){return Number(r)*1e3}function Rp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return $h("JWT malformed, contained fewer than 3 sections"),null;try{const a=Rx(t);return a?JSON.parse(a):($h("Failed to decode base64 JWT payload"),null)}catch(a){return $h("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function pb(r){const e=Rp(r);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof br&&wk(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function wk({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cc(this.lastLoginAt),this.creationTime=Cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(r){var x;const e=r.auth,t=await r.getIdToken(),s=await Lc(r,sd(e,{idToken:t}));Oe(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(x=a.providerUserInfo)!=null&&x.length?Kx(a.providerUserInfo):[],u=Tk(r.providerData,l),m=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),y=m?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new qg(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(r,v)}async function Ek(r){const e=tn(r);await rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tk(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Kx(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk(r,e){const t=await Hx(r,{},async()=>{const s=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await Gx(r,a,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return r.emulatorConfig&&ol(r.emulatorConfig.host)&&(g.credentials="include"),$x.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ak(r,e){return cl(r,"POST","/v2/accounts:revokeToken",Sd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const t=pb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await Sk(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new Go;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(Oe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Oe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){Oe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gs{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return Oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bk(this,e)}reload(){return Ek(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await rd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ms(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Lc(this,_k(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:x,emailVerified:E,isAnonymous:k,providerData:z,stsTokenManager:B}=t;Oe(x&&B,e,"internal-error");const j=Go.fromJSON(this.name,B);Oe(typeof x=="string",e,"internal-error"),ii(s,e.name),ii(a,e.name),Oe(typeof E=="boolean",e,"internal-error"),Oe(typeof k=="boolean",e,"internal-error"),ii(l,e.name),ii(u,e.name),ii(m,e.name),ii(g,e.name),ii(y,e.name),ii(v,e.name);const J=new gs({uid:x,auth:e,email:a,emailVerified:E,displayName:s,isAnonymous:k,photoURL:u,phoneNumber:l,tenantId:m,stsTokenManager:j,createdAt:y,lastLoginAt:v});return z&&Array.isArray(z)&&(J.providerData=z.map($=>({...$}))),g&&(J._redirectEventId=g),J}static async _fromIdTokenResponse(e,t,s=!1){const a=new Go;a.updateFromServerResponse(t);const l=new gs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await rd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Kx(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new Go;m.updateFromIdToken(s);const g=new gs({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new qg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Map;function mr(r){yr(r instanceof Function,"Expected a class definition");let e=yb.get(r);return e?(yr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,yb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qx.type="NONE";const vb=Qx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r,e,t){return`firebase:${r}:${e}:${t}`}class Ko{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Hh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Hh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sd(this.auth,{idToken:e}).catch(()=>{});return t?gs._fromGetAccountInfoResponse(this.auth,t,e):null}return gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ko(mr(vb),e,s);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||mr(vb);const u=Hh(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(u);if(v){let x;if(typeof v=="string"){const E=await sd(e,{idToken:v}).catch(()=>{});if(!E)break;x=await gs._fromGetAccountInfoResponse(e,E,v)}else x=gs._fromJSON(e,v);y!==l&&(m=x),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ko(l,e,s):(l=g[0],m&&await l._set(u,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new Ko(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eE(e))return"Blackberry";if(tE(e))return"Webos";if(Wx(e))return"Safari";if((e.includes("chrome/")||Xx(e))&&!e.includes("edge/"))return"Chrome";if(Zx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Yx(r=vn()){return/firefox\//i.test(r)}function Wx(r=vn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xx(r=vn()){return/crios\//i.test(r)}function Jx(r=vn()){return/iemobile/i.test(r)}function Zx(r=vn()){return/android/i.test(r)}function eE(r=vn()){return/blackberry/i.test(r)}function tE(r=vn()){return/webos/i.test(r)}function kp(r=vn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Nk(r=vn()){var e;return kp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Rk(){return $N()&&document.documentMode===10}function nE(r=vn()){return kp(r)||Zx(r)||tE(r)||eE(r)||/windows phone/i.test(r)||Jx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(r,e=[]){let t;switch(r){case"Browser":t=_b(vn());break;case"Worker":t=`${_b(vn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,m)=>{try{const g=e(l);u(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(r,e={}){return cl(r,"GET","/v2/passwordPolicy",Sd(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=6;class jk{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ik,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bb(this),this.idTokenSubscription=new bb(this),this.beforeStateQueue=new kk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mr(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sd(this,{idToken:e}),s=await gs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ms(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===m)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ms(this.app))return Promise.reject(yi(this));const t=e?tn(e):null;return t&&Oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ms(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ms(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ck(this),t=new jk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ak(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mr(e)||this._popupRedirectResolver;Oe(t,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[mr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(m,this,"internal-error"),m.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&hk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ad(r){return tn(r)}class bb{constructor(e){this.auth=e,this.observer=null,this.addObserver=XN(t=>this.observer=t)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dk(r){Cp=r}function Pk(r){return Cp.loadJS(r)}function Mk(){return Cp.gapiScript}function Vk(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(r,e){const t=Sp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Aa(l,e??{}))return a;pr(a,"already-initialized")}return t.initialize({options:e})}function Lk(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(mr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function zk(r,e,t){const s=Ad(r);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=rE(e),{host:u,port:m}=Bk(e),g=m===null?"":`:${m}`,y={url:`${l}//${u}${g}/`},v=Object.freeze({host:u,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(Aa(y,s.config.emulator)&&Aa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ol(u)?(jx(`${l}//${u}${g}`),Ox("Auth",!0)):qk()}function rE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Bk(r){const e=rE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:wb(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:wb(u)}}}function wb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function qk(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fr("not implemented")}_getIdTokenResponse(e){return fr("not implemented")}_linkToIdToken(e,t){return fr("not implemented")}_getReauthenticationResolver(e){return fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(r,e){return Fx(r,"POST","/v1/accounts:signInWithIdp",Sd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="http://localhost";class Ra extends iE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new Ra(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Qo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Qo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qo(e,t)}buildRequest(){const e={requestUri:$k,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends aE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Xc{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Xc{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Xc{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(r,e){return Fx(r,"POST","/v1/accounts:signUp",Sd(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await gs._fromIdTokenResponse(e,s,a),u=xb(s);return new wi({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=xb(s);return new wi({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function xb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(r){var a;if(ms(r.app))return Promise.reject(yi(r));const e=Ad(r);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new wi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Hk(e,{returnSecureToken:!0}),s=await wi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends br{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new id(e,t,s,a)}}function oE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?id._fromErrorAndOperation(r,l,e,s):l})}async function Gk(r,e,t=!1){const s=await Lc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return wi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(r,e,t=!1){const{auth:s}=r;if(ms(s.app))return Promise.reject(yi(s));const a="reauthenticate";try{const l=await Lc(r,oE(s,a,e,r),t);Oe(l.idToken,s,"internal-error");const u=Rp(l.idToken);Oe(u,s,"internal-error");const{sub:m}=u;return Oe(r.uid===m,s,"user-mismatch"),wi._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(r,e,t=!1){if(ms(r.app))return Promise.reject(yi(r));const s="signIn",a=await oE(r,s,e),l=await wi._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}function Yk(r,e,t,s){return tn(r).onIdTokenChanged(e,t,s)}function Wk(r,e,t){return tn(r).beforeAuthStateChanged(e,t)}function Xk(r,e,t,s){return tn(r).onAuthStateChanged(e,t,s)}function Jk(r){return tn(r).signOut()}const ad="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ad,"1"),this.storage.removeItem(ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=1e3,eC=10;class cE extends lE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,m,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);Rk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,eC):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const tC=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends lE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uE.type="SESSION";const hE=uE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Nd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const m=Array.from(u).map(async y=>y(t.origin,l)),g=await nC(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((m,g)=>{const y=Ip("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(x){const E=x;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(E.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function rC(r){Us().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function iC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function oC(){return dE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="firebaseLocalStorageDb",lC=1,od="firebaseLocalStorage",mE="fbase_key";class Jc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rd(r,e){return r.transaction([od],e?"readwrite":"readonly").objectStore(od)}function cC(){const r=indexedDB.deleteDatabase(fE);return new Jc(r).toPromise()}function $g(){const r=indexedDB.open(fE,lC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(od,{keyPath:mE})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(od)?e(s):(s.close(),await cC(),e(await $g()))})})}async function Eb(r,e,t){const s=Rd(r,!0).put({[mE]:e,value:t});return new Jc(s).toPromise()}async function uC(r,e){const t=Rd(r,!1).get(e),s=await new Jc(t).toPromise();return s===void 0?null:s.value}function Tb(r,e){const t=Rd(r,!0).delete(e);return new Jc(t).toPromise()}const hC=800,dC=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>dC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nd._getInstance(oC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await iC(),!this.activeServiceWorker)return;this.sender=new sC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await Eb(e,ad,"1"),await Tb(e,ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Eb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>uC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Tb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Rd(a,!1).getAll();return new Jc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const fC=gE;new Wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(r,e){return e?mr(e):(Oe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends iE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gC(r){return Qk(r.auth,new jp(r),r.bypassAuthState)}function pC(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),Kk(t,new jp(r),r.bypassAuthState)}async function yC(r){const{auth:e,user:t}=r;return Oe(t,e,"internal-error"),Gk(t,new jp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:m}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:pr(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Wc(2e3,1e4);class Fo extends pE{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="pendingRedirect",Fh=new Map;class bC extends pE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const s=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(r,e){const t=TC(e),s=EC(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function xC(r,e){Fh.set(r._key(),e)}function EC(r){return mr(r._redirectPersistence)}function TC(r){return Hh(_C,r.config.apiKey,r.name)}async function SC(r,e,t=!1){if(ms(r.app))return Promise.reject(yi(r));const s=Ad(r),a=mC(s,e),u=await new bC(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=10*60*1e3;class NC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!yE(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Vs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sb(e))}saveEventToCache(e){this.cachedEventUids.add(Sb(e)),this.lastProcessedEventTime=Date.now()}}function Sb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function yE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(r,e={}){return cl(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function jC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await kC(r);for(const t of e)try{if(OC(t))return}catch{}pr(r,"unauthorized-domain")}function OC(r){const e=Bg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!IC.test(t))return!1;if(CC.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new Wc(3e4,6e4);function Ab(){const r=Us().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function PC(r){return new Promise((e,t)=>{var a,l,u;function s(){Ab(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ab(),t(Vs(r,"network-request-failed"))},timeout:DC.get()})}if((l=(a=Us().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Us().gapi)!=null&&u.load)s();else{const m=Vk("iframefcb");return Us()[m]=()=>{gapi.load?s():t(Vs(r,"network-request-failed"))},Pk(`${Mk()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function MC(r){return Gh=Gh||PC(r),Gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=new Wc(5e3,15e3),UC="__/auth/iframe",LC="emulator/auth/iframe",zC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qC(r){const e=r.config;Oe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Np(e,LC):`https://${r.config.authDomain}/${UC}`,s={apiKey:e.apiKey,appName:r.name,v:ll},a=BC.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Yc(s).slice(1)}`}async function $C(r){const e=await MC(r),t=Us().gapi;return Oe(t,r,"internal-error"),e.open({where:document.body,url:qC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zC,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Vs(r,"network-request-failed"),m=Us().setTimeout(()=>{l(u)},VC.get());function g(){Us().clearTimeout(m),a(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FC=500,GC=600,KC="_blank",QC="http://localhost";class Nb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YC(r,e,t,s=FC,a=GC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...HC,width:s.toString(),height:a.toString(),top:l,left:u},y=vn().toLowerCase();t&&(m=Xx(y)?KC:t),Yx(y)&&(e=e||QC,g.scrollbars="yes");const v=Object.entries(g).reduce((E,[k,z])=>`${E}${k}=${z},`,"");if(Nk(y)&&m!=="_self")return WC(e||"",m),new Nb(null);const x=window.open(e||"",m,v);Oe(x,r,"popup-blocked");try{x.focus()}catch{}return new Nb(x)}function WC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="__/auth/handler",JC="emulator/auth/handler",ZC=encodeURIComponent("fac");async function Rb(r,e,t,s,a,l){Oe(r.config.authDomain,r,"auth-domain-config-required"),Oe(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ll,eventId:a};if(e instanceof aE){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",WN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,x]of Object.entries({}))u[v]=x}if(e instanceof Xc){const v=e.getScopes().filter(x=>x!=="");v.length>0&&(u.scopes=v.join(","))}r.tenantId&&(u.tid=r.tenantId);const m=u;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await r._getAppCheckToken(),y=g?`#${ZC}=${encodeURIComponent(g)}`:"";return`${eI(r)}?${Yc(m).slice(1)}${y}`}function eI({config:r}){return r.emulator?Np(r,JC):`https://${r.authDomain}/${XC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="webStorageSupport";class tI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hE,this._completeRedirectFn=SC,this._overrideRedirectResult=xC}async _openPopup(e,t,s,a){var u;yr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Rb(e,t,s,Bg(),a);return YC(e,l,Ip())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Rb(e,t,s,Bg(),a);return rC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(yr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await $C(e),s=new NC(e);return t.register("authEvent",a=>(Oe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fg,{type:fg},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[fg];l!==void 0&&t(!!l),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nE()||Wx()||kp()}}const nI=tI;var kb="@firebase/auth",Cb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iI(r){Xo(new Na("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:m}=s.options;Oe(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sE(r)},y=new Ok(s,a,l,g);return Lk(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Xo(new Na("auth-internal",e=>{const t=Ad(e.getProvider("auth").getImmediate());return(s=>new sI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(kb,Cb,rI(r)),pi(kb,Cb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=5*60,oI=Ix("authIdTokenMaxAge")||aI;let Ib=null;const lI=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>oI)return;const a=t==null?void 0:t.token;Ib!==a&&(Ib=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function cI(r=Vx()){const e=Sp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Uk(r,{popupRedirectResolver:nI,persistence:[fC,tC,hE]}),s=Ix("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=lI(l.toString());Wk(t,u,()=>u(t.currentUser)),Yk(t,m=>u(m))}}const a=kx("auth");return a&&zk(t,`http://${a}`),t}function uI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Dk({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=Vs("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",uI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iI("Browser");var jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vi,vE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function N(){}N.prototype=A.prototype,C.F=A.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(D,O,V){for(var R=Array(arguments.length-2),We=2;We<arguments.length;We++)R[We-2]=arguments[We];return A.prototype[O].apply(D,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,A,N){N||(N=0);const D=Array(16);if(typeof A=="string")for(var O=0;O<16;++O)D[O]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(O=0;O<16;++O)D[O]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=C.g[0],N=C.g[1],O=C.g[2];let V=C.g[3],R;R=A+(V^N&(O^V))+D[0]+3614090360&4294967295,A=N+(R<<7&4294967295|R>>>25),R=V+(O^A&(N^O))+D[1]+3905402710&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(N^V&(A^N))+D[2]+606105819&4294967295,O=V+(R<<17&4294967295|R>>>15),R=N+(A^O&(V^A))+D[3]+3250441966&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(V^N&(O^V))+D[4]+4118548399&4294967295,A=N+(R<<7&4294967295|R>>>25),R=V+(O^A&(N^O))+D[5]+1200080426&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(N^V&(A^N))+D[6]+2821735955&4294967295,O=V+(R<<17&4294967295|R>>>15),R=N+(A^O&(V^A))+D[7]+4249261313&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(V^N&(O^V))+D[8]+1770035416&4294967295,A=N+(R<<7&4294967295|R>>>25),R=V+(O^A&(N^O))+D[9]+2336552879&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(N^V&(A^N))+D[10]+4294925233&4294967295,O=V+(R<<17&4294967295|R>>>15),R=N+(A^O&(V^A))+D[11]+2304563134&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(V^N&(O^V))+D[12]+1804603682&4294967295,A=N+(R<<7&4294967295|R>>>25),R=V+(O^A&(N^O))+D[13]+4254626195&4294967295,V=A+(R<<12&4294967295|R>>>20),R=O+(N^V&(A^N))+D[14]+2792965006&4294967295,O=V+(R<<17&4294967295|R>>>15),R=N+(A^O&(V^A))+D[15]+1236535329&4294967295,N=O+(R<<22&4294967295|R>>>10),R=A+(O^V&(N^O))+D[1]+4129170786&4294967295,A=N+(R<<5&4294967295|R>>>27),R=V+(N^O&(A^N))+D[6]+3225465664&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(V^A))+D[11]+643717713&4294967295,O=V+(R<<14&4294967295|R>>>18),R=N+(V^A&(O^V))+D[0]+3921069994&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(N^O))+D[5]+3593408605&4294967295,A=N+(R<<5&4294967295|R>>>27),R=V+(N^O&(A^N))+D[10]+38016083&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(V^A))+D[15]+3634488961&4294967295,O=V+(R<<14&4294967295|R>>>18),R=N+(V^A&(O^V))+D[4]+3889429448&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(N^O))+D[9]+568446438&4294967295,A=N+(R<<5&4294967295|R>>>27),R=V+(N^O&(A^N))+D[14]+3275163606&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(V^A))+D[3]+4107603335&4294967295,O=V+(R<<14&4294967295|R>>>18),R=N+(V^A&(O^V))+D[8]+1163531501&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(O^V&(N^O))+D[13]+2850285829&4294967295,A=N+(R<<5&4294967295|R>>>27),R=V+(N^O&(A^N))+D[2]+4243563512&4294967295,V=A+(R<<9&4294967295|R>>>23),R=O+(A^N&(V^A))+D[7]+1735328473&4294967295,O=V+(R<<14&4294967295|R>>>18),R=N+(V^A&(O^V))+D[12]+2368359562&4294967295,N=O+(R<<20&4294967295|R>>>12),R=A+(N^O^V)+D[5]+4294588738&4294967295,A=N+(R<<4&4294967295|R>>>28),R=V+(A^N^O)+D[8]+2272392833&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^N)+D[11]+1839030562&4294967295,O=V+(R<<16&4294967295|R>>>16),R=N+(O^V^A)+D[14]+4259657740&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(N^O^V)+D[1]+2763975236&4294967295,A=N+(R<<4&4294967295|R>>>28),R=V+(A^N^O)+D[4]+1272893353&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^N)+D[7]+4139469664&4294967295,O=V+(R<<16&4294967295|R>>>16),R=N+(O^V^A)+D[10]+3200236656&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(N^O^V)+D[13]+681279174&4294967295,A=N+(R<<4&4294967295|R>>>28),R=V+(A^N^O)+D[0]+3936430074&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^N)+D[3]+3572445317&4294967295,O=V+(R<<16&4294967295|R>>>16),R=N+(O^V^A)+D[6]+76029189&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(N^O^V)+D[9]+3654602809&4294967295,A=N+(R<<4&4294967295|R>>>28),R=V+(A^N^O)+D[12]+3873151461&4294967295,V=A+(R<<11&4294967295|R>>>21),R=O+(V^A^N)+D[15]+530742520&4294967295,O=V+(R<<16&4294967295|R>>>16),R=N+(O^V^A)+D[2]+3299628645&4294967295,N=O+(R<<23&4294967295|R>>>9),R=A+(O^(N|~V))+D[0]+4096336452&4294967295,A=N+(R<<6&4294967295|R>>>26),R=V+(N^(A|~O))+D[7]+1126891415&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~N))+D[14]+2878612391&4294967295,O=V+(R<<15&4294967295|R>>>17),R=N+(V^(O|~A))+D[5]+4237533241&4294967295,N=O+(R<<21&4294967295|R>>>11),R=A+(O^(N|~V))+D[12]+1700485571&4294967295,A=N+(R<<6&4294967295|R>>>26),R=V+(N^(A|~O))+D[3]+2399980690&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~N))+D[10]+4293915773&4294967295,O=V+(R<<15&4294967295|R>>>17),R=N+(V^(O|~A))+D[1]+2240044497&4294967295,N=O+(R<<21&4294967295|R>>>11),R=A+(O^(N|~V))+D[8]+1873313359&4294967295,A=N+(R<<6&4294967295|R>>>26),R=V+(N^(A|~O))+D[15]+4264355552&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~N))+D[6]+2734768916&4294967295,O=V+(R<<15&4294967295|R>>>17),R=N+(V^(O|~A))+D[13]+1309151649&4294967295,N=O+(R<<21&4294967295|R>>>11),R=A+(O^(N|~V))+D[4]+4149444226&4294967295,A=N+(R<<6&4294967295|R>>>26),R=V+(N^(A|~O))+D[11]+3174756917&4294967295,V=A+(R<<10&4294967295|R>>>22),R=O+(A^(V|~N))+D[2]+718787259&4294967295,O=V+(R<<15&4294967295|R>>>17),R=N+(V^(O|~A))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+V&4294967295}s.prototype.v=function(C,A){A===void 0&&(A=C.length);const N=A-this.blockSize,D=this.C;let O=this.h,V=0;for(;V<A;){if(O==0)for(;V<=N;)a(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<A;)if(D[O++]=C.charCodeAt(V++),O==this.blockSize){a(this,D),O=0;break}}else for(;V<A;)if(D[O++]=C[V++],O==this.blockSize){a(this,D),O=0;break}}this.h=O,this.o+=A},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;A=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=A&255,A/=256;for(this.v(C),C=Array(16),A=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)C[A++]=this.g[N]>>>D&255;return C};function l(C,A){var N=m;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=A(C)}function u(C,A){this.h=A;const N=[];let D=!0;for(let O=C.length-1;O>=0;O--){const V=C[O]|0;D&&V==A||(N[O]=V,D=!1)}this.g=N}var m={};function g(C){return-128<=C&&C<128?l(C,function(A){return new u([A|0],A<0?-1:0)}):new u([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return x;if(C<0)return j(y(-C));const A=[];let N=1;for(let D=0;C>=N;D++)A[D]=C/N|0,N*=4294967296;return new u(A,0)}function v(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return j(v(C.substring(1),A));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(A,8));let D=x;for(let V=0;V<C.length;V+=8){var O=Math.min(8,C.length-V);const R=parseInt(C.substring(V,V+O),A);O<8?(O=y(Math.pow(A,O)),D=D.j(O).add(y(R))):(D=D.j(N),D=D.add(y(R)))}return D}var x=g(0),E=g(1),k=g(16777216);r=u.prototype,r.m=function(){if(B(this))return-j(this).m();let C=0,A=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);C+=(D>=0?D:4294967296+D)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(z(this))return"0";if(B(this))return"-"+j(this).toString(C);const A=y(Math.pow(C,6));var N=this;let D="";for(;;){const O=le(N,A).g;N=J(N,O.j(A));let V=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=O,z(N))return V+D;for(;V.length<6;)V="0"+V;D=V+D}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function z(C){if(C.h!=0)return!1;for(let A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function B(C){return C.h==-1}r.l=function(C){return C=J(this,C),B(C)?-1:z(C)?0:1};function j(C){const A=C.g.length,N=[];for(let D=0;D<A;D++)N[D]=~C.g[D];return new u(N,~C.h).add(E)}r.abs=function(){return B(this)?j(this):this},r.add=function(C){const A=Math.max(this.g.length,C.g.length),N=[];let D=0;for(let O=0;O<=A;O++){let V=D+(this.i(O)&65535)+(C.i(O)&65535),R=(V>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);D=R>>>16,V&=65535,R&=65535,N[O]=R<<16|V}return new u(N,N[N.length-1]&-2147483648?-1:0)};function J(C,A){return C.add(j(A))}r.j=function(C){if(z(this)||z(C))return x;if(B(this))return B(C)?j(this).j(j(C)):j(j(this).j(C));if(B(C))return j(this.j(j(C)));if(this.l(k)<0&&C.l(k)<0)return y(this.m()*C.m());const A=this.g.length+C.g.length,N=[];for(var D=0;D<2*A;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<C.g.length;O++){const V=this.i(D)>>>16,R=this.i(D)&65535,We=C.i(O)>>>16,Ue=C.i(O)&65535;N[2*D+2*O]+=R*Ue,$(N,2*D+2*O),N[2*D+2*O+1]+=V*Ue,$(N,2*D+2*O+1),N[2*D+2*O+1]+=R*We,$(N,2*D+2*O+1),N[2*D+2*O+2]+=V*We,$(N,2*D+2*O+2)}for(C=0;C<A;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=A;C<2*A;C++)N[C]=0;return new u(N,0)};function $(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function W(C,A){this.g=C,this.h=A}function le(C,A){if(z(A))throw Error("division by zero");if(z(C))return new W(x,x);if(B(C))return A=le(j(C),A),new W(j(A.g),j(A.h));if(B(A))return A=le(C,j(A)),new W(j(A.g),A.h);if(C.g.length>30){if(B(C)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var N=E,D=A;D.l(C)<=0;)N=ce(N),D=ce(D);var O=oe(N,1),V=oe(D,1);for(D=oe(D,2),N=oe(N,2);!z(D);){var R=V.add(D);R.l(C)<=0&&(O=O.add(N),V=R),D=oe(D,1),N=oe(N,1)}return A=J(C,O.j(A)),new W(O,A)}for(O=x;C.l(A)>=0;){for(N=Math.max(1,Math.floor(C.m()/A.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),V=y(N),R=V.j(A);B(R)||R.l(C)>0;)N-=D,V=y(N),R=V.j(A);z(V)&&(V=E),O=O.add(V),C=J(C,R)}return new W(O,C)}r.B=function(C){return le(this,C).h},r.and=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let D=0;D<A;D++)N[D]=this.i(D)&C.i(D);return new u(N,this.h&C.h)},r.or=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let D=0;D<A;D++)N[D]=this.i(D)|C.i(D);return new u(N,this.h|C.h)},r.xor=function(C){const A=Math.max(this.g.length,C.g.length),N=[];for(let D=0;D<A;D++)N[D]=this.i(D)^C.i(D);return new u(N,this.h^C.h)};function ce(C){const A=C.g.length+1,N=[];for(let D=0;D<A;D++)N[D]=C.i(D)<<1|C.i(D-1)>>>31;return new u(N,C.h)}function oe(C,A){const N=A>>5;A%=32;const D=C.g.length-N,O=[];for(let V=0;V<D;V++)O[V]=A>0?C.i(V+N)>>>A|C.i(V+N+1)<<32-A:C.i(V+N);return new u(O,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,vE=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=v,vi=u}).apply(typeof jb<"u"?jb:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _E,Tc,bE,Kh,Hg,wE,xE,EE;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var _=0;_<d.length;++_){var b=d[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function a(d,_){if(_)e:{var b=s;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in b))break e;b=b[F]}d=d[d.length-1],S=b[d],_=_(S),_!=S&&_!=null&&e(b,d,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(_){var b=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&b.push([S,_[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function m(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function g(d,_,b){return d.call.apply(d.bind,arguments)}function y(d,_,b){return y=g,y.apply(null,arguments)}function v(d,_){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function x(d,_){function b(){}b.prototype=_.prototype,d.Z=_.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(S,F,Y){for(var ue=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ue[Pe-2]=arguments[Pe];return _.prototype[F].apply(S,ue)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function k(d){const _=d.length;if(_>0){const b=Array(_);for(let S=0;S<_;S++)b[S]=d[S];return b}return[]}function z(d,_){for(let S=1;S<arguments.length;S++){const F=arguments[S];var b=typeof F;if(b=b!="object"?b:F?Array.isArray(F)?"array":b:"null",b=="array"||b=="object"&&typeof F.length=="number"){b=d.length||0;const Y=F.length||0;d.length=b+Y;for(let ue=0;ue<Y;ue++)d[b+ue]=F[ue]}else d.push(F)}}class B{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(d){u.setTimeout(()=>{throw d},0)}function J(){var d=C;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class ${constructor(){this.h=this.g=null}add(_,b){const S=W.get();S.set(_,b),this.h?this.h.next=S:this.g=S,this.h=S}}var W=new B(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,oe=!1,C=new $,A=()=>{const d=Promise.resolve(void 0);ce=()=>{d.then(N)}};function N(){for(var d;d=J();){try{d.h.call(d.g)}catch(b){j(b)}var _=W;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}oe=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};u.addEventListener("test",b,_),u.removeEventListener("test",b,_)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function We(d,_){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}x(We,O),We.prototype.init=function(d,_){const b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(b=="mouseover"?_=d.fromElement:b=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ue="closure_listenable_"+(Math.random()*1e6|0),U=0;function ie(d,_,b,S,F){this.listener=d,this.proxy=null,this.src=_,this.type=b,this.capture=!!S,this.ha=F,this.key=++U,this.da=this.fa=!1}function ne(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ze(d,_,b){for(const S in d)_.call(b,d[S],S,d)}function M(d,_){for(const b in d)_.call(void 0,d[b],b,d)}function re(d){const _={};for(const b in d)_[b]=d[b];return _}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,_){let b,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(b in S)d[b]=S[b];for(let Y=0;Y<he.length;Y++)b=he[Y],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function ae(d){this.src=d,this.g={},this.h=0}ae.prototype.add=function(d,_,b,S,F){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const ue=ve(d,_,S,F);return ue>-1?(_=d[ue],b||(_.fa=!1)):(_=new ie(_,this.src,Y,!!S,F),_.fa=b,d.push(_)),_};function Te(d,_){const b=_.type;if(b in d.g){var S=d.g[b],F=Array.prototype.indexOf.call(S,_,void 0),Y;(Y=F>=0)&&Array.prototype.splice.call(S,F,1),Y&&(ne(_),d.g[b].length==0&&(delete d.g[b],d.h--))}}function ve(d,_,b,S){for(let F=0;F<d.length;++F){const Y=d[F];if(!Y.da&&Y.listener==_&&Y.capture==!!b&&Y.ha==S)return F}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),et={};function un(d,_,b,S,F){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)un(d,_[Y],b,S,F);return null}return b=lu(b),d&&d[Ue]?d.J(_,b,m(S)?!!S.capture:!1,F):_s(d,_,b,!1,S,F)}function _s(d,_,b,S,F,Y){if(!_)throw Error("Invalid event type");const ue=m(F)?!!F.capture:!!F;let Pe=gl(d);if(Pe||(d[$e]=Pe=new ae(d)),b=Pe.add(_,b,S,ue,Y),b.proxy)return b;if(S=bs(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)V||(F=ue),F===void 0&&(F=!1),d.addEventListener(_.toString(),S,F);else if(d.attachEvent)d.attachEvent(Va(_.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function bs(){function d(b){return _.call(d.src,d.listener,b)}const _=Gd;return d}function ts(d,_,b,S,F){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)ts(d,_[Y],b,S,F);else S=m(S)?!!S.capture:!!S,b=lu(b),d&&d[Ue]?(d=d.i,Y=String(_).toString(),Y in d.g&&(_=d.g[Y],b=ve(_,b,S,F),b>-1&&(ne(_[b]),Array.prototype.splice.call(_,b,1),_.length==0&&(delete d.g[Y],d.h--)))):d&&(d=gl(d))&&(_=d.g[_.toString()],d=-1,_&&(d=ve(_,b,S,F)),(b=d>-1?_[d]:null)&&Ii(b))}function Ii(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Ue])Te(_.i,d);else{var b=d.type,S=d.proxy;_.removeEventListener?_.removeEventListener(b,S,d.capture):_.detachEvent?_.detachEvent(Va(b),S):_.addListener&&_.removeListener&&_.removeListener(S),(b=gl(_))?(Te(b,d),b.h==0&&(b.src=null,_[$e]=null)):ne(d)}}}function Va(d){return d in et?et[d]:et[d]="on"+d}function Gd(d,_){if(d.da)d=!0;else{_=new We(_,this);const b=d.listener,S=d.ha||d.src;d.fa&&Ii(d),d=b.call(S,_)}return d}function gl(d){return d=d[$e],d instanceof ae?d:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function lu(d){return typeof d=="function"?d:(d[Tn]||(d[Tn]=function(_){return d.handleEvent(_)}),d[Tn])}function zt(){D.call(this),this.i=new ae(this),this.M=this,this.G=null}x(zt,D),zt.prototype[Ue]=!0,zt.prototype.removeEventListener=function(d,_,b,S){ts(this,d,_,b,S)};function Kt(d,_){var b,S=d.G;if(S)for(b=[];S;S=S.G)b.push(S);if(d=d.M,S=_.type||_,typeof _=="string")_=new O(_,d);else if(_ instanceof O)_.target=_.target||d;else{var F=_;_=new O(S,d),P(_,F)}F=!0;let Y,ue;if(b)for(ue=b.length-1;ue>=0;ue--)Y=_.g=b[ue],F=Hs(Y,S,!0,_)&&F;if(Y=_.g=d,F=Hs(Y,S,!0,_)&&F,F=Hs(Y,S,!1,_)&&F,b)for(ue=0;ue<b.length;ue++)Y=_.g=b[ue],F=Hs(Y,S,!1,_)&&F}zt.prototype.N=function(){if(zt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const b=d.g[_];for(let S=0;S<b.length;S++)ne(b[S]);delete d.g[_],d.h--}}this.G=null},zt.prototype.J=function(d,_,b,S){return this.i.add(String(d),_,!1,b,S)},zt.prototype.K=function(d,_,b,S){return this.i.add(String(d),_,!0,b,S)};function Hs(d,_,b,S){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let F=!0;for(let Y=0;Y<_.length;++Y){const ue=_[Y];if(ue&&!ue.da&&ue.capture==b){const Pe=ue.listener,pt=ue.ha||ue.src;ue.fa&&Te(d.i,ue),F=Pe.call(pt,S)!==!1&&F}}return F&&!S.defaultPrevented}function Kd(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(d,_||0)}function pl(d){d.g=Kd(()=>{d.g=null,d.i&&(d.i=!1,pl(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Qd extends D{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:pl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(d){D.call(this),this.h=d,this.g={}}x(ji,D);var wr=[];function hn(d){ze(d.g,function(_,b){this.g.hasOwnProperty(b)&&Ii(_)},d),d.g={}}ji.prototype.N=function(){ji.Z.N.call(this),hn(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=u.JSON.stringify,_n=u.JSON.parse,Yd=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function cu(){}function uu(){}var ws={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xr(){O.call(this,"d")}x(xr,O);function ns(){O.call(this,"c")}x(ns,O);var $n={},Er=null;function Ua(){return Er=Er||new zt}$n.Ia="serverreachability";function yl(d){O.call(this,$n.Ia,d)}x(yl,O);function Tr(d){const _=Ua();Kt(_,new yl(_))}$n.STAT_EVENT="statevent";function La(d,_){O.call(this,$n.STAT_EVENT,d),this.stat=_}x(La,O);function St(d){const _=Ua();Kt(_,new La(_,d))}$n.Ja="timingevent";function hu(d,_){O.call(this,$n.Ja,d),this.size=_}x(hu,O);function Sr(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},_)}function Ar(){this.g=!0}Ar.prototype.ua=function(){this.g=!1};function vl(d,_,b,S,F,Y){d.info(function(){if(d.g)if(Y){var ue="",Pe=Y.split("&");for(let st=0;st<Pe.length;st++){var pt=Pe[st].split("=");if(pt.length>1){const Rt=pt[0];pt=pt[1];const jn=Rt.split("_");ue=jn.length>=2&&jn[1]=="type"?ue+(Rt+"="+pt+"&"):ue+(Rt+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+_+`
`+b+`
`+ue})}function _l(d,_,b,S,F,Y,ue){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+_+`
`+b+`
`+Y+" "+ue})}function Fs(d,_,b,S){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+xs(d,b)+(S?" "+S:"")})}function Wd(d,_){d.info(function(){return"TIMEOUT: "+_})}Ar.prototype.info=function(){};function xs(d,_){if(!d.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var b=Y[d];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let ue=1;ue<S.length;ue++)S[ue]=""}}}}return qn(Y)}catch{return _}}var At={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gs;function Oi(){}x(Oi,cu),Oi.prototype.g=function(){return new XMLHttpRequest},Gs=new Oi;function Di(d){return encodeURIComponent(String(d))}function Xd(d){var _=1;d=d.split(":");const b=[];for(;_>0&&d.length;)b.push(d.shift()),_--;return d.length&&b.push(d.join(":")),b}function ss(d,_,b,S){this.j=d,this.i=_,this.l=b,this.S=S||1,this.V=new ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Nr}function Nr(){this.i=null,this.g="",this.h=!1}var za={},Es={};function Ts(d,_,b){d.M=1,d.A=Qs(bt(_)),d.u=b,d.R=!0,Rr(d,null)}function Rr(d,_){d.F=Date.now(),Pi(d),d.B=bt(d.A);var b=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),gu(b.i,"t",S),d.C=0,b=d.j.L,d.h=new Nr,d.g=Wa(d.j,b?_:null,!d.u),d.P>0&&(d.O=new Qd(y(d.Y,d,d.g),d.P)),_=d.V,b=d.g,S=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(wr[0]=F.toString()),F=wr);for(let Y=0;Y<F.length;Y++){const ue=un(b,F[Y],S||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=d.J?re(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Tr(),vl(d.i,d.v,d.B,d.l,d.S,d.u)}ss.prototype.ba=function(d){d=d.target;const _=this.O;_&&dn(d)==3?_.j():this.Y(d)},ss.prototype.Y=function(d){try{if(d==this.g)e:{const Pe=dn(this.g),pt=this.g.ya(),st=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Gi(this.g)))){this.K||Pe!=4||pt==7||(pt==8||st<=0?Tr(3):Tr(2)),As(this);var _=this.g.ca();this.X=_;var b=kr(this);if(this.o=_==200,_l(this.i,this.v,this.B,this.l,this.S,Pe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var Y=S;break t}}Y=null}if(d=Y)Fs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ba(this,d);else{this.o=!1,this.m=3,St(12),Ns(this),Mi(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<b.length;)if(Rt=du(this,b),Rt==Es){Pe==4&&(this.m=4,St(14),d=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==za){this.m=4,St(15),Fs(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else Fs(this.i,this.l,Rt,null),Ba(this,Rt);if(Nt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||b.length!=0||this.h.h||(this.m=1,St(16),d=!1),this.o=this.o&&d,!d)Fs(this.i,this.l,b,"[Invalid Chunked Response]"),Ns(this),Mi(this);else if(b.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),kl(ue),ue.P=!0,St(11))}}else Fs(this.i,this.l,b,null),Ba(this,b);Pe==4&&Ns(this),this.o&&!this.K&&(Pe==4?Cl(this.j,this):(this.o=!1,Pi(this)))}else Ki(this.g),_==400&&b.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Ns(this),Mi(this)}}}catch{}finally{}};function kr(d){if(!Nt(d))return d.g.la();const _=Gi(d.g);if(_==="")return"";let b="";const S=_.length,F=dn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ns(d),Mi(d),"";d.h.i=new u.TextDecoder}for(let Y=0;Y<S;Y++)d.h.h=!0,b+=d.h.i.decode(_[Y],{stream:!(F&&Y==S-1)});return _.length=0,d.h.g+=b,d.C=0,d.h.g}function Nt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function du(d,_){var b=d.C,S=_.indexOf(`
`,b);return S==-1?Es:(b=Number(_.substring(b,S)),isNaN(b)?za:(S+=1,S+b>_.length?Es:(_=_.slice(S,S+b),d.C=S+b,_)))}ss.prototype.cancel=function(){this.K=!0,Ns(this)};function Pi(d){d.T=Date.now()+d.H,Ss(d,d.H)}function Ss(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Sr(y(d.aa,d),_)}function As(d){d.D&&(u.clearTimeout(d.D),d.D=null)}ss.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Wd(this.i,this.B),this.M!=2&&(Tr(),St(17)),Ns(this),this.m=2,Mi(this)):Ss(this,this.T-d)};function Mi(d){d.j.I==0||d.K||Cl(d.j,d)}function Ns(d){As(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,hn(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function Ba(d,_){try{var b=d.j;if(b.I!=0&&(b.g==d||Li(b.h,d))){if(!d.L&&Li(b.h,d)&&b.I==3){try{var S=b.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Ya(b),Rs(b);else break e;Rl(b),St(18)}}else b.xa=F[1],0<b.xa-b.K&&F[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Sr(y(b.Va,b),6e3));Hn(b.h)<=1&&b.ta&&(b.ta=void 0)}else Xs(b,11)}else if((d.L||b.g==d)&&Ya(b),!R(_))for(F=b.Ba.g.parse(_),_=0;_<F.length;_++){let st=F[_];const Rt=st[0];if(!(Rt<=b.K))if(b.K=Rt,st=st[1],b.I==2)if(st[0]=="c"){b.M=st[1],b.ba=st[2];const jn=st[3];jn!=null&&(b.ka=jn,b.j.info("VER="+b.ka));const ks=st[4];ks!=null&&(b.za=ks,b.j.info("SVER="+b.za));const as=st[5];as!=null&&typeof as=="number"&&as>0&&(S=1.5*as,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const os=d.g;if(os){const ls=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ls){var Y=S.h;Y.g||ls.indexOf("spdy")==-1&&ls.indexOf("quic")==-1&&ls.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(qa(Y,Y.h),Y.h=null))}if(S.G){const jl=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;jl&&(S.wa=jl,at(S.J,S.G,jl))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var ue=d;if(S.na=Tu(S,S.L?S.ba:null,S.W),ue.L){Ks(S.h,ue);var Pe=ue,pt=S.O;pt&&(Pe.H=pt),Pe.D&&(As(Pe),Pi(Pe)),S.g=ue}else bu(S);b.i.length>0&&Xi(b)}else st[0]!="stop"&&st[0]!="close"||Xs(b,7);else b.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?Xs(b,7):Yi(b):st[0]!="noop"&&b.l&&b.l.qa(st),b.A=0)}}Tr(4)}catch{}}var Jd=class{constructor(d,_){this.g=d,this.map=_}};function Vi(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ui(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hn(d){return d.h?1:d.g?d.g.size:0}function Li(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function qa(d,_){d.g?d.g.add(_):d.h=_}function Ks(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Vi.prototype.cancel=function(){if(this.i=$a(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function $a(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const b of d.g.values())_=_.concat(b.G);return _}return k(d.i)}var Ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zd(d,_){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const S=d[b].indexOf("=");let F,Y=null;S>=0?(F=d[b].substring(0,S),Y=d[b].substring(S+1)):F=d[b],_(F,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function rs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof rs?(this.l=d.l,Cr(this,d.j),this.o=d.o,this.g=d.g,zi(this,d.u),this.h=d.h,Ir(this,pu(d.i)),this.m=d.m):d&&(_=String(d).match(Ha))?(this.l=!1,Cr(this,_[1]||"",!0),this.o=Bi(_[2]||""),this.g=Bi(_[3]||"",!0),zi(this,_[4]),this.h=Bi(_[5]||"",!0),Ir(this,_[6]||"",!0),this.m=Bi(_[7]||"")):(this.l=!1,this.i=new Fn(null,this.l))}rs.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Qt(_,wl,!0),":");var b=this.g;return(b||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Qt(_,wl,!0),"@"),d.push(Di(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qt(b,b.charAt(0)=="/"?jr:xl,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qt(b,mu)),d.join("")},rs.prototype.resolve=function(d){const _=bt(this);let b=!!d.j;b?Cr(_,d.j):b=!!d.o,b?_.o=d.o:b=!!d.g,b?_.g=d.g:b=d.u!=null;var S=d.h;if(b)zi(_,d.u);else if(b=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=_.h.lastIndexOf("/");F!=-1&&(S=_.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const Y=[];for(let ue=0;ue<F.length;){const Pe=F[ue++];Pe=="."?S&&ue==F.length&&Y.push(""):Pe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),S&&ue==F.length&&Y.push("")):(Y.push(Pe),S=!0)}S=Y.join("/")}else S=F}return b?_.h=S:b=d.i.toString()!=="",b?Ir(_,pu(d.i)):b=!!d.m,b&&(_.m=d.m),_};function bt(d){return new rs(d)}function Cr(d,_,b){d.j=b?Bi(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function zi(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Ir(d,_,b){_ instanceof Fn?(d.i=_,Sl(d.i,d.l)):(b||(_=Qt(_,fu)),d.i=new Fn(_,d.l))}function at(d,_,b){d.i.set(_,b)}function Qs(d){return at(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Bi(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qt(d,_,b){return typeof d=="string"?(d=encodeURI(d).replace(_,bl),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var wl=/[#\/\?@]/g,xl=/[#\?:]/g,jr=/[#\?]/g,fu=/[#\?@]/g,mu=/#/g;function Fn(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Ys(d){d.g||(d.g=new Map,d.h=0,d.i&&Zd(d.i,function(_,b){d.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}r=Fn.prototype,r.add=function(d,_){Ys(this),this.i=null,d=is(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(_),this.h+=1,this};function El(d,_){Ys(d),_=is(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Tl(d,_){return Ys(d),_=is(d,_),d.g.has(_)}r.forEach=function(d,_){Ys(this),this.g.forEach(function(b,S){b.forEach(function(F){d.call(_,F,S,this)},this)},this)};function Fa(d,_){Ys(d);let b=[];if(typeof _=="string")Tl(d,_)&&(b=b.concat(d.g.get(is(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)b=b.concat(d[_]);return b}r.set=function(d,_){return Ys(this),this.i=null,d=is(this,d),Tl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},r.get=function(d,_){return d?(d=Fa(this,d),d.length>0?String(d[0]):_):_};function gu(d,_,b){El(d,_),b.length>0&&(d.i=null,d.g.set(is(d,_),k(b)),d.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var b=_[S];const F=Di(b);b=Fa(this,b);for(let Y=0;Y<b.length;Y++){let ue=F;b[Y]!==""&&(ue+="="+Di(b[Y])),d.push(ue)}}return this.i=d.join("&")};function pu(d){const _=new Fn;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function is(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Sl(d,_){_&&!d.j&&(Ys(d),d.i=null,d.g.forEach(function(b,S){const F=S.toLowerCase();S!=F&&(El(this,S),gu(this,F,b))},d)),d.j=_}function Al(d,_){const b=new Ar;if(u.Image){const S=new Image;S.onload=v(bn,b,"TestLoadImage: loaded",!0,_,S),S.onerror=v(bn,b,"TestLoadImage: error",!1,_,S),S.onabort=v(bn,b,"TestLoadImage: abort",!1,_,S),S.ontimeout=v(bn,b,"TestLoadImage: timeout",!1,_,S),u.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else _(!1)}function Or(d,_){const b=new Ar,S=new AbortController,F=setTimeout(()=>{S.abort(),bn(b,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:S.signal}).then(Y=>{clearTimeout(F),Y.ok?bn(b,"TestPingServer: ok",!0,_):bn(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),bn(b,"TestPingServer: error",!1,_)})}function bn(d,_,b,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(b)}catch{}}function yu(){this.g=new Yd}function qi(d){this.i=d.Sb||null,this.h=d.ab||!1}x(qi,cu),qi.prototype.g=function(){return new $i(this.i,this.h)};function $i(d,_){zt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x($i,zt),r=$i.prototype,r.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Ws(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wn(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?wn(this):Ws(this),this.readyState==3&&Dr(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,wn(this))},r.Na=function(d){this.g&&(this.response=d,wn(this))},r.ga=function(){this.g&&wn(this)};function wn(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ws(d)}r.setRequestHeader=function(d,_){this.A.append(d,_)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=_.next();return d.join(`\r
`)};function Ws(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Pr(d){let _="";return ze(d,function(b,S){_+=S,_+=":",_+=b,_+=`\r
`}),_}function Gn(d,_,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Pr(b),typeof d=="string"?b!=null&&Di(b):at(d,_,b))}function dt(d){zt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(dt,zt);var Ga=/^https?$/i,vu=["POST","PUT"];r=dt.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,_,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gs.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Y){Hi(this,Y);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)b.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())b.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),F=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(vu,_,void 0)>=0)||S||F||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of b)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){Hi(this,Y)}};function Hi(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Fi(d),Bt(d)}function Fi(d){d.A||(d.A=!0,Kt(d,"complete"),Kt(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Kt(this,"complete"),Kt(this,"abort"),Bt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Nl(this):this.Xa())},r.Xa=function(){Nl(this)};function Nl(d){if(d.h&&typeof l<"u"){if(d.v&&dn(d)==4)setTimeout(d.Ca.bind(d),0);else if(Kt(d,"readystatechange"),dn(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var S;if(S=Y===0){let ue=String(d.D).match(Ha)[1]||null;!ue&&u.self&&u.self.location&&(ue=u.self.location.protocol.slice(0,-1)),S=!Ga.test(ue?ue.toLowerCase():"")}b=S}if(b)Kt(d,"complete"),Kt(d,"success");else{d.o=6;try{var F=dn(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",Fi(d)}}finally{Bt(d)}}}}function Bt(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,_||Kt(d,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function dn(d){return d.g?d.g.readyState:0}r.ca=function(){try{return dn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),_n(_)}};function Gi(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(d){const _={};d=(d.g&&dn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(R(d[S]))continue;var b=Xd(d[S]);const F=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=_[F]||[];_[F]=Y,Y.push(b)}M(_,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qi(d,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||_}function Ka(d){this.za=0,this.i=[],this.j=new Ar,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qi("baseRetryDelayMs",5e3,d),this.Za=Qi("retryDelaySeedMs",1e4,d),this.Ta=Qi("forwardChannelMaxRetries",2,d),this.va=Qi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Vi(d&&d.concurrentRequestLimit),this.Ba=new yu,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ka.prototype,r.ka=8,r.I=1,r.connect=function(d,_,b,S){St(0),this.W=d,this.H=_||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=Tu(this,null,this.W),Xi(this)};function Yi(d){if(Wi(d),d.I==3){var _=d.V++,b=bt(d.J);if(at(b,"SID",d.M),at(b,"RID",_),at(b,"TYPE","terminate"),Ji(d,b),_=new ss(d,d.j,_),_.M=2,_.A=Qs(bt(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=_.A,b=!0),b||(_.g=Wa(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Pi(_)}Eu(d)}function Rs(d){d.g&&(kl(d),d.g.cancel(),d.g=null)}function Wi(d){Rs(d),d.v&&(u.clearTimeout(d.v),d.v=null),Ya(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function Xi(d){if(!Ui(d.h)&&!d.m){d.m=!0;var _=d.Ea;ce||A(),oe||(ce(),oe=!0),C.add(_,d),d.D=0}}function ef(d,_){return Hn(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Sr(y(d.Ea,d,_),xu(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new ss(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=re(Y),P(Y,this.U)):Y=this.U),this.u!==null||this.R||(F.J=Y,Y=null),this.S)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Qa(this,F,_),b=bt(this.J),at(b,"RID",d),at(b,"CVER",22),this.G&&at(b,"X-HTTP-Session-Id",this.G),Ji(this,b),Y&&(this.R?_="headers="+Di(Pr(Y))+"&"+_:this.u&&Gn(b,this.u,Y)),qa(this.h,F),this.Ra&&at(b,"TYPE","init"),this.S?(at(b,"$req",_),at(b,"SID","null"),F.U=!0,Ts(F,b,null)):Ts(F,b,_),this.I=2}}else this.I==3&&(d?_u(this,d):this.i.length==0||Ui(this.h)||_u(this))};function _u(d,_){var b;_?b=_.l:b=d.V++;const S=bt(d.J);at(S,"SID",d.M),at(S,"RID",b),at(S,"AID",d.K),Ji(d,S),d.u&&d.o&&Gn(S,d.u,d.o),b=new ss(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),_&&(d.i=_.G.concat(d.i)),_=Qa(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),qa(d.h,b),Ts(b,S,_)}function Ji(d,_){d.H&&ze(d.H,function(b,S){at(_,S,b)}),d.l&&ze({},function(b,S){at(_,S,b)})}function Qa(d,_,b){b=Math.min(d.i.length,b);const S=d.l?y(d.l.Ka,d.l,d):null;e:{var F=d.i;let Pe=-1;for(;;){const pt=["count="+b];Pe==-1?b>0?(Pe=F[0].g,pt.push("ofs="+Pe)):Pe=0:pt.push("ofs="+Pe);let st=!0;for(let Rt=0;Rt<b;Rt++){var Y=F[Rt].g;const jn=F[Rt].map;if(Y-=Pe,Y<0)Pe=Math.max(0,F[Rt].g-100),st=!1;else try{Y="req"+Y+"_"||"";try{var ue=jn instanceof Map?jn:Object.entries(jn);for(const[ks,as]of ue){let os=as;m(as)&&(os=qn(as)),pt.push(Y+ks+"="+encodeURIComponent(os))}}catch(ks){throw pt.push(Y+"type="+encodeURIComponent("_badmap")),ks}}catch{S&&S(jn)}}if(st){ue=pt.join("&");break e}}ue=void 0}return d=d.i.splice(0,b),_.G=d,ue}function bu(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;ce||A(),oe||(ce(),oe=!0),C.add(_,d),d.A=0}}function Rl(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Sr(y(d.Da,d),xu(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Sr(y(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Rs(this),wu(this))};function kl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function wu(d){d.g=new ss(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=bt(d.na);at(_,"RID","rpc"),at(_,"SID",d.M),at(_,"AID",d.K),at(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&at(_,"TO",d.ia),at(_,"TYPE","xmlhttp"),Ji(d,_),d.u&&d.o&&Gn(_,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Qs(bt(_)),b.u=null,b.R=!0,Rr(b,d)}r.Va=function(){this.C!=null&&(this.C=null,Rs(this),Rl(this),St(19))};function Ya(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Cl(d,_){var b=null;if(d.g==_){Ya(d),kl(d),d.g=null;var S=2}else if(Li(d.h,_))b=_.G,Ks(d.h,_),S=1;else return;if(d.I!=0){if(_.o)if(S==1){b=_.u?_.u.length:0,_=Date.now()-_.F;var F=d.D;S=Ua(),Kt(S,new hu(S,b)),Xi(d)}else bu(d);else if(F=_.m,F==3||F==0&&_.X>0||!(S==1&&ef(d,_)||S==2&&Rl(d)))switch(b&&b.length>0&&(_=d.h,_.i=_.i.concat(b)),F){case 1:Xs(d,5);break;case 4:Xs(d,10);break;case 3:Xs(d,6);break;default:Xs(d,2)}}}function xu(d,_){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*_}function Xs(d,_){if(d.j.info("Error code "+_),_==2){var b=y(d.bb,d),S=d.Ua;const F=!S;S=new rs(S||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Cr(S,"https"),Qs(S),F?Al(S.toString(),b):Or(S.toString(),b)}else St(2);d.I=0,d.l&&d.l.pa(_),Eu(d),Wi(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Eu(d){if(d.I=0,d.ja=[],d.l){const _=$a(d.h);(_.length!=0||d.i.length!=0)&&(z(d.ja,_),z(d.ja,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.oa()}}function Tu(d,_,b){var S=b instanceof rs?bt(b):new rs(b);if(S.g!="")_&&(S.g=_+"."+S.g),zi(S,S.u);else{var F=u.location;S=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;const Y=new rs(null);S&&Cr(Y,S),_&&(Y.g=_),F&&zi(Y,F),b&&(Y.h=b),S=Y}return b=d.G,_=d.wa,b&&_&&at(S,b,_),at(S,"VER",d.ka),Ji(d,S),S}function Wa(d,_,b){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new dt(new qi({ab:b})):new dt(d.ma),_.Fa(d.L),_}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Su(){}r=Su.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Xa(){}Xa.prototype.g=function(d,_){return new xn(d,_)};function xn(d,_){zt.call(this),this.g=new Ka(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!R(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!R(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Mr(this)}x(xn,zt),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Yi(this.g)},xn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=qn(d),d=b);_.i.push(new Jd(_.Ya++,d)),_.I==3&&Xi(_)},xn.prototype.N=function(){this.g.l=null,delete this.j,Yi(this.g),delete this.g,xn.Z.N.call(this)};function Il(d){xr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const b in _){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}x(Il,xr);function Au(){ns.call(this),this.status=1}x(Au,ns);function Mr(d){this.g=d}x(Mr,Su),Mr.prototype.ra=function(){Kt(this.g,"a")},Mr.prototype.qa=function(d){Kt(this.g,new Il(d))},Mr.prototype.pa=function(d){Kt(this.g,new Au)},Mr.prototype.oa=function(){Kt(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,EE=function(){return new Xa},xE=function(){return Ua()},wE=$n,Hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},At.NO_ERROR=0,At.TIMEOUT=8,At.HTTP_ERROR=6,Kh=At,nn.COMPLETE="complete",bE=nn,uu.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",zt.prototype.listen=zt.prototype.J,Tc=uu,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,_E=dt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const Ob="@firebase/firestore",Db="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=new Ep("@firebase/firestore");function Lo(){return ka.logLevel}function me(r,...e){if(ka.logLevel<=Ke.DEBUG){const t=e.map(Op);ka.debug(`Firestore (${ul}): ${r}`,...t)}}function vr(r,...e){if(ka.logLevel<=Ke.ERROR){const t=e.map(Op);ka.error(`Firestore (${ul}): ${r}`,...t)}}function Jo(r,...e){if(ka.logLevel<=Ke.WARN){const t=e.map(Op);ka.warn(`Firestore (${ul}): ${r}`,...t)}}function Op(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,TE(r,s,t)}function TE(r,e,t){let s=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw vr(s),new Error(s)}function nt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||TE(e,a,s)}function Ve(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pn.UNAUTHENTICATED))}shutdown(){}}class dI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fI{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _i,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},m=g=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _i)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(nt(typeof s.accessToken=="string",31837,{l:s}),new SE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class mI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new mI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);const s=l=>{l.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=yI(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Qe(r,e){return r<e?-1:r>e?1:0}function Fg(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return mg(a)===mg(l)?Qe(a,l):mg(a)?1:-1}return Qe(r.length,e.length)}const vI=55296,_I=57343;function mg(r){const e=r.charCodeAt(0);return e>=vI&&e<=_I}function Zo(r,e,t){return r.length===e.length&&r.every((s,a)=>t(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="__name__";class Ms{constructor(e,t,s){t===void 0?t=0:t>e.length&&ke(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ke(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ms.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ms?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Ms.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Qe(e.length,t.length)}static compareSegments(e,t){const s=Ms.isNumericId(e),a=Ms.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ms.extractNumericId(e).compare(Ms.extractNumericId(t)):Fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class gt extends Ms{construct(e,t,s){return new gt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Ms{construct(e,t,s){return new ln(e,t,s)}static isValidIdentifier(e){return bI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mb}static keyField(){return new ln([Mb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new fe(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else m==="`"?(u=!u,a++):m!=="."||u?(s+=m,a++):(l(),a++)}if(l(),u)throw new fe(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(gt.fromString(e))}static fromName(e){return new xe(gt.fromString(e).popFirst(5))}static empty(){return new xe(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(r,e,t){if(!t)throw new fe(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function wI(r,e,t,s){if(e===!0&&s===!0)throw new fe(ee.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Vb(r){if(!xe.isDocumentKey(r))throw new fe(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Ub(r){if(xe.isDocumentKey(r))throw new fe(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function NE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function kd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ke(12329,{type:typeof r})}function ps(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kd(r);throw new fe(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Zc(r,e){if(!NE(r))throw new fe(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new fe(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=-62135596800,zb=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*zb);return new yt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lb)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zb}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Lt("string",yt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new yt(0,0))}static max(){return new De(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=-1;function xI(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=De.fromTimestamp(s===1e9?new yt(t+1,0):new yt(t,s));return new xi(a,xe.empty(),e)}function EI(r){return new xi(r.readTime,r.key,zc)}class xi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new xi(De.min(),xe.empty(),zc)}static max(){return new xi(De.max(),xe.empty(),zc)}}function TI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(r.documentKey,e.documentKey),t!==0?t:Qe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==SI)throw r;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,s)=>{t(e)})}static reject(e){return new se((t,s)=>{s(e)})}static waitFor(e){return new se((t,s)=>{let a=0,l=0,u=!1;e.forEach(m=>{++a,m.next(()=>{++l,u&&l===a&&t()},g=>s(g))}),u=!0,l===a&&t()})}static or(e){let t=se.resolve(!1);for(const s of e)t=t.next(a=>a?se.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new se((s,a)=>{const l=e.length,u=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next(v=>{u[y]=v,++m,m===l&&s(u)},v=>a(v))}})}static doWhile(e,t){return new se((s,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):s()};l()})}}function NI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function Id(r){return r==null}function ld(r){return r===0&&1/r==-1/0}function RI(r){return typeof r=="number"&&Number.isInteger(r)&&!ld(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="";function kI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Bb(e)),e=CI(r.get(t),e);return Bb(e)}function CI(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case RE:t+="";break;default:t+=l}}return t}function Bb(r){return r+RE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ri(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function kE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dh(this.root,e,this.comparator,!0)}}class Dh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??on.RED,this.left=a??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new on(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return on.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $b(this.data.getIterator())}getIteratorFrom(e){return new $b(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class $b{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new Gt(ln.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new CE("Invalid base64 string: "+l):l}}(e);return new cn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(nt(!!r,39018),typeof r=="string"){let e=0;const t=II.exec(r);if(nt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:It(r.seconds),nanos:It(r.nanos)}}function It(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ti(r){return typeof r=="string"?cn.fromBase64String(r):cn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="server_timestamp",jE="__type__",OE="__previous_value__",DE="__local_write_time__";function Mp(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[jE])==null?void 0:s.stringValue)===IE}function jd(r){const e=r.mapValue.fields[OE];return Mp(e)?jd(e):e}function Bc(r){const e=Ei(r.mapValue.fields[DE].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,s,a,l,u,m,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const cd="(default)";class qc{constructor(e,t){this.projectId=e,this.database=t||cd}static empty(){return new qc("","")}get isDefaultDatabase(){return this.database===cd}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__type__",OI="__max__",Ph={mapValue:{}},ME="__vector__",ud="value";function Si(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mp(r)?4:PI(r)?9007199254740991:DI(r)?10:11:ke(28295,{value:r})}function $s(r,e){if(r===e)return!0;const t=Si(r);if(t!==Si(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Bc(r).isEqual(Bc(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ei(a.timestampValue),m=Ei(l.timestampValue);return u.seconds===m.seconds&&u.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(a,l){return Ti(a.bytesValue).isEqual(Ti(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,l){return It(a.geoPointValue.latitude)===It(l.geoPointValue.latitude)&&It(a.geoPointValue.longitude)===It(l.geoPointValue.longitude)}(r,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return It(a.integerValue)===It(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=It(a.doubleValue),m=It(l.doubleValue);return u===m?ld(u)===ld(m):isNaN(u)&&isNaN(m)}return!1}(r,e);case 9:return Zo(r.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},m=l.mapValue.fields||{};if(qb(u)!==qb(m))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(m[g]===void 0||!$s(u[g],m[g])))return!1;return!0}(r,e);default:return ke(52216,{left:r})}}function $c(r,e){return(r.values||[]).find(t=>$s(t,e))!==void 0}function el(r,e){if(r===e)return 0;const t=Si(r),s=Si(e);if(t!==s)return Qe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(r.booleanValue,e.booleanValue);case 2:return function(l,u){const m=It(l.integerValue||l.doubleValue),g=It(u.integerValue||u.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(r,e);case 3:return Hb(r.timestampValue,e.timestampValue);case 4:return Hb(Bc(r),Bc(e));case 5:return Fg(r.stringValue,e.stringValue);case 6:return function(l,u){const m=Ti(l),g=Ti(u);return m.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(l,u){const m=l.split("/"),g=u.split("/");for(let y=0;y<m.length&&y<g.length;y++){const v=Qe(m[y],g[y]);if(v!==0)return v}return Qe(m.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,u){const m=Qe(It(l.latitude),It(u.latitude));return m!==0?m:Qe(It(l.longitude),It(u.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Fb(r.arrayValue,e.arrayValue);case 10:return function(l,u){var E,k,z,B;const m=l.fields||{},g=u.fields||{},y=(E=m[ud])==null?void 0:E.arrayValue,v=(k=g[ud])==null?void 0:k.arrayValue,x=Qe(((z=y==null?void 0:y.values)==null?void 0:z.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return x!==0?x:Fb(y,v)}(r.mapValue,e.mapValue);case 11:return function(l,u){if(l===Ph.mapValue&&u===Ph.mapValue)return 0;if(l===Ph.mapValue)return 1;if(u===Ph.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=u.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let x=0;x<g.length&&x<v.length;++x){const E=Fg(g[x],v[x]);if(E!==0)return E;const k=el(m[g[x]],y[v[x]]);if(k!==0)return k}return Qe(g.length,v.length)}(r.mapValue,e.mapValue);default:throw ke(23264,{he:t})}}function Hb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Qe(r,e);const t=Ei(r),s=Ei(e),a=Qe(t.seconds,s.seconds);return a!==0?a:Qe(t.nanos,s.nanos)}function Fb(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=el(t[a],s[a]);if(l)return l}return Qe(t.length,s.length)}function tl(r){return Gg(r)}function Gg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Ti(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return xe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Gg(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Gg(t.fields[u])}`;return a+"}"}(r.mapValue):ke(61005,{value:r})}function Qh(r){switch(Si(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jd(r);return e?16+Qh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ti(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,l)=>a+Qh(l),0)}(r.arrayValue);case 10:case 11:return function(s){let a=0;return Ri(s.fields,(l,u)=>{a+=l.length+Qh(u)}),a}(r.mapValue);default:throw ke(13486,{value:r})}}function Gb(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Kg(r){return!!r&&"integerValue"in r}function Vp(r){return!!r&&"arrayValue"in r}function Kb(r){return!!r&&"nullValue"in r}function Qb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Yh(r){return!!r&&"mapValue"in r}function DI(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[PE])==null?void 0:s.stringValue)===ME}function Ic(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ri(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ic(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(r.arrayValue.values[t]);return e}return{...r}}function PI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===OI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Yh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=ln.emptyPath(),s={},a=[];e.forEach((u,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=m.popLast()}u?s[m.lastSegment()]=Ic(u):a.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Yh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Yh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ri(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Cn(Ic(this.value))}}function VE(r){const e=[];return Ri(r.fields,(t,s)=>{const a=new ln([t]);if(Yh(s)){const l=VE(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,s,a,l,u,m){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=m}static newInvalidDocument(e){return new yn(e,0,De.min(),De.min(),De.min(),Cn.empty(),0)}static newFoundDocument(e,t,s,a){return new yn(e,1,t,De.min(),s,a,0)}static newNoDocument(e,t){return new yn(e,2,t,De.min(),De.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,De.min(),De.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.position=e,this.inclusive=t}}function Yb(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(u.referenceValue),t.key):s=el(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Wb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!$s(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function MI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{}class Ut extends UE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new UI(e,t,s):t==="array-contains"?new BI(e,s):t==="in"?new qI(e,s):t==="not-in"?new $I(e,s):t==="array-contains-any"?new HI(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new LI(e,s):new zI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&Si(this.value)===Si(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends UE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vs(e,t)}matches(e){return LE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LE(r){return r.op==="and"}function zE(r){return VI(r)&&LE(r)}function VI(r){for(const e of r.filters)if(e instanceof vs)return!1;return!0}function Qg(r){if(r instanceof Ut)return r.field.canonicalString()+r.op.toString()+tl(r.value);if(zE(r))return r.filters.map(e=>Qg(e)).join(",");{const e=r.filters.map(t=>Qg(t)).join(",");return`${r.op}(${e})`}}function BE(r,e){return r instanceof Ut?function(s,a){return a instanceof Ut&&s.op===a.op&&s.field.isEqual(a.field)&&$s(s.value,a.value)}(r,e):r instanceof vs?function(s,a){return a instanceof vs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((l,u,m)=>l&&BE(u,a.filters[m]),!0):!1}(r,e):void ke(19439)}function qE(r){return r instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`}(r):r instanceof vs?function(t){return t.op.toString()+" {"+t.getFilters().map(qE).join(" ,")+"}"}(r):"Filter"}class UI extends Ut{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class LI extends Ut{constructor(e,t){super(e,"in",t),this.keys=$E("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zI extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=$E("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $E(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(s=>xe.fromName(s.referenceValue))}class BI extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&$c(t.arrayValue,this.value)}}class qI extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$c(this.value.arrayValue,t)}}class $I extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$c(this.value.arrayValue,t)}}class HI extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>$c(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t=null,s=[],a=[],l=null,u=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=m,this.Te=null}}function Xb(r,e=null,t=[],s=[],a=null,l=null,u=null){return new FI(r,e,t,s,a,l,u)}function Up(r){const e=Ve(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Qg(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>tl(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>tl(s)).join(",")),e.Te=t}return e.Te}function Lp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!MI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!BE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Wb(r.startAt,e.startAt)&&Wb(r.endAt,e.endAt)}function Yg(r){return xe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t=null,s=[],a=[],l=null,u="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function GI(r,e,t,s,a,l,u,m){return new eu(r,e,t,s,a,l,u,m)}function zp(r){return new eu(r)}function Jb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function HE(r){return r.collectionGroup!==null}function jc(r){const e=Ve(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let m=new Gt(ln.comparator);return u.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new dd(l,s))}),t.has(ln.keyField().canonicalString())||e.Ie.push(new dd(ln.keyField(),s))}return e.Ie}function Ls(r){const e=Ve(r);return e.Ee||(e.Ee=KI(e,jc(r))),e.Ee}function KI(r,e){if(r.limitType==="F")return Xb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new dd(a.field,l)});const t=r.endAt?new hd(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new hd(r.startAt.position,r.startAt.inclusive):null;return Xb(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Wg(r,e){const t=r.filters.concat([e]);return new eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Xg(r,e,t){return new eu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Od(r,e){return Lp(Ls(r),Ls(e))&&r.limitType===e.limitType}function FE(r){return`${Up(Ls(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(a=>qE(a)).join(", ")}]`),Id(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(a=>tl(a)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(a=>tl(a)).join(",")),`Target(${s})`}(Ls(r))}; limitType=${r.limitType})`}function Dd(r,e){return e.isFoundDocument()&&function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):xe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,a){for(const l of jc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0}(r,e)&&function(s,a){return!(s.startAt&&!function(u,m,g){const y=Yb(u,m,g);return u.inclusive?y<=0:y<0}(s.startAt,jc(s),a)||s.endAt&&!function(u,m,g){const y=Yb(u,m,g);return u.inclusive?y>=0:y>0}(s.endAt,jc(s),a))}(r,e)}function QI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function GE(r){return(e,t)=>{let s=!1;for(const a of jc(r)){const l=YI(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function YI(r,e,t){const s=r.field.isKeyField()?xe.comparator(e.key,t.key):function(l,u,m){const g=u.data.field(l),y=m.data.field(l);return g!==null&&y!==null?el(g,y):ke(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return kE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=new xt(xe.comparator);function _r(){return WI}const KE=new xt(xe.comparator);function Sc(...r){let e=KE;for(const t of r)e=e.insert(t.key,t);return e}function QE(r){let e=KE;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function xa(){return Oc()}function YE(){return Oc()}function Oc(){return new Oa(r=>r.toString(),(r,e)=>r.isEqual(e))}const XI=new xt(xe.comparator),JI=new Gt(xe.comparator);function Ye(...r){let e=JI;for(const t of r)e=e.add(t);return e}const ZI=new Gt(Qe);function ej(){return ZI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function WE(r){return{integerValue:""+r}}function tj(r,e){return RI(e)?WE(e):Bp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this._=void 0}}function nj(r,e,t){return r instanceof fd?function(a,l){const u={fields:{[jE]:{stringValue:IE},[DE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Mp(l)&&(l=jd(l)),l&&(u.fields[OE]=l),{mapValue:u}}(t,e):r instanceof Hc?JE(r,e):r instanceof Fc?ZE(r,e):function(a,l){const u=XE(a,l),m=Zb(u)+Zb(a.Ae);return Kg(u)&&Kg(a.Ae)?WE(m):Bp(a.serializer,m)}(r,e)}function sj(r,e,t){return r instanceof Hc?JE(r,e):r instanceof Fc?ZE(r,e):t}function XE(r,e){return r instanceof md?function(s){return Kg(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class fd extends Pd{}class Hc extends Pd{constructor(e){super(),this.elements=e}}function JE(r,e){const t=e1(e);for(const s of r.elements)t.some(a=>$s(a,s))||t.push(s);return{arrayValue:{values:t}}}class Fc extends Pd{constructor(e){super(),this.elements=e}}function ZE(r,e){let t=e1(e);for(const s of r.elements)t=t.filter(a=>!$s(a,s));return{arrayValue:{values:t}}}class md extends Pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Zb(r){return It(r.integerValue||r.doubleValue)}function e1(r){return Vp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function rj(r,e){return r.field.isEqual(e.field)&&function(s,a){return s instanceof Hc&&a instanceof Hc||s instanceof Fc&&a instanceof Fc?Zo(s.elements,a.elements,$s):s instanceof md&&a instanceof md?$s(s.Ae,a.Ae):s instanceof fd&&a instanceof fd}(r.transform,e.transform)}class ij{constructor(e,t){this.version=e,this.transformResults=t}}class ys{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ys}static exists(e){return new ys(void 0,e)}static updateTime(e){return new ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Md{}function t1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qp(r.key,ys.none()):new tu(r.key,r.data,ys.none());{const t=r.data,s=Cn.empty();let a=new Gt(ln.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new ki(r.key,s,new Bn(a.toArray()),ys.none())}}function aj(r,e,t){r instanceof tu?function(a,l,u){const m=a.value.clone(),g=tw(a.fieldTransforms,l,u.transformResults);m.setAll(g),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(r,e,t):r instanceof ki?function(a,l,u){if(!Wh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const m=tw(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(n1(a)),g.setAll(m),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(r,e,t):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Dc(r,e,t,s){return r instanceof tu?function(l,u,m,g){if(!Wh(l.precondition,u))return m;const y=l.value.clone(),v=nw(l.fieldTransforms,g,u);return y.setAll(v),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof ki?function(l,u,m,g){if(!Wh(l.precondition,u))return m;const y=nw(l.fieldTransforms,g,u),v=u.data;return v.setAll(n1(l)),v.setAll(y),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(x=>x.field))}(r,e,t,s):function(l,u,m){return Wh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):m}(r,e,t)}function oj(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=XE(s.transform,a||null);l!=null&&(t===null&&(t=Cn.empty()),t.set(s.field,l))}return t||null}function ew(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Zo(s,a,(l,u)=>rj(l,u))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class tu extends Md{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ki extends Md{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function n1(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function tw(r,e,t){const s=new Map;nt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,m=e.data.field(l.field);s.set(l.field,sj(u,m,t[a]))}return s}function nw(r,e,t){const s=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);s.set(a.field,nj(l,u,e))}return s}class qp extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lj extends Md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&aj(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Dc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Dc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=YE();return this.mutations.forEach(a=>{const l=e.get(a.key),u=l.overlayedDocument;let m=this.applyToLocalView(u,l.mutatedFields);m=t.has(a.key)?null:m;const g=t1(u,m);g!==null&&s.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(De.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(t,s)=>ew(t,s))&&Zo(this.baseMutations,e.baseMutations,(t,s)=>ew(t,s))}}class $p{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){nt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return XI}();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new $p(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Je;function dj(r){switch(r){case ee.OK:return ke(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return ke(15467,{code:r})}}function s1(r){if(r===void 0)return vr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Pt.OK:return ee.OK;case Pt.CANCELLED:return ee.CANCELLED;case Pt.UNKNOWN:return ee.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ee.INTERNAL;case Pt.UNAVAILABLE:return ee.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ee.NOT_FOUND;case Pt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Pt.ABORTED:return ee.ABORTED;case Pt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Pt.DATA_LOSS:return ee.DATA_LOSS;default:return ke(39323,{code:r})}}(Je=Pt||(Pt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=new vi([4294967295,4294967295],0);function sw(r){const e=fj().encode(r),t=new vE;return t.update(e),new Uint8Array(t.digest())}function rw(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vi([t,s],0),new vi([a,l],0)]}class Hp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(s<0)throw new Ac(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vi.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(vi.fromNumber(s)));return a.compare(mj)===1&&(a=new vi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=sw(e),[s,a]=rw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Hp(l,a,t);return s.forEach(m=>u.insert(m)),u}insert(e){if(this.ge===0)return;const t=sw(e),[s,a]=rw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Vd(De.min(),a,new xt(Qe),_r(),Ye())}}class nu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nu(s,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class r1{constructor(e,t){this.targetId=e,this.Ce=t}}class i1{constructor(e,t,s=cn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class iw{constructor(){this.ve=0,this.Fe=aw(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),t=Ye(),s=Ye();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:ke(38017,{changeType:l})}}),new nu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=aw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gj{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.Je=Mh(),this.He=Mh(),this.Ye=new xt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Yg(l))if(s===0){const u=new xe(l.path);this.et(t,u,yn.newNoDocument(u,De.min()))}else nt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const m=this.ut(e),g=m?this.ct(m,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,m;try{u=Ti(s).toUint8Array()}catch(g){if(g instanceof CE)return Jo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Hp(u,a,l)}catch(g){return Jo(g instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach(l=>{const u=this.Ge.ht(),m=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,u)=>{const m=this.ot(u);if(m){if(l.current&&Yg(m.target)){const g=new xe(m.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,yn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}});let s=Ye();this.He.forEach((l,u)=>{let m=!0;u.forEachWhile(g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(l))}),this.je.forEach((l,u)=>u.setReadTime(e));const a=new Vd(e,t,this.Ye,this.je,s);return this.je=_r(),this.Je=Mh(),this.He=Mh(),this.Ye=new xt(Qe),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new iw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iw),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mh(){return new xt(xe.comparator)}function aw(){return new xt(xe.comparator)}const pj={asc:"ASCENDING",desc:"DESCENDING"},yj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vj={and:"AND",or:"OR"};class _j{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jg(r,e){return r.useProto3Json||Id(e)?e:{value:e}}function gd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function bj(r,e){return gd(r,e.toTimestamp())}function zs(r){return nt(!!r,49232),De.fromTimestamp(function(t){const s=Ei(t);return new yt(s.seconds,s.nanos)}(r))}function Fp(r,e){return Zg(r,e).canonicalString()}function Zg(r,e){const t=function(a){return new gt(["projects",a.projectId,"databases",a.database])}(r).child("documents");return e===void 0?t:t.child(e)}function o1(r){const e=gt.fromString(r);return nt(d1(e),10190,{key:e.toString()}),e}function ep(r,e){return Fp(r.databaseId,e.path)}function gg(r,e){const t=o1(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new xe(c1(t))}function l1(r,e){return Fp(r.databaseId,e)}function wj(r){const e=o1(r);return e.length===4?gt.emptyPath():c1(e)}function tp(r){return new gt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function c1(r){return nt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ow(r,e,t){return{name:ep(r,e),fields:t.value.mapValue.fields}}function xj(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(nt(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(nt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))}(r,e.targetChange.resumeToken),u=e.targetChange.cause,m=u&&function(y){const v=y.code===void 0?ee.UNKNOWN:s1(y.code);return new fe(v,y.message||"")}(u);t=new i1(s,a,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=gg(r,s.document.name),l=zs(s.document.updateTime),u=s.document.createTime?zs(s.document.createTime):De.min(),m=new Cn({mapValue:{fields:s.document.fields}}),g=yn.newFoundDocument(a,l,u,m),y=s.targetIds||[],v=s.removedTargetIds||[];t=new Xh(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=gg(r,s.document),l=s.readTime?zs(s.readTime):De.min(),u=yn.newNoDocument(a,l),m=s.removedTargetIds||[];t=new Xh([],m,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=gg(r,s.document),l=s.removedTargetIds||[];t=new Xh([],l,a,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new hj(a,l),m=s.targetId;t=new r1(m,u)}}return t}function Ej(r,e){let t;if(e instanceof tu)t={update:ow(r,e.key,e.value)};else if(e instanceof qp)t={delete:ep(r,e.key)};else if(e instanceof ki)t={update:ow(r,e.key,e.data),updateMask:jj(e.fieldMask)};else{if(!(e instanceof lj))return ke(16599,{Vt:e.type});t={verify:ep(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,u){const m=u.transform;if(m instanceof fd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Hc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof md)return{fieldPath:u.field.canonicalString(),increment:m.Ae};throw ke(20930,{transform:u.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:bj(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ke(27497)}(r,e.precondition)),t}function Tj(r,e){return r&&r.length>0?(nt(e!==void 0,14353),r.map(t=>function(a,l){let u=a.updateTime?zs(a.updateTime):zs(l);return u.isEqual(De.min())&&(u=zs(l)),new ij(u,a.transformResults||[])}(t,e))):[]}function Sj(r,e){return{documents:[l1(r,e.path)]}}function Aj(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=l1(r,a);const l=function(y){if(y.length!==0)return h1(vs.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(y){if(y.length!==0)return y.map(v=>function(E){return{field:Bo(E.field),direction:kj(E.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const m=Jg(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:t,parent:a}}function Nj(r){let e=wj(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){nt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(x){const E=u1(x);return E instanceof vs&&zE(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(x){return x.map(E=>function(z){return new dd(qo(z.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(E))}(t.orderBy));let m=null;t.limit&&(m=function(x){let E;return E=typeof x=="object"?x.value:x,Id(E)?null:E}(t.limit));let g=null;t.startAt&&(g=function(x){const E=!!x.before,k=x.values||[];return new hd(k,E)}(t.startAt));let y=null;return t.endAt&&(y=function(x){const E=!x.before,k=x.values||[];return new hd(k,E)}(t.endAt)),GI(e,a,u,l,m,"F",g,y)}function Rj(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function u1(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=qo(t.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=qo(t.unaryFilter.field);return Ut.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=qo(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=qo(t.unaryFilter.field);return Ut.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ut.create(qo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return vs.create(t.compositeFilter.filters.map(s=>u1(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(t.compositeFilter.op))}(r):ke(30097,{filter:r})}function kj(r){return pj[r]}function Cj(r){return yj[r]}function Ij(r){return vj[r]}function Bo(r){return{fieldPath:r.canonicalString()}}function qo(r){return ln.fromServerFormat(r.fieldPath)}function h1(r){return r instanceof Ut?function(t){if(t.op==="=="){if(Qb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(Kb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Qb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(Kb(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:Cj(t.op),value:t.value}}}(r):r instanceof vs?function(t){const s=t.getFilters().map(a=>h1(a));return s.length===1?s[0]:{compositeFilter:{op:Ij(t.op),filters:s}}}(r):ke(54877,{filter:r})}function jj(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function d1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,s,a,l=De.min(),u=De.min(),m=cn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.yt=e}}function Dj(r){const e=Nj({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(){this.Cn=new Mj}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(xi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(xi.min())}updateCollectionGroup(e,t,s){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Mj{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Gt(gt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Gt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},f1=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(f1,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="LruGarbageCollector",Vj=1048576;function uw([r,e],[t,s]){const a=Qe(r,t);return a===0?Qe(e,s):a}class Uj{constructor(e){this.Ir=e,this.buffer=new Gt(uw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();uw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lj{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(cw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dl(t)?me(cw,"Ignoring IndexedDB error during garbage collection: ",t):await hl(t)}await this.Vr(3e5)})}}class zj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Cd.ce);const s=new Uj(t);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(lw)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,u,m,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),a=this.params.maximumSequenceNumbersToCollect):a=x,u=Date.now(),this.nthSequenceNumber(e,a))).next(x=>(s=x,m=Date.now(),this.removeTargets(e,s,t))).next(x=>(l=x,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(x=>(y=Date.now(),Lo()<=Ke.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${a} in `+(m-u)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${x} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:x})))}}function Bj(r,e){return new zj(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(){this.changes=new Oa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?se.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(s!==null&&Dc(s.mutation,a,Bn.empty(),yt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ye()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ye()){const a=xa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let u=Sc();return l.forEach((m,g)=>{u=u.insert(m,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const s=xa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ye()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((u,m)=>{t.set(u,m)})})}computeViews(e,t,s,a){let l=_r();const u=Oc(),m=function(){return Oc()}();return t.forEach((g,y)=>{const v=s.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof ki)?l=l.insert(y.key,y):v!==void 0?(u.set(y.key,v.mutation.getFieldMask()),Dc(v.mutation,y,v.mutation.getFieldMask(),yt.now())):u.set(y.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((y,v)=>u.set(y,v)),t.forEach((y,v)=>m.set(y,new $j(v,u.get(y)??null))),m))}recalculateAndSaveOverlays(e,t){const s=Oc();let a=new xt((u,m)=>u-m),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const m of u)m.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||Bn.empty();v=m.applyToLocalView(y,v),s.set(g,v);const x=(a.get(m.batchId)||Ye()).add(g);a=a.insert(m.batchId,x)})}).next(()=>{const u=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,v=g.value,x=YE();v.forEach(E=>{if(!l.has(E)){const k=t1(t.get(E),s.get(E));k!==null&&x.set(E,k),l=l.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,x))}return se.waitFor(u)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,a){return function(u){return xe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):se.resolve(xa());let m=zc,g=l;return u.next(y=>se.forEach(y,(v,x)=>(m<x.largestBatchId&&(m=x.largestBatchId),l.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{g=g.insert(v,E)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,g,y,Ye())).next(v=>({batchId:m,changes:QE(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(s=>{let a=Sc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=Sc();return this.indexManager.getCollectionParents(e,l).next(m=>se.forEach(m,g=>{const y=function(x,E){return new eu(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,a).next(v=>{v.forEach((x,E)=>{u=u.insert(x,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a))).next(u=>{l.forEach((g,y)=>{const v=y.getKey();u.get(v)===null&&(u=u.insert(v,yn.newInvalidDocument(v)))});let m=Sc();return u.forEach((g,y)=>{const v=l.get(g);v!==void 0&&Dc(v.mutation,y,Bn.empty(),yt.now()),Dd(t,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:zs(a.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:Dj(a.bundledQuery),readTime:zs(a.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.overlays=new xt(xe.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const s=xa();return se.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.St(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,t,s){const a=xa(),l=t.length+1,u=new xe(t.child("")),m=this.overlays.getIteratorFrom(u);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new xt((y,v)=>y-v);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=xa(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=xa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,v)=>m.set(y,v)),!(m.size()>=a)););return se.resolve(m)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new uj(t,s));let l=this.qr.get(t);l===void 0&&(l=Ye(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.Qr=new Gt(Zt.$r),this.Ur=new Gt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Zt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new Zt(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new xe(new gt([])),s=new Zt(t,e),a=new Zt(t,e+1),l=[];return this.Ur.forEachInRange([s,a],u=>{this.Gr(u),l.push(u.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new gt([])),s=new Zt(t,e),a=new Zt(t,e+1);let l=Ye();return this.Ur.forEachInRange([s,a],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Zt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Zt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new cj(l,t,s,a);this.mutationQueue.push(u);for(const m of a)this.Zr=this.Zr.add(new Zt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Pp:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Zt(t,0),a=new Zt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],u=>{const m=this.Xr(u.Yr);l.push(m)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Gt(Qe);return t.forEach(a=>{const l=new Zt(a,0),u=new Zt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],m=>{s=s.add(m.Yr)})}),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const u=new Zt(new xe(l),0);let m=new Gt(Qe);return this.Zr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===a&&(m=m.add(g.Yr)),!0)},u),se.resolve(this.ti(m))}ti(e){const t=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){nt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(t.mutations,a=>{const l=new Zt(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new Zt(t,0),a=this.Zr.firstAfterOrEqual(s);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.ri=e,this.docs=function(){return new xt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return se.resolve(s?s.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let s=_r();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():yn.newInvalidDocument(a))}),se.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=_r();const u=t.path,m=new xe(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||TI(EI(v),s)<=0||(a.has(v.key)||Dd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,s,a){ke(9500)}ii(e,t){return se.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Wj(this)}getSize(e){return se.resolve(this.size)}}class Wj extends qj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.persistence=e,this.si=new Oa(t=>Up(t),Lp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Gp,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,t){return this.si.forEach((s,a)=>t(a)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach((u,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),se.waitFor(l).next(()=>a)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return se.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),se.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(u=>{l.push(a.markPotentiallyOrphaned(e,u))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return se.resolve(s)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Cd(0),this.li=!1,this.li=!0,this.hi=new Kj,this.referenceDelegate=e(this),this.Pi=new Xj(this),this.indexManager=new Pj,this.remoteDocumentCache=function(a){return new Yj(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Oj(t),this.Ii=new Fj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Qj(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const a=new Jj(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return se.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class Jj extends AI{constructor(e){super(),this.currentSequenceNumber=e}}class Kp{constructor(e){this.persistence=e,this.Ri=new Gp,this.Vi=null}static mi(e){return new Kp(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),se.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,s=>{const a=xe.fromPath(s);return this.gi(e,a).next(l=>{l||t.removeEntry(a,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pd{constructor(e,t){this.persistence=e,this.pi=new Oa(s=>kI(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=Bj(this,t)}static mi(e,t){return new pd(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return se.forEach(this.pi,(s,a)=>this.br(e,s,a).next(l=>l?se.resolve():t(a)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,u=>this.br(e,u,t).next(m=>{m||(s++,l.removeEntry(u,De.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}br(e,t,s){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return se.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=Ye(),a=Ye();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Qp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return HN()?8:NI(vn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ws(e,t,a,s).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new Zj;return this.Ss(e,t,u).next(m=>{if(l.result=m,this.Vs)return this.bs(e,t,u,m.size)})}).next(()=>l.result)}bs(e,t,s,a){return s.documentReadCount<this.fs?(Lo()<=Ke.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Lo()<=Ke.DEBUG&&me("QueryEngine","Query:",zo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Lo()<=Ke.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ls(t))):se.resolve())}ys(e,t){if(Jb(t))return se.resolve(null);let s=Ls(t);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Xg(t,null,"F"),s=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const u=Ye(...l);return this.ps.getDocuments(e,u).next(m=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.Ds(t,m);return this.Cs(t,y,u,g.readTime)?this.ys(e,Xg(t,null,"F")):this.vs(e,y,t,g)}))})))}ws(e,t,s,a){return Jb(t)||a.isEqual(De.min())?se.resolve(null):this.ps.getDocuments(e,s).next(l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,a)?se.resolve(null):(Lo()<=Ke.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),zo(t)),this.vs(e,u,t,xI(a,zc)).next(m=>m))})}Ds(e,t){let s=new Gt(GE(e));return t.forEach((a,l)=>{Dd(e,l)&&(s=s.add(l))}),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Lo()<=Ke.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,xi.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="LocalStore",t4=3e8;class n4{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new xt(Qe),this.xs=new Oa(l=>Up(l),Lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function s4(r,e,t,s){return new n4(r,e,t,s)}async function g1(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const u=[],m=[];let g=Ye();for(const y of a){u.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ls:y,removedBatchIds:u,addedBatchIds:m}))})})}function r4(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(m,g,y,v){const x=y.batch,E=x.keys();let k=se.resolve();return E.forEach(z=>{k=k.next(()=>v.getEntry(g,z)).next(B=>{const j=y.docVersions.get(z);nt(j!==null,48541),B.version.compareTo(j)<0&&(x.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),v.addEntry(B)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(g,x))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let g=Ye();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function p1(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function i4(r,e){const t=Ve(r),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach((v,x)=>{const E=a.get(x);if(!E)return;m.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,x).next(()=>t.Pi.addMatchingKeys(l,v.addedDocuments,x)));let k=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(x)!==null?k=k.withResumeToken(cn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):v.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(v.resumeToken,s)),a=a.insert(x,k),function(B,j,J){return B.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=t4?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0}(E,k,v)&&m.push(t.Pi.updateTargetData(l,k))});let g=_r(),y=Ye();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),m.push(a4(l,u,e.documentUpdates).next(v=>{g=v.ks,y=v.qs})),!s.isEqual(De.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next(x=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s));m.push(v)}return se.waitFor(m).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,y)).next(()=>g)}).then(l=>(t.Ms=a,l))}function a4(r,e,t){let s=Ye(),a=Ye();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let u=_r();return t.forEach((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(m,g.readTime),u=u.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(m,g)):me(Yp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{ks:u,qs:a}})}function o4(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Pp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function l4(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Pi.getTargetData(s,e).next(l=>l?(a=l,se.resolve(a)):t.Pi.allocateTargetId(s).next(u=>(a=new fi(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function np(r,e,t){const s=Ve(r),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,u=>s.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!dl(u))throw u;me(Yp,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function hw(r,e,t){const s=Ve(r);let a=De.min(),l=Ye();return s.persistence.runTransaction("Execute query","readwrite",u=>function(g,y,v){const x=Ve(g),E=x.xs.get(v);return E!==void 0?se.resolve(x.Ms.get(E)):x.Pi.getTargetData(y,v)}(s,u,Ls(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,m.targetId).next(g=>{l=g})}).next(()=>s.Fs.getDocumentsMatchingQuery(u,e,t?a:De.min(),t?l:Ye())).next(m=>(c4(s,QI(e),m),{documents:m,Qs:l})))}function c4(r,e,t){let s=r.Os.get(e)||De.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.Os.set(e,s)}class dw{constructor(){this.activeTargetIds=ej()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u4{constructor(){this.Mo=new dw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new dw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="ConnectivityMonitor";class mw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(fw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(fw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function sp(){return Vh===null?Vh=function(){return 268435456+Math.round(2147483648*Math.random())}():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",d4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===cd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const u=sp(),m=this.zo(e,t.toUriEncodedString());me(pg,`Sending RPC '${e}' ${u}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:y}=new URL(m),v=ol(y);return this.Jo(e,m,g,s,v).then(x=>(me(pg,`Received RPC '${e}' ${u}: `,x),x),x=>{throw Jo(pg,`RPC '${e}' ${u} failed with error: `,x,"url: ",m,"request:",s),x})}Ho(e,t,s,a,l,u){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const s=d4[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class g4 extends f4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const u=sp();return new Promise((m,g)=>{const y=new _E;y.setWithCredentials(!0),y.listenOnce(bE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Kh.NO_ERROR:const x=y.getResponseJson();me(gn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),m(x);break;case Kh.TIMEOUT:me(gn,`RPC '${e}' ${u} timed out`),g(new fe(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const E=y.getStatus();if(me(gn,`RPC '${e}' ${u} failed with status:`,E,"response text:",y.getResponseText()),E>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const z=k==null?void 0:k.error;if(z&&z.status&&z.message){const B=function(J){const $=J.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf($)>=0?$:ee.UNKNOWN}(z.status);g(new fe(B,z.message))}else g(new fe(ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new fe(ee.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{me(gn,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(a);me(gn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",v,s,15)})}T_(e,t,s){const a=sp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=EE(),m=xE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");me(gn,`Creating RPC '${e}' stream ${a}: ${v}`,g);const x=u.createWebChannel(v,g);this.I_(x);let E=!1,k=!1;const z=new m4({Yo:j=>{k?me(gn,`Not sending because RPC '${e}' stream ${a} is closed:`,j):(E||(me(gn,`Opening RPC '${e}' stream ${a} transport.`),x.open(),E=!0),me(gn,`RPC '${e}' stream ${a} sending:`,j),x.send(j))},Zo:()=>x.close()}),B=(j,J,$)=>{j.listen(J,W=>{try{$(W)}catch(le){setTimeout(()=>{throw le},0)}})};return B(x,Tc.EventType.OPEN,()=>{k||(me(gn,`RPC '${e}' stream ${a} transport opened.`),z.o_())}),B(x,Tc.EventType.CLOSE,()=>{k||(k=!0,me(gn,`RPC '${e}' stream ${a} transport closed`),z.a_(),this.E_(x))}),B(x,Tc.EventType.ERROR,j=>{k||(k=!0,Jo(gn,`RPC '${e}' stream ${a} transport errored. Name:`,j.name,"Message:",j.message),z.a_(new fe(ee.UNAVAILABLE,"The operation could not be completed")))}),B(x,Tc.EventType.MESSAGE,j=>{var J;if(!k){const $=j.data[0];nt(!!$,16349);const W=$,le=(W==null?void 0:W.error)||((J=W[0])==null?void 0:J.error);if(le){me(gn,`RPC '${e}' stream ${a} received error:`,le);const ce=le.status;let oe=function(N){const D=Pt[N];if(D!==void 0)return s1(D)}(ce),C=le.message;oe===void 0&&(oe=ee.INTERNAL,C="Unknown error status: "+ce+" with message "+le.message),k=!0,z.a_(new fe(oe,C)),x.close()}else me(gn,`RPC '${e}' stream ${a} received:`,$),z.u_($)}}),B(m,wE.STAT_EVENT,j=>{j.stat===Hg.PROXY?me(gn,`RPC '${e}' stream ${a} detected buffering proxy`):j.stat===Hg.NOPROXY&&me(gn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{z.__()},0),z}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function yg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(r){return new _j(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&me("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="PersistentStream";class v1{constructor(e,t,s,a,l,u,m,g){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new y1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===t&&this.G_(s,a)},s=>{e(()=>{const a=new fe(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(gw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(me(gw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p4 extends v1{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xj(this.serializer,e),s=function(l){if(!("targetChange"in l))return De.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?zs(u.readTime):De.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=tp(this.serializer),t.addTarget=function(l,u){let m;const g=u.target;if(m=Yg(g)?{documents:Sj(l,g)}:{query:Aj(l,g).ft},m.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){m.resumeToken=a1(l,u.resumeToken);const y=Jg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}else if(u.snapshotVersion.compareTo(De.min())>0){m.readTime=gd(l,u.snapshotVersion.toTimestamp());const y=Jg(l,u.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=Rj(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.q_(t)}}class y4 extends v1{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Tj(e.writeResults,e.commitTime),s=zs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ej(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{}class _4 extends v4{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Go(e,Zg(t,s),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(ee.UNKNOWN,l.toString())})}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.connection.Ho(e,Zg(t,s),a,u,m,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(ee.UNKNOWN,u.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class b4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class w4{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(u=>{s.enqueueAndForget(async()=>{Da(this)&&(me(Ca,"Restarting streams for network reachability change."),await async function(g){const y=Ve(g);y.Ea.add(4),await su(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Ld(y)}(this))})}),this.Ra=new b4(s,a)}}async function Ld(r){if(Da(r))for(const e of r.da)await e(!0)}async function su(r){for(const e of r.da)await e(!1)}function _1(r,e){const t=Ve(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zp(t)?Jp(t):fl(t).O_()&&Xp(t,e))}function Wp(r,e){const t=Ve(r),s=fl(t);t.Ia.delete(e),s.O_()&&b1(t,e),t.Ia.size===0&&(s.O_()?s.L_():Da(t)&&t.Ra.set("Unknown"))}function Xp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(r).Y_(e)}function b1(r,e){r.Va.Ue(e),fl(r).Z_(e)}function Jp(r){r.Va=new gj({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),fl(r).start(),r.Ra.ua()}function Zp(r){return Da(r)&&!fl(r).x_()&&r.Ia.size>0}function Da(r){return Ve(r).Ea.size===0}function w1(r){r.Va=void 0}async function x4(r){r.Ra.set("Online")}async function E4(r){r.Ia.forEach((e,t)=>{Xp(r,e)})}async function T4(r,e){w1(r),Zp(r)?(r.Ra.ha(e),Jp(r)):r.Ra.set("Unknown")}async function S4(r,e,t){if(r.Ra.set("Online"),e instanceof i1&&e.state===2&&e.cause)try{await async function(a,l){const u=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,u),a.Ia.delete(m),a.Va.removeTarget(m))}(r,e)}catch(s){me(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yd(r,s)}else if(e instanceof Xh?r.Va.Ze(e):e instanceof r1?r.Va.st(e):r.Va.tt(e),!t.isEqual(De.min()))try{const s=await p1(r.localStore);t.compareTo(s)>=0&&await function(l,u){const m=l.Va.Tt(u);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,u))}}),m.targetMismatches.forEach((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),b1(l,g);const x=new fi(v.target,g,y,v.sequenceNumber);Xp(l,x)}),l.remoteSyncer.applyRemoteEvent(m)}(r,t)}catch(s){me(Ca,"Failed to raise snapshot:",s),await yd(r,s)}}async function yd(r,e,t){if(!dl(e))throw e;r.Ea.add(1),await su(r),r.Ra.set("Offline"),t||(t=()=>p1(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{me(Ca,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Ld(r)})}function x1(r,e){return e().catch(t=>yd(r,t,e))}async function zd(r){const e=Ve(r),t=Ai(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pp;for(;A4(e);)try{const a=await o4(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,N4(e,a)}catch(a){await yd(e,a)}E1(e)&&T1(e)}function A4(r){return Da(r)&&r.Ta.length<10}function N4(r,e){r.Ta.push(e);const t=Ai(r);t.O_()&&t.X_&&t.ea(e.mutations)}function E1(r){return Da(r)&&!Ai(r).x_()&&r.Ta.length>0}function T1(r){Ai(r).start()}async function R4(r){Ai(r).ra()}async function k4(r){const e=Ai(r);for(const t of r.Ta)e.ea(t.mutations)}async function C4(r,e,t){const s=r.Ta.shift(),a=$p.from(s,e,t);await x1(r,()=>r.remoteSyncer.applySuccessfulWrite(a)),await zd(r)}async function I4(r,e){e&&Ai(r).X_&&await async function(s,a){if(function(u){return dj(u)&&u!==ee.ABORTED}(a.code)){const l=s.Ta.shift();Ai(s).B_(),await x1(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a)),await zd(s)}}(r,e),E1(r)&&T1(r)}async function pw(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),me(Ca,"RemoteStore received new credentials");const s=Da(t);t.Ea.add(3),await su(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ld(t)}async function j4(r,e){const t=Ve(r);e?(t.Ea.delete(2),await Ld(t)):e||(t.Ea.add(2),await su(t),t.Ra.set("Unknown"))}function fl(r){return r.ma||(r.ma=function(t,s,a){const l=Ve(t);return l.sa(),new p4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Xo:x4.bind(null,r),t_:E4.bind(null,r),r_:T4.bind(null,r),H_:S4.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),Zp(r)?Jp(r):r.Ra.set("Unknown")):(await r.ma.stop(),w1(r))})),r.ma}function Ai(r){return r.fa||(r.fa=function(t,s,a){const l=Ve(t);return l.sa(),new y4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:R4.bind(null,r),r_:I4.bind(null,r),ta:k4.bind(null,r),na:C4.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await zd(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Ca,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,m=new ey(e,t,u,a,l);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ty(r,e){if(vr("AsyncQueue",`${e}: ${r}`),dl(r))return new fe(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=Sc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.ga=new xt(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class sl{constructor(e,t,s,a,l,u,m,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach(m=>{u.push({type:0,doc:m})}),new sl(e,t,Yo.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class D4{constructor(){this.queries=vw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ve(t),l=a.queries;a.queries=vw(),l.forEach((u,m)=>{for(const g of m.Sa)g.onError(s)})})(this,new fe(ee.ABORTED,"Firestore shutting down"))}}function vw(){return new Oa(r=>FE(r),Od)}async function S1(r,e){const t=Ve(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new O4,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const m=ty(u,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ny(t)}async function A1(r,e){const t=Ve(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function P4(r,e){const t=Ve(r);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const m of u.Sa)m.Fa(a)&&(s=!0);u.wa=a}}s&&ny(t)}function M4(r,e,t){const s=Ve(r),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function ny(r){r.Ca.forEach(e=>{e.next()})}var rp,_w;(_w=rp||(rp={})).Ma="default",_w.Cache="cache";class N1{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new sl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.key=e}}class k1{constructor(e){this.key=e}}class V4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=GE(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new yw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((v,x)=>{const E=a.get(v),k=Dd(this.query,x)?x:null,z=!!E&&this.mutatedKeys.has(E.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let j=!1;E&&k?E.data.isEqual(k.data)?z!==B&&(s.track({type:3,doc:k}),j=!0):this.su(E,k)||(s.track({type:2,doc:k}),j=!0,(g&&this.eu(k,g)>0||y&&this.eu(k,y)<0)&&(m=!0)):!E&&k?(s.track({type:0,doc:k}),j=!0):E&&!k&&(s.track({type:1,doc:E}),j=!0,(g||y)&&(m=!0)),j&&(k?(u=u.add(k),l=B?l.add(v):l.delete(v)):(u=u.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:u,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort((v,x)=>function(k,z){const B=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:j})}};return B(k)-B(z)}(v.type,x.type)||this.eu(v.doc,x.doc)),this.ou(s),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,y=g!==this.Za;return this.Za=g,u.length!==0||y?{snapshot:new sl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new k1(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new R1(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ye();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sy="SyncEngine";class U4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class L4{constructor(e){this.key=e,this.hu=!1}}class z4{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Oa(m=>FE(m),Od),this.Iu=new Map,this.Eu=new Set,this.du=new xt(xe.comparator),this.Au=new Map,this.Ru=new Gp,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B4(r,e,t=!0){const s=P1(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await C1(s,e,t,!0),a}async function q4(r,e){const t=P1(r);await C1(t,e,!0,!1)}async function C1(r,e,t,s){const a=await l4(r.localStore,Ls(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await $4(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&_1(r.remoteStore,a),m}async function $4(r,e,t,s,a){r.pu=(x,E,k)=>async function(B,j,J,$){let W=j.view.ru(J);W.Cs&&(W=await hw(B.localStore,j.query,!1).then(({documents:C})=>j.view.ru(C,W)));const le=$&&$.targetChanges.get(j.targetId),ce=$&&$.targetMismatches.get(j.targetId)!=null,oe=j.view.applyChanges(W,B.isPrimaryClient,le,ce);return ww(B,j.targetId,oe.au),oe.snapshot}(r,x,E,k);const l=await hw(r.localStore,e,!0),u=new V4(e,l.Qs),m=u.ru(l.documents),g=nu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),y=u.applyChanges(m,r.isPrimaryClient,g);ww(r,t,y.au);const v=new U4(e,t,u);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function H4(r,e,t){const s=Ve(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter(u=>!Od(u,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await np(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Wp(s.remoteStore,a.targetId),ip(s,a.targetId)}).catch(hl)):(ip(s,a.targetId),await np(s.localStore,a.targetId,!0))}async function F4(r,e){const t=Ve(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Wp(t.remoteStore,s.targetId))}async function G4(r,e,t){const s=Z4(r);try{const a=await function(u,m){const g=Ve(u),y=yt.now(),v=m.reduce((k,z)=>k.add(z.key),Ye());let x,E;return g.persistence.runTransaction("Locally write mutations","readwrite",k=>{let z=_r(),B=Ye();return g.Ns.getEntries(k,v).next(j=>{z=j,z.forEach((J,$)=>{$.isValidDocument()||(B=B.add(J))})}).next(()=>g.localDocuments.getOverlayedDocuments(k,z)).next(j=>{x=j;const J=[];for(const $ of m){const W=oj($,x.get($.key).overlayedDocument);W!=null&&J.push(new ki($.key,W,VE(W.value.mapValue),ys.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,J,m)}).next(j=>{E=j;const J=j.applyToLocalDocumentSet(x,B);return g.documentOverlayCache.saveOverlays(k,j.batchId,J)})}).then(()=>({batchId:E.batchId,changes:QE(x)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(u,m,g){let y=u.Vu[u.currentUser.toKey()];y||(y=new xt(Qe)),y=y.insert(m,g),u.Vu[u.currentUser.toKey()]=y}(s,a.batchId,t),await ru(s,a.changes),await zd(s.remoteStore)}catch(a){const l=ty(a,"Failed to persist write");t.reject(l)}}async function I1(r,e){const t=Ve(r);try{const s=await i4(t.localStore,e);e.targetChanges.forEach((a,l)=>{const u=t.Au.get(l);u&&(nt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?nt(u.hu,14607):a.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))}),await ru(t,s,e)}catch(s){await hl(s)}}function bw(r,e,t){const s=Ve(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach((l,u)=>{const m=u.view.va(e);m.snapshot&&a.push(m.snapshot)}),function(u,m){const g=Ve(u);g.onlineState=m;let y=!1;g.queries.forEach((v,x)=>{for(const E of x.Sa)E.va(m)&&(y=!0)}),y&&ny(g)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function K4(r,e,t){const s=Ve(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new xt(xe.comparator);u=u.insert(l,yn.newNoDocument(l,De.min()));const m=Ye().add(l),g=new Vd(De.min(),new Map,new xt(Qe),u,m);await I1(s,g),s.du=s.du.remove(l),s.Au.delete(e),ry(s)}else await np(s.localStore,e,!1).then(()=>ip(s,e,t)).catch(hl)}async function Q4(r,e){const t=Ve(r),s=e.batch.batchId;try{const a=await r4(t.localStore,e);O1(t,s,null),j1(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ru(t,a)}catch(a){await hl(a)}}async function Y4(r,e,t){const s=Ve(r);try{const a=await function(u,m){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return g.mutationQueue.lookupMutationBatch(y,m).next(x=>(nt(x!==null,37113),v=x.keys(),g.mutationQueue.removeMutationBatch(y,x))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>g.localDocuments.getDocuments(y,v))})}(s.localStore,e);O1(s,e,t),j1(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ru(s,a)}catch(a){await hl(a)}}function j1(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function O1(r,e,t){const s=Ve(r);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function ip(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(s=>{r.Ru.containsKey(s)||D1(r,s)})}function D1(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Wp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ry(r))}function ww(r,e,t){for(const s of t)s instanceof R1?(r.Ru.addReference(s.key,e),W4(r,s)):s instanceof k1?(me(sy,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||D1(r,s.key)):ke(19791,{wu:s})}function W4(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(me(sy,"New document in limbo: "+t),r.Eu.add(s),ry(r))}function ry(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new xe(gt.fromString(e)),s=r.fu.next();r.Au.set(s,new L4(t)),r.du=r.du.insert(t,s),_1(r.remoteStore,new fi(Ls(zp(t.path)),s,"TargetPurposeLimboResolution",Cd.ce))}}async function ru(r,e,t){const s=Ve(r),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach((m,g)=>{u.push(s.pu(g,e,t).then(y=>{var v;if((y||t)&&s.isPrimaryClient){const x=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){a.push(y);const x=Qp.As(g.targetId,y);l.push(x)}}))}),await Promise.all(u),s.Pu.H_(a),await async function(g,y){const v=Ve(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>se.forEach(y,E=>se.forEach(E.Es,k=>v.persistence.referenceDelegate.addReference(x,E.targetId,k)).next(()=>se.forEach(E.ds,k=>v.persistence.referenceDelegate.removeReference(x,E.targetId,k)))))}catch(x){if(!dl(x))throw x;me(Yp,"Failed to update sequence numbers: "+x)}for(const x of y){const E=x.targetId;if(!x.fromCache){const k=v.Ms.get(E),z=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(z);v.Ms=v.Ms.insert(E,B)}}}(s.localStore,l))}async function X4(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){me(sy,"User change. New user:",e.toKey());const s=await g1(t.localStore,e);t.currentUser=e,function(l,u){l.mu.forEach(m=>{m.forEach(g=>{g.reject(new fe(ee.CANCELLED,u))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ru(t,s.Ls)}}function J4(r,e){const t=Ve(r),s=t.Au.get(e);if(s&&s.hu)return Ye().add(s.key);{let a=Ye();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const m=t.Tu.get(u);a=a.unionWith(m.view.nu)}return a}}function P1(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=I1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K4.bind(null,e),e.Pu.H_=P4.bind(null,e.eventManager),e.Pu.yu=M4.bind(null,e.eventManager),e}function Z4(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y4.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ud(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return s4(this.persistence,new e4,e.initialUser,this.serializer)}Cu(e){return new m1(Kp.mi,this.serializer)}Du(e){return new u4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class eO extends vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){nt(this.persistence.referenceDelegate instanceof pd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Lj(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new m1(s=>pd.mi(s,t),this.serializer)}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>bw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=X4.bind(null,this.syncEngine),await j4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new D4}()}createDatastore(e){const t=Ud(e.databaseInfo.databaseId),s=function(l){return new g4(l)}(e.databaseInfo);return function(l,u,m,g){return new _4(l,u,m,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,a,l,u,m){return new w4(s,a,l,u,m)}(this.localStore,this.datastore,e.asyncQueue,t=>bw(this.syncEngine,t,0),function(){return mw.v()?new mw:new h4}())}createSyncEngine(e,t){return function(a,l,u,m,g,y,v){const x=new z4(a,l,u,m,g,y);return v&&(x.gu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Ve(a);me(Ca,"RemoteStore shutting down."),l.Ea.add(5),await su(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class tO{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=pn.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async u=>{me(Ni,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(s,u=>(me(Ni,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ty(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function vg(r,e){r.asyncQueue.verifyOperationInProgress(),me(Ni,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async a=>{s.isEqual(a)||(await g1(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function xw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await nO(r);me(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>pw(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,a)=>pw(e.remoteStore,a)),r._onlineComponents=e}async function nO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(Ni,"Using user provided OfflineComponentProvider");try{await vg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===ee.FAILED_PRECONDITION||a.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await vg(r,new vd)}}else me(Ni,"Using default OfflineComponentProvider"),await vg(r,new eO(void 0));return r._offlineComponents}async function V1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(Ni,"Using user provided OnlineComponentProvider"),await xw(r,r._uninitializedComponentsProvider._online)):(me(Ni,"Using default OnlineComponentProvider"),await xw(r,new ap))),r._onlineComponents}function sO(r){return V1(r).then(e=>e.syncEngine)}async function op(r){const e=await V1(r),t=e.eventManager;return t.onListen=B4.bind(null,e.syncEngine),t.onUnlisten=H4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=q4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=F4.bind(null,e.syncEngine),t}function rO(r,e,t={}){const s=new _i;return r.asyncQueue.enqueueAndForget(async()=>function(l,u,m,g,y){const v=new M1({next:E=>{v.Nu(),u.enqueueAndForget(()=>A1(l,x)),E.fromCache&&g.source==="server"?y.reject(new fe(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),x=new N1(m,v,{includeMetadataChanges:!0,qa:!0});return S1(l,x)}(await op(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firestore.googleapis.com",Tw=!0;class Sw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=L1,this.ssl=Tw}else this.host=e.host,this.ssl=e.ssl??Tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=f1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Vj)throw new fe(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=U1(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new hI;switch(s.type){case"firstParty":return new gI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Ew.get(t);s&&(me("ComponentProvider","Removing Datastore"),Ew.delete(t),s.terminate())}(this),Promise.resolve()}}function iO(r,e,t,s={}){var y;r=ps(r,Bd);const a=ol(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;a&&(jx(`https://${m}`),Ox("Firestore",!0)),l.host!==L1&&l.host!==m&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:s};if(!Aa(g,u)&&(r._setSettings(g),s.mockUserToken)){let v,x;if(typeof s.mockUserToken=="string")v=s.mockUserToken,x=pn.MOCK_USER;else{v=PN(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new fe(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new pn(E)}r._authCredentials=new dI(new SE(v,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Pa(this.firestore,e,this._query)}}class jt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Zc(t,jt._jsonSchema))return new jt(e,s||null,new xe(gt.fromString(t.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Lt("string",jt._jsonSchemaVersion),referencePath:Lt("string")};class bi extends Pa{constructor(e,t,s){super(e,t,zp(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new xe(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function Aw(r,e,...t){if(r=tn(r),AE("collection","path",e),r instanceof Bd){const s=gt.fromString(e,...t);return Ub(s),new bi(r,null,s)}{if(!(r instanceof jt||r instanceof bi))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return Ub(s),new bi(r.firestore,null,s)}}function _g(r,e,...t){if(r=tn(r),arguments.length===1&&(e=Dp.newId()),AE("doc","path",e),r instanceof Bd){const s=gt.fromString(e,...t);return Vb(s),new jt(r,null,new xe(s))}{if(!(r instanceof jt||r instanceof bi))throw new fe(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(gt.fromString(e,...t));return Vb(s),new jt(r.firestore,r instanceof bi?r.converter:null,new xe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="AsyncQueue";class Rw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new y1(this,"async_queue_retry"),this._c=()=>{const s=yg();s&&me(Nw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=yg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new _i;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dl(e))throw e;me(Nw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",kw(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ey.createAndSchedule(this,e,t,s,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&ke(47125,{Pc:kw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function kw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Ia extends Bd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Rw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rw(e),this._firestoreClient=void 0,await e}}}function aO(r,e){const t=typeof r=="object"?r:Vx(),s=typeof r=="string"?r:cd,a=Sp(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=ON("firestore");l&&iO(a,...l)}return a}function iy(r){if(r._terminated)throw new fe(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||oO(r),r._firestoreClient}function oO(r){var s,a,l;const e=r._freezeSettings(),t=function(m,g,y,v){return new jI(m,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,U1(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new tO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(cn.fromBase64String(e))}catch(t){throw new fe(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new es(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,es._jsonSchema))return es.fromBase64String(e.bytes)}}es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:Lt("string",es._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bs._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,Bs._jsonSchema))return new Bs(e.latitude,e.longitude)}}Bs._jsonSchemaVersion="firestore/geoPoint/1.0",Bs._jsonSchema={type:Lt("string",Bs._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new qs(e.vectorValues);throw new fe(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:Lt("string",qs._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=/^__.*__$/;class cO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new tu(e,this.data,t,this.fieldTransforms)}}class z1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function B1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:r})}}class oy{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new oy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(B1(this.Ac)&&lO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ud(e)}Cc(e,t,s,a=!1){return new oy({Ac:e,methodName:t,Dc:s,path:ln.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ly(r){const e=r._freezeSettings(),t=Ud(r._databaseId);return new uO(r._databaseId,!!e.ignoreUndefinedProperties,t)}function hO(r,e,t,s,a,l={}){const u=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);cy("Data must be an object, but it was:",u,s);const m=q1(s,u);let g,y;if(l.merge)g=new Bn(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const v=[];for(const x of l.mergeFields){const E=lp(e,x,t);if(!u.contains(E))throw new fe(ee.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);H1(v,E)||v.push(E)}g=new Bn(v),y=u.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,y=u.fieldTransforms;return new cO(new Cn(m),g,y)}class $d extends ay{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function dO(r,e,t,s){const a=r.Cc(1,e,t);cy("Data must be an object, but it was:",a,s);const l=[],u=Cn.empty();Ri(s,(g,y)=>{const v=uy(e,g,t);y=tn(y);const x=a.yc(v);if(y instanceof $d)l.push(v);else{const E=iu(y,x);E!=null&&(l.push(v),u.set(v,E))}});const m=new Bn(l);return new z1(u,m,a.fieldTransforms)}function fO(r,e,t,s,a,l){const u=r.Cc(1,e,t),m=[lp(e,s,t)],g=[a];if(l.length%2!=0)throw new fe(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)m.push(lp(e,l[E])),g.push(l[E+1]);const y=[],v=Cn.empty();for(let E=m.length-1;E>=0;--E)if(!H1(y,m[E])){const k=m[E];let z=g[E];z=tn(z);const B=u.yc(k);if(z instanceof $d)y.push(k);else{const j=iu(z,B);j!=null&&(y.push(k),v.set(k,j))}}const x=new Bn(y);return new z1(v,x,u.fieldTransforms)}function mO(r,e,t,s=!1){return iu(t,r.Cc(s?4:3,e))}function iu(r,e){if($1(r=tn(r)))return cy("Unsupported field value:",e,r),q1(r,e);if(r instanceof ay)return function(s,a){if(!B1(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const l=[];let u=0;for(const m of s){let g=iu(m,a.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}}(r,e)}return function(s,a){if((s=tn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return tj(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=yt.fromDate(s);return{timestampValue:gd(a.serializer,l)}}if(s instanceof yt){const l=new yt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gd(a.serializer,l)}}if(s instanceof Bs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof es)return{bytesValue:a1(a.serializer,s._byteString)};if(s instanceof jt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof qs)return function(u,m){return{mapValue:{fields:{[PE]:{stringValue:ME},[ud]:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Bp(m.serializer,y)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${kd(s)}`)}(r,e)}function q1(r,e){const t={};return kE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(r,(s,a)=>{const l=iu(a,e.mc(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function $1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof yt||r instanceof Bs||r instanceof es||r instanceof jt||r instanceof ay||r instanceof qs)}function cy(r,e,t){if(!$1(t)||!NE(t)){const s=kd(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function lp(r,e,t){if((e=tn(e))instanceof qd)return e._internalPath;if(typeof e=="string")return uy(r,e);throw _d("Field path arguments must be of type string or ",r,!1,void 0,t)}const gO=new RegExp("[~\\*/\\[\\]]");function uy(r,e,t){if(e.search(gO)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function _d(r,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${a}`),g+=")"),new fe(ee.INVALID_ARGUMENT,m+r+g)}function H1(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pO extends F1{data(){return super.data()}}function hy(r,e){return typeof e=="string"?uy(r,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class yO extends dy{}function vO(r,e,...t){let s=[];e instanceof dy&&s.push(e),s=s.concat(t),function(l){const u=l.filter(g=>g instanceof fy).length,m=l.filter(g=>g instanceof Hd).length;if(u>1||u>0&&m>0)throw new fe(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const a of s)r=a._apply(r);return r}class Hd extends yO{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Hd(e,t,s)}_apply(e){const t=this._parse(e);return K1(e._query,t),new Pa(e.firestore,e.converter,Wg(e._query,t))}_parse(e){const t=ly(e.firestore);return function(l,u,m,g,y,v,x){let E;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){jw(x,v);const z=[];for(const B of x)z.push(Iw(g,l,B));E={arrayValue:{values:z}}}else E=Iw(g,l,x)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||jw(x,v),E=mO(m,u,x,v==="in"||v==="not-in");return Ut.create(y,v,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _O(r,e,t){const s=e,a=hy("where",r);return Hd._create(a,s,t)}class fy extends dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fy(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:vs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let u=a;const m=l.getFlattenedFilters();for(const g of m)K1(u,g),u=Wg(u,g)}(e._query,t),new Pa(e.firestore,e.converter,Wg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Iw(r,e,t){if(typeof(t=tn(t))=="string"){if(t==="")throw new fe(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HE(e)&&t.indexOf("/")!==-1)throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(gt.fromString(t));if(!xe.isDocumentKey(s))throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gb(r,new xe(s))}if(t instanceof jt)return Gb(r,t._key);throw new fe(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(t)}.`)}function jw(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function K1(r,e){const t=function(a,l){for(const u of a)for(const m of u.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class bO{convertValue(e,t="none"){switch(Si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ri(e,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[ud].arrayValue)==null?void 0:a.values)==null?void 0:l.map(u=>It(u.doubleValue));return new qs(t)}convertGeoPoint(e){return new Bs(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Bc(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=gt.fromString(e);nt(d1(s),9688,{name:e});const a=new qc(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return a.isEqual(t)||vr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(r,e,t){let s;return s=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,s}class Nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ta extends F1{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(hy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ta._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ta._jsonSchema={type:Lt("string",Ta._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Jh extends Ta{data(e={}){return super.data(e)}}class Sa{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Nc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Jh(this._firestore,this._userDataWriter,s.key,s,new Nc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(m=>{const g=new Jh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Nc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const g=new Jh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Nc(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return m.type!==0&&(y=u.indexOf(m.doc.key),u=u.delete(m.doc.key)),m.type!==1&&(u=u.add(m.doc),v=u.indexOf(m.doc.key)),{type:xO(m.type),doc:g,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:r})}}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:Lt("string",Sa._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class my extends bO{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,t)}}function EO(r){r=ps(r,Pa);const e=ps(r.firestore,Ia),t=iy(e),s=new my(e);return G1(r._query),rO(t,r._query).then(a=>new Sa(e,s,r,a))}function TO(r,e,t){r=ps(r,jt);const s=ps(r.firestore,Ia),a=wO(r.converter,e,t);return gy(s,[hO(ly(s),"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,ys.none())])}function SO(r,e,t,...s){r=ps(r,jt);const a=ps(r.firestore,Ia),l=ly(a);let u;return u=typeof(e=tn(e))=="string"||e instanceof qd?fO(l,"updateDoc",r._key,e,t,s):dO(l,"updateDoc",r._key,e),gy(a,[u.toMutation(r._key,ys.exists(!0))])}function AO(r){return gy(ps(r.firestore,Ia),[new qp(r._key,ys.none())])}function NO(r,...e){var g,y,v;r=tn(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Cw(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cw(e[s])){const x=e[s];e[s]=(g=x.next)==null?void 0:g.bind(x),e[s+1]=(y=x.error)==null?void 0:y.bind(x),e[s+2]=(v=x.complete)==null?void 0:v.bind(x)}let l,u,m;if(r instanceof jt)u=ps(r.firestore,Ia),m=zp(r._key.path),l={next:x=>{e[s]&&e[s](RO(u,r,x))},error:e[s+1],complete:e[s+2]};else{const x=ps(r,Pa);u=ps(x.firestore,Ia),m=x._query;const E=new my(u);l={next:k=>{e[s]&&e[s](new Sa(u,E,x,k))},error:e[s+1],complete:e[s+2]},G1(r._query)}return function(E,k,z,B){const j=new M1(B),J=new N1(k,j,z);return E.asyncQueue.enqueueAndForget(async()=>S1(await op(E),J)),()=>{j.Nu(),E.asyncQueue.enqueueAndForget(async()=>A1(await op(E),J))}}(iy(u),m,a,l)}function gy(r,e){return function(s,a){const l=new _i;return s.asyncQueue.enqueueAndForget(async()=>G4(await sO(s),a,l)),l.promise}(iy(r),e)}function RO(r,e,t){const s=t.docs.get(e._key),a=new my(r);return new Ta(r,a,e._key,s,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){ul=a})(ll),Xo(new Na("firestore",(s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),m=new Ia(new fI(s.getProvider("auth-internal")),new pI(u,s.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(y.options.projectId,v)}(u,a),u);return l={useFetchStreams:t,...l},m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),pi(Ob,Db,e),pi(Ob,Db,"esm2020")})();const kO="modulepreload",CO=function(r){return"/"+r},Ow={},au=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let u=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));a=u(t.map(y=>{if(y=CO(y),y in Ow)return;Ow[y]=!0;const v=y.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${x}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":kO,v||(E.as="script"),E.crossOrigin="",E.href=y,g&&E.setAttribute("nonce",g),document.head.appendChild(E),v)return new Promise((k,z)=>{E.addEventListener("load",k),E.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(u){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=u,window.dispatchEvent(m),!m.defaultPrevented)throw u}return a.then(u=>{for(const m of u||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})},IO=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>ml);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class py extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Dw extends py{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pw extends py{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mw extends py{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cp;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(cp||(cp={}));var jO=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class OO{constructor(e,{headers:t={},customFetch:s,region:a=cp.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=IO(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return jO(this,arguments,void 0,function*(t,s={}){var a;try{const{headers:l,method:u,body:m,signal:g}=s;let y={},{region:v}=s;v||(v=this.region);const x=new URL(`${this.url}/${t}`);v&&v!=="any"&&(y["x-region"]=v,x.searchParams.set("forceFunctionRegion",v));let E;m&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",E=m):typeof m=="string"?(y["Content-Type"]="text/plain",E=m):typeof FormData<"u"&&m instanceof FormData?E=m:(y["Content-Type"]="application/json",E=JSON.stringify(m)));const k=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:E,signal:g}).catch(J=>{throw J.name==="AbortError"?J:new Dw(J)}),z=k.headers.get("x-relay-error");if(z&&z==="true")throw new Pw(k);if(!k.ok)throw new Mw(k);let B=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return B==="application/json"?j=yield k.json():B==="application/octet-stream"?j=yield k.blob():B==="text/event-stream"?j=k:B==="multipart/form-data"?j=yield k.formData():j=yield k.text(),{data:j,error:null,response:k}}catch(l){return l instanceof Error&&l.name==="AbortError"?{data:null,error:new Dw(l)}:{data:null,error:l,response:l instanceof Mw||l instanceof Pw?l.context:void 0}}})}}var Jt={},Ro={},ko={},Co={},Io={},jo={},DO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rl=DO();const PO=rl.fetch,Q1=rl.fetch.bind(rl),Y1=rl.Headers,MO=rl.Request,VO=rl.Response,ml=Object.freeze(Object.defineProperty({__proto__:null,Headers:Y1,Request:MO,Response:VO,default:Q1,fetch:PO},Symbol.toStringTag,{value:"Module"})),UO=qS(ml);var Uh={},Vw;function W1(){if(Vw)return Uh;Vw=1,Object.defineProperty(Uh,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Uh.default=r,Uh}var Uw;function X1(){if(Uw)return jo;Uw=1;var r=jo&&jo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(jo,"__esModule",{value:!0});const e=r(UO),t=r(W1());class s{constructor(l){var u,m;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(m=l.isMaybeSingle)!==null&&m!==void 0?m:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const m=this.fetch;let g=m(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async y=>{var v,x,E,k;let z=null,B=null,j=null,J=y.status,$=y.statusText;if(y.ok){if(this.method!=="HEAD"){const oe=await y.text();oe===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?B=oe:B=JSON.parse(oe))}const le=(x=this.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),ce=(E=y.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");le&&ce&&ce.length>1&&(j=parseInt(ce[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(B)&&(B.length>1?(z={code:"PGRST116",details:`Results contain ${B.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},B=null,j=null,J=406,$="Not Acceptable"):B.length===1?B=B[0]:B=null)}else{const le=await y.text();try{z=JSON.parse(le),Array.isArray(z)&&y.status===404&&(B=[],z=null,J=200,$="OK")}catch{y.status===404&&le===""?(J=204,$="No Content"):z={message:le}}if(z&&this.isMaybeSingle&&(!((k=z==null?void 0:z.details)===null||k===void 0)&&k.includes("0 rows"))&&(z=null,J=200,$="OK"),z&&this.shouldThrowOnError)throw new t.default(z)}return{error:z,data:B,count:j,status:J,statusText:$}});return this.shouldThrowOnError||(g=g.catch(y=>{var v,x,E;return{error:{message:`${(v=y==null?void 0:y.name)!==null&&v!==void 0?v:"FetchError"}: ${y==null?void 0:y.message}`,details:`${(x=y==null?void 0:y.stack)!==null&&x!==void 0?x:""}`,hint:"",code:`${(E=y==null?void 0:y.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),g.then(l,u)}returns(){return this}overrideTypes(){return this}}return jo.default=s,jo}var Lw;function J1(){if(Lw)return Io;Lw=1;var r=Io&&Io.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Io,"__esModule",{value:!0});const e=r(X1());class t extends e.default{select(a){let l=!1;const u=(a??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:u,foreignTable:m,referencedTable:g=m}={}){const y=g?`${g}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:u=l}={}){const m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(m,`${a}`),this}range(a,l,{foreignTable:u,referencedTable:m=u}={}){const g=typeof m>"u"?"offset":`${m}.offset`,y=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(y,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:u=!1,buffers:m=!1,wal:g=!1,format:y="text"}={}){var v;const x=[a?"analyze":null,l?"verbose":null,u?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),E=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${E}"; options=${x};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Io.default=t,Io}var zw;function yy(){if(zw)return Co;zw=1;var r=Co&&Co.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Co,"__esModule",{value:!0});const e=r(J1());class t extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const u=Array.from(new Set(l)).map(m=>typeof m=="string"&&new RegExp("[,()]").test(m)?`"${m}"`:`${m}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:u,type:m}={}){let g="";m==="plain"?g="pl":m==="phrase"?g="ph":m==="websearch"&&(g="w");const y=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${g}fts${y}.${l}`),this}match(a){return Object.entries(a).forEach(([l,u])=>{this.url.searchParams.append(l,`eq.${u}`)}),this}not(a,l,u){return this.url.searchParams.append(a,`not.${l}.${u}`),this}or(a,{foreignTable:l,referencedTable:u=l}={}){const m=u?`${u}.or`:"or";return this.url.searchParams.append(m,`(${a})`),this}filter(a,l,u){return this.url.searchParams.append(a,`${l}.${u}`),this}}return Co.default=t,Co}var Bw;function Z1(){if(Bw)return ko;Bw=1;var r=ko&&ko.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ko,"__esModule",{value:!0});const e=r(yy());class t{constructor(a,{headers:l={},schema:u,fetch:m}){this.url=a,this.headers=new Headers(l),this.schema=u,this.fetch=m}select(a,l){const{head:u=!1,count:m}=l??{},g=u?"HEAD":"GET";let y=!1;const v=(a??"*").split("").map(x=>/\s/.test(x)&&!y?"":(x==='"'&&(y=!y),x)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:u=!0}={}){var m;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(y.length>0){const v=[...new Set(y)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:u=!1,count:m,defaultToNull:g=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const x=a.reduce((E,k)=>E.concat(Object.keys(k)),[]);if(x.length>0){const E=[...new Set(x)].map(k=>`"${k}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(a,{count:l}={}){var u;const m="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:a}={}){var l;const u="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return ko.default=t,ko}var qw;function LO(){if(qw)return Ro;qw=1;var r=Ro&&Ro.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ro,"__esModule",{value:!0});const e=r(Z1()),t=r(yy());class s{constructor(l,{headers:u={},schema:m,fetch:g}={}){this.url=l,this.headers=new Headers(u),this.schemaName=m,this.fetch=g}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:m=!1,get:g=!1,count:y}={}){var v;let x;const E=new URL(`${this.url}/rpc/${l}`);let k;m||g?(x=m?"HEAD":"GET",Object.entries(u).filter(([B,j])=>j!==void 0).map(([B,j])=>[B,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([B,j])=>{E.searchParams.append(B,j)})):(x="POST",k=u);const z=new Headers(this.headers);return y&&z.set("Prefer",`count=${y}`),new t.default({method:x,url:E,headers:z,schema:this.schemaName,body:k,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Ro.default=s,Ro}var $w;function zO(){if($w)return Jt;$w=1;var r=Jt&&Jt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.PostgrestError=Jt.PostgrestBuilder=Jt.PostgrestTransformBuilder=Jt.PostgrestFilterBuilder=Jt.PostgrestQueryBuilder=Jt.PostgrestClient=void 0;const e=r(LO());Jt.PostgrestClient=e.default;const t=r(Z1());Jt.PostgrestQueryBuilder=t.default;const s=r(yy());Jt.PostgrestFilterBuilder=s.default;const a=r(J1());Jt.PostgrestTransformBuilder=a.default;const l=r(X1());Jt.PostgrestBuilder=l.default;const u=r(W1());return Jt.PostgrestError=u.default,Jt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:u.default},Jt}var BO=zO();const qO=BS(BO),{PostgrestClient:$O,PostgrestQueryBuilder:uM,PostgrestFilterBuilder:hM,PostgrestTransformBuilder:dM,PostgrestBuilder:fM,PostgrestError:mM}=qO;class HO{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const FO="2.75.0",GO=`realtime-js/${FO}`,KO="1.0.0",up=1e4,QO=1e3,YO=100;var Pc;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Pc||(Pc={}));var Ft;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Ft||(Ft={}));var fs;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(fs||(fs={}));var hp;(function(r){r.websocket="websocket"})(hp||(hp={}));var ba;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ba||(ba={}));class WO{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const a=t.getUint8(1),l=t.getUint8(2);let u=this.HEADER_LENGTH+2;const m=s.decode(e.slice(u,u+a));u=u+a;const g=s.decode(e.slice(u,u+l));u=u+l;const y=JSON.parse(s.decode(e.slice(u,e.byteLength)));return{ref:null,topic:m,event:g,payload:y}}}class eT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(mt||(mt={}));const Hw=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,u)=>(l[u]=XO(u,r,e,a),l),{}):{}},XO=(r,e,t,s)=>{const a=e.find(m=>m.name===r),l=a==null?void 0:a.type,u=t[r];return l&&!s.includes(l)?tT(l,u):dp(u)},tT=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return tD(e,t)}switch(r){case mt.bool:return JO(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return ZO(e);case mt.json:case mt.jsonb:return eD(e);case mt.timestamp:return nD(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return dp(e);default:return dp(e)}},dp=r=>r,JO=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ZO=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},eD=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},tD=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let l;const u=r.slice(1,t);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(m=>tT(e,m))}return r},nD=r=>typeof r=="string"?r.replace(" ","T"):r,nT=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class bg{constructor(e,t,s={},a=up){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fw;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Fw||(Fw={}));class Mc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:u,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mc.syncState(this.state,a,l,u),this.pendingDiffs.forEach(g=>{this.state=Mc.syncDiff(this.state,g,l,u)}),this.pendingDiffs=[],m()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:u,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Mc.syncDiff(this.state,a,l,u),m())}),this.onJoin((a,l,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:u})}),this.onLeave((a,l,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const l=this.cloneDeep(e),u=this.transformState(t),m={},g={};return this.map(l,(y,v)=>{u[y]||(g[y]=v)}),this.map(u,(y,v)=>{const x=l[y];if(x){const E=v.map(j=>j.presence_ref),k=x.map(j=>j.presence_ref),z=v.filter(j=>k.indexOf(j.presence_ref)<0),B=x.filter(j=>E.indexOf(j.presence_ref)<0);z.length>0&&(m[y]=z),B.length>0&&(g[y]=B)}else m[y]=v}),this.syncDiff(l,{joins:m,leaves:g},s,a)}static syncDiff(e,t,s,a){const{joins:l,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(m,g)=>{var y;const v=(y=e[m])!==null&&y!==void 0?y:[];if(e[m]=this.cloneDeep(g),v.length>0){const x=e[m].map(k=>k.presence_ref),E=v.filter(k=>x.indexOf(k.presence_ref)<0);e[m].unshift(...E)}s(m,v,g)}),this.map(u,(m,g)=>{let y=e[m];if(!y)return;const v=g.map(x=>x.presence_ref);y=y.filter(x=>v.indexOf(x.presence_ref)<0),e[m]=y,a(m,y,g),y.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gw;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Gw||(Gw={}));var Vc;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Vc||(Vc={}));var dr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class vy{constructor(e,t={config:{}},s){var a,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new bg(this,fs.join,this.params,this.timeout),this.rejoinTimer=new eT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fs.reply,{},(u,m)=>{this._trigger(this._replyEventName(m),u)}),this.presence=new Mc(this),this.broadcastEndpointURL=nT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ft.closed){const{config:{broadcast:u,presence:m,private:g}}=this.params,y=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(k=>k.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Vc.PRESENCE]&&this.bindings[Vc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,x={},E={broadcast:u,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(k=>e==null?void 0:e(dr.CHANNEL_ERROR,k)),this._onClose(()=>e==null?void 0:e(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:E},x)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:k})=>{var z;if(this.socket.setAuth(),k===void 0){e==null||e(dr.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,j=(z=B==null?void 0:B.length)!==null&&z!==void 0?z:0,J=[];for(let $=0;$<j;$++){const W=B[$],{filter:{event:le,schema:ce,table:oe,filter:C}}=W,A=k&&k[$];if(A&&A.event===le&&A.schema===ce&&A.table===oe&&A.filter===C)J.push(Object.assign(Object.assign({},W),{id:A.id}));else{this.unsubscribe(),this.state=Ft.errored,e==null||e(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=J,e&&e(dr.SUBSCRIBED);return}}).receive("error",k=>{this.state=Ft.errored,e==null||e(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Ft.joined&&e===Vc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=y.body)===null||a===void 0?void 0:a.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,m,g;const y=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(m=(u=this.params)===null||u===void 0?void 0:u.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),y.receive("ok",()=>l("ok")),y.receive("error",()=>l("error")),y.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ft.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new bg(this,fs.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ft.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new bg(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>YO){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,l;const u=e.toLocaleLowerCase(),{close:m,error:g,leave:y,join:v}=fs;if(s&&[m,g,y,v].indexOf(u)>=0&&s!==this._joinRef())return;let E=this._onMessage(u,t,s);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(k=>{var z,B,j;return((z=k.filter)===null||z===void 0?void 0:z.event)==="*"||((j=(B=k.filter)===null||B===void 0?void 0:B.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===u}).map(k=>k.callback(E,s)):(l=this.bindings[u])===null||l===void 0||l.filter(k=>{var z,B,j,J,$,W;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in k){const le=k.id,ce=(z=k.filter)===null||z===void 0?void 0:z.event;return le&&((B=t.ids)===null||B===void 0?void 0:B.includes(le))&&(ce==="*"||(ce==null?void 0:ce.toLocaleLowerCase())===((j=t.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const le=($=(J=k==null?void 0:k.filter)===null||J===void 0?void 0:J.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return le==="*"||le===((W=t==null?void 0:t.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===u}).map(k=>{if(typeof E=="object"&&"ids"in E){const z=E.data,{schema:B,table:j,commit_timestamp:J,type:$,errors:W}=z;E=Object.assign(Object.assign({},{schema:B,table:j,commit_timestamp:J,eventType:$,new:{},old:{},errors:W}),this._getPayloadRecords(z))}k.callback(E,s)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&vy.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fs.close,{},e)}_onError(e){this._on(fs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Hw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Hw(e.columns,e.old_record)),t}}const wg=()=>{},Lh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sD=[1e3,2e3,5e3,1e4],rD=1e4,iD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aD{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=up,this.transport=null,this.heartbeatIntervalMs=Lh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wg,this.ref=0,this.reconnectTimer=null,this.logger=wg,this.conn=null,this.sendBuffer=[],this.serializer=new WO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...u)=>au(async()=>{const{default:m}=await Promise.resolve().then(()=>ml);return{default:m}},void 0).then(({default:m})=>m(...u)).catch(m=>{throw new Error(`Failed to load @supabase/node-fetch: ${m.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${hp.websocket}`,this.httpEndpoint=nT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=HO.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:KO}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pc.connecting:return ba.Connecting;case Pc.open:return ba.Open;case Pc.closing:return ba.Closing;default:return ba.Closed}}isConnected(){return this.connectionState()===ba.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new vy(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:a,ref:l}=e,u=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${t} ${s} (${l})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(QO,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Lh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:u}=t,m=u?`(${u})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${m}`.trim(),l),this.channels.filter(y=>y._isMember(s)).forEach(y=>y._trigger(a,l,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(fs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([iD],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:GO};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(fs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new eT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Lh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,l,u,m,g,y,v;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:up,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Lh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:wg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:x=>sD[x-1]||rD,this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(x,E)=>E(JSON.stringify(x)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class _y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class oD extends _y{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class fp extends _y{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var lD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const sT=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>ml);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},cD=()=>lD(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield au(()=>Promise.resolve().then(()=>ml),void 0)).Response:Response}),mp=r=>{if(Array.isArray(r))return r.map(t=>mp(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=mp(s)}),e},uD=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var Ma=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const xg=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),hD=(r,e,t)=>Ma(void 0,void 0,void 0,function*(){const s=yield cD();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(a=>{const l=r.status||500,u=(a==null?void 0:a.statusCode)||l+"";e(new oD(xg(a),l,u))}).catch(a=>{e(new fp(xg(a),a))}):e(new fp(xg(r),r))}),dD=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(uD(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function ou(r,e,t,s,a,l){return Ma(this,void 0,void 0,function*(){return new Promise((u,m)=>{r(t,dD(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>hD(g,m,s))})})}function bd(r,e,t,s){return Ma(this,void 0,void 0,function*(){return ou(r,"GET",e,t,s)})}function Ps(r,e,t,s,a){return Ma(this,void 0,void 0,function*(){return ou(r,"POST",e,s,a,t)})}function gp(r,e,t,s,a){return Ma(this,void 0,void 0,function*(){return ou(r,"PUT",e,s,a,t)})}function fD(r,e,t,s){return Ma(this,void 0,void 0,function*(){return ou(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function rT(r,e,t,s,a){return Ma(this,void 0,void 0,function*(){return ou(r,"DELETE",e,s,a,t)})}var mD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class gD{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return mD(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}var pD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class yD{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new gD(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return pD(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}var Rn=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const vD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Kw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _D{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=sT(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return Rn(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},Kw),a);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl),g&&l.append("metadata",this.encodeMetadata(g))):(l=s,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),a!=null&&a.headers&&(m=Object.assign(Object.assign({},m),a.headers));const y=this._removeEmptyFolders(t),v=this._getFinalPath(y),x=yield(e=="PUT"?gp:Ps)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:m},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:y,id:x.Id,fullPath:x.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}upload(e,t,s){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return Rn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),m=new URL(this.url+`/object/upload/sign/${u}`);m.searchParams.set("token",t);try{let g;const y=Object.assign({upsert:Kw.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",y.cacheControl)):(g=s,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const x=yield gp(this.fetch,m.toString(),g,{headers:v});return{data:{path:l,fullPath:x.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Vt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return Rn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield Ps(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(this.url+l.url),m=u.searchParams.get("token");if(!m)throw new _y("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:m},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Rn(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return Rn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ps(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return Rn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Ps(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return Rn(this,void 0,void 0,function*(){try{const a=yield Ps(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"",m=this._getFinalPath(e),g=()=>bd(this.fetch,`${this.url}/${a}/${m}${u}`,{headers:this.headers,noResolveJson:!0});return new yD(g,this.shouldThrowOnError)}info(e){return Rn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield bd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:mp(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}exists(e){return Rn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield fD(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s)&&s instanceof fp){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const m=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let y=a.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${s}${y}`)}}}remove(e){return Rn(this,void 0,void 0,function*(){try{return{data:yield rT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Rn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},vD),t),{prefix:e||""});return{data:yield Ps(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}listV2(e,t){return Rn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ps(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const bD="2.75.0",wD={"X-Client-Info":`storage-js/${bD}`};var Oo=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class xD{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wD),t),this.fetch=sT(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Oo(this,void 0,void 0,function*(){try{return{data:yield bd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}getBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield bd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}createBucket(e){return Oo(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield Ps(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return Oo(this,void 0,void 0,function*(){try{return{data:yield gp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Oo(this,void 0,void 0,function*(){try{return{data:yield rT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}}class ED extends xD{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new _D(this.url,this.headers,e,this.fetch)}}const TD="2.75.0";let Rc="";typeof Deno<"u"?Rc="deno":typeof document<"u"?Rc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rc="react-native":Rc="node";const SD={"X-Client-Info":`supabase-js-${Rc}/${TD}`},AD={headers:SD},ND={schema:"public"},RD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kD={};var CD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};const ID=r=>{let e;return r?e=r:typeof fetch>"u"?e=Q1:e=fetch,(...t)=>e(...t)},jD=()=>typeof Headers>"u"?Y1:Headers,OD=(r,e,t)=>{const s=ID(t),a=jD();return(l,u)=>CD(void 0,void 0,void 0,function*(){var m;const g=(m=yield e())!==null&&m!==void 0?m:r;let y=new a(u==null?void 0:u.headers);return y.has("apikey")||y.set("apikey",r),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},u),{headers:y}))})};var DD=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};function PD(r){return r.endsWith("/")?r:r+"/"}function MD(r,e){var t,s;const{db:a,auth:l,realtime:u,global:m}=r,{db:g,auth:y,realtime:v,global:x}=e,E={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},y),l),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(t=x==null?void 0:x.headers)!==null&&t!==void 0?t:{}),(s=m==null?void 0:m.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>DD(this,void 0,void 0,function*(){return""})};return r.accessToken?E.accessToken=r.accessToken:delete E.accessToken,E}function VD(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PD(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const iT="2.75.0",$o=30*1e3,pp=3,Eg=pp*$o,UD="http://localhost:9999",LD="supabase.auth.token",zD={"X-Client-Info":`gotrue-js/${iT}`},yp="X-Supabase-Api-Version",aT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qD=10*60*1e3;class Gc extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Se(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class $D extends Gc{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function HD(r){return Se(r)&&r.name==="AuthApiError"}class wa extends Gc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ci extends Gc{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class oi extends Ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function FD(r){return Se(r)&&r.name==="AuthSessionMissingError"}class Do extends Ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zh extends Ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bh extends Ci{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GD(r){return Se(r)&&r.name==="AuthImplicitGrantRedirectError"}class Qw extends Ci{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vp extends Ci{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Tg(r){return Se(r)&&r.name==="AuthRetryableFetchError"}class Yw extends Ci{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class _p extends Ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ww=` 	
\r=`.split(""),KD=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ww.length;e+=1)r[Ww[e].charCodeAt(0)]=-2;for(let e=0;e<wd.length;e+=1)r[wd[e].charCodeAt(0)]=e;return r})();function Xw(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(wd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(wd[s]),e.queuedBits-=6}}function oT(r,e,t){const s=KD[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Jw(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=u=>{WD(u,s,t)};for(let u=0;u<r.length;u+=1)oT(r.charCodeAt(u),a,l);return e.join("")}function QD(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function YD(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}QD(s,e)}}function WD(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Wo(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)oT(r.charCodeAt(a),t,s);return new Uint8Array(e)}function XD(r){const e=[];return YD(r,t=>e.push(t)),new Uint8Array(e)}function Ea(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>Xw(a,t,s)),Xw(null,t,s),e.join("")}function JD(r){return Math.round(Date.now()/1e3)+r}function ZD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const zn=()=>typeof window<"u"&&typeof document<"u",ga={tested:!1,writable:!1},lT=()=>{if(!zn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ga.tested)return ga.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ga.tested=!0,ga.writable=!0}catch{ga.tested=!0,ga.writable=!1}return ga.writable};function eP(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const cT=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>au(async()=>{const{default:s}=await Promise.resolve().then(()=>ml);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},tP=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ho=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},pa=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ai=async(r,e)=>{await r.removeItem(e)};class Fd{constructor(){this.promise=new Fd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fd.promiseConstructor=Promise;function Sg(r){const e=r.split(".");if(e.length!==3)throw new _p("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!BD.test(e[s]))throw new _p("JWT not in base64url format");return{header:JSON.parse(Jw(e[0])),payload:JSON.parse(Jw(e[1])),signature:Wo(e[2]),raw:{header:e[0],payload:e[1]}}}async function nP(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function sP(r,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await r(l);if(!e(l,null,u)){s(u);return}}catch(u){if(!e(l,u)){a(u);return}}})()})}function rP(r){return("0"+r.toString(16)).substr(-2)}function iP(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,rP).join("")}async function aP(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function oP(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await aP(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Po(r,e,t=!1){const s=iP();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Ho(r,`${e}-code-verifier`,a);const l=await oP(s);return[l,s===l?"plain":"s256"]}const lP=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cP(r){const e=r.headers.get(yp);if(!e||!e.match(lP))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uP(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function hP(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(r){if(!dP.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ag(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zw(r){return JSON.parse(JSON.stringify(r))}var fP=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};const _a=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),mP=[502,503,504];async function ex(r){var e;if(!tP(r))throw new vp(_a(r),0);if(mP.includes(r.status))throw new vp(_a(r),r.status);let t;try{t=await r.json()}catch(l){throw new wa(_a(l),l)}let s;const a=cP(r);if(a&&a.getTime()>=aT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Yw(_a(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new oi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Yw(_a(t),r.status,t.weak_password.reasons);throw new $D(_a(t),r.status||500,s)}const gP=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Me(r,e,t,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[yp]||(l[yp]=aT["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const u=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const m=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await pP(r,e,t+m,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function pP(r,e,t,s,a,l){const u=gP(e,s,a,l);let m;try{m=await r(t,Object.assign({},u))}catch(g){throw console.error(g),new vp(_a(g),0)}if(m.ok||await ex(m),s!=null&&s.noResolveJson)return m;try{return await m.json()}catch(g){await ex(g)}}function ds(r){var e;let t=null;_P(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=JD(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function tx(r){const e=ds(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function di(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function yP(r){return{data:r,error:null}}function vP(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l}=r,u=fP(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},u);return{data:{properties:m,user:g},error:null}}function nx(r){return r}function _P(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ng=["global","local","others"];var bP=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};class wP{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=cT(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ng[0]){if(Ng.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ng.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:di})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=bP(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:vP,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Se(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:di})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,l,u,m,g;try{const y={nextPage:null,lastPage:0,total:0},v=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:nx});if(v.error)throw v.error;const x=await v.json(),E=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return k.length>0&&(k.forEach(z=>{const B=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(z.split(";")[1].split("=")[1]);y[`${j}Page`]=B}),y.total=parseInt(E)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(Se(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){Mo(e);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:di})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Mo(e);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:di})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Mo(e);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:di})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Mo(e.userId);try{const{data:t,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Mo(e.userId),Mo(e.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,l,u,m,g;try{const y={nextPage:null,lastPage:0,total:0},v=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:nx});if(v.error)throw v.error;const x=await v.json(),E=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,k=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return k.length>0&&(k.forEach(z=>{const B=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(z.split(";")[1].split("=")[1]);y[`${j}Page`]=B}),y.total=parseInt(E)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(Se(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}}function sx(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Vo={debug:!!(globalThis&&lT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xP extends uT{}async function EP(r,e,t){Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw Vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new xP(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Vo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function TP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hT(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function SP(r){return parseInt(r,16)}function AP(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function NP(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:u,notBefore:m,requestId:g,resources:y,scheme:v,uri:x,version:E}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const k=hT(r.address),z=v?`${v}://${s}`:s,B=r.statement?`${r.statement}
`:"",j=`${z} wants you to sign in with your Ethereum account:
${k}

${B}`;let J=`URI: ${x}
Version: ${E}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${l.toISOString()}`;if(a&&(J+=`
Expiration Time: ${a.toISOString()}`),m&&(J+=`
Not Before: ${m.toISOString()}`),g&&(J+=`
Request ID: ${g}`),y){let $=`
Resources:`;for(const W of y){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);$+=`
- ${W}`}J+=$}return`${j}
${J}`}class Mt extends Error{constructor({message:e,code:t,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class xd extends Mt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function RP({error:r,options:e}){var t,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Mt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(fT(u)){if(l.rp.id!==u)return new Mt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function kP({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Mt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(fT(s)){if(t.rpId!==s)return new Mt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}var dT=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t};class CP{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const IP=new CP;function jP(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=dT(r,["challenge","user","excludeCredentials"]),l=Wo(e).buffer,u=Object.assign(Object.assign({},t),{id:Wo(t.id).buffer}),m=Object.assign(Object.assign({},a),{challenge:l,user:u});if(s&&s.length>0){m.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const y=s[g];m.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:Wo(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return m}function OP(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=dT(r,["challenge","allowCredentials"]),a=Wo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const m=t[u];l.allowCredentials[u]=Object.assign(Object.assign({},m),{id:Wo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function DP(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:Ea(new Uint8Array(r.response.attestationObject)),clientDataJSON:Ea(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function PP(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Ea(new Uint8Array(a.authenticatorData)),clientDataJSON:Ea(new Uint8Array(a.clientDataJSON)),signature:Ea(new Uint8Array(a.signature)),userHandle:a.userHandle?Ea(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function fT(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function rx(){var r,e;return!!(zn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function MP(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xd("Browser returned unexpected credential type",e)}:{data:null,error:new xd("Empty credential response",e)}}catch(e){return{data:null,error:RP({error:e,options:r})}}}async function VP(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xd("Browser returned unexpected credential type",e)}:{data:null,error:new xd("Empty credential response",e)}}catch(e){return{data:null,error:kP({error:e,options:r})}}}const UP={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},LP={userVerification:"preferred",hints:["security-key"]};function Ed(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const l in a){const u=a[l];if(u!==void 0)if(Array.isArray(u))s[l]=u;else if(t(u))s[l]=u;else if(e(u)){const m=s[l];e(m)?s[l]=Ed(m,u):s[l]=Ed(u)}else s[l]=u}return s}function zP(r,e){return Ed(UP,r,e||{})}function BP(r,e){return Ed(LP,r,e||{})}class qP{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},l){try{const{data:u,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:m};const g=a??IP.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:y}=u.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${s}`),y.displayName||(y.displayName=y.name)}switch(u.webauthn.type){case"create":{const y=zP(u.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:x}=await MP({publicKey:y,signal:g});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}case"request":{const y=BP(u.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:x}=await VP(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:y,signal:g}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}}}catch(u){return Se(u)?{data:null,error:u}:{data:null,error:new wa("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}},l){if(!t)return{data:null,error:new Gc("rpId is required for WebAuthn authentication")};try{if(!rx())return{data:null,error:new wa("Browser does not support WebAuthn",null)};const{data:u,error:m}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:l});if(!u)return{data:null,error:m};const{webauthn:g}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(u){return Se(u)?{data:null,error:u}:{data:null,error:new wa("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a},l){if(!t)return{data:null,error:new Gc("rpId is required for WebAuthn registration")};try{if(!rx())return{data:null,error:new wa("Browser does not support WebAuthn",null)};const{data:u,error:m}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var x;return(x=v.data)===null||x===void 0?void 0:x.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:m};const{data:g,error:y}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:u.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(u){return Se(u)?{data:null,error:u}:{data:null,error:new wa("Unexpected error in register",u)}}}}TP();const $P={url:UD,storageKey:LD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ix(r,e,t){return await t()}const Uo={};class Kc{get jwks(){var e,t;return(t=(e=Uo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Uo[this.storageKey]=Object.assign(Object.assign({},Uo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Uo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Uo[this.storageKey]=Object.assign(Object.assign({},Uo[this.storageKey]),{cachedAt:e})}constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kc.nextInstanceID,Kc.nextInstanceID+=1,this.instanceID>0&&zn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},$P),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new wP({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=cT(a.fetch),this.lock=a.lock||ix,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:zn()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=EP:this.lock=ix,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qP(this)},this.persistSession?(a.storage?this.storage=a.storage:lT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=sx(this.memoryStorage)),zn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${iT}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=eP(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),zn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),GD(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:m}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",m),await this._saveSession(u),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Se(t)?{error:t}:{error:new wa("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:ds}),{data:u,error:m}=l;if(m||!u)return{data:{user:null,session:null},error:m};const g=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(l){if(Se(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,s,a;try{let l;if("email"in e){const{email:v,password:x,options:E}=e;let k=null,z=null;this.flowType==="pkce"&&([k,z]=await Po(this.storage,this.storageKey)),l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:v,password:x,data:(t=E==null?void 0:E.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:k,code_challenge_method:z},xform:ds})}else if("phone"in e){const{phone:v,password:x,options:E}=e;l=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(s=E==null?void 0:E.data)!==null&&s!==void 0?s:{},channel:(a=E==null?void 0:E.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:ds})}else throw new zh("You must provide either an email or phone number and a password");const{data:u,error:m}=l;if(m||!u)return{data:{user:null,session:null},error:m};const g=u.session,y=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(l){if(Se(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:u,options:m}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:tx})}else if("phone"in e){const{phone:l,password:u,options:m}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:tx})}else throw new zh("You must provide either an email or phone number and a password");const{data:s,error:a}=t;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Do}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,l,u,m,g,y,v,x,E;let k,z;if("message"in e)k=e.message,z=e.signature;else{const{chain:B,wallet:j,statement:J,options:$}=e;let W;if(zn())if(typeof j=="object")W=j;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")W=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=j}const le=new URL((t=$==null?void 0:$.url)!==null&&t!==void 0?t:window.location.href),ce=await W.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ce||ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const oe=hT(ce[0]);let C=(s=$==null?void 0:$.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!C){const N=await W.request({method:"eth_chainId"});C=SP(N)}const A={domain:le.host,address:oe,statement:J,uri:le.href,version:"1",chainId:C,nonce:(a=$==null?void 0:$.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(l=$==null?void 0:$.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(m=$==null?void 0:$.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=$==null?void 0:$.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=$==null?void 0:$.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=$==null?void 0:$.signInWithEthereum)===null||v===void 0?void 0:v.resources};k=NP(A),z=await W.request({method:"personal_sign",params:[AP(k),oe]})}try{const{data:B,error:j}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:z},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:ds});if(j)throw j;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new Do}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:j})}catch(B){if(Se(B))return{data:{user:null,session:null},error:B};throw B}}async signInWithSolana(e){var t,s,a,l,u,m,g,y,v,x,E,k;let z,B;if("message"in e)z=e.message,B=e.signature;else{const{chain:j,wallet:J,statement:$,options:W}=e;let le;if(zn())if(typeof J=="object")le=J;else{const oe=window;if("solana"in oe&&typeof oe.solana=="object"&&("signIn"in oe.solana&&typeof oe.solana.signIn=="function"||"signMessage"in oe.solana&&typeof oe.solana.signMessage=="function"))le=oe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof J!="object"||!(W!=null&&W.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=J}const ce=new URL((t=W==null?void 0:W.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in le&&le.signIn){const oe=await le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W==null?void 0:W.signInWithSolana),{version:"1",domain:ce.host,uri:ce.href}),$?{statement:$}:null));let C;if(Array.isArray(oe)&&oe[0]&&typeof oe[0]=="object")C=oe[0];else if(oe&&typeof oe=="object"&&"signedMessage"in oe&&"signature"in oe)C=oe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)z=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),B=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in le)||typeof le.signMessage!="function"||!("publicKey"in le)||typeof le!="object"||!le.publicKey||!("toBase58"in le.publicKey)||typeof le.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${ce.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${ce.href}`,`Issued At: ${(a=(s=W==null?void 0:W.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=W==null?void 0:W.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((u=W==null?void 0:W.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((m=W==null?void 0:W.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((g=W==null?void 0:W.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((y=W==null?void 0:W.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((x=(v=W==null?void 0:W.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...W.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const oe=await le.signMessage(new TextEncoder().encode(z),"utf8");if(!oe||!(oe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=oe}}try{const{data:j,error:J}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:Ea(B)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(k=e.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:ds});if(J)throw J;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Do}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:J})}catch(j){if(Se(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const t=await pa(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:l,error:u}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ds});if(await ai(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Do}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:u})}catch(l){if(Se(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:l,nonce:u}=e,m=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ds}),{data:g,error:y}=m;return y?{data:{user:null,session:null},error:y}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Do}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:y})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,a,l,u;try{if("email"in e){const{email:m,options:g}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Po(this.storage,this.storageKey));const{error:x}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:m,options:g}=e,{data:y,error:v}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(u=g==null?void 0:g.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:v}}throw new zh("You must provide either an email or phone number.")}catch(m){if(Se(m))return{data:{user:null,session:null},error:m};throw m}}async verifyOtp(e){var t,s;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:m}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:ds});if(m)throw m;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,y=u.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:y,session:g},error:null}}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,s,a;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Po(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:yP})}catch(l){if(Se(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new oi;const{error:a}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Se(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:u}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:u,error:m}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:m}}throw new zh("You must provide either an email or phone number and a type")}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Eg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await pa(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Ag()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,y,v)=>(!u&&y==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,y,v))})}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:di}):await this._useSession(async t=>{var s,a,l;const{data:u,error:m}=t;if(m)throw m;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oi}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:di})})}catch(t){if(Se(t))return FD(t)&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new oi;const u=a.session;let m=null,g=null;this.flowType==="pkce"&&e.email!=null&&([m,g]=await Po(this.storage,this.storageKey));const{data:y,error:v}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:u.access_token,xform:di});if(v)throw v;return u.user=y.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oi;const t=Date.now()/1e3;let s=t,a=!0,l=null;const{payload:u}=Sg(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(Se(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:m}=t;if(m)throw m;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new oi;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!zn())throw new Bh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Qw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qw("No code detected.");const{data:$,error:W}=await this._exchangeCodeForSession(e.code);if(W)throw W;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:u,expires_in:m,expires_at:g,token_type:y}=e;if(!l||!m||!u||!y)throw new Bh("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(m);let E=v+x;g&&(E=parseInt(g));const k=E-v;k*1e3<=$o&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${x}s`);const z=E-x;v-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,E,v):v-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,E,v);const{data:B,error:j}=await this._getUser(l);if(j)throw j;const J={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:x,expires_at:E,refresh_token:u,token_type:y,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:J,redirectType:e.type},error:null}}catch(s){if(Se(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await pa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{error:l};const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:m}=await this.admin.signOut(u,e);if(m&&!(HD(m)&&(m.status===404||m.status===401||m.status===403)))return{error:m}}return e!=="others"&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=ZD(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:l},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Po(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(Se(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async l=>{var u,m,g,y,v;const{data:x,error:E}=l;if(E)throw E;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",k,{headers:this.headers,jwt:(v=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return zn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(Se(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:u,provider:m,token:g,access_token:y,nonce:v}=e,x=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:m,id_token:g,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ds}),{data:E,error:k}=x;return k?{data:{user:null,session:null},error:k}:!E||!E.session||!E.user?{data:{user:null,session:null},error:new Do}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),{data:E,error:k})}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:u}=t;if(u)throw u;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await sP(async a=>(a>0&&await nP(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ds})),(a,l)=>{const u=200*Math.pow(2,a);return l&&Tg(l)&&Date.now()+u-s<$o})}catch(s){if(this._debug(t,"error",s),Se(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),zn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await pa(this.storage,this.storageKey);if(a&&this.userStorage){let u=await pa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await Ho(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Ag()}else if(a&&!a.user&&!a.user){const u=await pa(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await ai(this.storage,this.storageKey+"-user"),await Ho(this.storage,this.storageKey,a)):a.user=Ag()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Eg;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Eg}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Tg(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:m}=await this._getUser(a.access_token);!m&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new oi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fd;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new oi;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(a,"error",l),Se(l)){const u={data:null,error:l};return Tg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(u),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Ho(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=Zw(a);await Ho(this.storage,this.storageKey,l)}else{const a=Zw(t);await Ho(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ai(this.storage,this.storageKey),await ai(this.storage,this.storageKey+"-code-verifier"),await ai(this.storage,this.storageKey+"-user"),this.userStorage&&await ai(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$o);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/$o);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${$o}ms, refresh threshold is ${pp} ticks`),a<=pp&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,u]=await Po(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(m.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;return l?{data:null,error:l}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:u}=t;if(u)return{data:null,error:u};const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:y}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return y?{data:null,error:y}:(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?DP(e.webauthn.credential_response):PP(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:g}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),{data:m,error:g})})}catch(t){if(Se(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return{data:null,error:l};const u=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:m}=u;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:jP(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:OP(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Se(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Sg(a.access_token);let m=null;u.aal&&(m=u.aal);let g=m;((s=(t=a.user.factors)===null||t===void 0?void 0:t.filter(x=>x.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(g="aal2");const v=u.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(m=>m.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(m=>m.kid===e),s&&this.jwks_cached_at+qD>a)return s;const{data:l,error:u}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(m=>m.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:k,error:z}=await this.getSession();if(z||!k.session)return{data:null,error:z};s=k.session.access_token}const{header:a,payload:l,signature:u,raw:{header:m,payload:g}}=Sg(s);t!=null&&t.allowExpired||uP(l.exp);const y=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!y){const{error:k}=await this.getUser(s);if(k)throw k;return{data:{claims:l,header:a,signature:u},error:null}}const v=hP(a.alg),x=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,u,XD(`${m}.${g}`)))throw new _p("Invalid JWT signature");return{data:{claims:l,header:a,signature:u},error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}}Kc.nextInstanceID=0;const HP=Kc;class FP extends HP{constructor(e){super(e)}}var GP=function(r,e,t,s){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function m(v){try{y(s.next(v))}catch(x){u(x)}}function g(v){try{y(s.throw(v))}catch(x){u(x)}}function y(v){v.done?l(v.value):a(v.value).then(m,g)}y((s=s.apply(r,e||[])).next())})};class KP{constructor(e,t,s){var a,l,u;this.supabaseUrl=e,this.supabaseKey=t;const m=VD(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,y={db:ND,realtime:kD,auth:Object.assign(Object.assign({},RD),{storageKey:g}),global:AD},v=MD(s??{},y);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=OD(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new $O(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new ED(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new OO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return GP(this,void 0,void 0,function*(){var e,t;if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:u,flowType:m,lock:g,debug:y},v,x){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new FP({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),v),storageKey:u,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,flowType:m,lock:g,debug:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new aD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const QP=(r,e,t)=>new KP(r,e,t);function YP(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}YP()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ut=(r,e,t,s={})=>({code:r,message:e,provider:t,context:s,timestamp:new Date().toISOString()});class WP{constructor(e){this.config=e,this.app=null,this.auth=null,this.db=null}async connect(){try{this.app=Mx(this.config),this.auth=cI(this.app),this.db=aO(this.app),await new Promise(e=>{const t=Xk(this.auth,s=>{t(),e(s)})}),console.log("✅ Firebase connected successfully")}catch(e){throw ut("FIREBASE_CONNECT_ERROR",`Failed to connect to Firebase: ${e.message}`,"firebase",{originalError:e})}}async signIn(){try{const e=await Fk(this.auth);return sessionStorage.setItem("firebase_token",await e.user.getIdToken()),{user:e.user,token:await e.user.getIdToken()}}catch(e){throw ut("FIREBASE_AUTH_ERROR",`Firebase authentication failed: ${e.message}`,"firebase",{originalError:e})}}async signOut(){try{await Jk(this.auth),sessionStorage.removeItem("firebase_token")}catch(e){throw ut("FIREBASE_SIGNOUT_ERROR",`Firebase sign out failed: ${e.message}`,"firebase",{originalError:e})}}currentUser(){return this.auth.currentUser}async read(e,t={}){try{let a=Aw(this.db,e);if(t.where){const[u,m,g]=t.where;a=vO(a,_O(u,m,g))}return(await EO(a)).docs.map(u=>({id:u.id,...u.data()}))}catch(s){throw ut("FIREBASE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"firebase",{collectionPath:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const a=_g(this.db,e,t);return await TO(a,{...s,updatedAt:new Date().toISOString()},{merge:!0}),{id:t,...s}}catch(a){throw ut("FIREBASE_WRITE_ERROR",`Failed to write to ${e}/${t}: ${a.message}`,"firebase",{collectionPath:e,docId:t,originalError:a})}}async update(e,t,s){try{const a=_g(this.db,e,t);return await SO(a,{...s,updatedAt:new Date().toISOString()}),{id:t,...s}}catch(a){throw ut("FIREBASE_UPDATE_ERROR",`Failed to update ${e}/${t}: ${a.message}`,"firebase",{collectionPath:e,docId:t,originalError:a})}}async delete(e,t){try{const s=_g(this.db,e,t);return await AO(s),{id:t,deleted:!0}}catch(s){throw ut("FIREBASE_DELETE_ERROR",`Failed to delete ${e}/${t}: ${s.message}`,"firebase",{collectionPath:e,docId:t,originalError:s})}}onSnapshot(e,t){try{const s=Aw(this.db,e);return NO(s,a=>{const l=a.docs.map(u=>({id:u.id,...u.data()}));t(l,null)},a=>{t(null,ut("FIREBASE_SNAPSHOT_ERROR",`Snapshot error on ${e}: ${a.message}`,"firebase",{collectionPath:e,originalError:a}))})}catch(s){throw ut("FIREBASE_SNAPSHOT_SETUP_ERROR",`Failed to setup snapshot for ${e}: ${s.message}`,"firebase",{collectionPath:e,originalError:s})}}}class XP{constructor(e){this.config=e,this.client=null}async connect(){try{this.client=QP(this.config.url,this.config.anonKey),console.log("✅ Supabase connected successfully")}catch(e){throw ut("SUPABASE_CONNECT_ERROR",`Failed to connect to Supabase: ${e.message}`,"supabase",{originalError:e})}}async signIn(){try{const{data:e,error:t}=await this.client.auth.signInAnonymously();if(t)throw t;return sessionStorage.setItem("supabase_token",e.session.access_token),{user:e.user,token:e.session.access_token}}catch(e){throw ut("SUPABASE_AUTH_ERROR",`Supabase authentication failed: ${e.message}`,"supabase",{originalError:e})}}async signOut(){try{await this.client.auth.signOut(),sessionStorage.removeItem("supabase_token")}catch(e){throw ut("SUPABASE_SIGNOUT_ERROR",`Supabase sign out failed: ${e.message}`,"supabase",{originalError:e})}}async currentUser(){const{data:{user:e}}=await this.client.auth.getUser();return e}async read(e,t={}){try{let s=this.client.from(e).select("*");if(t.where){const[u,m,g]=t.where;switch(m){case"==":s=s.eq(u,g);break;case">":s=s.gt(u,g);break;case"<":s=s.lt(u,g);break;case">=":s=s.gte(u,g);break;case"<=":s=s.lte(u,g);break}}const{data:a,error:l}=await s;if(l)throw l;return a}catch(s){throw ut("SUPABASE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"supabase",{tableName:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const{data:a,error:l}=await this.client.from(e).upsert({id:t,...s,updated_at:new Date().toISOString()});if(l)throw l;return a}catch(a){throw ut("SUPABASE_WRITE_ERROR",`Failed to write to ${e}: ${a.message}`,"supabase",{tableName:e,docId:t,originalError:a})}}async update(e,t,s){try{const{data:a,error:l}=await this.client.from(e).update({...s,updated_at:new Date().toISOString()}).eq("id",t);if(l)throw l;return a}catch(a){throw ut("SUPABASE_UPDATE_ERROR",`Failed to update ${e}: ${a.message}`,"supabase",{tableName:e,docId:t,originalError:a})}}async delete(e,t){try{const{error:s}=await this.client.from(e).delete().eq("id",t);if(s)throw s;return{id:t,deleted:!0}}catch(s){throw ut("SUPABASE_DELETE_ERROR",`Failed to delete from ${e}: ${s.message}`,"supabase",{tableName:e,docId:t,originalError:s})}}onSnapshot(e,t){try{const s=this.client.channel(`${e}_changes`).on("postgres_changes",{event:"*",schema:"public",table:e},a=>{this.read(e).then(l=>t(l,null)).catch(l=>t(null,l))}).subscribe();return()=>{this.client.removeChannel(s)}}catch(s){throw ut("SUPABASE_SNAPSHOT_ERROR",`Failed to setup snapshot for ${e}: ${s.message}`,"supabase",{tableName:e,originalError:s})}}}class JP{constructor(e){this.config=e,this.endpoint=e.endpoint,this.key=e.key,this.databaseId=e.databaseId||"FineGuardDB",this.authenticated=!1}async connect(){try{const e=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls`,{method:"GET",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"}});if(!e.ok)throw new Error(`Azure connection failed: ${e.statusText}`);this.authenticated=!0,console.log("✅ Azure Cosmos DB connected successfully")}catch(e){throw ut("AZURE_CONNECT_ERROR",`Failed to connect to Azure Cosmos DB: ${e.message}`,"azure",{originalError:e})}}async signIn(){try{return sessionStorage.setItem("azure_token",this.key),{user:{id:"azure-user"},token:this.key}}catch(e){throw ut("AZURE_AUTH_ERROR",`Azure authentication failed: ${e.message}`,"azure",{originalError:e})}}async signOut(){sessionStorage.removeItem("azure_token"),this.authenticated=!1}currentUser(){return this.authenticated?{id:"azure-user"}:null}async read(e,t={}){try{let s="SELECT * FROM c";if(t.where){const[u,m,g]=t.where,y=m==="=="?"=":m,v=typeof g=="string"?`"${g}"`:g;s+=` WHERE c.${u} ${y} ${v}`}const a=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs`,{method:"POST",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/query+json","x-ms-documentdb-isquery":"true"},body:JSON.stringify({query:s})});if(!a.ok)throw new Error(`Read failed: ${a.statusText}`);return(await a.json()).Documents||[]}catch(s){throw ut("AZURE_READ_ERROR",`Failed to read from ${e}: ${s.message}`,"azure",{containerName:e,queryOptions:t,originalError:s})}}async write(e,t,s){try{const a=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs`,{method:"POST",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"},body:JSON.stringify({id:t,...s,_updatedAt:new Date().toISOString()})});if(!a.ok)throw new Error(`Write failed: ${a.statusText}`);return await a.json()}catch(a){throw ut("AZURE_WRITE_ERROR",`Failed to write to ${e}: ${a.message}`,"azure",{containerName:e,docId:t,originalError:a})}}async update(e,t,s){try{const a=await this.read(e,{where:["id","==",t]});if(!a||a.length===0)throw new Error("Document not found");const l=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs/${t}`,{method:"PUT",headers:{Authorization:this.key,"x-ms-version":"2018-12-31","Content-Type":"application/json"},body:JSON.stringify({...a[0],...s,_updatedAt:new Date().toISOString()})});if(!l.ok)throw new Error(`Update failed: ${l.statusText}`);return await l.json()}catch(a){throw ut("AZURE_UPDATE_ERROR",`Failed to update ${e}: ${a.message}`,"azure",{containerName:e,docId:t,originalError:a})}}async delete(e,t){try{const s=await fetch(`${this.endpoint}/dbs/${this.databaseId}/colls/${e}/docs/${t}`,{method:"DELETE",headers:{Authorization:this.key,"x-ms-version":"2018-12-31"}});if(!s.ok)throw new Error(`Delete failed: ${s.statusText}`);return{id:t,deleted:!0}}catch(s){throw ut("AZURE_DELETE_ERROR",`Failed to delete from ${e}: ${s.message}`,"azure",{containerName:e,docId:t,originalError:s})}}onSnapshot(e,t){const s=setInterval(async()=>{try{const a=await this.read(e);t(a,null)}catch(a){t(null,a)}},5e3);return()=>clearInterval(s)}}const ZP=r=>{let e;if(!r||!r.provider)throw ut("INVALID_CONFIG","Configuration must include a provider field","connector",{config:r});switch(r.provider){case"firebase":if(!r.firebaseConfig)throw ut("INVALID_CONFIG","Firebase provider requires firebaseConfig","connector",{config:r});e=new WP(r.firebaseConfig);break;case"supabase":if(!r.supabaseConfig)throw ut("INVALID_CONFIG","Supabase provider requires supabaseConfig","connector",{config:r});e=new XP(r.supabaseConfig);break;case"azure":if(!r.azureConfig)throw ut("INVALID_CONFIG","Azure provider requires azureConfig","connector",{config:r});e=new JP(r.azureConfig);break;default:throw ut("UNSUPPORTED_PROVIDER",`Provider "${r.provider}" is not supported`,"connector",{config:r})}return{async connect(){return await e.connect(),{auth:{signIn:()=>e.signIn(),signOut:()=>e.signOut(),currentUser:()=>e.currentUser()},db:{read:(t,s)=>e.read(t,s),write:(t,s,a)=>e.write(t,s,a),update:(t,s,a)=>e.update(t,s,a),delete:(t,s)=>e.delete(t,s),onSnapshot:(t,s)=>e.onSnapshot(t,s)}}},getProvider(){return r.provider}}},eM=()=>{const[r,e]=de.useState("firebase"),[t,s]=de.useState(null),[a,l]=de.useState(!1),[u,m]=de.useState(!1),[g,y]=de.useState(null),[v,x]=de.useState([]),[E,k]=de.useState([]),[z,B]=de.useState("companies"),[j,J]=de.useState(!1),[$,W]=de.useState(!1),[le,ce]=de.useState(null),[oe,C]=de.useState({}),A={firebase:{provider:"firebase",firebaseConfig:{apiKey:"demo-api-key",authDomain:"fineguard-demo.firebaseapp.com",projectId:"fineguard-demo",storageBucket:"fineguard-demo.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"}},supabase:{provider:"supabase",supabaseConfig:{url:"https://your-project.supabase.co",anonKey:"your-anon-key-here"}},azure:{provider:"azure",azureConfig:{endpoint:"https://your-account.documents.azure.com:443/",key:"your-azure-key-here",databaseId:"FineGuardDB"}}},N=async()=>{m(!0),y(null);try{const U=A[r],ie=ZP(U),{auth:ne,db:ze}=await ie.connect();await ne.signIn(),s({auth:ne,db:ze}),l(!0),await D(ze)}catch(U){y(U.message||"Failed to connect to database"),console.error("Connection error:",U)}finally{m(!1)}},D=async U=>{try{const ie=await U.read("companies"),ne=await U.read("obligations");x(ie||[]),k(ne||[])}catch(ie){console.error("Error loading data:",ie),y("Failed to load data from database")}},O=async()=>{if(t)try{await t.auth.signOut(),s(null),l(!1),x([]),k([])}catch(U){console.error("Disconnect error:",U)}},V=()=>{C(z==="companies"?{name:"",companyNumber:"",address:"",riskLevel:"low",complianceScore:100}:{companyId:"",title:"",description:"",dueDate:"",status:"pending",penalty:0}),ce("new")},R=async()=>{if(t){m(!0);try{const U=z==="companies"?"companies":"obligations",ie=le==="new"?`${Date.now()}`:le;await t.db.write(U,ie,oe),await D(t.db),ce(null),C({})}catch(U){y(`Failed to save: ${U.message}`)}finally{m(!1)}}},We=async U=>{if(!(!t||!confirm("Are you sure you want to delete this item?"))){m(!0);try{const ie=z==="companies"?"companies":"obligations";await t.db.delete(ie,U),await D(t.db)}catch(ie){y(`Failed to delete: ${ie.message}`)}finally{m(!1)}}},Ue=U=>{ce(U.id),C(U)};return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Admin Panel"}),h.jsx("p",{className:"text-muted-foreground",children:"Manage database connections and data"})]}),h.jsx(en,{variant:a?"default":"secondary",className:"text-lg px-4 py-2",children:a?h.jsxs(h.Fragment,{children:[h.jsx(_t,{className:"h-4 w-4 mr-2"})," Connected"]}):h.jsxs(h.Fragment,{children:[h.jsx(g2,{className:"h-4 w-4 mr-2"})," Disconnected"]})})]}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(Zh,{className:"h-6 w-6"}),"Database Connection"]}),h.jsx(In,{children:"Choose your database provider and connect"})]}),h.jsxs(we,{className:"space-y-4",children:[h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("label",{className:"font-medium",children:"Provider:"}),h.jsxs("select",{value:r,onChange:U=>e(U.target.value),disabled:a,className:"px-4 py-2 border rounded-lg bg-background",children:[h.jsx("option",{value:"firebase",children:"Firebase"}),h.jsx("option",{value:"supabase",children:"Supabase"}),h.jsx("option",{value:"azure",children:"Azure Cosmos DB"})]}),a?h.jsx(Ae,{onClick:O,variant:"destructive",children:"Disconnect"}):h.jsxs(Ae,{onClick:N,disabled:u,className:"bg-gradient-to-r from-cyan-400 to-blue-500",children:[u?h.jsx(Og,{className:"h-4 w-4 mr-2 animate-spin"}):h.jsx(Zh,{className:"h-4 w-4 mr-2"}),"Connect"]})]}),g&&h.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[h.jsx(Tx,{className:"h-5 w-5 text-red-600"}),h.jsx("p",{className:"text-red-600 dark:text-red-400",children:g})]}),a&&h.jsxs("div",{className:"flex items-center gap-2 p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:[h.jsx(_t,{className:"h-5 w-5 text-green-600"}),h.jsxs("p",{className:"text-green-600 dark:text-green-400",children:["Connected to ",r.charAt(0).toUpperCase()+r.slice(1)]})]})]})]}),a&&h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(xx,{className:"h-6 w-6"}),"Data Management"]}),h.jsx(In,{children:"View and manage your compliance data"})]}),h.jsxs(Ae,{onClick:V,className:"bg-gradient-to-r from-cyan-400 to-blue-500",children:[h.jsx(Ex,{className:"h-4 w-4 mr-2"}),"Add New"]})]})}),h.jsxs(we,{children:[h.jsxs("div",{className:"flex gap-2 mb-6 border-b",children:[h.jsxs("button",{onClick:()=>B("companies"),className:`px-6 py-3 font-medium transition-colors ${z==="companies"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:["Companies (",v.length,")"]}),h.jsxs("button",{onClick:()=>B("obligations"),className:`px-6 py-3 font-medium transition-colors ${z==="obligations"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:["Obligations (",E.length,")"]}),h.jsx("button",{onClick:()=>B("ai-crm"),className:`px-6 py-3 font-medium transition-colors ${z==="ai-crm"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:"AI CRM 🤖"}),h.jsx("button",{onClick:()=>B("marketing"),className:`px-6 py-3 font-medium transition-colors ${z==="marketing"?"border-b-2 border-cyan-400 text-cyan-400":"text-muted-foreground hover:text-foreground"}`,children:"Marketing 📧"})]}),h.jsx("div",{className:"space-y-4",children:z==="ai-crm"?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"p-6 bg-gradient-to-br from-cyan-50 to-blue-50 dark:from-cyan-950 dark:to-blue-950 rounded-lg border-2 border-cyan-200 dark:border-cyan-800",children:[h.jsx("h3",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:"🤖 AI CRM Module"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Intelligent customer relationship management powered by AI. Automatically score leads, predict churn, and recommend next best actions."}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"AI Lead Scoring"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically score and prioritize leads based on engagement, company data, and compliance history."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable AI Scoring"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Churn Prediction"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Predict which clients are at risk of leaving and receive proactive retention recommendations."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable Churn Detection"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Next Best Action"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI-powered recommendations for the best next step with each client based on their compliance status."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable NBA Engine"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Smart Segmentation"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically segment clients by risk level, industry, compliance score, and engagement."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Configure Segments"})]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg border",children:[h.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI CRM features require a FineGuard Premium license.",h.jsx("a",{href:"/pricing",className:"text-cyan-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})}):z==="marketing"?h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950 dark:to-pink-950 rounded-lg border-2 border-purple-200 dark:border-purple-800",children:[h.jsx("h3",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:"📧 Marketing Admin Module"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Automated marketing campaigns, email sequences, and client communications powered by AI copywriting."}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Email Campaigns"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create and send automated email campaigns to clients based on compliance deadlines and risk levels."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Campaign"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"AI Copywriting"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate professional email content automatically using AI, tailored to each client's situation."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Enable AI Writer"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"SMS & WhatsApp"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send urgent compliance alerts via SMS and WhatsApp for critical deadlines."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Configure Messaging"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Drip Sequences"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set up automated email sequences for onboarding, reminders, and follow-ups."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Sequence"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Analytics Dashboard"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track email open rates, click-through rates, and campaign performance."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"View Analytics"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Template Library"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Access pre-built email templates for common compliance scenarios."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Browse Templates"})]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-gray-900 p-4 rounded-lg border",children:[h.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Marketing features require a FineGuard Premium license.",h.jsx("a",{href:"/pricing",className:"text-purple-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})}):z==="companies"?v.length>0?v.map(U=>h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-lg",children:U.name}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",U.companyNumber]}),h.jsxs("div",{className:"flex gap-2 mt-2",children:[h.jsx(en,{variant:U.riskLevel==="critical"?"destructive":"default",children:U.riskLevel}),h.jsxs(en,{variant:"outline",children:[U.complianceScore,"% Compliance"]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>Ue(U),children:h.jsx(tb,{className:"h-4 w-4"})}),h.jsx(Ae,{size:"sm",variant:"destructive",onClick:()=>We(U.id),children:h.jsx(Pg,{className:"h-4 w-4"})})]})]},U.id)):h.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No companies found"}):E.length>0?E.map(U=>h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-lg",children:U.title}),h.jsx("p",{className:"text-sm text-muted-foreground",children:U.companyName}),h.jsxs("div",{className:"flex gap-2 mt-2",children:[h.jsx(en,{variant:U.status==="overdue"?"destructive":"default",children:U.status}),h.jsxs(en,{variant:"outline",children:["Due: ",U.dueDate]}),U.penalty>0&&h.jsxs(en,{variant:"destructive",children:["£",U.penalty," penalty"]})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>Ue(U),children:h.jsx(tb,{className:"h-4 w-4"})}),h.jsx(Ae,{size:"sm",variant:"destructive",onClick:()=>We(U.id),children:h.jsx(Pg,{className:"h-4 w-4"})})]})]},U.id)):h.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No obligations found"})})]})]}),le&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>ce(null),children:h.jsxs(be,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:U=>U.stopPropagation(),children:[h.jsx(Ie,{children:h.jsxs(je,{children:[le==="new"?"Add New":"Edit"," ",z==="companies"?"Company":"Obligation"]})}),h.jsxs(we,{className:"space-y-4",children:[z==="companies"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Name"}),h.jsx("input",{type:"text",value:oe.name||"",onChange:U=>C({...oe,name:U.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Number"}),h.jsx("input",{type:"text",value:oe.companyNumber||"",onChange:U=>C({...oe,companyNumber:U.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),h.jsx("input",{type:"text",value:oe.address||"",onChange:U=>C({...oe,address:U.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Risk Level"}),h.jsxs("select",{value:oe.riskLevel||"low",onChange:U=>C({...oe,riskLevel:U.target.value}),className:"w-full p-2 border rounded-lg bg-background",children:[h.jsx("option",{value:"low",children:"Low"}),h.jsx("option",{value:"medium",children:"Medium"}),h.jsx("option",{value:"high",children:"High"}),h.jsx("option",{value:"critical",children:"Critical"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Compliance Score"}),h.jsx("input",{type:"number",value:oe.complianceScore||100,onChange:U=>C({...oe,complianceScore:parseInt(U.target.value)}),className:"w-full p-2 border rounded-lg bg-background",min:"0",max:"100"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),h.jsx("input",{type:"text",value:oe.title||"",onChange:U=>C({...oe,title:U.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),h.jsx("textarea",{value:oe.description||"",onChange:U=>C({...oe,description:U.target.value}),className:"w-full p-2 border rounded-lg bg-background",rows:3})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date"}),h.jsx("input",{type:"date",value:oe.dueDate||"",onChange:U=>C({...oe,dueDate:U.target.value}),className:"w-full p-2 border rounded-lg bg-background"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),h.jsxs("select",{value:oe.status||"pending",onChange:U=>C({...oe,status:U.target.value}),className:"w-full p-2 border rounded-lg bg-background",children:[h.jsx("option",{value:"pending",children:"Pending"}),h.jsx("option",{value:"overdue",children:"Overdue"}),h.jsx("option",{value:"completed",children:"Completed"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Penalty (£)"}),h.jsx("input",{type:"number",value:oe.penalty||0,onChange:U=>C({...oe,penalty:parseInt(U.target.value)}),className:"w-full p-2 border rounded-lg bg-background",min:"0"})]})]}),h.jsxs("div",{className:"flex gap-2 pt-4",children:[h.jsxs(Ae,{onClick:R,className:"flex-1 bg-gradient-to-r from-cyan-400 to-blue-500",children:[u?h.jsx(Og,{className:"h-4 w-4 mr-2 animate-spin"}):h.jsx(_t,{className:"h-4 w-4 mr-2"}),"Save"]}),h.jsx(Ae,{onClick:()=>ce(null),variant:"outline",className:"flex-1",children:"Cancel"})]})]})]})}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsx(je,{className:"flex items-center gap-2",children:"🤖 AI CRM Module"}),h.jsx(In,{children:"Intelligent customer relationship management powered by AI"})]}),h.jsxs(we,{children:[h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"AI Lead Scoring"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically score and prioritize leads based on engagement, company data, and compliance history."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable AI Scoring"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Churn Prediction"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Predict which clients are at risk of leaving and receive proactive retention recommendations."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable Churn Detection"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Next Best Action"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"AI-powered recommendations for the best next step with each client based on their compliance status."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Enable NBA Engine"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Smart Segmentation"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Automatically segment clients by risk level, industry, compliance score, and engagement."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-cyan-400 to-blue-500",children:"Configure Segments"})]})]})]}),h.jsxs("div",{className:"mt-6 bg-muted p-4 rounded-lg border",children:[h.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["AI CRM features require a FineGuard Premium license.",h.jsx("a",{href:"/pricing",className:"text-cyan-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})]}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsx(je,{className:"flex items-center gap-2",children:"📧 Marketing Admin Module"}),h.jsx(In,{children:"Automated marketing campaigns and client communications"})]}),h.jsxs(we,{children:[h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Email Campaigns"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create and send automated email campaigns to clients based on compliance deadlines and risk levels."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Campaign"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"AI Copywriting"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate professional email content automatically using AI, tailored to each client's situation."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Enable AI Writer"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"SMS & WhatsApp"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send urgent compliance alerts via SMS and WhatsApp for critical deadlines."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Configure Messaging"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Drip Sequences"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set up automated email sequences for onboarding, reminders, and follow-ups."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Create Sequence"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Analytics Dashboard"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Track email open rates, click-through rates, and campaign performance."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"View Analytics"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{className:"text-lg",children:"Template Library"})}),h.jsxs(we,{children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Access pre-built email templates for common compliance scenarios."}),h.jsx(Ae,{className:"w-full bg-gradient-to-r from-purple-400 to-pink-500",children:"Browse Templates"})]})]})]}),h.jsxs("div",{className:"mt-6 bg-muted p-4 rounded-lg border",children:[h.jsx("h4",{className:"font-semibold mb-2",children:"🔐 Premium Feature"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Marketing features require a FineGuard Premium license.",h.jsx("a",{href:"/pricing",className:"text-purple-500 hover:underline ml-1",children:"Upgrade now"})]})]})]})]})]})},Ec="2024-10-11",Rg="https://api.company-information.service.gov.uk";function tM(){const[r,e]=de.useState(()=>sessionStorage.getItem("ch_api_key")||""),[t,s]=de.useState(!1),[a,l]=de.useState("Idle"),[u,m]=de.useState([]),[g,y]=de.useState({current:0,total:0}),v=de.useRef(!1),[x,E]=de.useState([]),[k,z]=de.useState(!1),[B,j]=de.useState(null),J=N=>{m(D=>[`[${new Date().toLocaleTimeString()}] ${N}`,...D.slice(0,199)])},$=N=>{e(N),sessionStorage.setItem("ch_api_key",N)},W=async(N,D=0)=>{const O=await fetch(`${Rg}/search/companies?incorporated_from=${N}&incorporated_to=${N}&start_index=${D}`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});if(!O.ok)throw new Error(`API error: ${O.status} ${O.statusText}`);return await O.json()},le=async N=>{const D=await fetch(`${Rg}/company/${N}`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});if(!D.ok)throw new Error(`Company profile error: ${D.status}`);return await D.json()},ce=async N=>{try{const D=await fetch(`${Rg}/company/${N}/registered-office-address`,{headers:{Authorization:`Basic ${btoa(r+":")}`,"Content-Type":"application/json"}});return D.ok?await D.json():null}catch{return null}},oe=async N=>{var D,O;try{const[V,R]=await Promise.all([le(N.company_number),ce(N.company_number)]),We=R?[R.address_line_1,R.address_line_2,R.locality,R.region,R.postal_code].filter(Boolean).join(", "):"Address not available";return{company_name:N.title,company_number:N.company_number,company_status:N.company_status,company_type:V==null?void 0:V.type,incorporation_date:N.date_of_creation,registered_address:We,accounts_due_date:((D=V==null?void 0:V.accounts)==null?void 0:D.next_due)||"Not available",cs_due_date:((O=V==null?void 0:V.confirmation_statement)==null?void 0:O.next_due)||"Not available",sic_codes:(V==null?void 0:V.sic_codes)||[],jurisdiction:(V==null?void 0:V.jurisdiction)||"england-wales",last_updated:new Date().toISOString()}}catch(V){return J(`Error processing company ${N.company_number}: ${V.message}`),null}},C=async()=>{if(!r){J("Companies House API Key is required to start.");return}s(!0),v.current=!1,m([]),y({current:0,total:0}),E([]);try{J(`Starting real data collection for companies incorporated on: ${Ec}`),l("Searching Companies House...");let N=0;const D=100;let O=0,V=0;const R=[];if(O=(await W(Ec,0)).total_results,y({current:0,total:O}),J(`Found ${O} companies incorporated on ${Ec}`),O===0){J("No companies found for the specified date."),s(!1),l("Idle");return}for(;N<O&&!v.current;){l(`Fetching companies ${N+1}-${Math.min(N+D,O)}...`);const U=await W(Ec,N);R.push(...U.items),N+=D,await new Promise(ie=>setTimeout(ie,200))}if(v.current){J("Agent paused by user."),l("Paused");return}l("Enriching company data...");const Ue=[];for(const U of R){if(v.current){J("Agent paused by user."),l("Paused");return}try{const ie=await oe(U);ie&&(Ue.push(ie),E([...Ue])),V++,y({current:V,total:O}),V%10===0&&J(`Processed ${V}/${O} companies`),await new Promise(ne=>setTimeout(ne,100))}catch(ie){J(`Failed to process company ${U.company_number}: ${ie.message}`);continue}}J(`Successfully processed ${V} real companies from Companies House`),l("Finished")}catch(N){J(`Agent failed: ${N.message}`),l("Error")}finally{s(!1)}},A=()=>{v.current=!0};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(qh,{className:"w-10 h-10 text-blue-600"}),h.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent",children:"Live Companies House Data"})]}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fetch and analyze real-time company data directly from Companies House API"})]}),h.jsxs(be,{className:"mb-8",children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(Zh,{className:"w-6 h-6 text-blue-600"}),"Real Companies House Data Collector"]}),h.jsxs(In,{children:["This agent will fetch real company data from the Companies House API for companies incorporated on ",Ec,"."]})]}),h.jsxs(we,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2 mb-2",children:[h.jsx(M2,{className:"w-4 h-4"}),"Companies House API Key"]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"password",value:r,onChange:N=>$(N.target.value),placeholder:"Enter your Companies House API key",className:"w-full p-3 border rounded-lg bg-background pr-10"}),r.length>0&&h.jsx(a2,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Get your API key from: ",h.jsx("a",{href:"https://developer.company-information.service.gov.uk/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Companies House Developer Portal"})]})]}),h.jsx("div",{className:"flex items-center gap-4",children:t?h.jsxs(Ae,{onClick:A,className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700",children:[h.jsx(h2,{className:"w-5 h-5 mr-2"})," Pause Collection"]}):h.jsxs(Ae,{onClick:C,disabled:!r,className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",children:[h.jsx(f2,{className:"w-5 h-5 mr-2"})," Start Live Data Collection"]})}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold mb-2",children:[h.jsxs("span",{children:["Status: ",h.jsx(en,{variant:"outline",children:a})]}),h.jsxs("span",{className:"text-gray-500",children:[g.current," / ",g.total]})]}),h.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-3 rounded-full transition-all duration-500",style:{width:g.total>0?`${g.current/g.total*100}%`:"0%"}})})]}),h.jsx("div",{className:"bg-gray-900 text-green-400 font-mono text-xs rounded-lg p-4 h-48 overflow-y-auto",children:u.length>0?u.map((N,D)=>h.jsx("p",{className:"whitespace-pre-wrap",children:N},D)):h.jsx("p",{className:"text-gray-500",children:"Agent log will appear here..."})})]})]}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(xx,{className:"w-6 h-6 text-blue-600"}),"Live Company Database"]}),h.jsx(In,{children:"Real-time company data from Companies House"})]}),h.jsx(we,{children:k?h.jsxs("div",{className:"text-center p-8",children:[h.jsx(z2,{className:"w-8 h-8 animate-spin mx-auto text-blue-500"}),h.jsx("p",{className:"text-gray-500 mt-2",children:"Loading company data..."})]}):B?h.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg text-center",children:B}):x.length===0?h.jsxs("div",{className:"text-center text-gray-500 p-8",children:[h.jsx(Zh,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),h.jsx("p",{children:"No data yet. Start the agent to collect real company data."})]}):h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-xs uppercase",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3 text-left",children:"Company Name & Number"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"Registered Address"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"Accounts Due"}),h.jsx("th",{className:"px-4 py-3 text-left",children:"CS Due"})]})}),h.jsx("tbody",{children:x.map((N,D)=>h.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[h.jsxs("td",{className:"px-4 py-3",children:[h.jsx("div",{className:"font-medium",children:N.company_name}),h.jsx("div",{className:"font-mono text-xs text-gray-500",children:N.company_number})]}),h.jsx("td",{className:"px-4 py-3",children:h.jsx(en,{variant:N.company_status==="active"?"default":N.company_status==="dissolved"?"destructive":"secondary",children:N.company_status})}),h.jsx("td",{className:"px-4 py-3 text-xs max-w-xs truncate",title:N.registered_address,children:N.registered_address}),h.jsx("td",{className:"px-4 py-3 font-mono text-red-600 dark:text-red-400 font-bold text-xs",children:N.accounts_due_date}),h.jsx("td",{className:"px-4 py-3 font-mono text-blue-600 dark:text-blue-400 font-bold text-xs",children:N.cs_due_date})]},D))})]})})})]})]})})}const nM=({isOpen:r,onClose:e,onAuthSuccess:t})=>{const[s,a]=de.useState(!0),[l,u]=de.useState({email:"",password:"",name:"",confirmPassword:""}),[m,g]=de.useState(!1),[y,v]=de.useState(""),[x,E]=de.useState("");if(!r)return null;const k=async B=>{B.preventDefault(),v(""),E(""),g(!0);try{if(!s){if(l.password!==l.confirmPassword)throw new Error("Passwords do not match");if(l.password.length<6)throw new Error("Password must be at least 6 characters")}if(await new Promise(j=>setTimeout(j,1e3)),s){const j={email:l.email,name:l.email.split("@")[0],subscription:"free"};localStorage.setItem("fineguard_user",JSON.stringify(j)),E("Login successful!"),setTimeout(()=>{t(j),e()},1e3)}else{const j={email:l.email,name:l.name,subscription:"free"};localStorage.setItem("fineguard_user",JSON.stringify(j)),E("Account created successfully!"),setTimeout(()=>{t(j),e()},1e3)}}catch(j){v(j.message)}finally{g(!1)}},z=B=>{u({...l,[B.target.name]:B.target.value})};return h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-background border-2 border-cyan-400/30 rounded-3xl max-w-md w-full p-8 relative shadow-2xl",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-muted rounded-full transition-colors",children:h.jsx(Sx,{className:"h-5 w-5"})}),h.jsxs("div",{className:"text-center mb-6",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-2xl",children:"🛡️"})}),h.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"})]}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:s?"Welcome Back":"Create Account"}),h.jsx("p",{className:"text-muted-foreground text-sm",children:s?"Sign in to access your compliance dashboard":"Start protecting your business today"})]}),y&&h.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-500 text-sm",children:y}),x&&h.jsxs("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-green-500 text-sm flex items-center gap-2",children:[h.jsx(_t,{className:"h-4 w-4"}),x]}),h.jsxs("form",{onSubmit:k,className:"space-y-4",children:[!s&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),h.jsxs("div",{className:"relative",children:[h.jsx(xp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx("input",{type:"text",name:"name",value:l.name,onChange:z,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"John Doe",required:!s})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),h.jsxs("div",{className:"relative",children:[h.jsx(F2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx("input",{type:"email",name:"email",value:l.email,onChange:z,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"you@example.com",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(eb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx("input",{type:"password",name:"password",value:l.password,onChange:z,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"••••••••",required:!0})]})]}),!s&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(eb,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:z,className:"w-full pl-10 pr-4 py-3 border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-cyan-400",placeholder:"••••••••",required:!s})]})]}),h.jsx("button",{type:"submit",disabled:m,className:"w-full py-3 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-lg font-semibold hover:shadow-lg hover:scale-[1.02] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Processing...":s?"Sign In":"Create Account"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsx("button",{onClick:()=>{a(!s),v(""),E("")},className:"text-sm text-cyan-500 hover:underline",children:s?"Don't have an account? Sign up":"Already have an account? Sign in"})}),s&&h.jsx("div",{className:"mt-4 text-center",children:h.jsx("button",{className:"text-sm text-muted-foreground hover:text-cyan-500 transition-colors",children:"Forgot password?"})})]})})},sM=({user:r,onLogout:e,onUpgrade:t})=>{const a={free:{name:"Free",color:"text-gray-500",icon:"🆓"},starter:{name:"Starter",color:"text-blue-500",icon:"🌟",price:"£1"},pro:{name:"Pro",color:"text-purple-500",icon:"👑",price:"£15"},ultimate:{name:"Ultimate",color:"text-amber-500",icon:"💎",price:"£99"}}[r.subscription||"free"];return h.jsx("div",{className:"min-h-screen bg-background py-12 px-4",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsx("div",{className:"bg-gradient-to-r from-cyan-400 to-blue-500 rounded-3xl p-8 mb-8 text-white",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",r.name,"!"]}),h.jsx("p",{className:"text-white/80",children:"Manage your FineGuard subscription and settings"})]}),h.jsx("div",{className:"text-6xl",children:a.icon})]})}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"md:col-span-2 space-y-6",children:[h.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[h.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[h.jsx(J0,{className:"h-5 w-5 text-cyan-500"}),"Current Subscription"]}),h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{children:[h.jsxs("div",{className:`text-2xl font-bold ${a.color} mb-1`,children:[a.name," Plan"]}),a.price&&h.jsxs("div",{className:"text-muted-foreground",children:[a.price,"/month"]})]}),r.subscription==="free"&&h.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-full font-semibold hover:shadow-lg hover:scale-105 transition-all",children:"Upgrade Now"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Your Features:"}),r.subscription==="free"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Up to 1 company"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Basic compliance tracking"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[h.jsx(wx,{className:"h-4 w-4"}),h.jsx("span",{children:"AI features not included"})]})]}):r.subscription==="starter"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Up to 1 company"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Email alerts"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"AI compliance checklists"})]})]}):r.subscription==="pro"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Up to 5 companies"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"AI-powered insights"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Priority support"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Risk scoring"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Unlimited companies"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Dedicated account manager"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"White-label option"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(_t,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"API access"})]})]})]})]}),h.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[h.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[h.jsx(xp,{className:"h-5 w-5 text-cyan-500"}),"Account Details"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-muted-foreground",children:"Name"}),h.jsx("div",{className:"font-medium",children:r.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-muted-foreground",children:"Email"}),h.jsx("div",{className:"font-medium",children:r.email})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-muted-foreground",children:"Member Since"}),h.jsx("div",{className:"font-medium",children:new Date().toLocaleDateString()})]})]})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[h.jsx("h2",{className:"text-lg font-bold mb-4",children:"Quick Actions"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("button",{className:"w-full p-3 text-left hover:bg-muted rounded-lg transition-colors flex items-center gap-3",children:[h.jsx(x2,{className:"h-5 w-5 text-cyan-500"}),h.jsx("span",{children:"Billing & Payments"})]}),h.jsxs("button",{className:"w-full p-3 text-left hover:bg-muted rounded-lg transition-colors flex items-center gap-3",children:[h.jsx(Dg,{className:"h-5 w-5 text-cyan-500"}),h.jsx("span",{children:"Account Settings"})]}),r.subscription!=="ultimate"&&h.jsxs("button",{onClick:t,className:"w-full p-3 text-left hover:bg-muted rounded-lg transition-colors flex items-center gap-3 border border-cyan-400/30",children:[h.jsx(J0,{className:"h-5 w-5 text-amber-500"}),h.jsx("span",{className:"text-cyan-500 font-semibold",children:"Upgrade Plan"})]}),h.jsxs("button",{onClick:e,className:"w-full p-3 text-left hover:bg-red-500/10 rounded-lg transition-colors flex items-center gap-3 text-red-500",children:[h.jsx($2,{className:"h-5 w-5"}),h.jsx("span",{children:"Sign Out"})]})]})]}),h.jsxs("div",{className:"border-2 border-cyan-400/30 rounded-2xl p-6 bg-background/50 backdrop-blur",children:[h.jsx("h2",{className:"text-lg font-bold mb-4",children:"Need Help?"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Our support team is here to help you with any questions."}),h.jsx("button",{className:"w-full py-2 bg-gradient-to-r from-cyan-400 to-blue-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all",children:"Contact Support"})]})]})]})]})})},rM=()=>{const[r,e]=de.useState([]),[t,s]=de.useState([]),[a,l]=de.useState([]),[u,m]=de.useState("dashboard"),[g,y]=de.useState([]);de.useEffect(()=>{v(),x(),k()},[]);const v=()=>{s([{id:"companies-house",name:"Companies House API",status:"connected",icon:"🏢",lastSync:new Date().toISOString(),recordsSync:1247},{id:"hmrc",name:"HMRC Gateway",status:"connected",icon:"💷",lastSync:new Date().toISOString(),recordsSync:892},{id:"xero",name:"Xero Accounting",status:"connected",icon:"📊",lastSync:new Date().toISOString(),recordsSync:456},{id:"quickbooks",name:"QuickBooks",status:"ready",icon:"📗",lastSync:null,recordsSync:0},{id:"sendgrid",name:"SendGrid Email",status:"connected",icon:"📧",lastSync:new Date().toISOString(),recordsSync:3421},{id:"twilio",name:"Twilio SMS",status:"connected",icon:"📱",lastSync:new Date().toISOString(),recordsSync:234},{id:"openai",name:"OpenAI GPT-4",status:"connected",icon:"🤖",lastSync:new Date().toISOString(),recordsSync:5678},{id:"stripe",name:"Stripe Payments",status:"connected",icon:"💳",lastSync:new Date().toISOString(),recordsSync:189}])},x=()=>{e([{id:"lead-scorer",name:"AI Lead Scoring Agent",status:"running",type:"ai",icon:"🎯",tasksCompleted:342,accuracy:94.5,lastAction:"Scored 15 new leads",nextRun:"2 minutes"},{id:"churn-predictor",name:"Churn Prediction Agent",status:"running",type:"ai",icon:"⚠️",tasksCompleted:128,accuracy:91.2,lastAction:"Identified 3 at-risk clients",nextRun:"15 minutes"},{id:"compliance-monitor",name:"Compliance Monitoring Agent",status:"running",type:"automation",icon:"🛡️",tasksCompleted:1247,accuracy:99.8,lastAction:"Checked 45 deadlines",nextRun:"1 hour"},{id:"email-automation",name:"Email Campaign Agent",status:"running",type:"automation",icon:"📧",tasksCompleted:892,accuracy:87.3,lastAction:"Sent 23 reminder emails",nextRun:"30 minutes"},{id:"data-enrichment",name:"Data Enrichment Agent",status:"running",type:"automation",icon:"🔍",tasksCompleted:567,accuracy:96.1,lastAction:"Enriched 12 company profiles",nextRun:"5 minutes"},{id:"nba-engine",name:"Next Best Action Agent",status:"running",type:"ai",icon:"🎲",tasksCompleted:234,accuracy:88.9,lastAction:"Generated 8 recommendations",nextRun:"10 minutes"}]);const W=setInterval(()=>{E()},3e3);return()=>clearInterval(W)},E=()=>{const $=[{agent:"AI Lead Scoring Agent",action:"Scored lead: Tech Startup Ltd - Score: 85/100",type:"success"},{agent:"Churn Prediction Agent",action:"Alert: Global Solutions Ltd showing churn signals",type:"warning"},{agent:"Compliance Monitoring Agent",action:"Deadline approaching: Annual Accounts for 3 companies",type:"info"},{agent:"Email Campaign Agent",action:"Sent reminder email to Startup Ventures Ltd",type:"success"},{agent:"Data Enrichment Agent",action:"Updated company profile: New director added",type:"info"},{agent:"Next Best Action Agent",action:"Recommendation: Schedule call with high-value client",type:"success"}],W=$[Math.floor(Math.random()*$.length)];y(le=>[{...W,timestamp:new Date().toLocaleTimeString(),id:Date.now()},...le].slice(0,50))},k=()=>{l([{id:1,name:"Deadline Alert Workflow",trigger:"When deadline is 7 days away",actions:["Send email","Create task","Update CRM"],status:"active",runs:234},{id:2,name:"New Client Onboarding",trigger:"When new client is added",actions:["Send welcome email","Create checklist","Assign account manager"],status:"active",runs:45},{id:3,name:"High-Risk Client Alert",trigger:"When compliance score drops below 60%",actions:["Alert account manager","Generate mitigation plan","Schedule review"],status:"active",runs:12},{id:4,name:"Monthly Reporting",trigger:"First day of each month",actions:["Generate reports","Email to clients","Update dashboard"],status:"active",runs:6},{id:5,name:"Lead Nurture Sequence",trigger:"When lead score exceeds 70",actions:["Add to nurture campaign","Assign to sales","Send personalized email"],status:"active",runs:89}])},z=$=>{e(W=>W.map(le=>le.id===$?{...le,status:le.status==="running"?"paused":"running"}:le))},B=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[h.jsx(be,{children:h.jsx(we,{className:"pt-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Agents"}),h.jsx("p",{className:"text-3xl font-bold",children:r.filter($=>$.status==="running").length})]}),h.jsx(ZA,{className:"h-10 w-10 text-cyan-500"})]})})}),h.jsx(be,{children:h.jsx(we,{className:"pt-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Tasks Today"}),h.jsx("p",{className:"text-3xl font-bold",children:"3,492"})]}),h.jsx(_t,{className:"h-10 w-10 text-green-500"})]})})}),h.jsx(be,{children:h.jsx(we,{className:"pt-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Accuracy"}),h.jsx("p",{className:"text-3xl font-bold",children:"93.2%"})]}),h.jsx(uN,{className:"h-10 w-10 text-purple-500"})]})})}),h.jsx(be,{children:h.jsx(we,{className:"pt-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Connected Services"}),h.jsx("p",{className:"text-3xl font-bold",children:t.filter($=>$.status==="connected").length})]}),h.jsx(ng,{className:"h-10 w-10 text-blue-500"})]})})})]}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(kh,{className:"h-5 w-5 text-cyan-500"}),"Active AI Agents"]}),h.jsx(In,{children:"Real-time monitoring of autonomous agents"})]}),h.jsx(we,{children:h.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:r.map($=>h.jsx(be,{className:"border-cyan-400/30",children:h.jsxs(we,{className:"pt-6",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"text-3xl",children:$.icon}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:$.name}),h.jsx(en,{variant:$.status==="running"?"default":"secondary",className:"mt-1",children:$.status==="running"?h.jsxs(h.Fragment,{children:[h.jsx(kh,{className:"h-3 w-3 mr-1 animate-pulse"})," Running"]}):h.jsxs(h.Fragment,{children:[h.jsx(rg,{className:"h-3 w-3 mr-1"})," Paused"]})})]})]}),h.jsx(Ae,{size:"sm",variant:"outline",onClick:()=>z($.id),children:$.status==="running"?h.jsx(rg,{className:"h-4 w-4"}):h.jsx(eN,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Tasks Completed:"}),h.jsx("span",{className:"font-semibold",children:$.tasksCompleted})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Accuracy:"}),h.jsxs("span",{className:"font-semibold text-green-500",children:[$.accuracy,"%"]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Last Action:"}),h.jsx("span",{className:"font-semibold text-xs",children:$.lastAction})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Next Run:"}),h.jsx("span",{className:"font-semibold text-cyan-500",children:$.nextRun})]})]})]})},$.id))})})]}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(Og,{className:"h-5 w-5 text-cyan-500"}),"Live Agent Activity"]}),h.jsx(In,{children:"Real-time log of agent actions"})]}),h.jsx(we,{children:h.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:g.map($=>h.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[h.jsx("div",{className:`mt-1 ${$.type==="success"?"text-green-500":$.type==="warning"?"text-amber-500":"text-blue-500"}`,children:$.type==="success"?h.jsx(_t,{className:"h-4 w-4"}):$.type==="warning"?h.jsx(wx,{className:"h-4 w-4"}):h.jsx(jg,{className:"h-4 w-4"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"font-semibold text-sm",children:$.agent}),h.jsx("span",{className:"text-xs text-muted-foreground",children:$.timestamp})]}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:$.action})]})]},$.id))})})]})]}),j=()=>h.jsx("div",{className:"space-y-6",children:h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(ng,{className:"h-5 w-5 text-cyan-500"}),"Connected Services"]}),h.jsx(In,{children:"Manage integrations with external platforms"})]}),h.jsx(we,{children:h.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:t.map($=>h.jsx(be,{className:"border-cyan-400/30",children:h.jsxs(we,{className:"pt-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"text-3xl",children:$.icon}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:$.name}),h.jsx(en,{variant:$.status==="connected"?"default":"secondary",className:"mt-1",children:$.status==="connected"?h.jsxs(h.Fragment,{children:[h.jsx(_t,{className:"h-3 w-3 mr-1"})," Connected"]}):h.jsxs(h.Fragment,{children:[h.jsx(jg,{className:"h-3 w-3 mr-1"})," Ready"]})})]})]}),h.jsx(Ae,{size:"sm",variant:"outline",children:h.jsx(Dg,{className:"h-4 w-4"})})]}),$.status==="connected"&&h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Last Sync:"}),h.jsx("span",{className:"font-semibold",children:new Date($.lastSync).toLocaleTimeString()})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Records Synced:"}),h.jsx("span",{className:"font-semibold text-green-500",children:$.recordsSync.toLocaleString()})]})]})]})},$.id))})})]})}),J=()=>h.jsx("div",{className:"space-y-6",children:h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(Ih,{className:"h-5 w-5 text-cyan-500"}),"AI Automation Workflows"]}),h.jsx(In,{children:"Automated workflows powered by AI"})]}),h.jsxs(we,{children:[h.jsx("div",{className:"space-y-4",children:a.map($=>h.jsx(be,{className:"border-cyan-400/30",children:h.jsx(we,{className:"pt-6",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("h4",{className:"font-semibold",children:$.name}),h.jsxs(en,{variant:"default",className:"bg-green-500",children:[h.jsx(kh,{className:"h-3 w-3 mr-1"})," Active"]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(Ih,{className:"h-4 w-4 text-amber-500"}),h.jsx("span",{className:"text-muted-foreground",children:"Trigger:"}),h.jsx("span",{className:"font-medium",children:$.trigger})]}),h.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[h.jsx(WA,{className:"h-4 w-4 text-cyan-500 mt-0.5"}),h.jsxs("div",{children:[h.jsx("span",{className:"text-muted-foreground",children:"Actions:"}),h.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:$.actions.map((W,le)=>h.jsx(en,{variant:"outline",className:"text-xs",children:W},le))})]})]}),h.jsx("div",{className:"flex items-center gap-4 text-sm",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(r2,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{className:"text-muted-foreground",children:"Runs:"}),h.jsx("span",{className:"font-semibold",children:$.runs})]})})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ae,{size:"sm",variant:"outline",children:h.jsx(Dg,{className:"h-4 w-4"})}),h.jsx(Ae,{size:"sm",variant:"outline",children:h.jsx(rg,{className:"h-4 w-4"})})]})]})})},$.id))}),h.jsxs(Ae,{className:"w-full mt-4 bg-gradient-to-r from-cyan-400 to-blue-500",children:[h.jsx(Ih,{className:"h-4 w-4 mr-2"}),"Create New Automation"]})]})]})});return h.jsx("div",{className:"min-h-screen bg-background py-8 px-4",children:h.jsxs("div",{className:"max-w-7xl mx-auto",children:[h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"Advanced CRM & AI Automation"}),h.jsx("p",{className:"text-muted-foreground",children:"Autonomous agents and intelligent workflows for compliance management"})]}),h.jsx("div",{className:"flex gap-2 mb-6 border-b",children:[{id:"dashboard",label:"Dashboard",icon:kh},{id:"services",label:"Services",icon:ng},{id:"automations",label:"Automations",icon:Ih}].map($=>h.jsxs("button",{onClick:()=>m($.id),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${u===$.id?"border-cyan-500 text-cyan-500":"border-transparent text-muted-foreground hover:text-foreground"}`,children:[h.jsx($.icon,{className:"h-4 w-4"}),$.label]},$.id))}),u==="dashboard"&&h.jsx(B,{}),u==="services"&&h.jsx(j,{}),u==="automations"&&h.jsx(J,{})]})})};function iM(){const[r,e]=de.useState([{key:"COMPANIES_HOUSE_API_KEY",value:"elab6044-6d0a-4fec-83fe-dfee5e1d83c7",created_at:"2025-10-16T10:00:00",access_count:45,last_accessed:"2025-10-16T10:30:00",metadata:{service:"companies_house",description:"UK Companies House API access"}},{key:"SENDGRID_API_KEY",value:"SG.demo_key_replace_in_production",created_at:"2025-10-16T10:00:00",access_count:12,last_accessed:"2025-10-16T09:45:00",metadata:{service:"email",description:"SendGrid email delivery"}},{key:"TWILIO_SID",value:"AC_demo_sid_replace_in_production",created_at:"2025-10-16T10:00:00",access_count:8,last_accessed:"2025-10-16T09:30:00",metadata:{service:"sms",description:"Twilio SMS service"}},{key:"JWT_SECRET",value:"fineguard_jwt_secret_change_in_production_2025",created_at:"2025-10-16T10:00:00",access_count:156,last_accessed:"2025-10-16T10:35:00",metadata:{service:"auth",description:"JWT signing secret"}}]),[t,s]=de.useState(!1),[a,l]=de.useState({}),[u,m]=de.useState(null),[g,y]=de.useState({key:"",value:"",service:"",description:""}),[v]=de.useState([{timestamp:"2025-10-16T10:35:00",action:"GET",key:"JWT_SECRET",message:"Secret accessed by auth service"},{timestamp:"2025-10-16T10:30:00",action:"GET",key:"COMPANIES_HOUSE_API_KEY",message:"Secret accessed by Live Data agent"},{timestamp:"2025-10-16T10:00:00",action:"SET",key:"COMPANIES_HOUSE_API_KEY",message:"Secret stored"},{timestamp:"2025-10-16T09:45:00",action:"GET",key:"SENDGRID_API_KEY",message:"Secret accessed by email service"}]),x=()=>{g.key&&g.value&&(e([...r,{key:g.key,value:g.value,created_at:new Date().toISOString(),access_count:0,last_accessed:"Never",metadata:{service:g.service,description:g.description}}]),y({key:"",value:"",service:"",description:""}),s(!1))},E=j=>{confirm(`Are you sure you want to delete ${j}?`)&&e(r.filter(J=>J.key!==j))},k=j=>{l({...a,[j]:!a[j]})},z=(j,J)=>{navigator.clipboard.writeText(J),m(j),setTimeout(()=>m(null),2e3)},B=j=>({companies_house:"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300",email:"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300",sms:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300",auth:"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300"})[j]||"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300";return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 py-8",children:[h.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[h.jsxs("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 rounded-2xl p-8 mb-8 text-white",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h.jsx(ya,{className:"w-12 h-12"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-bold",children:"Secret Vault"}),h.jsx("p",{className:"text-cyan-100",children:"Secure API Key Management with AES-256 Encryption"})]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[h.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold",children:r.length}),h.jsx("div",{className:"text-sm text-cyan-100",children:"Stored Secrets"})]}),h.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold",children:r.reduce((j,J)=>j+J.access_count,0)}),h.jsx("div",{className:"text-sm text-cyan-100",children:"Total Accesses"})]}),h.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4",children:[h.jsx("div",{className:"text-3xl font-bold",children:"🔒 AES-256"}),h.jsx("div",{className:"text-sm text-cyan-100",children:"Encryption"})]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:"Secrets"}),h.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white px-6 py-3 rounded-full hover:shadow-lg transition",children:[h.jsx(Ex,{className:"w-5 h-5"}),"Add Secret"]})]}),h.jsx("div",{className:"space-y-4",children:r.map(j=>h.jsxs("div",{className:"border dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx(U2,{className:"w-5 h-5 text-cyan-500"}),h.jsx("span",{className:"font-mono font-bold dark:text-white",children:j.key}),h.jsx("span",{className:`text-xs px-2 py-1 rounded ${B(j.metadata.service)}`,children:j.metadata.service}),j.key==="COMPANIES_HOUSE_API_KEY"&&h.jsxs("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 px-2 py-1 rounded flex items-center gap-1",children:[h.jsx(W0,{className:"w-3 h-3"}),"Active"]})]}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:j.metadata.description}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[h.jsxs("span",{children:["Created: ",new Date(j.created_at).toLocaleDateString()]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:["Accessed: ",j.access_count," times"]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>k(j.key),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"View secret",children:a[j.key]?h.jsx(R2,{className:"w-5 h-5"}):h.jsx(C2,{className:"w-5 h-5"})}),h.jsx("button",{onClick:()=>z(j.key,j.value),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition",title:"Copy to clipboard",children:u===j.key?h.jsx(W0,{className:"w-5 h-5 text-green-500"}):h.jsx(b2,{className:"w-5 h-5"})}),h.jsx("button",{onClick:()=>E(j.key),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition text-red-600",title:"Delete secret",children:h.jsx(Pg,{className:"w-5 h-5"})})]})]}),a[j.key]&&h.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-900 rounded",children:h.jsx("span",{className:"font-mono text-sm dark:text-white break-all",children:j.value})})]},j.key))})]}),h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(jg,{className:"w-6 h-6 text-cyan-500"}),h.jsx("h2",{className:"text-2xl font-bold dark:text-white",children:"Audit Log"})]}),h.jsx("div",{className:"space-y-2",children:v.map((j,J)=>h.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition",children:[h.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-40",children:new Date(j.timestamp).toLocaleString()}),h.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${j.action==="GET"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":j.action==="SET"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:j.action}),h.jsx("span",{className:"font-mono text-sm dark:text-white w-64",children:j.key}),h.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 flex-1",children:j.message})]},J))})]})]}),t&&h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 max-w-md w-full mx-4",children:[h.jsx("h3",{className:"text-2xl font-bold mb-6 dark:text-white",children:"Add New Secret"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2 dark:text-gray-300",children:"Secret Key"}),h.jsx("input",{type:"text",value:g.key,onChange:j=>y({...g,key:j.target.value}),placeholder:"API_KEY_NAME",className:"w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2 dark:text-gray-300",children:"Secret Value"}),h.jsx("input",{type:"password",value:g.value,onChange:j=>y({...g,value:j.target.value}),placeholder:"••••••••••••",className:"w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2 dark:text-gray-300",children:"Service"}),h.jsx("input",{type:"text",value:g.service,onChange:j=>y({...g,service:j.target.value}),placeholder:"email, sms, api, etc.",className:"w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2 dark:text-gray-300",children:"Description"}),h.jsx("input",{type:"text",value:g.description,onChange:j=>y({...g,description:j.target.value}),placeholder:"Brief description",className:"w-full px-4 py-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]}),h.jsxs("div",{className:"flex gap-3 mt-6",children:[h.jsx("button",{onClick:x,className:"flex-1 bg-gradient-to-r from-cyan-500 to-blue-600 text-white py-3 rounded-lg font-bold hover:shadow-lg transition",children:"Add Secret"}),h.jsx("button",{onClick:()=>s(!1),className:"flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:"Cancel"})]})]})})]})}const aM={companies:[{id:1,name:"Tech Innovations Ltd",companyNumber:"12345678",address:"123 Business Park, London, SW1A 1AA",riskLevel:"high",complianceScore:65,overdueCount:2,obligationCount:8},{id:2,name:"Global Solutions Ltd",companyNumber:"87654321",address:"456 Enterprise Road, Manchester, M1 1AB",riskLevel:"medium",complianceScore:78,overdueCount:0,obligationCount:6},{id:3,name:"Startup Ventures Ltd",companyNumber:"11223344",address:"789 Innovation Street, Bristol, BS1 1CD",riskLevel:"critical",complianceScore:45,overdueCount:3,obligationCount:5}],obligations:[{id:1,companyId:1,companyName:"Tech Innovations Ltd",title:"Annual Accounts Filing",description:"Submit annual financial statements to Companies House",dueDate:"2024-03-15",status:"overdue",penalty:1500,daysOverdue:45,phoneNumber:"+447912345678"},{id:2,companyId:1,companyName:"Tech Innovations Ltd",title:"Confirmation Statement",description:"Annual confirmation of company details",dueDate:"2024-04-20",status:"pending",penalty:0,daysOverdue:0,phoneNumber:"+447912345678"},{id:3,companyId:2,companyName:"Global Solutions Ltd",title:"VAT Return",description:"Quarterly VAT submission to HMRC",dueDate:"2024-05-10",status:"pending",penalty:0,daysOverdue:0,phoneNumber:"+447987654321"},{id:4,companyId:3,companyName:"Startup Ventures Ltd",title:"Corporation Tax",description:"Corporation tax payment and filing",dueDate:"2024-02-28",status:"overdue",penalty:2500,daysOverdue:62,phoneNumber:"+447445566778"},{id:5,companyId:3,companyName:"Startup Ventures Ltd",title:"Annual Accounts Filing",description:"Submit annual financial statements",dueDate:"2024-01-31",status:"overdue",penalty:1800,daysOverdue:90,phoneNumber:"+447445566778"}]};function oM(){const[r,e]=de.useState(!1),[t,s]=de.useState("home"),[a,l]=de.useState(!1),[u,m]=de.useState(aM),[g,y]=de.useState(null),[v,x]=de.useState(null),[E,k]=de.useState(!1),[z,B]=de.useState({title:"",content:"",loading:!1}),[j,J]=de.useState(!1),[$,W]=de.useState(null);de.useEffect(()=>{const P=localStorage.getItem("fineguard_user");P&&W(JSON.parse(P))},[]),de.useEffect(()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[r]);const le=P=>{const ae={day:"numeric",month:"short",year:"numeric"};return new Date(P).toLocaleDateString("en-GB",ae)},ce=P=>{const ae=new Date,ve=new Date(P)-ae;return Math.ceil(ve/(1e3*60*60*24))},oe=P=>{switch(P){case"low":return"bg-green-500";case"medium":return"bg-blue-500";case"high":return"bg-orange-500";case"critical":return"bg-red-600";default:return"bg-gray-500"}},C=P=>{switch(P){case"completed":return"bg-green-500";case"overdue":return"bg-red-600";case"pending":return"bg-blue-500";default:return"bg-gray-500"}},A={overdueCount:u.obligations.filter(P=>P.status==="overdue").length,totalCompanies:u.companies.length,avgScore:(u.companies.reduce((P,ae)=>P+ae.complianceScore,0)/u.companies.length).toFixed(1),penaltyRisk:u.obligations.filter(P=>P.status==="overdue").reduce((P,ae)=>P+ae.penalty,0)},N=P=>{m(ae=>({...ae,obligations:ae.obligations.map(Te=>Te.id===P?{...Te,status:"completed",penalty:0}:Te),companies:ae.companies.map(Te=>{const ve=ae.obligations.find($e=>$e.id===P);return Te.id===(ve==null?void 0:ve.companyId)?{...Te,complianceScore:Math.min(100,Te.complianceScore+5)}:Te})})),x(null)},D=P=>{k(!0),B({title:`AI Mitigation Plan for ${P.name}`,content:"",loading:!0}),setTimeout(()=>{B({title:`AI Mitigation Plan for ${P.name}`,loading:!1,content:`
**Current Risk Level:** ${P.riskLevel.toUpperCase()}
**Generated:** ${new Date().toLocaleDateString()}

### Immediate Actions Required:
1. **Review Overdue Filings** - Address all overdue obligations within 7 days
2. **Engage Compliance Officer** - Assign dedicated resource for monitoring
3. **Implement Early Warning System** - Set up 30-day advance reminders

### Strategic Recommendations:
- Conduct comprehensive compliance audit
- Implement automated tracking system
- Schedule quarterly compliance reviews
- Establish escalation procedures for high-risk items

### Priority Timeline:
- **Week 1:** Clear all critical overdue items
- **Month 1:** Implement monitoring system
- **Quarter 1:** Achieve 85%+ compliance score
        `})},2e3)},O=P=>{k(!0),B({title:`AI Compliance Checklist: ${P.title}`,content:"",loading:!0}),setTimeout(()=>{B({title:`AI Compliance Checklist: ${P.title}`,loading:!1,content:`
### Pre-Submission Requirements:
- Verify company details are up to date
- Gather all required financial documents
- Review previous year's filing for consistency
- Confirm director approvals obtained

### Submission Steps:
1. **Document Preparation** - Ensure all statements are signed
2. **Online Portal Login** - Use Companies House WebFiling service
3. **Data Entry** - Input financial figures accurately
4. **Document Upload** - Attach signed PDF copies
5. **Final Review** - Verify all information before submission
6. **Confirmation** - Save submission reference number

### Post-Submission Actions:
- File confirmation email in company records
- Update internal compliance tracking system
- Schedule reminder for next filing period
- Notify relevant stakeholders of completion
        `})},1500)},V=[...u.obligations].sort((P,ae)=>P.status==="overdue"&&ae.status!=="overdue"?-1:ae.status==="overdue"&&P.status!=="overdue"?1:new Date(P.dueDate)-new Date(ae.dueDate)),R=[{id:"home",label:"Home",icon:O2},{id:"about",label:"About",icon:Z0},{id:"how-it-works",label:"How It Works",icon:X0},{id:"features",label:"Features",icon:nb},{id:"pricing",label:"Pricing",icon:A2},{id:"testimonials",label:"Testimonials",icon:sg},{id:"contact",label:"Contact",icon:ig},{id:"dashboard",label:"Dashboard",icon:ya},{id:"crm",label:"CRM",icon:pN},{id:"admin",label:"Admin",icon:X0},{id:"live-data",label:"Live Data",icon:qh},{id:"vault",label:"Vault",icon:ya}],We=()=>{switch(t){case"home":return h.jsx(Ue,{});case"about":return h.jsx(U,{});case"how-it-works":return h.jsx(ie,{});case"features":return h.jsx(ne,{});case"pricing":return h.jsx(ze,{});case"testimonials":return h.jsx(M,{});case"contact":return h.jsx(re,{});case"dashboard":return h.jsx(he,{});case"admin":return h.jsx(eM,{});case"live-data":return h.jsx(tM,{});case"crm":return h.jsx(rM,{});case"vault":return h.jsx(iM,{});case"member":return $?h.jsx(sM,{user:$,onLogout:()=>{localStorage.removeItem("fineguard_user"),W(null),s("home")},onUpgrade:()=>s("pricing")}):h.jsx(Ue,{});default:return h.jsx(Ue,{})}},Ue=()=>h.jsxs("div",{className:"space-y-16",children:[h.jsxs("section",{className:"relative min-h-[600px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:sb,alt:"FineGuard Workshop",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-900/40 to-purple-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4 max-w-4xl",children:[h.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-6 animate-fade-in",children:"Welcome to FineGuard"}),h.jsx("p",{className:"text-xl md:text-2xl mb-8 opacity-90",children:"Where paperwork has personality and compliance is effortless"}),h.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[h.jsx(Ae,{size:"lg",className:"bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 rounded-full px-10 py-6 text-lg font-semibold hover:shadow-2xl hover:shadow-cyan-400/40 transition-all hover:scale-105",onClick:()=>s("dashboard"),children:"Get Started"}),h.jsx(Ae,{size:"lg",className:"border-2 border-cyan-400/50 bg-white/10 backdrop-blur-md text-white hover:bg-white/20 rounded-full px-10 py-6 text-lg font-semibold transition-all hover:scale-105",onClick:()=>s("how-it-works"),children:"Learn More"})]})]})]}),h.jsxs("section",{className:"container mx-auto px-4",children:[h.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Why Choose FineGuard?"}),h.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[h.jsxs(be,{className:"hover:shadow-xl transition-shadow",children:[h.jsxs(Ie,{children:[h.jsx(ya,{className:"h-12 w-12 text-blue-600 mb-4"}),h.jsx(je,{children:"AI-Powered Protection"})]}),h.jsx(we,{children:h.jsx("p",{className:"text-muted-foreground",children:"Ultra, your AI guardian, monitors deadlines 24/7 so you never miss a filing."})})]}),h.jsxs(be,{className:"hover:shadow-xl transition-shadow",children:[h.jsxs(Ie,{children:[h.jsx(eg,{className:"h-12 w-12 text-orange-600 mb-4"}),h.jsx(je,{children:"Smart Reminders"})]}),h.jsx(we,{children:h.jsx("p",{className:"text-muted-foreground",children:"Get timely notifications before deadlines with actionable compliance checklists."})})]}),h.jsxs(be,{className:"hover:shadow-xl transition-shadow",children:[h.jsxs(Ie,{children:[h.jsx(ag,{className:"h-12 w-12 text-green-600 mb-4"}),h.jsx(je,{children:"Peace of Mind"})]}),h.jsx(we,{children:h.jsx("p",{className:"text-muted-foreground",children:"Focus on growing your business while we handle compliance automatically."})})]})]})]}),h.jsx("section",{className:"container mx-auto px-4",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsx("h2",{className:"text-4xl font-bold text-center mb-4",children:"See FineGuard in Action"}),h.jsx("p",{className:"text-center text-muted-foreground mb-8 text-lg",children:"Watch how Ultra protects your business from compliance penalties"}),h.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl border-4 border-cyan-400/30",children:h.jsxs("video",{controls:!0,className:"w-full",poster:sb,children:[h.jsx("source",{src:"/demo-video.mov",type:"video/quicktime"}),h.jsx("source",{src:"/demo-video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})]})}),h.jsx("section",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-16 rounded-2xl mx-4",children:h.jsxs("div",{className:"container mx-auto px-4 text-center",children:[h.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to protect your business?"}),h.jsx("p",{className:"text-xl mb-8 opacity-90",children:"Join thousands of UK businesses using FineGuard"}),h.jsx(Ae,{size:"lg",className:"bg-white/90 backdrop-blur-md text-blue-900 hover:bg-white rounded-full px-10 py-6 text-lg font-semibold hover:shadow-2xl hover:scale-105 transition-all",onClick:()=>s("pricing"),children:"View Pricing Plans"})]})})]}),U=()=>h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:_N,alt:"Ultra Guardian",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-purple-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"The Story of Protection"}),h.jsx("p",{className:"text-xl opacity-90",children:"Giving peace of mind to UK founders"})]})]}),h.jsx("section",{className:"container mx-auto px-4 max-w-4xl",children:h.jsx(be,{children:h.jsxs(we,{className:"p-8 space-y-6",children:[h.jsx("h2",{className:"text-3xl font-bold",children:"Our Mission"}),h.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"FineGuard was born from a simple truth: small business owners shouldn't lose sleep over compliance deadlines. Every day, brilliant entrepreneurs face the burden of paperwork, filings, and regulations that distract from what they do best—building amazing businesses."}),h.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:"That's where Ultra comes in. Our AI guardian watches over your compliance obligations 24/7, ensuring you never miss a deadline, never face unnecessary penalties, and always stay protected. From Companies House filings to HMRC submissions, we've got you covered."}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mt-8",children:[h.jsxs("div",{className:"p-6 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"10,000+"}),h.jsx("p",{className:"text-muted-foreground",children:"Businesses Protected"})]}),h.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"£2.5M+"}),h.jsx("p",{className:"text-muted-foreground",children:"Penalties Prevented"})]})]})]})})})]}),ie=()=>h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:bN,alt:"Engine Room",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-teal-900/30 to-blue-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Inside the System"}),h.jsx("p",{className:"text-xl opacity-90",children:"How FineGuard keeps you compliant"})]})]}),h.jsx("section",{className:"container mx-auto px-4 max-w-5xl",children:h.jsx("div",{className:"space-y-8",children:[{step:1,title:"Connect Your Business",description:"Simply add your company number and we'll sync with Companies House and HMRC to identify all your obligations."},{step:2,title:"Ultra Monitors Everything",description:"Our AI guardian tracks every deadline, regulation change, and filing requirement specific to your business."},{step:3,title:"Smart Reminders",description:"Get timely notifications via email, SMS, and dashboard alerts with AI-generated compliance checklists."},{step:4,title:"Stay Protected",description:"Never miss a deadline again. Focus on growth while we handle the compliance burden automatically."}].map(P=>h.jsx(be,{className:"hover:shadow-lg transition-shadow",children:h.jsxs(we,{className:"p-8 flex gap-6 items-start",children:[h.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-blue-600 text-white rounded-full flex items-center justify-center text-2xl font-bold",children:P.step}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-bold mb-2",children:P.title}),h.jsx("p",{className:"text-lg text-muted-foreground",children:P.description})]})]})},P.step))})})]}),ne=()=>h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:wN,alt:"Features",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-indigo-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Never Miss a Deadline"}),h.jsx("p",{className:"text-xl opacity-90",children:"Powerful features for complete peace of mind"})]})]}),h.jsx("section",{className:"container mx-auto px-4",children:h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:ya,title:"AI Guardian",desc:"Ultra monitors your obligations 24/7"},{icon:eg,title:"Smart Alerts",desc:"Multi-channel notifications (email, SMS, dashboard)"},{icon:qh,title:"Deadline Tracking",desc:"Never miss Companies House or HMRC filings"},{icon:Ch,title:"AI Checklists",desc:"Step-by-step compliance guidance"},{icon:ag,title:"Risk Scoring",desc:"Real-time compliance health monitoring"},{icon:_t,title:"Auto-Sync",desc:"Automatic updates from official sources"}].map((P,ae)=>h.jsxs(be,{className:"hover:shadow-xl transition-all hover:-translate-y-1",children:[h.jsxs(Ie,{children:[h.jsx(P.icon,{className:"h-12 w-12 text-blue-600 mb-4"}),h.jsx(je,{children:P.title})]}),h.jsx(we,{children:h.jsx("p",{className:"text-muted-foreground",children:P.desc})})]},ae))})})]}),ze=()=>h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:xN,alt:"Pricing",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/30 to-blue-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Protection for Every Dream"}),h.jsx("p",{className:"text-xl opacity-90",children:"Transparent pricing, no hidden fees"})]})]}),h.jsx("section",{className:"container mx-auto px-4",children:h.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[{name:"Starter",price:"£1",period:"/month",features:["1 company","Basic deadline tracking","Email notifications","Compliance dashboard","Monthly reports"]},{name:"Pro",price:"£15",period:"/month",popular:!0,features:["Up to 5 companies","AI-powered insights","Email alerts","Priority support","AI compliance checklists","Risk scoring"]},{name:"Ultimate",price:"£99",period:"/month",features:["Unlimited companies","Dedicated account manager","White-label option","API access","Custom integrations","24/7 phone support"]}].map(P=>h.jsxs(be,{className:`hover:shadow-2xl transition-all ${P.popular?"border-blue-600 border-2 scale-105":""}`,children:[P.popular&&h.jsx("div",{className:"bg-blue-600 text-white text-center py-2 rounded-t-lg font-semibold",children:"Most Popular"}),h.jsxs(Ie,{className:"text-center",children:[h.jsx(je,{className:"text-2xl",children:P.name}),h.jsxs("div",{className:"mt-4",children:[h.jsx("span",{className:"text-5xl font-bold",children:P.price}),h.jsx("span",{className:"text-muted-foreground",children:P.period})]})]}),h.jsxs(we,{children:[h.jsx("ul",{className:"space-y-3",children:P.features.map((ae,Te)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx(_t,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),h.jsx("span",{children:ae})]},Te))}),h.jsx(Ae,{className:"w-full mt-6",variant:P.popular?"default":"outline",children:"Get Started"})]})]},P.name))})})]}),M=()=>h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:EN,alt:"Testimonials",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-orange-900/30 to-blue-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Voices of Relief"}),h.jsx("p",{className:"text-xl opacity-90",children:"Trusted by UK businesses nationwide"})]})]}),h.jsx("section",{className:"container mx-auto px-4",children:h.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[{name:"Sarah Mitchell",role:"Bakery Owner, London",quote:"FineGuard saved me from a £1,500 penalty. Ultra reminded me about my accounts filing just in time!"},{name:"James Chen",role:"Tech Startup Founder",quote:"As a first-time founder, compliance was overwhelming. FineGuard made it effortless."},{name:"Emma Thompson",role:"Design Studio Director",quote:"The AI checklists are brilliant. I know exactly what to do for each filing."},{name:"David Patel",role:"Coffee Shop Chain Owner",quote:"Managing 3 companies was a nightmare. Now Ultra handles everything automatically."}].map((P,ae)=>h.jsx(be,{className:"hover:shadow-xl transition-shadow",children:h.jsxs(we,{className:"p-8",children:[h.jsx("div",{className:"flex items-center gap-2 mb-4 text-yellow-500",children:[...Array(5)].map((Te,ve)=>h.jsx(nb,{className:"h-5 w-5 fill-current"},ve))}),h.jsxs("p",{className:"text-lg mb-4 italic",children:['"',P.quote,'"']}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:P.name}),h.jsx("p",{className:"text-sm text-muted-foreground",children:P.role})]})]})},ae))})})]}),re=()=>h.jsxs("div",{className:"space-y-12",children:[h.jsxs("section",{className:"relative min-h-[400px] flex items-center justify-center overflow-hidden rounded-2xl",children:[h.jsx("img",{src:TN,alt:"Contact",className:"absolute inset-0 w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-900/30 to-indigo-900/30"}),h.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[h.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-4",children:"Reach Out Anytime"}),h.jsx("p",{className:"text-xl opacity-90",children:"We're here to help"})]})]}),h.jsx("section",{className:"container mx-auto px-4 max-w-4xl",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsx(je,{children:"Get in Touch"}),h.jsx(In,{children:"Fill out the form and we'll respond within 24 hours"})]}),h.jsxs(we,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),h.jsx("input",{type:"text",className:"w-full p-2 border rounded-lg",placeholder:"Your name"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),h.jsx("input",{type:"email",className:"w-full p-2 border rounded-lg",placeholder:"your@email.com"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message"}),h.jsx("textarea",{className:"w-full p-2 border rounded-lg",rows:4,placeholder:"How can we help?"})]}),h.jsx(Ae,{className:"w-full",children:"Send Message"})]})]}),h.jsxs(be,{children:[h.jsx(Ie,{children:h.jsx(je,{children:"Contact Information"})}),h.jsxs(we,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(ig,{className:"h-5 w-5 text-blue-600 mt-1"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:"Phone"}),h.jsx("p",{className:"text-muted-foreground",children:"+44 20 1234 5678"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(sg,{className:"h-5 w-5 text-blue-600 mt-1"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:"Email"}),h.jsx("p",{className:"text-muted-foreground",children:"hello@fineguard.co.uk"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(tg,{className:"h-5 w-5 text-blue-600 mt-1"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:"Address"}),h.jsxs("p",{className:"text-muted-foreground",children:["123 Compliance Street",h.jsx("br",{}),"London, SW1A 1AA"]})]})]})]})]})]})})]}),he=()=>h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[h.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[h.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(je,{className:"text-sm font-medium",children:"Overdue Items"}),h.jsx(Tx,{className:"h-4 w-4 text-red-600"})]}),h.jsxs(we,{children:[h.jsx("div",{className:"text-3xl font-bold text-red-600",children:A.overdueCount}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires immediate attention"})]})]}),h.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[h.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(je,{className:"text-sm font-medium",children:"Total Companies"}),h.jsx(tg,{className:"h-4 w-4 text-blue-600"})]}),h.jsxs(we,{children:[h.jsx("div",{className:"text-3xl font-bold",children:A.totalCompanies}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active monitoring"})]})]}),h.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[h.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(je,{className:"text-sm font-medium",children:"Avg Compliance"}),h.jsx(ag,{className:"h-4 w-4 text-green-600"})]}),h.jsxs(we,{children:[h.jsxs("div",{className:"text-3xl font-bold",children:[A.avgScore,"%"]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overall health score"})]})]}),h.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[h.jsxs(Ie,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(je,{className:"text-sm font-medium",children:"Penalty Risk"}),h.jsx(eg,{className:"h-4 w-4 text-orange-600"})]}),h.jsxs(we,{children:[h.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["£",A.penaltyRisk.toLocaleString()]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Potential exposure"})]})]})]}),h.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(tg,{className:"h-5 w-5"}),"Companies"]}),h.jsx(In,{children:"Manage your registered companies"})]}),h.jsx(we,{className:"space-y-3",children:u.companies.map(P=>h.jsxs("div",{onClick:()=>y(P),className:"p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer bg-card",children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsx("h3",{className:"font-semibold text-lg",children:P.name}),h.jsx(en,{className:`${oe(P.riskLevel)} text-white`,children:P.riskLevel.toUpperCase()})]}),h.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[h.jsxs("div",{children:["#",P.companyNumber]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{children:["Compliance: ",P.complianceScore,"%"]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("i",{className:"fas fa-tasks text-xs"}),P.obligationCount," obligations"]})]}),P.overdueCount>0&&h.jsxs(en,{variant:"destructive",className:"mt-2",children:[P.overdueCount," overdue"]})]})]},P.id))})]}),h.jsxs(be,{children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center gap-2",children:[h.jsx(qh,{className:"h-5 w-5"}),"Obligations"]}),h.jsx(In,{children:"Track compliance deadlines"})]}),h.jsx(we,{className:"space-y-3",children:V.map(P=>{const ae=ce(P.dueDate);return h.jsxs("div",{onClick:()=>x(P),className:`p-4 border rounded-lg hover:shadow-md transition-all cursor-pointer ${P.status==="overdue"?"border-red-500 bg-red-50 dark:bg-red-950/20":P.status==="completed"?"border-green-500 bg-green-50 dark:bg-green-950/20":"bg-card"}`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold",children:P.title}),h.jsx("p",{className:"text-sm text-muted-foreground",children:P.companyName})]}),h.jsx(en,{className:`${C(P.status)} text-white text-xs`,children:P.status==="overdue"?`${P.daysOverdue}d overdue`:P.status.toUpperCase()})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("i",{className:"fas fa-calendar-alt text-xs"}),le(P.dueDate),P.status==="pending"&&` (in ${ae} days)`]}),P.penalty>0&&P.status!=="completed"&&h.jsxs("span",{className:"font-semibold text-red-600",children:[h.jsx("i",{className:"fas fa-bell text-xs"})," £",P.penalty.toLocaleString()]})]})]},P.id)})})]})]})]});return h.jsxs("div",{className:"min-h-screen bg-background",children:[h.jsxs("header",{className:"sticky top-0 z-50 w-full",children:[h.jsx("div",{className:"mx-4 mt-4 rounded-full border border-cyan-400/30 bg-background/40 backdrop-blur-xl shadow-lg shadow-cyan-500/20",children:h.jsxs("div",{className:"container flex h-20 items-center justify-between px-6",children:[h.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>s("home"),children:[h.jsxs("div",{className:"relative",children:[h.jsx(ya,{className:"h-10 w-10 text-cyan-400"}),h.jsx("div",{className:"absolute inset-0 blur-lg bg-cyan-400/30"})]}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"by UltraTech AI"})]})]}),h.jsx("nav",{className:"hidden md:flex items-center gap-3",children:R.map(P=>h.jsx("button",{onClick:()=>s(P.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${t===P.id?"bg-cyan-400/20 text-cyan-400 shadow-lg shadow-cyan-400/20 border border-cyan-400/30":"text-foreground/70 hover:text-foreground hover:bg-white/10"}`,children:P.label},P.id))}),h.jsxs("div",{className:"flex items-center gap-3",children:[$?h.jsx("div",{className:"hidden md:flex items-center gap-2",children:h.jsxs(Ae,{size:"sm",variant:"outline",className:"rounded-full border-cyan-400/30",onClick:()=>s("member"),children:[h.jsx(xp,{className:"h-4 w-4 mr-2"}),$.name]})}):h.jsxs(Ae,{size:"sm",className:"hidden md:flex bg-gradient-to-r from-cyan-400 to-blue-500 text-white border-0 rounded-full px-6 hover:shadow-lg hover:shadow-cyan-400/30 transition-all",onClick:()=>J(!0),children:[h.jsx(_t,{className:"h-4 w-4 mr-2"}),"Sign Up"]}),h.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>e(!r),className:"rounded-full hover:bg-white/10",children:r?h.jsx(lN,{className:"h-5 w-5"}):h.jsx(W2,{className:"h-5 w-5"})}),h.jsx(Ae,{variant:"ghost",size:"icon",className:"md:hidden rounded-full hover:bg-white/10",onClick:()=>l(!a),children:a?h.jsx(Sx,{className:"h-5 w-5"}):h.jsx(K2,{className:"h-5 w-5"})})]})]})}),a&&h.jsx("div",{className:"md:hidden border-t bg-background",children:h.jsx("nav",{className:"container px-4 py-4 space-y-2",children:R.map(P=>h.jsxs("button",{onClick:()=>{s(P.id),l(!1)},className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${t===P.id?"bg-blue-100 dark:bg-blue-950 text-blue-600":"hover:bg-muted"}`,children:[h.jsx(P.icon,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm font-medium",children:P.label})]},P.id))})})]}),h.jsx("main",{className:"container mx-auto p-4 md:p-6",children:We()}),g&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>y(null),children:h.jsxs(be,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[h.jsx(Ie,{children:h.jsxs(je,{className:"flex items-center justify-between",children:[h.jsx("span",{children:g.name}),h.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>y(null),children:h.jsx("i",{className:"fas fa-times"})})]})}),h.jsxs(we,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Company Number"}),h.jsx("p",{className:"font-semibold",children:g.companyNumber})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Risk Level"}),h.jsx(en,{className:`${oe(g.riskLevel)} text-white`,children:g.riskLevel.toUpperCase()})]}),h.jsxs("div",{className:"col-span-2",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Address"}),h.jsx("p",{children:g.address})]})]}),(g.riskLevel==="critical"||g.riskLevel==="high")&&h.jsxs(Ae,{className:"w-full",onClick:()=>D(g),children:[h.jsx(Ch,{className:"mr-2 h-4 w-4"}),"AI Mitigation Plan"]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Obligations"}),h.jsx("div",{className:"space-y-2",children:u.obligations.filter(P=>P.companyId===g.id).map(P=>h.jsxs("div",{className:"p-3 border rounded-lg text-sm",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"font-medium",children:P.title}),h.jsx(en,{className:`${C(P.status)} text-white text-xs`,children:P.status})]}),h.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:["Due: ",le(P.dueDate)]})]},P.id))})]})]})]})}),v&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>x(null),children:h.jsxs(be,{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[h.jsxs(Ie,{children:[h.jsxs(je,{className:"flex items-center justify-between",children:[h.jsx("span",{children:v.title}),h.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>x(null),children:h.jsx("i",{className:"fas fa-times"})})]}),h.jsx(In,{children:v.companyName})]}),h.jsxs(we,{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-lg",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),h.jsx(en,{className:`${C(v.status)} text-white mt-1`,children:v.status.toUpperCase()})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),h.jsx("p",{className:"font-semibold",children:le(v.dueDate)})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Potential Penalty"}),h.jsxs("p",{className:`font-semibold ${v.penalty>0&&v.status!=="completed"?"text-red-600":"text-green-600"}`,children:["£",v.penalty.toLocaleString()]})]}),h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Days ",v.status==="overdue"?"Overdue":"Until Due"]}),h.jsx("p",{className:"font-semibold",children:v.status==="overdue"?v.daysOverdue:ce(v.dueDate)})]})]}),h.jsxs(Ae,{className:"w-full",onClick:()=>O(v),children:[h.jsx(Ch,{className:"mr-2 h-4 w-4"}),"AI Compliance Checklist"]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:v.description})]}),h.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[h.jsx(Ae,{variant:"outline",onClick:()=>x(null),className:"flex-1",children:"Close"}),v.status!=="completed"&&h.jsxs(Ae,{onClick:()=>N(v.id),className:"flex-1 bg-green-600 hover:bg-green-700",children:[h.jsx(_t,{className:"mr-2 h-4 w-4"}),"Mark Complete"]})]})]})]})}),E&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>k(!1),children:h.jsxs(be,{className:"max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[h.jsx(Ie,{children:h.jsxs(je,{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(Ch,{className:"h-5 w-5 text-purple-600"}),z.title]}),h.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>k(!1),children:h.jsx("i",{className:"fas fa-times"})})]})}),h.jsx(we,{children:z.loading?h.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),h.jsx("p",{className:"text-muted-foreground",children:"Analyzing compliance data..."})]}):h.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:z.content.split(`
`).map((P,ae)=>P.startsWith("###")?h.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2",children:P.replace("###","").trim()},ae):P.startsWith("**")?h.jsx("p",{className:"font-semibold my-2",children:P.replace(/\*\*/g,"")},ae):P.startsWith("-")?h.jsx("li",{className:"ml-4",children:P.replace("-","").trim()},ae):P.match(/^\d+\./)?h.jsx("p",{className:"my-1",children:P},ae):P.trim()?h.jsx("p",{className:"my-2",children:P},ae):null)})})]})}),h.jsx("footer",{className:"mt-16 mb-4",children:h.jsx("div",{className:"mx-4 rounded-3xl border border-cyan-400/30 bg-background/40 backdrop-blur-xl shadow-lg shadow-cyan-500/20 p-8",children:h.jsxs("div",{className:"container mx-auto",children:[h.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx(ya,{className:"h-12 w-12 text-cyan-400"}),h.jsx("div",{className:"absolute inset-0 blur-lg bg-cyan-400/30"})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"FineGuard"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"by UltraTech AI"})]})]}),h.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm",children:[h.jsx("button",{onClick:()=>s("home"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Home"}),h.jsx("button",{onClick:()=>s("about"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"About"}),h.jsx("button",{onClick:()=>s("pricing"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Pricing"}),h.jsx("button",{onClick:()=>s("contact"),className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:"Contact"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:h.jsx(sg,{className:"h-5 w-5"})}),h.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:h.jsx(ig,{className:"h-5 w-5"})}),h.jsx("a",{href:"#",className:"text-foreground/70 hover:text-cyan-400 transition-colors",children:h.jsx(Z0,{className:"h-5 w-5"})})]})]}),h.jsx("div",{className:"mt-6 pt-6 border-t border-cyan-400/20 text-center",children:h.jsx("p",{className:"text-sm text-muted-foreground",children:"© 2024 UltraTech AI. All rights reserved."})})]})})}),h.jsx(nM,{isOpen:j,onClose:()=>J(!1),onAuthSuccess:P=>{W(P),s("member")}})]})}JS.createRoot(document.getElementById("root")).render(h.jsx(de.StrictMode,{children:h.jsx(oM,{})}));
